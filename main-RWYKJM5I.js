import{A as xn,B as gN,C as mN,D as zr,E as xa,F as Qm,G as wf,H as lE,I as _N,J as yN,K as _e,L as ar,M as Vn,N as cE,O as vN,P as bf,Q as it,R as Dr,S as Ym,T as uE,U as Gr,V as Ra,W as Jl,X as Jm,Y as wN,Z as ws,_ as Jn,a as q,b as ke,c as wz,d as bz,e as sE,f as L,g as aN,h as zm,i as lN,j as cN,k as K,l as xu,m as Gm,n as uN,o as dN,p as Yn,q as Wm,r as vf,s as oE,t as hN,u as Ks,v as aE,w as qm,x as fN,y as pN,z as Km}from"./chunk-5K54FR2E.js";var WL=wz((Ep,GD)=>{"use strict";(function(n,e){typeof Ep=="object"&&typeof GD=="object"?GD.exports=e():typeof define=="function"&&define.amd?define([],e):typeof Ep=="object"?Ep.AOS=e():n.AOS=e()})(Ep,function(){return function(n){function e(i){if(t[i])return t[i].exports;var r=t[i]={exports:{},id:i,loaded:!1};return n[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var t={};return e.m=n,e.c=t,e.p="dist/",e(0)}([function(n,e,t){"use strict";function i(I){return I&&I.__esModule?I:{default:I}}var r=Object.assign||function(I){for(var T=1;T<arguments.length;T++){var le=arguments[T];for(var ye in le)Object.prototype.hasOwnProperty.call(le,ye)&&(I[ye]=le[ye])}return I},s=t(1),o=(i(s),t(6)),a=i(o),l=t(7),c=i(l),d=t(8),h=i(d),f=t(9),p=i(f),y=t(10),_=i(y),w=t(11),A=i(w),x=t(14),M=i(x),R=[],P=!1,N={offset:120,delay:0,easing:"ease",duration:400,disable:!1,once:!1,startEvent:"DOMContentLoaded",throttleDelay:99,debounceDelay:50,disableMutationObserver:!1},C=function(){var I=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(I&&(P=!0),P)return R=(0,A.default)(R,N),(0,_.default)(R,N.once),R},b=function(){R=(0,M.default)(),C()},v=function(){R.forEach(function(I,T){I.node.removeAttribute("data-aos"),I.node.removeAttribute("data-aos-easing"),I.node.removeAttribute("data-aos-duration"),I.node.removeAttribute("data-aos-delay")})},E=function(I){return I===!0||I==="mobile"&&p.default.mobile()||I==="phone"&&p.default.phone()||I==="tablet"&&p.default.tablet()||typeof I=="function"&&I()===!0},S=function(I){N=r(N,I),R=(0,M.default)();var T=document.all&&!window.atob;return E(N.disable)||T?v():(N.disableMutationObserver||h.default.isSupported()||(console.info(`
      aos: MutationObserver is not supported on this browser,
      code mutations observing has been disabled.
      You may have to call "refreshHard()" by yourself.
    `),N.disableMutationObserver=!0),document.querySelector("body").setAttribute("data-aos-easing",N.easing),document.querySelector("body").setAttribute("data-aos-duration",N.duration),document.querySelector("body").setAttribute("data-aos-delay",N.delay),N.startEvent==="DOMContentLoaded"&&["complete","interactive"].indexOf(document.readyState)>-1?C(!0):N.startEvent==="load"?window.addEventListener(N.startEvent,function(){C(!0)}):document.addEventListener(N.startEvent,function(){C(!0)}),window.addEventListener("resize",(0,c.default)(C,N.debounceDelay,!0)),window.addEventListener("orientationchange",(0,c.default)(C,N.debounceDelay,!0)),window.addEventListener("scroll",(0,a.default)(function(){(0,_.default)(R,N.once)},N.throttleDelay)),N.disableMutationObserver||h.default.ready("[data-aos]",b),R)};n.exports={init:S,refresh:C,refreshHard:b}},function(n,e){},,,,,function(n,e){(function(t){"use strict";function i(E,S,I){function T(Te){var me=et,dt=He;return et=He=void 0,Vt=Te,Ve=E.apply(dt,me)}function le(Te){return Vt=Te,tt=setTimeout(ae,S),Rt?T(Te):Ve}function ye(Te){var me=Te-Ue,dt=Te-Vt,vn=S-me;return Zt?b(vn,ot-dt):vn}function be(Te){var me=Te-Ue,dt=Te-Vt;return Ue===void 0||me>=S||me<0||Zt&&dt>=ot}function ae(){var Te=v();return be(Te)?Re(Te):void(tt=setTimeout(ae,ye(Te)))}function Re(Te){return tt=void 0,Ie&&et?T(Te):(et=He=void 0,Ve)}function mt(){tt!==void 0&&clearTimeout(tt),Vt=0,et=Ue=He=tt=void 0}function O(){return tt===void 0?Ve:Re(v())}function Ke(){var Te=v(),me=be(Te);if(et=arguments,He=this,Ue=Te,me){if(tt===void 0)return le(Ue);if(Zt)return tt=setTimeout(ae,S),T(Ue)}return tt===void 0&&(tt=setTimeout(ae,S)),Ve}var et,He,ot,Ve,tt,Ue,Vt=0,Rt=!1,Zt=!1,Ie=!0;if(typeof E!="function")throw new TypeError(d);return S=l(S)||0,s(I)&&(Rt=!!I.leading,Zt="maxWait"in I,ot=Zt?C(l(I.maxWait)||0,S):ot,Ie="trailing"in I?!!I.trailing:Ie),Ke.cancel=mt,Ke.flush=O,Ke}function r(E,S,I){var T=!0,le=!0;if(typeof E!="function")throw new TypeError(d);return s(I)&&(T="leading"in I?!!I.leading:T,le="trailing"in I?!!I.trailing:le),i(E,S,{leading:T,maxWait:S,trailing:le})}function s(E){var S=typeof E>"u"?"undefined":c(E);return!!E&&(S=="object"||S=="function")}function o(E){return!!E&&(typeof E>"u"?"undefined":c(E))=="object"}function a(E){return(typeof E>"u"?"undefined":c(E))=="symbol"||o(E)&&N.call(E)==f}function l(E){if(typeof E=="number")return E;if(a(E))return h;if(s(E)){var S=typeof E.valueOf=="function"?E.valueOf():E;E=s(S)?S+"":S}if(typeof E!="string")return E===0?E:+E;E=E.replace(p,"");var I=_.test(E);return I||w.test(E)?A(E.slice(2),I?2:8):y.test(E)?h:+E}var c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},d="Expected a function",h=NaN,f="[object Symbol]",p=/^\s+|\s+$/g,y=/^[-+]0x[0-9a-f]+$/i,_=/^0b[01]+$/i,w=/^0o[0-7]+$/i,A=parseInt,x=(typeof t>"u"?"undefined":c(t))=="object"&&t&&t.Object===Object&&t,M=(typeof self>"u"?"undefined":c(self))=="object"&&self&&self.Object===Object&&self,R=x||M||Function("return this")(),P=Object.prototype,N=P.toString,C=Math.max,b=Math.min,v=function(){return R.Date.now()};n.exports=r}).call(e,function(){return this}())},function(n,e){(function(t){"use strict";function i(v,E,S){function I(Ie){var Te=Ke,me=et;return Ke=et=void 0,Ue=Ie,ot=v.apply(me,Te)}function T(Ie){return Ue=Ie,Ve=setTimeout(be,E),Vt?I(Ie):ot}function le(Ie){var Te=Ie-tt,me=Ie-Ue,dt=E-Te;return Rt?C(dt,He-me):dt}function ye(Ie){var Te=Ie-tt,me=Ie-Ue;return tt===void 0||Te>=E||Te<0||Rt&&me>=He}function be(){var Ie=b();return ye(Ie)?ae(Ie):void(Ve=setTimeout(be,le(Ie)))}function ae(Ie){return Ve=void 0,Zt&&Ke?I(Ie):(Ke=et=void 0,ot)}function Re(){Ve!==void 0&&clearTimeout(Ve),Ue=0,Ke=tt=et=Ve=void 0}function mt(){return Ve===void 0?ot:ae(b())}function O(){var Ie=b(),Te=ye(Ie);if(Ke=arguments,et=this,tt=Ie,Te){if(Ve===void 0)return T(tt);if(Rt)return Ve=setTimeout(be,E),I(tt)}return Ve===void 0&&(Ve=setTimeout(be,E)),ot}var Ke,et,He,ot,Ve,tt,Ue=0,Vt=!1,Rt=!1,Zt=!0;if(typeof v!="function")throw new TypeError(c);return E=a(E)||0,r(S)&&(Vt=!!S.leading,Rt="maxWait"in S,He=Rt?N(a(S.maxWait)||0,E):He,Zt="trailing"in S?!!S.trailing:Zt),O.cancel=Re,O.flush=mt,O}function r(v){var E=typeof v>"u"?"undefined":l(v);return!!v&&(E=="object"||E=="function")}function s(v){return!!v&&(typeof v>"u"?"undefined":l(v))=="object"}function o(v){return(typeof v>"u"?"undefined":l(v))=="symbol"||s(v)&&P.call(v)==h}function a(v){if(typeof v=="number")return v;if(o(v))return d;if(r(v)){var E=typeof v.valueOf=="function"?v.valueOf():v;v=r(E)?E+"":E}if(typeof v!="string")return v===0?v:+v;v=v.replace(f,"");var S=y.test(v);return S||_.test(v)?w(v.slice(2),S?2:8):p.test(v)?d:+v}var l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},c="Expected a function",d=NaN,h="[object Symbol]",f=/^\s+|\s+$/g,p=/^[-+]0x[0-9a-f]+$/i,y=/^0b[01]+$/i,_=/^0o[0-7]+$/i,w=parseInt,A=(typeof t>"u"?"undefined":l(t))=="object"&&t&&t.Object===Object&&t,x=(typeof self>"u"?"undefined":l(self))=="object"&&self&&self.Object===Object&&self,M=A||x||Function("return this")(),R=Object.prototype,P=R.toString,N=Math.max,C=Math.min,b=function(){return M.Date.now()};n.exports=i}).call(e,function(){return this}())},function(n,e){"use strict";function t(l){var c=void 0,d=void 0,h=void 0;for(c=0;c<l.length;c+=1)if(d=l[c],d.dataset&&d.dataset.aos||(h=d.children&&t(d.children)))return!0;return!1}function i(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function r(){return!!i()}function s(l,c){var d=window.document,h=i(),f=new h(o);a=c,f.observe(d.documentElement,{childList:!0,subtree:!0,removedNodes:!0})}function o(l){l&&l.forEach(function(c){var d=Array.prototype.slice.call(c.addedNodes),h=Array.prototype.slice.call(c.removedNodes),f=d.concat(h);if(t(f))return a()})}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){};e.default={isSupported:r,ready:s}},function(n,e){"use strict";function t(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")}function i(){return navigator.userAgent||navigator.vendor||window.opera||""}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function d(h,f){for(var p=0;p<f.length;p++){var y=f[p];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}return function(h,f,p){return f&&d(h.prototype,f),p&&d(h,p),h}}(),s=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,o=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,a=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,l=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,c=function(){function d(){t(this,d)}return r(d,[{key:"phone",value:function(){var h=i();return!(!s.test(h)&&!o.test(h.substr(0,4)))}},{key:"mobile",value:function(){var h=i();return!(!a.test(h)&&!l.test(h.substr(0,4)))}},{key:"tablet",value:function(){return this.mobile()&&!this.phone()}}]),d}();e.default=new c},function(n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=function(r,s,o){var a=r.node.getAttribute("data-aos-once");s>r.position?r.node.classList.add("aos-animate"):typeof a<"u"&&(a==="false"||!o&&a!=="true")&&r.node.classList.remove("aos-animate")},i=function(r,s){var o=window.pageYOffset,a=window.innerHeight;r.forEach(function(l,c){t(l,a+o,s)})};e.default=i},function(n,e,t){"use strict";function i(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(e,"__esModule",{value:!0});var r=t(12),s=i(r),o=function(a,l){return a.forEach(function(c,d){c.node.classList.add("aos-init"),c.position=(0,s.default)(c.node,l.offset)}),a};e.default=o},function(n,e,t){"use strict";function i(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(e,"__esModule",{value:!0});var r=t(13),s=i(r),o=function(a,l){var c=0,d=0,h=window.innerHeight,f={offset:a.getAttribute("data-aos-offset"),anchor:a.getAttribute("data-aos-anchor"),anchorPlacement:a.getAttribute("data-aos-anchor-placement")};switch(f.offset&&!isNaN(f.offset)&&(d=parseInt(f.offset)),f.anchor&&document.querySelectorAll(f.anchor)&&(a=document.querySelectorAll(f.anchor)[0]),c=(0,s.default)(a).top,f.anchorPlacement){case"top-bottom":break;case"center-bottom":c+=a.offsetHeight/2;break;case"bottom-bottom":c+=a.offsetHeight;break;case"top-center":c+=h/2;break;case"bottom-center":c+=h/2+a.offsetHeight;break;case"center-center":c+=h/2+a.offsetHeight/2;break;case"top-top":c+=h;break;case"bottom-top":c+=a.offsetHeight+h;break;case"center-top":c+=a.offsetHeight/2+h}return f.anchorPlacement||f.offset||isNaN(l)||(d=l),c+d};e.default=o},function(n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=function(i){for(var r=0,s=0;i&&!isNaN(i.offsetLeft)&&!isNaN(i.offsetTop);)r+=i.offsetLeft-(i.tagName!="BODY"?i.scrollLeft:0),s+=i.offsetTop-(i.tagName!="BODY"?i.scrollTop:0),i=i.offsetParent;return{top:s,left:r}};e.default=t},function(n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=function(i){return i=i||document.querySelectorAll("[data-aos]"),Array.prototype.map.call(i,function(r){return{node:r}})};e.default=t}])})});function bN(n,e){return Object.is(n,e)}var Bn=null,Zm=!1,Xm=1,No=Symbol("SIGNAL");function _t(n){let e=Bn;return Bn=n,e}function EN(){return Bn}var Cf={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function fE(n){if(Zm)throw new Error("");if(Bn===null)return;Bn.consumerOnSignalRead(n);let e=Bn.nextProducerIndex++;if(i_(Bn),e<Bn.producerNode.length&&Bn.producerNode[e]!==n&&Ef(Bn)){let t=Bn.producerNode[e];n_(t,Bn.producerIndexOfThis[e])}Bn.producerNode[e]!==n&&(Bn.producerNode[e]=n,Bn.producerIndexOfThis[e]=Ef(Bn)?TN(n,Bn,e):0),Bn.producerLastReadVersion[e]=n.version}function Ez(){Xm++}function CN(n){if(!(Ef(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Xm)){if(!n.producerMustRecompute(n)&&!gE(n)){n.dirty=!1,n.lastCleanEpoch=Xm;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Xm}}function DN(n){if(n.liveConsumerNode===void 0)return;let e=Zm;Zm=!0;try{for(let t of n.liveConsumerNode)t.dirty||Cz(t)}finally{Zm=e}}function IN(){return Bn?.consumerAllowSignalWrites!==!1}function Cz(n){n.dirty=!0,DN(n),n.consumerMarkedDirty?.(n)}function t_(n){return n&&(n.nextProducerIndex=0),_t(n)}function pE(n,e){if(_t(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Ef(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)n_(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function gE(n){i_(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(CN(t),i!==t.version))return!0}return!1}function mE(n){if(i_(n),Ef(n))for(let e=0;e<n.producerNode.length;e++)n_(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function TN(n,e,t){if(SN(n),n.liveConsumerNode.length===0&&AN(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=TN(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function n_(n,e){if(SN(n),n.liveConsumerNode.length===1&&AN(n))for(let i=0;i<n.producerNode.length;i++)n_(n.producerNode[i],n.producerIndexOfThis[i]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];i_(r),r.producerIndexOfThis[i]=e}}function Ef(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function i_(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function SN(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function AN(n){return n.producerNode!==void 0}function MN(n){let e=Object.create(Dz);e.computation=n;let t=()=>{if(CN(e),fE(e),e.value===e_)throw e.error;return e.value};return t[No]=e,t}var dE=Symbol("UNSET"),hE=Symbol("COMPUTING"),e_=Symbol("ERRORED"),Dz=ke(q({},Cf),{value:dE,dirty:!0,error:null,equal:bN,producerMustRecompute(n){return n.value===dE||n.value===hE},producerRecomputeValue(n){if(n.value===hE)throw new Error("Detected cycle in computations.");let e=n.value;n.value=hE;let t=t_(n),i;try{i=n.computation()}catch(r){i=e_,n.error=r}finally{pE(n,t)}if(e!==dE&&e!==e_&&i!==e_&&n.equal(e,i)){n.value=e;return}n.value=i,n.version++}});function Iz(){throw new Error}var xN=Iz;function RN(){xN()}function NN(n){xN=n}var Tz=null;function ON(n){let e=Object.create(kN);e.value=n;let t=()=>(fE(e),e.value);return t[No]=e,t}function _E(n,e){IN()||RN(),n.equal(n.value,e)||(n.value=e,Sz(n))}function PN(n,e){IN()||RN(),_E(n,e(n.value))}var kN=ke(q({},Cf),{equal:bN,value:void 0});function Sz(n){n.version++,Ez(),DN(n),Tz?.()}function pe(n){return typeof n=="function"}function Ru(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var r_=Ru(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Zl(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var hn=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(pe(i))try{i()}catch(s){e=s instanceof r_?s.errors:[s]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let s of r)try{FN(s)}catch(o){e=e??[],o instanceof r_?e=[...e,...o.errors]:e.push(o)}}if(e)throw new r_(e)}}add(e){var t;if(e&&e!==this)if(this.closed)FN(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Zl(t,e)}remove(e){let{_finalizers:t}=this;t&&Zl(t,e),e instanceof n&&e._removeParent(this)}};hn.EMPTY=(()=>{let n=new hn;return n.closed=!0,n})();var yE=hn.EMPTY;function s_(n){return n instanceof hn||n&&"closed"in n&&pe(n.remove)&&pe(n.add)&&pe(n.unsubscribe)}function FN(n){pe(n)?n():n.unsubscribe()}var bs={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Nu={setTimeout(n,e,...t){let{delegate:i}=Nu;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Nu;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function o_(n){Nu.setTimeout(()=>{let{onUnhandledError:e}=bs;if(e)e(n);else throw n})}function Xl(){}var LN=vE("C",void 0,void 0);function VN(n){return vE("E",void 0,n)}function BN(n){return vE("N",n,void 0)}function vE(n,e,t){return{kind:n,value:e,error:t}}var ec=null;function Ou(n){if(bs.useDeprecatedSynchronousErrorHandling){let e=!ec;if(e&&(ec={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=ec;if(ec=null,t)throw i}}else n()}function jN(n){bs.useDeprecatedSynchronousErrorHandling&&ec&&(ec.errorThrown=!0,ec.error=n)}var tc=class extends hn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,s_(e)&&e.add(this)):this.destination=xz}static create(e,t,i){return new Oo(e,t,i)}next(e){this.isStopped?bE(BN(e),this):this._next(e)}error(e){this.isStopped?bE(VN(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?bE(LN,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Az=Function.prototype.bind;function wE(n,e){return Az.call(n,e)}var EE=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){a_(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){a_(i)}else a_(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){a_(t)}}},Oo=class extends tc{constructor(e,t,i){super();let r;if(pe(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&bs.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&wE(e.next,s),error:e.error&&wE(e.error,s),complete:e.complete&&wE(e.complete,s)}):r=e}this.destination=new EE(r)}};function a_(n){bs.useDeprecatedSynchronousErrorHandling?jN(n):o_(n)}function Mz(n){throw n}function bE(n,e){let{onStoppedNotification:t}=bs;t&&Nu.setTimeout(()=>t(n,e))}var xz={closed:!0,next:Xl,error:Mz,complete:Xl};var Pu=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ui(n){return n}function CE(...n){return DE(n)}function DE(n){return n.length===0?ui:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var ge=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let s=Nz(t)?t:new Oo(t,i,r);return Ou(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=UN(i),new i((r,s)=>{let o=new Oo({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[Pu](){return this}pipe(...t){return DE(t)(this)}toPromise(t){return t=UN(t),new t((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function UN(n){var e;return(e=n??bs.Promise)!==null&&e!==void 0?e:Promise}function Rz(n){return n&&pe(n.next)&&pe(n.error)&&pe(n.complete)}function Nz(n){return n&&n instanceof tc||Rz(n)&&s_(n)}function IE(n){return pe(n?.lift)}function Se(n){return e=>{if(IE(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function we(n,e,t,i,r){return new TE(n,e,t,i,r)}var TE=class extends tc{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ku(){return Se((n,e)=>{let t=null;n._refCount++;let i=we(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}var Fu=class extends ge{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,IE(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new hn;let t=this.getSubject();e.add(this.source.subscribe(we(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=hn.EMPTY)}return e}refCount(){return ku()(this)}};var $N=Ru(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var yt=(()=>{class n extends ge{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new l_(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new $N}next(t){Ou(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){Ou(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Ou(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:s}=this;return i||r?yE:(this.currentObservers=null,s.push(t),new hn(()=>{this.currentObservers=null,Zl(s,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){let t=new ge;return t.source=this,t}}return n.create=(e,t)=>new l_(e,t),n})(),l_=class extends yt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:yE}};var Zn=class extends yt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var Df={now(){return(Df.delegate||Date).now()},delegate:void 0};var c_=class extends yt{constructor(e=1/0,t=1/0,i=Df){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;t||(i.push(e),!r&&i.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!e.closed;o+=i?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){let o=t.now(),a=0;for(let l=1;l<i.length&&i[l]<=o;l+=2)a=l;a&&i.splice(0,a+1)}}};var u_=class extends hn{constructor(e,t){super()}schedule(e,t=0){return this}};var If={setInterval(n,e,...t){let{delegate:i}=If;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=If;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Lu=class extends u_{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;let r=this.id,s=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,i=0){return If.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return t;t!=null&&If.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,t);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i=!1,r;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Zl(i,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Vu=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}};Vu.now=Df.now;var Bu=class extends Vu{constructor(e,t=Vu.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}};var Na=new Bu(Lu),SE=Na;var d_=class extends Lu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,t,i):(e.flush(this),0)}};var h_=class extends Bu{};var AE=new h_(d_);var jn=new ge(n=>n.complete());function f_(n){return n&&pe(n.schedule)}function ME(n){return n[n.length-1]}function Oa(n){return pe(ME(n))?n.pop():void 0}function Qs(n){return f_(ME(n))?n.pop():void 0}function HN(n,e){return typeof ME(n)=="number"?n.pop():e}var ju=n=>n&&typeof n.length=="number"&&typeof n!="function";function p_(n){return pe(n?.then)}function g_(n){return pe(n[Pu])}function m_(n){return Symbol.asyncIterator&&pe(n?.[Symbol.asyncIterator])}function __(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Oz(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var y_=Oz();function v_(n){return pe(n?.[y_])}function w_(n){return lN(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield zm(t.read());if(r)return yield zm(void 0);yield yield zm(i)}}finally{t.releaseLock()}})}function b_(n){return pe(n?.getReader)}function ft(n){if(n instanceof ge)return n;if(n!=null){if(g_(n))return Pz(n);if(ju(n))return kz(n);if(p_(n))return Fz(n);if(m_(n))return zN(n);if(v_(n))return Lz(n);if(b_(n))return Vz(n)}throw __(n)}function Pz(n){return new ge(e=>{let t=n[Pu]();if(pe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function kz(n){return new ge(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Fz(n){return new ge(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,o_)})}function Lz(n){return new ge(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function zN(n){return new ge(e=>{Bz(n,e).catch(t=>e.error(t))})}function Vz(n){return zN(w_(n))}function Bz(n,e){var t,i,r,s;return aN(this,void 0,void 0,function*(){try{for(t=cN(n);i=yield t.next(),!i.done;){let o=i.value;if(e.next(o),e.closed)return}}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})}function lr(n,e,t,i=0,r=!1){let s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function Wr(n,e=0){return Se((t,i)=>{t.subscribe(we(i,r=>lr(i,n,()=>i.next(r),e),()=>lr(i,n,()=>i.complete(),e),r=>lr(i,n,()=>i.error(r),e)))})}function Es(n,e=0){return Se((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function GN(n,e){return ft(n).pipe(Es(e),Wr(e))}function WN(n,e){return ft(n).pipe(Es(e),Wr(e))}function qN(n,e){return new ge(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function KN(n,e){return new ge(t=>{let i;return lr(t,e,()=>{i=n[y_](),lr(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){t.error(o);return}s?t.complete():t.next(r)},0,!0)}),()=>pe(i?.return)&&i.return()})}function E_(n,e){if(!n)throw new Error("Iterable cannot be null");return new ge(t=>{lr(t,e,()=>{let i=n[Symbol.asyncIterator]();lr(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function QN(n,e){return E_(w_(n),e)}function YN(n,e){if(n!=null){if(g_(n))return GN(n,e);if(ju(n))return qN(n,e);if(p_(n))return WN(n,e);if(m_(n))return E_(n,e);if(v_(n))return KN(n,e);if(b_(n))return QN(n,e)}throw __(n)}function at(n,e){return e?YN(n,e):ft(n)}function se(...n){let e=Qs(n);return at(n,e)}function Uu(n,e){let t=pe(n)?n:()=>n,i=r=>r.error(t());return new ge(e?r=>e.schedule(i,0,r):i)}function xE(n){return!!n&&(n instanceof ge||pe(n.lift)&&pe(n.subscribe))}var Po=Ru(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function JN(n){return n instanceof Date&&!isNaN(n)}function ne(n,e){return Se((t,i)=>{let r=0;t.subscribe(we(i,s=>{i.next(n.call(e,s,r++))}))})}var{isArray:jz}=Array;function Uz(n,e){return jz(e)?n(...e):n(e)}function $u(n){return ne(e=>Uz(n,e))}var{isArray:$z}=Array,{getPrototypeOf:Hz,prototype:zz,keys:Gz}=Object;function C_(n){if(n.length===1){let e=n[0];if($z(e))return{args:e,keys:null};if(Wz(e)){let t=Gz(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function Wz(n){return n&&typeof n=="object"&&Hz(n)===zz}function D_(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function Hu(...n){let e=Qs(n),t=Oa(n),{args:i,keys:r}=C_(n);if(i.length===0)return at([],e);let s=new ge(qz(i,e,r?o=>D_(r,o):ui));return t?s.pipe($u(t)):s}function qz(n,e,t=ui){return i=>{ZN(e,()=>{let{length:r}=n,s=new Array(r),o=r,a=r;for(let l=0;l<r;l++)ZN(e,()=>{let c=at(n[l],e),d=!1;c.subscribe(we(i,h=>{s[l]=h,d||(d=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}function ZN(n,e,t){n?lr(t,n,e):e()}function XN(n,e,t,i,r,s,o,a){let l=[],c=0,d=0,h=!1,f=()=>{h&&!l.length&&!c&&e.complete()},p=_=>c<i?y(_):l.push(_),y=_=>{s&&e.next(_),c++;let w=!1;ft(t(_,d++)).subscribe(we(e,A=>{r?.(A),s?p(A):e.next(A)},()=>{w=!0},void 0,()=>{if(w)try{for(c--;l.length&&c<i;){let A=l.shift();o?lr(e,o,()=>y(A)):y(A)}f()}catch(A){e.error(A)}}))};return n.subscribe(we(e,p,()=>{h=!0,f()})),()=>{a?.()}}function Xt(n,e,t=1/0){return pe(e)?Xt((i,r)=>ne((s,o)=>e(i,s,r,o))(ft(n(i,r))),t):(typeof e=="number"&&(t=e),Se((i,r)=>XN(i,r,n,t)))}function Pa(n=1/0){return Xt(ui,n)}function eO(){return Pa(1)}function ka(...n){return eO()(at(n,Qs(n)))}function I_(n){return new ge(e=>{ft(n()).subscribe(e)})}function RE(...n){let e=Oa(n),{args:t,keys:i}=C_(n),r=new ge(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),l=o,c=o;for(let d=0;d<o;d++){let h=!1;ft(t[d]).subscribe(we(s,f=>{h||(h=!0,c--),a[d]=f},()=>l--,void 0,()=>{(!l||!h)&&(c||s.next(i?D_(i,a):a),s.complete())}))}});return e?r.pipe($u(e)):r}var Kz=["addListener","removeListener"],Qz=["addEventListener","removeEventListener"],Yz=["on","off"];function qr(n,e,t,i){if(pe(t)&&(i=t,t=void 0),i)return qr(n,e,t).pipe($u(i));let[r,s]=Xz(n)?Qz.map(o=>a=>n[o](e,a,t)):Jz(n)?Kz.map(tO(n,e)):Zz(n)?Yz.map(tO(n,e)):[];if(!r&&ju(n))return Xt(o=>qr(o,e,t))(ft(n));if(!r)throw new TypeError("Invalid event target");return new ge(o=>{let a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function tO(n,e){return t=>i=>n[t](e,i)}function Jz(n){return pe(n.addListener)&&pe(n.removeListener)}function Zz(n){return pe(n.on)&&pe(n.off)}function Xz(n){return pe(n.addEventListener)&&pe(n.removeEventListener)}function NE(n=0,e,t=SE){let i=-1;return e!=null&&(f_(e)?t=e:i=e),new ge(r=>{let s=JN(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function nc(...n){let e=Qs(n),t=HN(n,1/0),i=n;return i.length?i.length===1?ft(i[0]):Pa(t)(at(i,e)):jn}var{isArray:eG}=Array;function T_(n){return n.length===1&&eG(n[0])?n[0]:n}function Kt(n,e){return Se((t,i)=>{let r=0;t.subscribe(we(i,s=>n.call(e,s,r++)&&i.next(s)))})}function OE(...n){return n=T_(n),n.length===1?ft(n[0]):new ge(tG(n))}function tG(n){return e=>{let t=[];for(let i=0;t&&!e.closed&&i<n.length;i++)t.push(ft(n[i]).subscribe(we(e,r=>{if(t){for(let s=0;s<t.length;s++)s!==i&&t[s].unsubscribe();t=null}e.next(r)})))}}function Tf(...n){let e=Oa(n),t=T_(n);return t.length?new ge(i=>{let r=t.map(()=>[]),s=t.map(()=>!1);i.add(()=>{r=s=null});for(let o=0;!i.closed&&o<t.length;o++)ft(t[o]).subscribe(we(i,a=>{if(r[o].push(a),r.every(l=>l.length)){let l=r.map(c=>c.shift());i.next(e?e(...l):l),r.some((c,d)=>!c.length&&s[d])&&i.complete()}},()=>{s[o]=!0,!r[o].length&&i.complete()}));return()=>{r=s=null}}):jn}function Fa(n){return Se((e,t)=>{let i=null,r=!1,s;i=e.subscribe(we(t,void 0,void 0,o=>{s=ft(n(o,Fa(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function nO(n,e,t,i,r){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(we(o,d=>{let h=c++;l=a?n(l,d,h):(a=!0,d),i&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}function ko(n,e){return pe(e)?Xt(n,e,1):Xt(n,1)}function La(n){return Se((e,t)=>{let i=!1;e.subscribe(we(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function cr(n){return n<=0?()=>jn:Se((e,t)=>{let i=0;e.subscribe(we(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function PE(n){return ne(()=>n)}function zu(n,e=ui){return n=n??nG,Se((t,i)=>{let r,s=!0;t.subscribe(we(i,o=>{let a=e(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}function nG(n,e){return n===e}function S_(n=iG){return Se((e,t)=>{let i=!1;e.subscribe(we(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function iG(){return new Po}function kE(...n){return e=>ka(e,se(...n))}function Fo(n){return Se((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Kr(n,e){let t=arguments.length>=2;return i=>i.pipe(n?Kt((r,s)=>n(r,s,i)):ui,cr(1),t?La(e):S_(()=>new Po))}function Gu(n){return n<=0?()=>jn:Se((e,t)=>{let i=[];e.subscribe(we(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function FE(n,e){let t=arguments.length>=2;return i=>i.pipe(n?Kt((r,s)=>n(r,s,i)):ui,Gu(1),t?La(e):S_(()=>new Po))}function Sf(){return Se((n,e)=>{let t,i=!1;n.subscribe(we(e,r=>{let s=t;t=r,i&&e.next([s,r]),i=!0}))})}function Ys(n,e){return Se(nO(n,e,arguments.length>=2,!0))}function Af(n={}){let{connector:e=()=>new yt,resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o,a,l,c=0,d=!1,h=!1,f=()=>{a?.unsubscribe(),a=void 0},p=()=>{f(),o=l=void 0,d=h=!1},y=()=>{let _=o;p(),_?.unsubscribe()};return Se((_,w)=>{c++,!h&&!d&&f();let A=l=l??e();w.add(()=>{c--,c===0&&!h&&!d&&(a=LE(y,r))}),A.subscribe(w),!o&&c>0&&(o=new Oo({next:x=>A.next(x),error:x=>{h=!0,f(),a=LE(p,t,x),A.error(x)},complete:()=>{d=!0,f(),a=LE(p,i),A.complete()}}),ft(_).subscribe(o))})(s)}}function LE(n,e,...t){if(e===!0){n();return}if(e===!1)return;let i=new Oo({next:()=>{i.unsubscribe(),n()}});return ft(e(...t)).subscribe(i)}function A_(n,e,t){let i,r=!1;return n&&typeof n=="object"?{bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n:i=n??1/0,Af({connector:()=>new c_(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function VE(n){return Se((e,t)=>{let i=!1,r=0;e.subscribe(we(t,s=>(i||(i=!n(s,r++)))&&t.next(s)))})}function Va(...n){let e=Qs(n);return Se((t,i)=>{(e?ka(n,t,e):ka(n,t)).subscribe(i)})}function xt(n,e){return Se((t,i)=>{let r=null,s=0,o=!1,a=()=>o&&!r&&i.complete();t.subscribe(we(i,l=>{r?.unsubscribe();let c=0,d=s++;ft(n(l,d)).subscribe(r=we(i,h=>i.next(e?e(l,h,d,c++):h),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function M_(n,e){return pe(e)?xt(()=>n,e):xt(()=>n)}function bi(n){return Se((e,t)=>{ft(n).subscribe(we(t,()=>t.complete(),Xl)),!t.closed&&e.subscribe(t)})}function fn(n,e,t){let i=pe(n)||e||t?{next:n,error:e,complete:t}:n;return i?Se((r,s)=>{var o;(o=i.subscribe)===null||o===void 0||o.call(i);let a=!0;r.subscribe(we(s,l=>{var c;(c=i.next)===null||c===void 0||c.call(i,l),s.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),s.complete()},l=>{var c;a=!1,(c=i.error)===null||c===void 0||c.call(i,l),s.error(l)},()=>{var l,c;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(c=i.finalize)===null||c===void 0||c.call(i)}))}):ui}function Wu(...n){let e=Oa(n);return Se((t,i)=>{let r=n.length,s=new Array(r),o=n.map(()=>!1),a=!1;for(let l=0;l<r;l++)ft(n[l]).subscribe(we(i,c=>{s[l]=c,!a&&!o[l]&&(o[l]=!0,(a=o.every(ui))&&(o=null))},Xl));t.subscribe(we(i,l=>{if(a){let c=[l,...s];i.next(e?e(...c):c)}}))})}var VO="https://g.co/ng/security#xss",ue=class extends Error{constructor(e,t){super(hy(e,t)),this.code=e}};function hy(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Bf(n){return{toString:n}.toString()}var x_="__parameters__";function rG(n){return function(...t){if(n){let i=n(...t);for(let r in i)this[r]=i[r]}}}function BO(n,e,t){return Bf(()=>{let i=rG(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;let o=new r(...s);return a.annotation=o,a;function a(l,c,d){let h=l.hasOwnProperty(x_)?l[x_]:Object.defineProperty(l,x_,{value:[]})[x_];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(o),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var Ho=globalThis;function Pt(n){for(let e in n)if(n[e]===Pt)return e;throw Error("Could not find renamed property on target object.")}function sG(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Vi(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Vi).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function ZE(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var oG=Pt({__forward_ref__:Pt});function ud(n){return n.__forward_ref__=ud,n.toString=function(){return Vi(this())},n}function Li(n){return jO(n)?n():n}function jO(n){return typeof n=="function"&&n.hasOwnProperty(oG)&&n.__forward_ref__===ud}function te(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ne(n){return{providers:n.providers||[],imports:n.imports||[]}}function fy(n){return iO(n,$O)||iO(n,HO)}function UO(n){return fy(n)!==null}function iO(n,e){return n.hasOwnProperty(e)?n[e]:null}function aG(n){let e=n&&(n[$O]||n[HO]);return e||null}function rO(n){return n&&(n.hasOwnProperty(sO)||n.hasOwnProperty(lG))?n[sO]:null}var $O=Pt({\u0275prov:Pt}),sO=Pt({\u0275inj:Pt}),HO=Pt({ngInjectableDef:Pt}),lG=Pt({ngInjectorDef:Pt}),J=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=te({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function zO(n){return n&&!!n.\u0275providers}var cG=Pt({\u0275cmp:Pt}),uG=Pt({\u0275dir:Pt}),dG=Pt({\u0275pipe:Pt}),hG=Pt({\u0275mod:Pt}),j_=Pt({\u0275fac:Pt}),xf=Pt({__NG_ELEMENT_ID__:Pt}),oO=Pt({__NG_ENV_ID__:Pt});function py(n){return typeof n=="string"?n:n==null?"":String(n)}function fG(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():py(n)}function pG(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ue(-200,n)}function Q1(n,e){throw new ue(-201,!1)}var ze=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ze||{}),XE;function GO(){return XE}function Qr(n){let e=XE;return XE=n,e}function WO(n,e,t){let i=fy(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&ze.Optional)return null;if(e!==void 0)return e;Q1(n,"Injector")}var gG={},Nf=gG,e1="__NG_DI_FLAG__",U_="ngTempTokenPath",mG="ngTokenPath",_G=/\n/gm,yG="\u0275",aO="__source",Ju;function vG(){return Ju}function Ba(n){let e=Ju;return Ju=n,e}function wG(n,e=ze.Default){if(Ju===void 0)throw new ue(-203,!1);return Ju===null?WO(n,void 0,e):Ju.get(n,e&ze.Optional?null:void 0,e)}function z(n,e=ze.Default){return(GO()||wG)(Li(n),e)}function H(n,e=ze.Default){return z(n,gy(e))}function gy(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function t1(n){let e=[];for(let t=0;t<n.length;t++){let i=Li(n[t]);if(Array.isArray(i)){if(i.length===0)throw new ue(900,!1);let r,s=ze.Default;for(let o=0;o<i.length;o++){let a=i[o],l=bG(a);typeof l=="number"?l===-1?r=a.token:s|=l:r=a}e.push(z(r,s))}else e.push(z(i))}return e}function qO(n,e){return n[e1]=e,n.prototype[e1]=e,n}function bG(n){return n[e1]}function EG(n,e,t,i){let r=n[U_];throw e[aO]&&r.unshift(e[aO]),n.message=CG(`
`+n.message,r,t,i),n[mG]=r,n[U_]=null,n}function CG(n,e,t,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==yG?n.slice(2):n;let r=Vi(e);if(Array.isArray(e))r=e.map(Vi).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Vi(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(_G,`
  `)}`}var dd=qO(BO("Optional"),8);var Y1=qO(BO("SkipSelf"),4);function Xu(n,e){let t=n.hasOwnProperty(j_);return t?n[j_]:null}function DG(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}function IG(n){return n.flat(Number.POSITIVE_INFINITY)}function J1(n,e){n.forEach(t=>Array.isArray(t)?J1(t,e):e(t))}function KO(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function $_(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function TG(n,e){let t=[];for(let i=0;i<n;i++)t.push(e);return t}function SG(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let s=r-2;n[r]=n[s],r--}n[e]=t,n[e+1]=i}}function Z1(n,e,t){let i=jf(n,e);return i>=0?n[i|1]=t:(i=~i,SG(n,i,e,t)),i}function BE(n,e){let t=jf(n,e);if(t>=0)return n[t|1]}function jf(n,e){return AG(n,e,1)}function AG(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}var ed={},ur=[],td=new J(""),QO=new J("",-1),YO=new J(""),H_=class{get(e,t=Nf){if(t===Nf){let i=new Error(`NullInjectorError: No provider for ${Vi(e)}!`);throw i.name="NullInjectorError",i}return t}},JO=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(JO||{}),Xs=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Xs||{}),$a=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}($a||{});function MG(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}function n1(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{let s=r,o=t[++i];RG(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function xG(n){return n===3||n===4||n===6}function RG(n){return n.charCodeAt(0)===64}function Of(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?lO(n,t,r,null,e[++i]):lO(n,t,r,null,null))}}return n}function lO(n,e,t,i,r){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(i===null){r!==null&&(n[s+1]=r);return}else if(i===n[s+1]){n[s+2]=r;return}}s++,i!==null&&s++,r!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i),r!==null&&n.splice(s++,0,r)}var ZO="ng-template";function NG(n,e,t,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&MG(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if(X1(n))return!1;if(r=e.indexOf(1,r),r>-1){let s;for(;++r<e.length&&typeof(s=e[r])=="string";)if(s.toLowerCase()===t)return!0}return!1}function X1(n){return n.type===4&&n.value!==ZO}function OG(n,e,t){let i=n.type===4&&!t?ZO:n.value;return e===i}function PG(n,e,t){let i=4,r=n.attrs,s=r!==null?LG(r):0,o=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!o&&!Cs(i)&&!Cs(l))return!1;if(o&&Cs(l))continue;o=!1,i=l|i&1;continue}if(!o)if(i&4){if(i=2|i&1,l!==""&&!OG(n,l,t)||l===""&&e.length===1){if(Cs(i))return!1;o=!0}}else if(i&8){if(r===null||!NG(n,r,l,t)){if(Cs(i))return!1;o=!0}}else{let c=e[++a],d=kG(l,r,X1(n),t);if(d===-1){if(Cs(i))return!1;o=!0;continue}if(c!==""){let h;if(d>s?h="":h=r[d+1].toLowerCase(),i&2&&c!==h){if(Cs(i))return!1;o=!0}}}}return Cs(i)||o}function Cs(n){return(n&1)===0}function kG(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){let o=e[r];if(o===n)return r;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(o===4)break;if(o===0){r+=4;continue}}r+=s?1:2}return-1}else return VG(e,n)}function XO(n,e,t=!1){for(let i=0;i<e.length;i++)if(PG(n,e[i],t))return!0;return!1}function FG(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if(!(t&1))return e[t+1]}return null}function LG(n){for(let e=0;e<n.length;e++){let t=n[e];if(xG(t))return e}return n.length}function VG(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function BG(n,e){e:for(let t=0;t<e.length;t++){let i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function cO(n,e){return n?":not("+e.trim()+")":e}function jG(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(i&2){let a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+o:i&4&&(r+=" "+o);else r!==""&&!Cs(o)&&(e+=cO(s,r),r=""),i=o,s=s||!Cs(i);t++}return r!==""&&(e+=cO(s,r)),e}function UG(n){return n.map(jG).join(",")}function $G(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let s=n[i];if(typeof s=="string")r===2?s!==""&&e.push(s,n[++i]):r===8&&t.push(s);else{if(!Cs(r))break;r=s}i++}return{attrs:e,classes:t}}function Bi(n){return Bf(()=>{let e=rP(n),t=ke(q({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===JO.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Xs.Emulated,styles:n.styles||ur,_:null,schemas:n.schemas||null,tView:null,id:""});sP(t);let i=n.dependencies;return t.directiveDefs=dO(i,!1),t.pipeDefs=dO(i,!0),t.id=GG(t),t})}function HG(n){return Lo(n)||eP(n)}function zG(n){return n!==null}function Oe(n){return Bf(()=>({type:n.type,bootstrap:n.bootstrap||ur,declarations:n.declarations||ur,imports:n.imports||ur,exports:n.exports||ur,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function uO(n,e){if(n==null)return ed;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],s,o,a=$a.None;Array.isArray(r)?(a=r[0],s=r[1],o=r[2]??s):(s=r,o=r),e?(t[s]=a!==$a.None?[i,a]:i,e[s]=o):t[s]=i}return t}function Tr(n){return Bf(()=>{let e=rP(n);return sP(e),e})}function Lo(n){return n[cG]||null}function eP(n){return n[uG]||null}function tP(n){return n[dG]||null}function nP(n){let e=Lo(n)||eP(n)||tP(n);return e!==null?e.standalone:!1}function iP(n,e){let t=n[hG]||null;if(!t&&e===!0)throw new Error(`Type ${Vi(n)} does not have '\u0275mod' property.`);return t}function rP(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||ed,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||ur,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:uO(n.inputs,e),outputs:uO(n.outputs),debugInfo:null}}function sP(n){n.features?.forEach(e=>e(n))}function dO(n,e){if(!n)return null;let t=e?tP:HG;return()=>(typeof n=="function"?n():n).map(i=>t(i)).filter(zG)}function GG(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function my(n){return{\u0275providers:n}}function WG(...n){return{\u0275providers:oP(!0,n),\u0275fromNgModule:!0}}function oP(n,...e){let t=[],i=new Set,r,s=o=>{t.push(o)};return J1(e,o=>{let a=o;i1(a,s,[],i)&&(r||=[],r.push(a))}),r!==void 0&&aP(r,s),t}function aP(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];eC(r,s=>{e(s,i)})}}function i1(n,e,t,i){if(n=Li(n),!n)return!1;let r=null,s=rO(n),o=!s&&Lo(n);if(!s&&!o){let l=n.ngModule;if(s=rO(l),s)r=l;else return!1}else{if(o&&!o.standalone)return!1;r=n}let a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let c of l)i1(c,e,t,i)}}else if(s){if(s.imports!=null&&!a){i.add(r);let c;try{J1(s.imports,d=>{i1(d,e,t,i)&&(c||=[],c.push(d))})}finally{}c!==void 0&&aP(c,e)}if(!a){let c=Xu(r)||(()=>new r);e({provide:r,useFactory:c,deps:ur},r),e({provide:YO,useValue:r,multi:!0},r),e({provide:td,useValue:()=>z(r),multi:!0},r)}let l=s.providers;if(l!=null&&!a){let c=n;eC(l,d=>{e(d,c)})}}else return!1;return r!==n&&n.providers!==void 0}function eC(n,e){for(let t of n)zO(t)&&(t=t.\u0275providers),Array.isArray(t)?eC(t,e):e(t)}var qG=Pt({provide:String,useValue:Pt});function lP(n){return n!==null&&typeof n=="object"&&qG in n}function KG(n){return!!(n&&n.useExisting)}function QG(n){return!!(n&&n.useFactory)}function nd(n){return typeof n=="function"}function YG(n){return!!n.useClass}var _y=new J(""),k_={},JG={},jE;function yy(){return jE===void 0&&(jE=new H_),jE}var Xn=class{},Pf=class extends Xn{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,s1(e,o=>this.processProvider(o)),this.records.set(QO,qu(void 0,this)),r.has("environment")&&this.records.set(Xn,qu(void 0,this));let s=this.records.get(_y);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(YO,ur,ze.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=_t(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),_t(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Ba(this),i=Qr(void 0),r;try{return e()}finally{Ba(t),Qr(i)}}get(e,t=Nf,i=ze.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(oO))return e[oO](this);i=gy(i);let r,s=Ba(this),o=Qr(void 0);try{if(!(i&ze.SkipSelf)){let l=this.records.get(e);if(l===void 0){let c=n5(e)&&fy(e);c&&this.injectableDefInScope(c)?l=qu(r1(e),k_):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=i&ze.Self?yy():this.parent;return t=i&ze.Optional&&t===Nf?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[U_]=a[U_]||[]).unshift(Vi(e)),s)throw a;return EG(a,e,"R3InjectorError",this.source)}else throw a}finally{Qr(o),Ba(s)}}resolveInjectorInitializers(){let e=_t(null),t=Ba(this),i=Qr(void 0),r;try{let s=this.get(td,ur,ze.Self);for(let o of s)o()}finally{Ba(t),Qr(i),_t(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(Vi(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ue(205,!1)}processProvider(e){e=Li(e);let t=nd(e)?e:Li(e&&e.provide),i=XG(e);if(!nd(e)&&e.multi===!0){let r=this.records.get(t);r||(r=qu(void 0,k_,!0),r.factory=()=>t1(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){let i=_t(null);try{return t.value===k_&&(t.value=JG,t.value=t.factory()),typeof t.value=="object"&&t.value&&t5(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{_t(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Li(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function r1(n){let e=fy(n),t=e!==null?e.factory:Xu(n);if(t!==null)return t;if(n instanceof J)throw new ue(204,!1);if(n instanceof Function)return ZG(n);throw new ue(204,!1)}function ZG(n){if(n.length>0)throw new ue(204,!1);let t=aG(n);return t!==null?()=>t.factory(n):()=>new n}function XG(n){if(lP(n))return qu(void 0,n.useValue);{let e=cP(n);return qu(e,k_)}}function cP(n,e,t){let i;if(nd(n)){let r=Li(n);return Xu(r)||r1(r)}else if(lP(n))i=()=>Li(n.useValue);else if(QG(n))i=()=>n.useFactory(...t1(n.deps||[]));else if(KG(n))i=()=>z(Li(n.useExisting));else{let r=Li(n&&(n.useClass||n.provide));if(e5(n))i=()=>new r(...t1(n.deps));else return Xu(r)||r1(r)}return i}function qu(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function e5(n){return!!n.deps}function t5(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function n5(n){return typeof n=="function"||typeof n=="object"&&n instanceof J}function s1(n,e){for(let t of n)Array.isArray(t)?s1(t,e):t&&zO(t)?s1(t.\u0275providers,e):e(t)}function Xr(n,e){n instanceof Pf&&n.assertNotDestroyed();let t,i=Ba(n),r=Qr(void 0);try{return e()}finally{Ba(i),Qr(r)}}function uP(){return GO()!==void 0||vG()!=null}function i5(n){if(!uP())throw new ue(-203,!1)}function r5(n){let e=Ho.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function s5(n){return typeof n=="function"}var zo=0,$e=1,Ee=2,Ei=3,Is=4,dr=5,kf=6,z_=7,Ts=8,id=9,eo=10,pn=11,Ff=12,hO=13,hd=14,Jr=15,rc=16,Ku=17,Vo=18,vy=19,dP=20,ja=21,UE=22,Yr=23,Zr=25,hP=1;var sc=7,G_=8,rd=9,Ir=10,W_=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(W_||{});function Ua(n){return Array.isArray(n)&&typeof n[hP]=="object"}function Go(n){return Array.isArray(n)&&n[hP]===!0}function tC(n){return(n.flags&4)!==0}function wy(n){return n.componentOffset>-1}function by(n){return(n.flags&1)===1}function Ha(n){return!!n.template}function o1(n){return(n[Ee]&512)!==0}var a1=class{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function fP(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}function fc(){return pP}function pP(n){return n.type.prototype.ngOnChanges&&(n.setInput=a5),o5}fc.ngInherit=!0;function o5(){let n=mP(this),e=n?.current;if(e){let t=n.previous;if(t===ed)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function a5(n,e,t,i,r){let s=this.declaredInputs[i],o=mP(n)||l5(n,{previous:ed,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[s];a[s]=new a1(c&&c.currentValue,t,l===ed),fP(n,e,r,t)}var gP="__ngSimpleChanges__";function mP(n){return n[gP]||null}function l5(n,e){return n[gP]=e}var fO=null;var Js=function(n,e,t){fO?.(n,e,t)},c5="svg",u5="math";function to(n){for(;Array.isArray(n);)n=n[zo];return n}function _P(n,e){return to(e[n])}function es(n,e){return to(e[n.index])}function yP(n,e){return n.data[e]}function d5(n,e){return n[e]}function Wa(n,e){let t=e[n];return Ua(t)?t:t[zo]}function h5(n){return(n[Ee]&4)===4}function nC(n){return(n[Ee]&128)===128}function f5(n){return Go(n[Ei])}function sd(n,e){return e==null?null:n[e]}function vP(n){n[Ku]=0}function wP(n){n[Ee]&1024||(n[Ee]|=1024,nC(n)&&Cy(n))}function p5(n,e){for(;n>0;)e=e[hd],n--;return e}function Ey(n){return!!(n[Ee]&9216||n[Yr]?.dirty)}function l1(n){n[eo].changeDetectionScheduler?.notify(8),n[Ee]&64&&(n[Ee]|=1024),Ey(n)&&Cy(n)}function Cy(n){n[eo].changeDetectionScheduler?.notify(0);let e=oc(n);for(;e!==null&&!(e[Ee]&8192||(e[Ee]|=8192,!nC(e)));)e=oc(e)}function bP(n,e){if((n[Ee]&256)===256)throw new ue(911,!1);n[ja]===null&&(n[ja]=[]),n[ja].push(e)}function g5(n,e){if(n[ja]===null)return;let t=n[ja].indexOf(e);t!==-1&&n[ja].splice(t,1)}function oc(n){let e=n[Ei];return Go(e)?e[Ei]:e}var Ge={lFrame:RP(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var EP=!1;function m5(){return Ge.lFrame.elementDepthCount}function _5(){Ge.lFrame.elementDepthCount++}function y5(){Ge.lFrame.elementDepthCount--}function CP(){return Ge.bindingsEnabled}function DP(){return Ge.skipHydrationRootTNode!==null}function v5(n){return Ge.skipHydrationRootTNode===n}function w5(){Ge.skipHydrationRootTNode=null}function vt(){return Ge.lFrame.lView}function Un(){return Ge.lFrame.tView}function ji(n){return Ge.lFrame.contextLView=n,n[Ts]}function Ui(n){return Ge.lFrame.contextLView=null,n}function $i(){let n=IP();for(;n!==null&&n.type===64;)n=n.parent;return n}function IP(){return Ge.lFrame.currentTNode}function b5(){let n=Ge.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function pc(n,e){let t=Ge.lFrame;t.currentTNode=n,t.isParent=e}function iC(){return Ge.lFrame.isParent}function rC(){Ge.lFrame.isParent=!1}function E5(){return Ge.lFrame.contextLView}function TP(){return EP}function pO(n){EP=n}function C5(){let n=Ge.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function D5(n){return Ge.lFrame.bindingIndex=n}function Dy(){return Ge.lFrame.bindingIndex++}function SP(n){let e=Ge.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function I5(){return Ge.lFrame.inI18n}function T5(n,e){let t=Ge.lFrame;t.bindingIndex=t.bindingRootIndex=n,c1(e)}function S5(){return Ge.lFrame.currentDirectiveIndex}function c1(n){Ge.lFrame.currentDirectiveIndex=n}function A5(n){let e=Ge.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function AP(){return Ge.lFrame.currentQueryIndex}function sC(n){Ge.lFrame.currentQueryIndex=n}function M5(n){let e=n[$e];return e.type===2?e.declTNode:e.type===1?n[dr]:null}function MP(n,e,t){if(t&ze.SkipSelf){let r=e,s=n;for(;r=r.parent,r===null&&!(t&ze.Host);)if(r=M5(s),r===null||(s=s[hd],r.type&10))break;if(r===null)return!1;e=r,n=s}let i=Ge.lFrame=xP();return i.currentTNode=e,i.lView=n,!0}function oC(n){let e=xP(),t=n[$e];Ge.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function xP(){let n=Ge.lFrame,e=n===null?null:n.child;return e===null?RP(n):e}function RP(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function NP(){let n=Ge.lFrame;return Ge.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var OP=NP;function aC(){let n=NP();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function x5(n){return(Ge.lFrame.contextLView=p5(n,Ge.lFrame.contextLView))[Ts]}function gc(){return Ge.lFrame.selectedIndex}function ac(n){Ge.lFrame.selectedIndex=n}function lC(){let n=Ge.lFrame;return yP(n.tView,n.selectedIndex)}function R5(){return Ge.lFrame.currentNamespace}var PP=!0;function Iy(){return PP}function Ty(n){PP=n}function N5(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){let o=pP(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}r&&(t.preOrderHooks??=[]).push(0-n,r),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function Sy(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:d}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function F_(n,e,t){kP(n,e,3,t)}function L_(n,e,t,i){(n[Ee]&3)===t&&kP(n,e,t,i)}function $E(n,e){let t=n[Ee];(t&3)===e&&(t&=16383,t+=1,n[Ee]=t)}function kP(n,e,t,i){let r=i!==void 0?n[Ku]&65535:0,s=i??-1,o=e.length-1,a=0;for(let l=r;l<o;l++)if(typeof e[l+1]=="number"){if(a=e[l],i!=null&&a>=i)break}else e[l]<0&&(n[Ku]+=65536),(a<s||s==-1)&&(O5(n,t,e,l),n[Ku]=(n[Ku]&4294901760)+l+2),l++}function gO(n,e){Js(4,n,e);let t=_t(null);try{e.call(n)}finally{_t(t),Js(5,n,e)}}function O5(n,e,t,i){let r=t[i]<0,s=t[i+1],o=r?-t[i]:t[i],a=n[o];r?n[Ee]>>14<n[Ku]>>16&&(n[Ee]&3)===e&&(n[Ee]+=16384,gO(a,s)):gO(a,s)}var Zu=-1,lc=class{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}};function P5(n){return n instanceof lc}function k5(n){return(n.flags&8)!==0}function F5(n){return(n.flags&16)!==0}var HE={},u1=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=gy(i);let r=this.injector.get(e,HE,i);return r!==HE||t===HE?r:this.parentInjector.get(e,t,i)}};function FP(n){return n!==Zu}function q_(n){return n&32767}function L5(n){return n>>16}function K_(n,e){let t=L5(n),i=e;for(;t>0;)i=i[hd],t--;return i}var d1=!0;function mO(n){let e=d1;return d1=n,e}var V5=256,LP=V5-1,VP=5,B5=0,Zs={};function j5(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(xf)&&(i=t[xf]),i==null&&(i=t[xf]=B5++);let r=i&LP,s=1<<r;e.data[n+(r>>VP)]|=s}function Q_(n,e){let t=BP(n,e);if(t!==-1)return t;let i=e[$e];i.firstCreatePass&&(n.injectorIndex=e.length,zE(i.data,n),zE(e,null),zE(i.blueprint,null));let r=cC(n,e),s=n.injectorIndex;if(FP(r)){let o=q_(r),a=K_(r,e),l=a[$e].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function zE(n,e){n.push(0,0,0,0,0,0,0,0,e)}function BP(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function cC(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=zP(r),i===null)return Zu;if(t++,r=r[hd],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return Zu}function h1(n,e,t){j5(n,e,t)}function jP(n,e,t){if(t&ze.Optional||n!==void 0)return n;Q1(e,"NodeInjector")}function UP(n,e,t,i){if(t&ze.Optional&&i===void 0&&(i=null),!(t&(ze.Self|ze.Host))){let r=n[id],s=Qr(void 0);try{return r?r.get(e,i,t&ze.Optional):WO(e,i,t&ze.Optional)}finally{Qr(s)}}return jP(i,e,t)}function $P(n,e,t,i=ze.Default,r){if(n!==null){if(e[Ee]&2048&&!(i&ze.Self)){let o=z5(n,e,t,i,Zs);if(o!==Zs)return o}let s=HP(n,e,t,i,Zs);if(s!==Zs)return s}return UP(e,t,i,r)}function HP(n,e,t,i,r){let s=$5(t);if(typeof s=="function"){if(!MP(e,n,i))return i&ze.Host?jP(r,t,i):UP(e,t,i,r);try{let o;if(o=s(i),o==null&&!(i&ze.Optional))Q1(t);else return o}finally{OP()}}else if(typeof s=="number"){let o=null,a=BP(n,e),l=Zu,c=i&ze.Host?e[Jr][dr]:null;for((a===-1||i&ze.SkipSelf)&&(l=a===-1?cC(n,e):e[a+8],l===Zu||!yO(i,!1)?a=-1:(o=e[$e],a=q_(l),e=K_(l,e)));a!==-1;){let d=e[$e];if(_O(s,a,d.data)){let h=U5(a,e,t,o,i,c);if(h!==Zs)return h}l=e[a+8],l!==Zu&&yO(i,e[$e].data[a+8]===c)&&_O(s,a,e)?(o=d,a=q_(l),e=K_(l,e)):a=-1}}return r}function U5(n,e,t,i,r,s){let o=e[$e],a=o.data[n+8],l=i==null?wy(a)&&d1:i!=o&&(a.type&3)!==0,c=r&ze.Host&&s===a,d=V_(a,o,t,l,c);return d!==null?cc(e,o,d,a):Zs}function V_(n,e,t,i,r){let s=n.providerIndexes,o=e.data,a=s&1048575,l=n.directiveStart,c=n.directiveEnd,d=s>>20,h=i?a:a+d,f=r?a+d:c;for(let p=h;p<f;p++){let y=o[p];if(p<l&&t===y||p>=l&&y.type===t)return p}if(r){let p=o[l];if(p&&Ha(p)&&p.type===t)return l}return null}function cc(n,e,t,i){let r=n[t],s=e.data;if(P5(r)){let o=r;o.resolving&&pG(fG(s[t]));let a=mO(o.canSeeViewProviders);o.resolving=!0;let l,c=o.injectImpl?Qr(o.injectImpl):null,d=MP(n,i,ze.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&N5(t,s[t],e)}finally{c!==null&&Qr(c),mO(a),o.resolving=!1,OP()}}return r}function $5(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(xf)?n[xf]:void 0;return typeof e=="number"?e>=0?e&LP:H5:e}function _O(n,e,t){let i=1<<n;return!!(t[e+(n>>VP)]&i)}function yO(n,e){return!(n&ze.Self)&&!(n&ze.Host&&e)}var ic=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return $P(this._tNode,this._lView,e,gy(i),t)}};function H5(){return new ic($i(),vt())}function fd(n){return Bf(()=>{let e=n.prototype.constructor,t=e[j_]||f1(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let s=r[j_]||f1(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function f1(n){return jO(n)?()=>{let e=f1(Li(n));return e&&e()}:Xu(n)}function z5(n,e,t,i,r){let s=n,o=e;for(;s!==null&&o!==null&&o[Ee]&2048&&!(o[Ee]&512);){let a=HP(s,o,t,i|ze.Self,Zs);if(a!==Zs)return a;let l=s.parent;if(!l){let c=o[dP];if(c){let d=c.get(t,Zs,i);if(d!==Zs)return d}l=zP(o),o=o[hd]}s=l}return r}function zP(n){let e=n[$e],t=e.type;return t===2?e.declTNode:t===1?n[dr]:null}function vO(n,e=null,t=null,i){let r=GP(n,e,t,i);return r.resolveInjectorInitializers(),r}function GP(n,e=null,t=null,i,r=new Set){let s=[t||ur,WG(n)];return i=i||(typeof n=="object"?void 0:Vi(n)),new Pf(s,e||yy(),i||null,r)}var di=class n{static{this.THROW_IF_NOT_FOUND=Nf}static{this.NULL=new H_}static create(e,t){if(Array.isArray(e))return vO({name:""},t,e,"");{let i=e.name??"";return vO({name:i},e.parent,e.providers,i)}}static{this.\u0275prov=te({token:n,providedIn:"any",factory:()=>z(QO)})}static{this.__NG_ELEMENT_ID__=-1}};var G5=new J("");G5.__NG_ELEMENT_ID__=n=>{let e=$i();if(e===null)throw new ue(204,!1);if(e.type&2)return e.value;if(n&ze.Optional)return null;throw new ue(204,!1)};var W5="ngOriginalError";function GE(n){return n[W5]}var WP=!0,Ay=(()=>{class n{static{this.__NG_ELEMENT_ID__=q5}static{this.__NG_ENV_ID__=t=>t}}return n})(),p1=class extends Ay{constructor(e){super(),this._lView=e}onDestroy(e){return bP(this._lView,e),()=>g5(this._lView,e)}};function q5(){return new p1(vt())}var Wo=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Zn(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=te({token:n,providedIn:"root",factory:()=>new n})}}return n})();var g1=class extends yt{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,uP()&&(this.destroyRef=H(Ay,{optional:!0})??void 0,this.pendingTasks=H(Wo,{optional:!0})??void 0)}emit(e){let t=_t(null);try{super.next(e)}finally{_t(t)}}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&typeof e=="object"){let l=e;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=this.wrapInTimeout(s),r&&(r=this.wrapInTimeout(r)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:r,error:s,complete:o});return e instanceof hn&&e.add(a),a}wrapInTimeout(e){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{e(t),i!==void 0&&this.pendingTasks?.remove(i)})}}},en=g1;function Y_(...n){}function qP(n){let e,t;function i(){n=Y_;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function wO(n){return queueMicrotask(()=>n()),()=>{n=Y_}}var uC="isAngularZone",J_=uC+"_ID",K5=0,Fe=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new en(!1),this.onMicrotaskEmpty=new en(!1),this.onStable=new en(!1),this.onError=new en(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:s=WP}=e;if(typeof Zone>"u")throw new ue(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&i,o.shouldCoalesceRunChangeDetection=r,o.callbackScheduled=!1,o.scheduleInRootZone=s,J5(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(uC)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ue(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ue(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,Q5,Y_,Y_);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},Q5={};function dC(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Y5(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){qP(()=>{n.callbackScheduled=!1,m1(n),n.isCheckStableRunning=!0,dC(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),m1(n)}function J5(n){let e=()=>{Y5(n)},t=K5++;n._inner=n._inner.fork({name:"angular",properties:{[uC]:!0,[J_]:t,[J_+t]:!0},onInvokeTask:(i,r,s,o,a,l)=>{if(Z5(l))return i.invokeTask(s,o,a,l);try{return bO(n),i.invokeTask(s,o,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),EO(n)}},onInvoke:(i,r,s,o,a,l,c)=>{try{return bO(n),i.invoke(s,o,a,l,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!X5(l)&&e(),EO(n)}},onHasTask:(i,r,s,o)=>{i.hasTask(s,o),r===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,m1(n),dC(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(i,r,s,o)=>(i.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function m1(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function bO(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function EO(n){n._nesting--,dC(n)}var Z_=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new en,this.onMicrotaskEmpty=new en,this.onStable=new en,this.onError=new en}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}};function Z5(n){return KP(n,"__ignore_ng_zone__")}function X5(n){return KP(n,"__scheduler_tick__")}function KP(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function e8(n="zone.js",e){return n==="noop"?new Z_:n==="zone.js"?new Fe(e):n}var Bo=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&GE(e);for(;t&&GE(t);)t=GE(t);return t||null}},t8=new J("",{providedIn:"root",factory:()=>{let n=H(Fe),e=H(Bo);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function n8(){return pd($i(),vt())}function pd(n,e){return new Ci(es(n,e))}var Ci=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=n8}}return n})();function i8(n){return n instanceof Ci?n.nativeElement:n}function r8(){return this._results[Symbol.iterator]()}var _1=class n{get changes(){return this._changes??=new en}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=r8)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let i=IG(e);(this._changesDetected=!DG(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function QP(n){return(n.flags&128)===128}var YP=new Map,s8=0;function o8(){return s8++}function a8(n){YP.set(n[vy],n)}function y1(n){YP.delete(n[vy])}var CO="__ngContext__";function za(n,e){Ua(e)?(n[CO]=e[vy],a8(e)):n[CO]=e}function JP(n){return XP(n[Ff])}function ZP(n){return XP(n[Is])}function XP(n){for(;n!==null&&!Go(n);)n=n[Is];return n}var v1;function ek(n){v1=n}function l8(){if(v1!==void 0)return v1;if(typeof document<"u")return document;throw new ue(210,!1)}var My=new J("",{providedIn:"root",factory:()=>c8}),c8="ng",hC=new J(""),$n=new J("",{providedIn:"platform",factory:()=>"unknown"});var fC=new J("",{providedIn:"root",factory:()=>l8().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var u8="h",d8="b";var h8=()=>null;function pC(n,e,t=!1){return h8(n,e,t)}var tk=!1,f8=new J("",{providedIn:"root",factory:()=>tk});var X_=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${VO})`}};function Uf(n){return n instanceof X_?n.changingThisBreaksApplicationSecurity:n}function nk(n,e){let t=p8(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${VO})`)}return t===e}function p8(n){return n instanceof X_&&n.getTypeName()||null}var g8=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function ik(n){return n=String(n),n.match(g8)?n:"unsafe:"+n}var gC=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(gC||{});function Di(n){let e=m8();return e?e.sanitize(gC.URL,n)||"":nk(n,"URL")?Uf(n):ik(py(n))}function m8(){let n=vt();return n&&n[eo].sanitizer}var _8=/^>|^->|<!--|-->|--!>|<!-$/g,y8=/(<|>)/g,v8="\u200B$1\u200B";function w8(n){return n.replace(_8,e=>e.replace(y8,v8))}function rk(n){return n instanceof Function?n():n}function b8(n){return(n??H(di)).get($n)==="browser"}var jo=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(jo||{}),E8;function mC(n,e){return E8(n,e)}function Qu(n,e,t,i,r){if(i!=null){let s,o=!1;Go(i)?s=i:Ua(i)&&(o=!0,i=i[zo]);let a=to(i);n===0&&t!==null?r==null?uk(e,t,a):ey(e,t,a,r||null,!0):n===1&&t!==null?ey(e,t,a,r||null,!0):n===2?F8(e,a,o):n===3&&e.destroyNode(a),s!=null&&V8(e,n,s,t,r)}}function C8(n,e){return n.createText(e)}function D8(n,e,t){n.setValue(e,t)}function I8(n,e){return n.createComment(w8(e))}function sk(n,e,t){return n.createElement(e,t)}function T8(n,e){ok(n,e),e[zo]=null,e[dr]=null}function S8(n,e,t,i,r,s){i[zo]=r,i[dr]=e,Ry(n,i,t,1,r,s)}function ok(n,e){e[eo].changeDetectionScheduler?.notify(9),Ry(n,e,e[pn],2,null,null)}function A8(n){let e=n[Ff];if(!e)return WE(n[$e],n);for(;e;){let t=null;if(Ua(e))t=e[Ff];else{let i=e[Ir];i&&(t=i)}if(!t){for(;e&&!e[Is]&&e!==n;)Ua(e)&&WE(e[$e],e),e=e[Ei];e===null&&(e=n),Ua(e)&&WE(e[$e],e),t=e&&e[Is]}e=t}}function M8(n,e,t,i){let r=Ir+i,s=t.length;i>0&&(t[r-1][Is]=e),i<s-Ir?(e[Is]=t[r],KO(t,Ir+i,e)):(t.push(e),e[Is]=null),e[Ei]=t;let o=e[rc];o!==null&&t!==o&&ak(o,e);let a=e[Vo];a!==null&&a.insertView(n),l1(e),e[Ee]|=128}function ak(n,e){let t=n[rd],i=e[Ei];if(Ua(i))n[Ee]|=W_.HasTransplantedViews;else{let r=i[Ei][Jr];e[Jr]!==r&&(n[Ee]|=W_.HasTransplantedViews)}t===null?n[rd]=[e]:t.push(e)}function _C(n,e){let t=n[rd],i=t.indexOf(e);t.splice(i,1)}function w1(n,e){if(n.length<=Ir)return;let t=Ir+e,i=n[t];if(i){let r=i[rc];r!==null&&r!==n&&_C(r,i),e>0&&(n[t-1][Is]=i[Is]);let s=$_(n,Ir+e);T8(i[$e],i);let o=s[Vo];o!==null&&o.detachView(s[$e]),i[Ei]=null,i[Is]=null,i[Ee]&=-129}return i}function lk(n,e){if(!(e[Ee]&256)){let t=e[pn];t.destroyNode&&Ry(n,e,t,3,null,null),A8(e)}}function WE(n,e){if(e[Ee]&256)return;let t=_t(null);try{e[Ee]&=-129,e[Ee]|=256,e[Yr]&&mE(e[Yr]),R8(n,e),x8(n,e),e[$e].type===1&&e[pn].destroy();let i=e[rc];if(i!==null&&Go(e[Ei])){i!==e[Ei]&&_C(i,e);let r=e[Vo];r!==null&&r.detachView(n)}y1(e)}finally{_t(t)}}function x8(n,e){let t=n.cleanup,i=e[z_];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else{let o=i[t[s+1]];t[s].call(o)}i!==null&&(e[z_]=null);let r=e[ja];if(r!==null){e[ja]=null;for(let s=0;s<r.length;s++){let o=r[s];o()}}}function R8(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof lc)){let s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=r[s[o]],l=s[o+1];Js(4,a,l);try{l.call(a)}finally{Js(5,a,l)}}else{Js(4,r,s);try{s.call(r)}finally{Js(5,r,s)}}}}}function ck(n,e,t){return N8(n,e.parent,t)}function N8(n,e,t){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return t[zo];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:s}=n.data[i.directiveStart+r];if(s===Xs.None||s===Xs.Emulated)return null}return es(i,t)}}function ey(n,e,t,i,r){n.insertBefore(e,t,i,r)}function uk(n,e,t){n.appendChild(e,t)}function DO(n,e,t,i,r){i!==null?ey(n,e,t,i,r):uk(n,e,t)}function dk(n,e){return n.parentNode(e)}function O8(n,e){return n.nextSibling(e)}function hk(n,e,t){return k8(n,e,t)}function P8(n,e,t){return n.type&40?es(n,t):null}var k8=P8,IO;function xy(n,e,t,i){let r=ck(n,i,e),s=e[pn],o=i.parent||e[dr],a=hk(o,i,e);if(r!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)DO(s,r,t[l],a,!1);else DO(s,r,t,a,!1);IO!==void 0&&IO(s,i,e,t,r)}function Mf(n,e){if(e!==null){let t=e.type;if(t&3)return es(e,n);if(t&4)return b1(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return Mf(n,i);{let r=n[e.index];return Go(r)?b1(-1,r):to(r)}}else{if(t&128)return Mf(n,e.next);if(t&32)return mC(e,n)()||to(n[e.index]);{let i=fk(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=oc(n[Jr]);return Mf(r,i)}else return Mf(n,e.next)}}}return null}function fk(n,e){if(e!==null){let i=n[Jr][dr],r=e.projection;return i.projection[r]}return null}function b1(n,e){let t=Ir+n+1;if(t<e.length){let i=e[t],r=i[$e].firstChild;if(r!==null)return Mf(i,r)}return e[sc]}function F8(n,e,t){n.removeChild(null,e,t)}function yC(n,e,t,i,r,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=i[t.index],l=t.type;if(o&&e===0&&(a&&za(to(a),i),t.flags|=2),(t.flags&32)!==32)if(l&8)yC(n,e,t.child,i,r,s,!1),Qu(e,n,r,a,s);else if(l&32){let c=mC(t,i),d;for(;d=c();)Qu(e,n,r,d,s);Qu(e,n,r,a,s)}else l&16?pk(n,e,i,t,r,s):Qu(e,n,r,a,s);t=o?t.projectionNext:t.next}}function Ry(n,e,t,i,r,s){yC(t,i,n.firstChild,e,r,s,!1)}function L8(n,e,t){let i=e[pn],r=ck(n,t,e),s=t.parent||e[dr],o=hk(s,t,e);pk(i,0,e,t,r,o)}function pk(n,e,t,i,r,s){let o=t[Jr],l=o[dr].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let d=l[c];Qu(e,n,r,d,s)}else{let c=l,d=o[Ei];QP(i)&&(c.flags|=128),yC(n,e,c,d,r,s,!0)}}function V8(n,e,t,i,r){let s=t[sc],o=to(t);s!==o&&Qu(e,n,i,s,r);for(let a=Ir;a<t.length;a++){let l=t[a];Ry(l[$e],l,n,e,i,s)}}function B8(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=i.indexOf("-")===-1?void 0:jo.DashCase;r==null?n.removeStyle(t,i,s):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=jo.Important),n.setStyle(t,i,r,s))}}function j8(n,e,t){n.setAttribute(e,"style",t)}function gk(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function mk(n,e,t){let{mergedAttrs:i,classes:r,styles:s}=t;i!==null&&n1(n,e,i),r!==null&&gk(n,e,r),s!==null&&j8(n,e,s)}var qo={};function fe(n=1){_k(Un(),vt(),gc()+n,!1)}function _k(n,e,t,i){if(!i)if((e[Ee]&3)===3){let s=n.preOrderCheckHooks;s!==null&&F_(e,s,t)}else{let s=n.preOrderHooks;s!==null&&L_(e,s,0,t)}ac(t)}function lt(n,e=ze.Default){let t=vt();if(t===null)return z(n,e);let i=$i();return $P(i,t,Li(n),e)}function yk(){let n="invalid";throw new Error(n)}function vk(n,e,t,i,r,s){let o=_t(null);try{let a=null;r&$a.SignalBased&&(a=e[i][No]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),r&$a.HasDecoratorInputTransform&&(s=n.inputTransforms[i].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,i):fP(e,a,i,s)}finally{_t(o)}}function U8(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)ac(~r);else{let s=r,o=t[++i],a=t[++i];T5(o,s);let l=e[s];a(2,l)}}}finally{ac(-1)}}function Ny(n,e,t,i,r,s,o,a,l,c,d){let h=e.blueprint.slice();return h[zo]=r,h[Ee]=i|4|128|8|64,(c!==null||n&&n[Ee]&2048)&&(h[Ee]|=2048),vP(h),h[Ei]=h[hd]=n,h[Ts]=t,h[eo]=o||n&&n[eo],h[pn]=a||n&&n[pn],h[id]=l||n&&n[id]||null,h[dr]=s,h[vy]=o8(),h[kf]=d,h[dP]=c,h[Jr]=e.type==2?n[Jr]:h,h}function gd(n,e,t,i,r){let s=n.data[e];if(s===null)s=$8(n,e,t,i,r),I5()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=i,s.attrs=r;let o=b5();s.injectorIndex=o===null?-1:o.injectorIndex}return pc(s,!0),s}function $8(n,e,t,i,r){let s=IP(),o=iC(),a=o?s:s&&s.parent,l=n.data[e]=K8(n,a,t,e,i,r);return n.firstChild===null&&(n.firstChild=l),s!==null&&(o?s.child==null&&l.parent!==null&&(s.child=l):s.next===null&&(s.next=l,l.prev=s)),l}function wk(n,e,t,i){if(t===0)return-1;let r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function bk(n,e,t,i,r){let s=gc(),o=i&2;try{ac(-1),o&&e.length>Zr&&_k(n,e,Zr,!1),Js(o?2:0,r),t(i,r)}finally{ac(s),Js(o?3:1,r)}}function vC(n,e,t){if(tC(e)){let i=_t(null);try{let r=e.directiveStart,s=e.directiveEnd;for(let o=r;o<s;o++){let a=n.data[o];if(a.contentQueries){let l=t[o];a.contentQueries(1,l,o)}}}finally{_t(i)}}}function wC(n,e,t){CP()&&(eW(n,e,t,es(t,e)),(t.flags&64)===64&&Ik(n,e,t))}function bC(n,e,t=es){let i=e.localNames;if(i!==null){let r=e.index+1;for(let s=0;s<i.length;s+=2){let o=i[s+1],a=o===-1?t(e,n):n[o];n[r++]=a}}}function Ek(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=EC(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function EC(n,e,t,i,r,s,o,a,l,c,d){let h=Zr+i,f=h+r,p=H8(h,f),y=typeof c=="function"?c():c;return p[$e]={type:n,blueprint:p,template:t,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:y,incompleteFirstPass:!1,ssrId:d}}function H8(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:qo);return t}function z8(n,e,t,i){let s=i.get(f8,tk)||t===Xs.ShadowDom,o=n.selectRootElement(e,s);return G8(o),o}function G8(n){W8(n)}var W8=()=>null;function q8(n,e,t,i){let r=Ak(e);r.push(t),n.firstCreatePass&&Mk(n).push(i,r.length-1)}function K8(n,e,t,i,r,s){let o=e?e.injectorIndex:-1,a=0;return DP()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function TO(n,e,t,i,r){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;i??={};let a,l=$a.None;Array.isArray(o)?(a=o[0],l=o[1]):a=o;let c=s;if(r!==null){if(!r.hasOwnProperty(s))continue;c=r[s]}n===0?SO(i,t,c,a,l):SO(i,t,c,a)}return i}function SO(n,e,t,i,r){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,i):s=n[t]=[e,i],r!==void 0&&s.push(r)}function Q8(n,e,t){let i=e.directiveStart,r=e.directiveEnd,s=n.data,o=e.attrs,a=[],l=null,c=null;for(let d=i;d<r;d++){let h=s[d],f=t?t.get(h):null,p=f?f.inputs:null,y=f?f.outputs:null;l=TO(0,h.inputs,d,l,p),c=TO(1,h.outputs,d,c,y);let _=l!==null&&o!==null&&!X1(e)?dW(l,d,o):null;a.push(_)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}function Y8(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Ck(n,e,t,i,r,s,o,a){let l=es(e,t),c=e.inputs,d;!a&&c!=null&&(d=c[i])?(DC(n,t,d,i,r),wy(e)&&J8(t,e.index)):e.type&3?(i=Y8(i),r=o!=null?o(r,e.value||"",i):r,s.setProperty(l,i,r)):e.type&12}function J8(n,e){let t=Wa(e,n);t[Ee]&16||(t[Ee]|=64)}function CC(n,e,t,i){if(CP()){let r=i===null?null:{"":-1},s=nW(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&Dk(n,e,t,o,r,a),r&&iW(t,i,r)}t.mergedAttrs=Of(t.mergedAttrs,t.attrs)}function Dk(n,e,t,i,r,s){for(let c=0;c<i.length;c++)h1(Q_(t,e),n,i[c].type);sW(t,n.data.length,i.length);for(let c=0;c<i.length;c++){let d=i[c];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,l=wk(n,e,i.length,null);for(let c=0;c<i.length;c++){let d=i[c];t.mergedAttrs=Of(t.mergedAttrs,d.hostAttrs),oW(n,t,e,l,d),rW(l,d,r),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let h=d.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}Q8(n,t,s)}function Z8(n,e,t,i,r){let s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;X8(o)!=a&&o.push(a),o.push(t,i,s)}}function X8(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function eW(n,e,t,i){let r=t.directiveStart,s=t.directiveEnd;wy(t)&&aW(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Q_(t,e),za(i,e);let o=t.initialInputs;for(let a=r;a<s;a++){let l=n.data[a],c=cc(e,n,a,t);if(za(c,e),o!==null&&uW(e,a-r,c,l,t,o),Ha(l)){let d=Wa(t.index,e);d[Ts]=cc(e,n,a,t)}}}function Ik(n,e,t){let i=t.directiveStart,r=t.directiveEnd,s=t.index,o=S5();try{ac(s);for(let a=i;a<r;a++){let l=n.data[a],c=e[a];c1(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&tW(l,c)}}finally{ac(-1),c1(o)}}function tW(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function nW(n,e){let t=n.directiveRegistry,i=null,r=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(XO(e,o.selectors,!1))if(i||(i=[]),Ha(o))if(o.findHostDirectiveDefs!==null){let a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o);let l=a.length;E1(n,e,l)}else i.unshift(o),E1(n,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return i===null?null:[i,r]}function E1(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function iW(n,e,t){if(e){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let s=t[e[r+1]];if(s==null)throw new ue(-301,!1);i.push(e[r],s)}}}function rW(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Ha(e)&&(t[""]=n)}}function sW(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function oW(n,e,t,i,r){n.data[i]=r;let s=r.factory||(r.factory=Xu(r.type,!0)),o=new lc(s,Ha(r),lt);n.blueprint[i]=o,t[i]=o,Z8(n,e,i,wk(n,t,r.hostVars,qo),r)}function aW(n,e,t){let i=es(e,n),r=Ek(t),s=n[eo].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=Oy(n,Ny(n,r,null,o,i,e,null,s.createRenderer(i,t),null,null,null));n[e.index]=a}function lW(n,e,t,i,r,s){let o=es(n,e);cW(e[pn],o,s,n.value,t,i,r)}function cW(n,e,t,i,r,s,o){if(s==null)n.removeAttribute(e,r,t);else{let a=o==null?py(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}function uW(n,e,t,i,r,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let l=o[a++],c=o[a++],d=o[a++],h=o[a++];vk(i,t,l,c,d,h)}}function dW(n,e,t){let i=null,r=0;for(;r<t.length;){let s=t[r];if(s===0){r+=4;continue}else if(s===5){r+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){i===null&&(i=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){i.push(s,o[a+1],o[a+2],t[r+1]);break}}r+=2}return i}function Tk(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function Sk(n,e){let t=n.contentQueries;if(t!==null){let i=_t(null);try{for(let r=0;r<t.length;r+=2){let s=t[r],o=t[r+1];if(o!==-1){let a=n.data[o];sC(s),a.contentQueries(2,e[o],o)}}}finally{_t(i)}}}function Oy(n,e){return n[Ff]?n[hO][Is]=e:n[Ff]=e,n[hO]=e,e}function C1(n,e,t){sC(0);let i=_t(null);try{e(n,t)}finally{_t(i)}}function Ak(n){return n[z_]??=[]}function Mk(n){return n.cleanup??=[]}function xk(n,e){let t=n[id],i=t?t.get(Bo,null):null;i&&i.handleError(e)}function DC(n,e,t,i,r){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],l=t[s++],c=e[o],d=n.data[o];vk(d,c,i,a,l,r)}}function hW(n,e,t){let i=_P(e,n);D8(n[pn],i,t)}function fW(n,e){let t=Wa(e,n),i=t[$e];pW(i,t);let r=t[zo];r!==null&&t[kf]===null&&(t[kf]=pC(r,t[id])),IC(i,t,t[Ts])}function pW(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function IC(n,e,t){oC(e);try{let i=n.viewQuery;i!==null&&C1(1,i,t);let r=n.template;r!==null&&bk(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Vo]?.finishViewCreation(n),n.staticContentQueries&&Sk(n,e),n.staticViewQueries&&C1(2,n.viewQuery,t);let s=n.components;s!==null&&gW(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[Ee]&=-5,aC()}}function gW(n,e){for(let t=0;t<e.length;t++)fW(n,e[t])}function Rk(n,e,t,i){let r=_t(null);try{let s=e.tView,a=n[Ee]&4096?4096:16,l=Ny(n,s,t,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),c=n[e.index];l[rc]=c;let d=n[Vo];return d!==null&&(l[Vo]=d.createEmbeddedView(s)),IC(s,l,t),l}finally{_t(r)}}function D1(n,e){return!e||e.firstChild===null||QP(n)}function Nk(n,e,t,i=!0){let r=e[$e];if(M8(r,e,n,t),i){let o=b1(t,n),a=e[pn],l=dk(a,n[sc]);l!==null&&S8(r,n[dr],a,e,l,o)}let s=e[kf];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function ty(n,e,t,i,r=!1){for(;t!==null;){if(t.type===128){t=r?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&i.push(to(s)),Go(s)&&mW(s,i);let o=t.type;if(o&8)ty(n,e,t.child,i);else if(o&32){let a=mC(t,e),l;for(;l=a();)i.push(l)}else if(o&16){let a=fk(e,t);if(Array.isArray(a))i.push(...a);else{let l=oc(e[Jr]);ty(l[$e],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function mW(n,e){for(let t=Ir;t<n.length;t++){let i=n[t],r=i[$e].firstChild;r!==null&&ty(i[$e],i,r,e)}n[sc]!==n[zo]&&e.push(n[sc])}var Ok=[];function _W(n){return n[Yr]??yW(n)}function yW(n){let e=Ok.pop()??Object.create(wW);return e.lView=n,e}function vW(n){n.lView[Yr]!==n&&(n.lView=null,Ok.push(n))}var wW=ke(q({},Cf),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Cy(n.lView)},consumerOnSignalRead(){this.lView[Yr]=this}});function bW(n){let e=n[Yr]??Object.create(EW);return e.lView=n,e}var EW=ke(q({},Cf),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=oc(n.lView);for(;e&&!Pk(e[$e]);)e=oc(e);e&&wP(e)},consumerOnSignalRead(){this.lView[Yr]=this}});function Pk(n){return n.type!==2}var CW=100;function kk(n,e=!0,t=0){let i=n[eo],r=i.rendererFactory,s=!1;s||r.begin?.();try{DW(n,t)}catch(o){throw e&&xk(n,o),o}finally{s||(r.end?.(),i.inlineEffectRunner?.flush())}}function DW(n,e){let t=TP();try{pO(!0),I1(n,e);let i=0;for(;Ey(n);){if(i===CW)throw new ue(103,!1);i++,I1(n,1)}}finally{pO(t)}}function IW(n,e,t,i){let r=e[Ee];if((r&256)===256)return;let s=!1,o=!1;!s&&e[eo].inlineEffectRunner?.flush(),oC(e);let a=!0,l=null,c=null;s||(Pk(n)?(c=_W(e),l=t_(c)):EN()===null?(a=!1,c=bW(e),l=t_(c)):e[Yr]&&(mE(e[Yr]),e[Yr]=null));try{vP(e),D5(n.bindingStartIndex),t!==null&&bk(n,e,t,2,i);let d=(r&3)===3;if(!s)if(d){let p=n.preOrderCheckHooks;p!==null&&F_(e,p,null)}else{let p=n.preOrderHooks;p!==null&&L_(e,p,0,null),$E(e,0)}if(o||TW(e),Fk(e,0),n.contentQueries!==null&&Sk(n,e),!s)if(d){let p=n.contentCheckHooks;p!==null&&F_(e,p)}else{let p=n.contentHooks;p!==null&&L_(e,p,1),$E(e,1)}U8(n,e);let h=n.components;h!==null&&Vk(e,h,0);let f=n.viewQuery;if(f!==null&&C1(2,f,i),!s)if(d){let p=n.viewCheckHooks;p!==null&&F_(e,p)}else{let p=n.viewHooks;p!==null&&L_(e,p,2),$E(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[UE]){for(let p of e[UE])p();e[UE]=null}s||(e[Ee]&=-73)}catch(d){throw s||Cy(e),d}finally{c!==null&&(pE(c,l),a&&vW(c)),aC()}}function Fk(n,e){for(let t=JP(n);t!==null;t=ZP(t))for(let i=Ir;i<t.length;i++){let r=t[i];Lk(r,e)}}function TW(n){for(let e=JP(n);e!==null;e=ZP(e)){if(!(e[Ee]&W_.HasTransplantedViews))continue;let t=e[rd];for(let i=0;i<t.length;i++){let r=t[i];wP(r)}}}function SW(n,e,t){let i=Wa(e,n);Lk(i,t)}function Lk(n,e){nC(n)&&I1(n,e)}function I1(n,e){let i=n[$e],r=n[Ee],s=n[Yr],o=!!(e===0&&r&16);if(o||=!!(r&64&&e===0),o||=!!(r&1024),o||=!!(s?.dirty&&gE(s)),o||=!1,s&&(s.dirty=!1),n[Ee]&=-9217,o)IW(i,n,i.template,n[Ts]);else if(r&8192){Fk(n,1);let a=i.components;a!==null&&Vk(n,a,1)}}function Vk(n,e,t){for(let i=0;i<e.length;i++)SW(n,e[i],t)}function TC(n,e){let t=TP()?64:1088;for(n[eo].changeDetectionScheduler?.notify(e);n;){n[Ee]|=t;let i=oc(n);if(o1(n)&&!i)return n;n=i}return null}var uc=class{get rootNodes(){let e=this._lView,t=e[$e];return ty(t,e,t.firstChild,[])}constructor(e,t,i=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ts]}set context(e){this._lView[Ts]=e}get destroyed(){return(this._lView[Ee]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ei];if(Go(e)){let t=e[G_],i=t?t.indexOf(this):-1;i>-1&&(w1(e,i),$_(t,i))}this._attachedToViewContainer=!1}lk(this._lView[$e],this._lView)}onDestroy(e){bP(this._lView,e)}markForCheck(){TC(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Ee]&=-129}reattach(){l1(this._lView),this._lView[Ee]|=128}detectChanges(){this._lView[Ee]|=1024,kk(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ue(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=o1(this._lView),t=this._lView[rc];t!==null&&!e&&_C(t,this._lView),ok(this._lView[$e],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ue(902,!1);this._appRef=e;let t=o1(this._lView),i=this._lView[rc];i!==null&&!t&&ak(i,this._lView),l1(this._lView)}},Uo=(()=>{class n{static{this.__NG_ELEMENT_ID__=xW}}return n})(),AW=Uo,MW=class extends AW{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){let r=Rk(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:i});return new uc(r)}};function xW(){return Py($i(),vt())}function Py(n,e){return n.type&4?new MW(e,n,pd(n,e)):null}var Wde=new RegExp(`^(\\d+)*(${d8}|${u8})*(.*)`);var RW=()=>null;function T1(n,e){return RW(n,e)}var od=class{},SC=new J("",{providedIn:"root",factory:()=>!1});var Bk=new J(""),jk=new J(""),S1=class{},ny=class{};function NW(n){let e=Error(`No component factory found for ${Vi(n)}.`);return e[OW]=n,e}var OW="ngComponent";var A1=class{resolveComponentFactory(e){throw NW(e)}},ad=class{static{this.NULL=new A1}},ld=class{},mc=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>PW()}}return n})();function PW(){let n=vt(),e=$i(),t=Wa(e.index,n);return(Ua(t)?t:n)[pn]}var kW=(()=>{class n{static{this.\u0275prov=te({token:n,providedIn:"root",factory:()=>null})}}return n})();function iy(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)r=ZE(r,a);else if(s==2){let l=a,c=e[++o];i=ZE(i,l+": "+c+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}var ry=class extends ad{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Lo(e);return new dc(t,this.ngModule)}};function AO(n,e){let t=[];for(let i in n){if(!n.hasOwnProperty(i))continue;let r=n[i];if(r===void 0)continue;let s=Array.isArray(r),o=s?r[0]:r,a=s?r[1]:$a.None;e?t.push({propName:o,templateName:i,isSignal:(a&$a.SignalBased)!==0}):t.push({propName:o,templateName:i})}return t}function FW(n){let e=n.toLowerCase();return e==="svg"?c5:e==="math"?u5:null}var dc=class extends ny{get inputs(){let e=this.componentDef,t=e.inputTransforms,i=AO(e.inputs,!0);if(t!==null)for(let r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return AO(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=UG(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let s=_t(null);try{r=r||this.ngModule;let o=r instanceof Xn?r:r?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new u1(e,o):e,l=a.get(ld,null);if(l===null)throw new ue(407,!1);let c=a.get(kW,null),d=a.get(od,null),h={rendererFactory:l,sanitizer:c,inlineEffectRunner:null,changeDetectionScheduler:d},f=l.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",y=i?z8(f,i,this.componentDef.encapsulation,a):sk(f,p,FW(p)),_=512;this.componentDef.signals?_|=4096:this.componentDef.onPush||(_|=16);let w=null;y!==null&&(w=pC(y,a,!0));let A=EC(0,null,null,1,0,null,null,null,null,null,null),x=Ny(null,A,null,_,null,null,h,f,a,null,w);oC(x);let M,R,P=null;try{let N=this.componentDef,C,b=null;N.findHostDirectiveDefs?(C=[],b=new Map,N.findHostDirectiveDefs(N,C,b),C.push(N)):C=[N];let v=LW(x,y);P=VW(v,y,N,C,x,h,f),R=yP(A,Zr),y&&UW(f,N,y,i),t!==void 0&&$W(R,this.ngContentSelectors,t),M=jW(P,N,C,b,x,[HW]),IC(A,x,null)}catch(N){throw P!==null&&y1(P),y1(x),N}finally{aC()}return new M1(this.componentType,M,pd(R,x),x,R)}finally{_t(s)}}},M1=class extends S1{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new uc(r,void 0,!1),this.componentType=e}setInput(e,t){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;DC(s[$e],s,r,e,t),this.previousInputValues.set(e,t);let o=Wa(this._tNode.index,s);TC(o,1)}}get injector(){return new ic(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function LW(n,e){let t=n[$e],i=Zr;return n[i]=e,gd(t,i,2,"#host",null)}function VW(n,e,t,i,r,s,o){let a=r[$e];BW(i,n,e,o);let l=null;e!==null&&(l=pC(e,r[id]));let c=s.rendererFactory.createRenderer(e,t),d=16;t.signals?d=4096:t.onPush&&(d=64);let h=Ny(r,Ek(t),null,d,r[n.index],n,s,c,null,null,l);return a.firstCreatePass&&E1(a,n,i.length-1),Oy(r,h),r[n.index]=h}function BW(n,e,t,i){for(let r of n)e.mergedAttrs=Of(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(iy(e,e.mergedAttrs,!0),t!==null&&mk(i,t,e))}function jW(n,e,t,i,r,s){let o=$i(),a=r[$e],l=es(o,r);Dk(a,r,o,t,null,i);for(let d=0;d<t.length;d++){let h=o.directiveStart+d,f=cc(r,a,h,o);za(f,r)}Ik(a,r,o),l&&za(l,r);let c=cc(r,a,o.directiveStart+o.componentOffset,o);if(n[Ts]=r[Ts]=c,s!==null)for(let d of s)d(c,e);return vC(a,o,r),c}function UW(n,e,t,i){if(i)n1(n,t,["ng-version","18.2.13"]);else{let{attrs:r,classes:s}=$G(e.selectors[0]);r&&n1(n,t,r),s&&s.length>0&&gk(n,t,s.join(" "))}}function $W(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let s=t[r];i.push(s!=null?Array.from(s):null)}}function HW(){let n=$i();Sy(vt()[$e],n)}var Ko=(()=>{class n{static{this.__NG_ELEMENT_ID__=zW}}return n})();function zW(){let n=$i();return $k(n,vt())}var GW=Ko,Uk=class extends GW{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return pd(this._hostTNode,this._hostLView)}get injector(){return new ic(this._hostTNode,this._hostLView)}get parentInjector(){let e=cC(this._hostTNode,this._hostLView);if(FP(e)){let t=K_(e,this._hostLView),i=q_(e),r=t[$e].data[i+8];return new ic(r,t)}else return new ic(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=MO(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ir}createEmbeddedView(e,t,i){let r,s;typeof i=="number"?r=i:i!=null&&(r=i.index,s=i.injector);let o=T1(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,r,D1(this._hostTNode,o)),a}createComponent(e,t,i,r,s){let o=e&&!s5(e),a;if(o)a=t;else{let y=t||{};a=y.index,i=y.injector,r=y.projectableNodes,s=y.environmentInjector||y.ngModuleRef}let l=o?e:new dc(Lo(e)),c=i||this.parentInjector;if(!s&&l.ngModule==null){let _=(o?c:this.parentInjector).get(Xn,null);_&&(s=_)}let d=Lo(l.componentType??{}),h=T1(this._lContainer,d?.id??null),f=h?.firstChild??null,p=l.create(c,r,f,s);return this.insertImpl(p.hostView,a,D1(this._hostTNode,h)),p}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(f5(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=r[Ei],c=new Uk(l,l[dr],l[Ei]);c.detach(c.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return Nk(o,r,s,i),e.attachToViewContainerRef(),KO(qE(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=MO(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=w1(this._lContainer,t);i&&($_(qE(this._lContainer),t),lk(i[$e],i))}detach(e){let t=this._adjustIndex(e,-1),i=w1(this._lContainer,t);return i&&$_(qE(this._lContainer),t)!=null?new uc(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function MO(n){return n[G_]}function qE(n){return n[G_]||(n[G_]=[])}function $k(n,e){let t,i=e[n.index];return Go(i)?t=i:(t=Tk(i,e,null,n),e[n.index]=t,Oy(e,t)),qW(t,e,n,i),new Uk(t,n,e)}function WW(n,e){let t=n[pn],i=t.createComment(""),r=es(e,n),s=dk(t,r);return ey(t,s,i,O8(t,r),!1),i}var qW=YW,KW=()=>!1;function QW(n,e,t){return KW(n,e,t)}function YW(n,e,t,i){if(n[sc])return;let r;t.type&8?r=to(i):r=WW(e,t),n[sc]=r}var x1=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},R1=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let i=e.contentQueries!==null?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)AC(e,t).matches!==null&&this.queries[t].setDirty()}},N1=class{constructor(e,t,i=null){this.flags=t,this.read=i,typeof e=="string"?this.predicate=r9(e):this.predicate=e}},O1=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){let r=t!==null?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},P1=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let s=i[r];this.matchTNodeWithReadOption(e,t,JW(t,s)),this.matchTNodeWithReadOption(e,t,V_(t,e,s,!1,!1))}else i===Uo?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,V_(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===Ci||r===Ko||r===Uo&&t.type&4)this.addMatch(t.index,-2);else{let s=V_(t,e,r,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function JW(n,e){let t=n.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1]}return null}function ZW(n,e){return n.type&11?pd(n,e):n.type&4?Py(n,e):null}function XW(n,e,t,i){return t===-1?ZW(e,n):t===-2?e9(n,e,i):cc(n,n[$e],t,e)}function e9(n,e,t){if(t===Ci)return pd(e,n);if(t===Uo)return Py(e,n);if(t===Ko)return $k(e,n)}function Hk(n,e,t,i){let r=e[Vo].queries[i];if(r.matches===null){let s=n.data,o=t.matches,a=[];for(let l=0;o!==null&&l<o.length;l+=2){let c=o[l];if(c<0)a.push(null);else{let d=s[c];a.push(XW(e,d,o[l+1],t.metadata.read))}}r.matches=a}return r.matches}function k1(n,e,t,i){let r=n.queries.getByIndex(t),s=r.matches;if(s!==null){let o=Hk(n,e,r,t);for(let a=0;a<s.length;a+=2){let l=s[a];if(l>0)i.push(o[a/2]);else{let c=s[a+1],d=e[-l];for(let h=Ir;h<d.length;h++){let f=d[h];f[rc]===f[Ei]&&k1(f[$e],f,c,i)}if(d[rd]!==null){let h=d[rd];for(let f=0;f<h.length;f++){let p=h[f];k1(p[$e],p,c,i)}}}}}return i}function t9(n,e){return n[Vo].queries[e].queryList}function n9(n,e,t){let i=new _1((t&4)===4);return q8(n,e,i,i.destroy),(e[Vo]??=new R1).queries.push(new x1(i))-1}function i9(n,e,t){let i=Un();return i.firstCreatePass&&(s9(i,new N1(n,e,t),-1),(e&2)===2&&(i.staticViewQueries=!0)),n9(i,vt(),e)}function r9(n){return n.split(",").map(e=>e.trim())}function s9(n,e,t){n.queries===null&&(n.queries=new O1),n.queries.track(new P1(e,t))}function AC(n,e){return n.queries.getByIndex(e)}function o9(n,e){let t=n[$e],i=AC(t,e);return i.crossesNgTemplate?k1(t,n,e,[]):Hk(t,n,i,e)}var xO=new Set;function md(n){xO.has(n)||(xO.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function a9(n){return typeof n=="function"&&n[No]!==void 0}function ky(n,e){md("NgSignals");let t=ON(n),i=t[No];return e?.equal&&(i.equal=e.equal),t.set=r=>_E(i,r),t.update=r=>PN(i,r),t.asReadonly=l9.bind(t),t}function l9(){let n=this[No];if(n.readonlyFn===void 0){let e=()=>this();e[No]=n,n.readonlyFn=e}return n.readonlyFn}function zk(n){return a9(n)&&typeof n.set=="function"}function c9(n){let e=[],t=new Map;function i(r){let s=t.get(r);if(!s){let o=n(r);t.set(r,s=o.then(f9))}return s}return sy.forEach((r,s)=>{let o=[];r.templateUrl&&o.push(i(r.templateUrl).then(c=>{r.template=c}));let a=typeof r.styles=="string"?[r.styles]:r.styles||[];if(r.styles=a,r.styleUrl&&r.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(r.styleUrls?.length){let c=r.styles.length,d=r.styleUrls;r.styleUrls.forEach((h,f)=>{a.push(""),o.push(i(h).then(p=>{a[c+f]=p,d.splice(d.indexOf(h),1),d.length==0&&(r.styleUrls=void 0)}))})}else r.styleUrl&&o.push(i(r.styleUrl).then(c=>{a.push(c),r.styleUrl=void 0}));let l=Promise.all(o).then(()=>p9(s));e.push(l)}),d9(),Promise.all(e).then(()=>{})}var sy=new Map,u9=new Set;function d9(){let n=sy;return sy=new Map,n}function h9(){return sy.size===0}function f9(n){return typeof n=="string"?n:n.text()}function p9(n){u9.delete(n)}function g9(n){return Object.getPrototypeOf(n.prototype).constructor}function _c(n){let e=g9(n.type),t=!0,i=[n];for(;e;){let r;if(Ha(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ue(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);let o=n;o.inputs=R_(n.inputs),o.inputTransforms=R_(n.inputTransforms),o.declaredInputs=R_(n.declaredInputs),o.outputs=R_(n.outputs);let a=r.hostBindings;a&&w9(n,a);let l=r.viewQuery,c=r.contentQueries;if(l&&y9(n,l),c&&v9(n,c),m9(n,r),sG(n.outputs,r.outputs),Ha(r)&&r.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(r.data.animation)}}let s=r.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===_c&&(t=!1)}}e=Object.getPrototypeOf(e)}_9(i)}function m9(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let i=e.inputs[t];if(i!==void 0&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;n.inputTransforms??={},n.inputTransforms[r]=e.inputTransforms[r]}}}function _9(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Of(r.hostAttrs,t=Of(t,r.hostAttrs))}}function R_(n){return n===ed?{}:n===ur?[]:n}function y9(n,e){let t=n.viewQuery;t?n.viewQuery=(i,r)=>{e(i,r),t(i,r)}:n.viewQuery=e}function v9(n,e){let t=n.contentQueries;t?n.contentQueries=(i,r,s)=>{e(i,r,s),t(i,r,s)}:n.contentQueries=e}function w9(n,e){let t=n.hostBindings;t?n.hostBindings=(i,r)=>{e(i,r),t(i,r)}:n.hostBindings=e}var Ga=class{},Lf=class{};var oy=class extends Ga{constructor(e,t,i,r=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ry(this);let s=iP(e);this._bootstrapComponents=rk(s.bootstrap),this._r3Injector=GP(e,t,[{provide:Ga,useValue:this},{provide:ad,useValue:this.componentFactoryResolver},...i],Vi(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},ay=class extends Lf{constructor(e){super(),this.moduleType=e}create(e){return new oy(this.moduleType,e,[])}};function b9(n,e,t){return new oy(n,e,t,!1)}var F1=class extends Ga{constructor(e){super(),this.componentFactoryResolver=new ry(this),this.instance=null;let t=new Pf([...e.providers,{provide:Ga,useValue:this},{provide:ad,useValue:this.componentFactoryResolver}],e.parent||yy(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Fy(n,e,t=null){return new F1({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function Gk(n){return C9(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function E9(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),i;for(;!(i=t.next()).done;)e(i.value)}}function C9(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function D9(n,e,t){return n[e]=t}function yc(n,e,t){let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function I9(n){return(n.flags&32)===32}function T9(n,e,t,i,r,s,o,a,l){let c=e.consts,d=gd(e,n,4,o||null,a||null);CC(e,t,d,sd(c,l)),Sy(e,d);let h=d.tView=EC(2,d,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,d),h.queries=e.queries.embeddedTView(d)),d}function Wk(n,e,t,i,r,s,o,a,l,c){let d=t+Zr,h=e.firstCreatePass?T9(d,e,n,i,r,s,o,a,l):e.data[d];pc(h,!1);let f=S9(e,n,h,t);Iy()&&xy(e,n,f,h),za(f,n);let p=Tk(f,n,f,h);return n[d]=p,Oy(n,p),QW(p,h,n),by(h)&&wC(e,n,h),l!=null&&bC(n,h,c),h}function ei(n,e,t,i,r,s,o,a){let l=vt(),c=Un(),d=sd(c.consts,s);return Wk(l,c,n,e,t,i,r,d,o,a),ei}var S9=A9;function A9(n,e,t,i){return Ty(!0),e[pn].createComment("")}var Yu=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Yu||{}),qk=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=te({token:n,providedIn:"root",factory:()=>new n})}}return n})(),L1=class n{constructor(){this.ngZone=H(Fe),this.scheduler=H(od),this.errorHandler=H(Bo,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Yu.EarlyRead,Yu.Write,Yu.MixedReadWrite,Yu.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(i){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=te({token:n,providedIn:"root",factory:()=>new n})}},V1=class{constructor(e,t,i,r){this.impl=e,this.hooks=t,this.once=i,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=r?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function MC(n,e){!e?.injector&&i5(MC);let t=e?.injector??H(di);return b8(t)?(md("NgAfterNextRender"),x9(n,t,e,!0)):R9}function M9(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function x9(n,e,t,i){let r=e.get(qk);r.impl??=e.get(L1);let s=t?.phase??Yu.MixedReadWrite,o=t?.manualCleanup!==!0?e.get(Ay):null,a=new V1(r.impl,M9(n,s),i,o);return r.impl.register(a),a}var R9={destroy(){}};function $f(n,e,t,i){let r=vt(),s=Dy();if(yc(r,s,e)){let o=Un(),a=lC();lW(a,r,n,e,t,i)}return $f}function N9(n,e,t,i){return yc(n,Dy(),t)?e+py(t)+i:qo}function N_(n,e){return n<<17|e<<2}function hc(n){return n>>17&32767}function O9(n){return(n&2)==2}function P9(n,e){return n&131071|e<<17}function B1(n){return n|2}function cd(n){return(n&131068)>>2}function KE(n,e){return n&-131069|e<<2}function k9(n){return(n&1)===1}function j1(n){return n|1}function F9(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=hc(o),l=cd(o);n[i]=t;let c=!1,d;if(Array.isArray(t)){let h=t;d=h[1],(d===null||jf(h,d)>0)&&(c=!0)}else d=t;if(r)if(l!==0){let f=hc(n[a+1]);n[i+1]=N_(f,a),f!==0&&(n[f+1]=KE(n[f+1],i)),n[a+1]=P9(n[a+1],i)}else n[i+1]=N_(a,0),a!==0&&(n[a+1]=KE(n[a+1],i)),a=i;else n[i+1]=N_(l,0),a===0?a=i:n[l+1]=KE(n[l+1],i),l=i;c&&(n[i+1]=B1(n[i+1])),RO(n,d,i,!0),RO(n,d,i,!1),L9(e,d,n,i,s),o=N_(a,l),s?e.classBindings=o:e.styleBindings=o}function L9(n,e,t,i,r){let s=r?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&jf(s,e)>=0&&(t[i+1]=j1(t[i+1]))}function RO(n,e,t,i){let r=n[t+1],s=e===null,o=i?hc(r):cd(r),a=!1;for(;o!==0&&(a===!1||s);){let l=n[o],c=n[o+1];V9(l,e)&&(a=!0,n[o+1]=i?j1(c):B1(c)),o=i?hc(c):cd(c)}a&&(n[t+1]=i?B1(r):j1(r))}function V9(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?jf(n,e)>=0:!1}var Ds={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function B9(n){return n.substring(Ds.key,Ds.keyEnd)}function j9(n){return U9(n),Kk(n,Qk(n,0,Ds.textEnd))}function Kk(n,e){let t=Ds.textEnd;return t===e?-1:(e=Ds.keyEnd=$9(n,Ds.key=e,t),Qk(n,e,t))}function U9(n){Ds.key=0,Ds.keyEnd=0,Ds.value=0,Ds.valueEnd=0,Ds.textEnd=n.length}function Qk(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function $9(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function Ae(n,e,t){let i=vt(),r=Dy();if(yc(i,r,e)){let s=Un(),o=lC();Ck(s,o,i,n,e,i[pn],t,!1)}return Ae}function U1(n,e,t,i,r){let s=e.inputs,o=r?"class":"style";DC(n,t,s[o],o,i)}function _d(n,e){return z9(n,e,null,!0),_d}function Qo(n){G9(J9,H9,n,!0)}function H9(n,e){for(let t=j9(e);t>=0;t=Kk(e,t))Z1(n,B9(e),!0)}function z9(n,e,t,i){let r=vt(),s=Un(),o=SP(2);if(s.firstUpdatePass&&Jk(s,n,o,i),e!==qo&&yc(r,o,e)){let a=s.data[gc()];Zk(s,a,r,r[pn],n,r[o+1]=X9(e,t),i,o)}}function G9(n,e,t,i){let r=Un(),s=SP(2);r.firstUpdatePass&&Jk(r,null,s,i);let o=vt();if(t!==qo&&yc(o,s,t)){let a=r.data[gc()];if(Xk(a,i)&&!Yk(r,s)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(t=ZE(l,t||"")),U1(r,a,o,t,i)}else Z9(r,a,o,o[pn],o[s+1],o[s+1]=Y9(n,e,t),i,s)}}function Yk(n,e){return e>=n.expandoStartIndex}function Jk(n,e,t,i){let r=n.data;if(r[t+1]===null){let s=r[gc()],o=Yk(n,t);Xk(s,i)&&e===null&&!o&&(e=!1),e=W9(r,s,e,i),F9(r,s,e,t,o,i)}}function W9(n,e,t,i){let r=A5(n),s=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=QE(null,n,e,t,i),t=Vf(t,e.attrs,i),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==r)if(t=QE(r,n,e,t,i),s===null){let l=q9(n,e,i);l!==void 0&&Array.isArray(l)&&(l=QE(null,n,e,l[1],i),l=Vf(l,e.attrs,i),K9(n,e,i,l))}else s=Q9(n,e,i)}return s!==void 0&&(i?e.residualClasses=s:e.residualStyles=s),t}function q9(n,e,t){let i=t?e.classBindings:e.styleBindings;if(cd(i)!==0)return n[hc(i)]}function K9(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[hc(r)]=i}function Q9(n,e,t){let i,r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++){let o=n[s].hostAttrs;i=Vf(i,o,t)}return Vf(i,e.attrs,t)}function QE(n,e,t,i,r){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],i=Vf(i,s.hostAttrs,r),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),i}function Vf(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?r=o:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Z1(n,o,t?!0:e[++s]))}return n===void 0?null:n}function Y9(n,e,t){if(t==null||t==="")return ur;let i=[],r=Uf(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if(typeof r=="object")for(let s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else typeof r=="string"&&e(i,r);return i}function J9(n,e,t){let i=String(e);i!==""&&!i.includes(" ")&&Z1(n,i,t)}function Z9(n,e,t,i,r,s,o,a){r===qo&&(r=ur);let l=0,c=0,d=0<r.length?r[0]:null,h=0<s.length?s[0]:null;for(;d!==null||h!==null;){let f=l<r.length?r[l+1]:void 0,p=c<s.length?s[c+1]:void 0,y=null,_;d===h?(l+=2,c+=2,f!==p&&(y=h,_=p)):h===null||d!==null&&d<h?(l+=2,y=d):(c+=2,y=h,_=p),y!==null&&Zk(n,e,t,i,y,_,o,a),d=l<r.length?r[l]:null,h=c<s.length?s[c]:null}}function Zk(n,e,t,i,r,s,o,a){if(!(e.type&3))return;let l=n.data,c=l[a+1],d=k9(c)?NO(l,e,t,r,cd(c),o):void 0;if(!ly(d)){ly(s)||O9(c)&&(s=NO(l,null,t,r,a,o));let h=_P(gc(),t);B8(i,o,h,r,s)}}function NO(n,e,t,i,r,s){let o=e===null,a;for(;r>0;){let l=n[r],c=Array.isArray(l),d=c?l[1]:l,h=d===null,f=t[r+1];f===qo&&(f=h?ur:void 0);let p=h?BE(f,i):d===i?f:void 0;if(c&&!ly(p)&&(p=BE(l,i)),ly(p)&&(a=p,o))return a;let y=n[r+1];r=o?hc(y):cd(y)}if(e!==null){let l=s?e.residualClasses:e.residualStyles;l!=null&&(a=BE(l,i))}return a}function ly(n){return n!==void 0}function X9(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Vi(Uf(n)))),n}function Xk(n,e){return(n.flags&(e?8:16))!==0}function eq(n,e,t,i,r,s){let o=e.consts,a=sd(o,r),l=gd(e,n,2,i,a);return CC(e,t,l,sd(o,s)),l.attrs!==null&&iy(l,l.attrs,!1),l.mergedAttrs!==null&&iy(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function $(n,e,t,i){let r=vt(),s=Un(),o=Zr+n,a=r[pn],l=s.firstCreatePass?eq(o,s,r,e,t,i):s.data[o],c=tq(s,r,l,a,e,n);r[o]=c;let d=by(l);return pc(l,!0),mk(a,c,l),!I9(l)&&Iy()&&xy(s,r,c,l),m5()===0&&za(c,r),_5(),d&&(wC(s,r,l),vC(s,l,r)),i!==null&&bC(r,l),$}function j(){let n=$i();iC()?rC():(n=n.parent,pc(n,!1));let e=n;v5(e)&&w5(),y5();let t=Un();return t.firstCreatePass&&(Sy(t,n),tC(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&k5(e)&&U1(t,e,vt(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&F5(e)&&U1(t,e,vt(),e.stylesWithoutHost,!1),j}function Me(n,e,t,i){return $(n,e,t,i),j(),Me}var tq=(n,e,t,i,r,s)=>(Ty(!0),sk(i,r,R5()));function nq(n,e,t,i,r){let s=e.consts,o=sd(s,i),a=gd(e,n,8,"ng-container",o);o!==null&&iy(a,o,!0);let l=sd(s,r);return CC(e,t,a,l),e.queries!==null&&e.queries.elementStart(e,a),a}function Hf(n,e,t){let i=vt(),r=Un(),s=n+Zr,o=r.firstCreatePass?nq(s,r,i,e,t):r.data[s];pc(o,!0);let a=iq(r,i,o,n);return i[s]=a,Iy()&&xy(r,i,a,o),za(a,i),by(o)&&(wC(r,i,o),vC(r,o,i)),t!=null&&bC(i,o),Hf}function zf(){let n=$i(),e=Un();return iC()?rC():(n=n.parent,pc(n,!1)),e.firstCreatePass&&(Sy(e,n),tC(n)&&e.queries.elementEnd(n)),zf}var iq=(n,e,t,i)=>(Ty(!0),I8(e[pn],""));function hr(){return vt()}var cy="en-US";var rq=cy;function sq(n){typeof n=="string"&&(rq=n.toLowerCase().replace(/_/g,"-"))}var oq=(n,e,t)=>{};function hi(n,e,t,i){let r=vt(),s=Un(),o=$i();return eF(s,r,r[pn],o,n,e,i),hi}function aq(n,e,t,i){let r=n.cleanup;if(r!=null)for(let s=0;s<r.length-1;s+=2){let o=r[s];if(o===t&&r[s+1]===i){let a=e[z_],l=r[s+2];return a.length>l?a[l]:null}typeof o=="string"&&(s+=2)}return null}function eF(n,e,t,i,r,s,o){let a=by(i),c=n.firstCreatePass&&Mk(n),d=e[Ts],h=Ak(e),f=!0;if(i.type&3||o){let _=es(i,e),w=o?o(_):_,A=h.length,x=o?R=>o(to(R[i.index])):i.index,M=null;if(!o&&a&&(M=aq(n,e,r,i.index)),M!==null){let R=M.__ngLastListenerFn__||M;R.__ngNextListenerFn__=s,M.__ngLastListenerFn__=s,f=!1}else{s=PO(i,e,d,s),oq(_,r,s);let R=t.listen(w,r,s);h.push(s,R),c&&c.push(r,x,A,A+1)}}else s=PO(i,e,d,s);let p=i.outputs,y;if(f&&p!==null&&(y=p[r])){let _=y.length;if(_)for(let w=0;w<_;w+=2){let A=y[w],x=y[w+1],P=e[A][x].subscribe(s),N=h.length;h.push(s,P),c&&c.push(r,i.index,N,-(N+1))}}}function OO(n,e,t,i){let r=_t(null);try{return Js(6,e,t),t(i)!==!1}catch(s){return xk(n,s),!1}finally{Js(7,e,t),_t(r)}}function PO(n,e,t,i){return function r(s){if(s===Function)return i;let o=n.componentOffset>-1?Wa(n.index,e):e;TC(o,5);let a=OO(e,t,i,s),l=r.__ngNextListenerFn__;for(;l;)a=OO(e,t,l,s)&&a,l=l.__ngNextListenerFn__;return a}}function rt(n=1){return x5(n)}function lq(n,e){let t=null,i=FG(n);for(let r=0;r<e.length;r++){let s=e[r];if(s==="*"){t=r;continue}if(i===null?XO(n,s,!0):BG(i,s))return r}return t}function tF(n){let e=vt()[Jr][dr];if(!e.projection){let t=n?n.length:1,i=e.projection=TG(t,null),r=i.slice(),s=e.child;for(;s!==null;){if(s.type!==128){let o=n?lq(s,n):0;o!==null&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s)}s=s.next}}}function nF(n,e=0,t,i,r,s){let o=vt(),a=Un(),l=i?n+1:null;l!==null&&Wk(o,a,l,i,r,s,null,t);let c=gd(a,Zr+n,16,null,t||null);c.projection===null&&(c.projection=e),rC();let h=!o[kf]||DP();o[Jr][dr].projection[c.projection]===null&&l!==null?cq(o,a,l):h&&(c.flags&32)!==32&&L8(a,o,c)}function cq(n,e,t){let i=Zr+t,r=e.data[i],s=n[i],o=T1(s,r.tView.ssrId),a=Rk(n,r,void 0,{dehydratedView:o});Nk(s,a,0,D1(r,o))}function iF(n,e,t){i9(n,e,t)}function xC(n){let e=vt(),t=Un(),i=AP();sC(i+1);let r=AC(t,i);if(n.dirty&&h5(e)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let s=o9(e,i);n.reset(s,i8),n.notifyOnChanges()}return!0}return!1}function RC(){return t9(vt(),AP())}function Ly(n){let e=E5();return d5(e,Zr+n)}function Q(n,e=""){let t=vt(),i=Un(),r=n+Zr,s=i.firstCreatePass?gd(i,r,1,e,null):i.data[r],o=uq(i,t,s,e,n);t[r]=o,Iy()&&xy(i,t,o,s),pc(s,!1)}var uq=(n,e,t,i,r)=>(Ty(!0),C8(e[pn],i));function fr(n){return qa("",n,""),fr}function qa(n,e,t){let i=vt(),r=N9(i,n,e,t);return r!==qo&&hW(i,gc(),r),qa}function yd(n,e,t){zk(e)&&(e=e());let i=vt(),r=Dy();if(yc(i,r,e)){let s=Un(),o=lC();Ck(s,o,i,n,e,i[pn],t,!1)}return yd}function Gf(n,e){let t=zk(n);return t&&n.set(e),t}function vd(n,e){let t=vt(),i=Un(),r=$i();return eF(i,t,t[pn],r,n,e),vd}function dq(n,e,t){let i=Un();if(i.firstCreatePass){let r=Ha(n);$1(t,i.data,i.blueprint,r,!0),$1(e,i.data,i.blueprint,r,!1)}}function $1(n,e,t,i,r){if(n=Li(n),Array.isArray(n))for(let s=0;s<n.length;s++)$1(n[s],e,t,i,r);else{let s=Un(),o=vt(),a=$i(),l=nd(n)?n:Li(n.provide),c=cP(n),d=a.providerIndexes&1048575,h=a.directiveStart,f=a.providerIndexes>>20;if(nd(n)||!n.multi){let p=new lc(c,r,lt),y=JE(l,e,r?d:d+f,h);y===-1?(h1(Q_(a,o),s,l),YE(s,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(p),o.push(p)):(t[y]=p,o[y]=p)}else{let p=JE(l,e,d+f,h),y=JE(l,e,d,d+f),_=p>=0&&t[p],w=y>=0&&t[y];if(r&&!w||!r&&!_){h1(Q_(a,o),s,l);let A=pq(r?fq:hq,t.length,r,i,c);!r&&w&&(t[y].providerFactory=A),YE(s,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(A),o.push(A)}else{let A=rF(t[r?y:p],c,!r&&i);YE(s,n,p>-1?p:y,A)}!r&&i&&w&&t[y].componentProviders++}}}function YE(n,e,t,i){let r=nd(e),s=YG(e);if(r||s){let l=(s?Li(e.useClass):e).prototype.ngOnDestroy;if(l){let c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let d=c.indexOf(t);d===-1?c.push(t,[i,l]):c[d+1].push(i,l)}else c.push(t,l)}}}function rF(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function JE(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function hq(n,e,t,i){return H1(this.multi,[])}function fq(n,e,t,i){let r=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=cc(t,t[$e],this.providerFactory.index,i);s=a.slice(0,o),H1(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],H1(r,s);return s}function H1(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function pq(n,e,t,i,r){let s=new lc(n,t,lt);return s.multi=[],s.index=e,s.componentProviders=0,rF(s,r,i&&!t),s}function Vy(n,e=[]){return t=>{t.providersResolver=(i,r)=>dq(i,r?r(n):n,e)}}var gq=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=oP(!1,t.type),r=i.length>0?Fy([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=te({token:n,providedIn:"environment",factory:()=>new n(z(Xn))})}}return n})();function Wf(n){md("NgStandalone"),n.getStandaloneInjector=e=>e.get(gq).getOrCreateStandaloneInjector(n)}function By(n,e,t,i){return _q(vt(),C5(),n,e,t,i)}function mq(n,e){let t=n[e];return t===qo?void 0:t}function _q(n,e,t,i,r,s){let o=e+t;return yc(n,o,r)?D9(n,o+1,s?i.call(s,r):i(r)):mq(n,o+1)}function jy(n,e){return Py(n,e)}var O_=null;function yq(n){O_!==null&&(n.defaultEncapsulation!==O_.defaultEncapsulation||n.preserveWhitespaces!==O_.preserveWhitespaces)||(O_=n)}var $o=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},sF=new $o("18.2.13");var Uy=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var NC=new J(""),qf=new J(""),$y=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,OC||(vq(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Fe.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(t)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t()},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}static{this.\u0275fac=function(i){return new(i||n)(z(Fe),z(Hy),z(qf))}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac})}}return n})(),Hy=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return OC?.findTestabilityInTree(this,t,i)??null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function vq(n){OC=n}var OC;function vc(n){return!!n&&typeof n.then=="function"}function oF(n){return!!n&&typeof n.subscribe=="function"}var zy=new J(""),aF=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=H(zy,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let r of this.appInits){let s=r();if(vc(s))t.push(s);else if(oF(s)){let o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),t.length===0&&i(),this.initialized=!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Gy=new J("");function wq(){NN(()=>{throw new ue(600,!1)})}function bq(n){return n.isBoundToModule}var Eq=10;function Cq(n,e,t){try{let i=t();return vc(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}function lF(n,e){return Array.isArray(e)?e.reduce(lF,n):q(q({},n),e)}var Ss=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=H(t8),this.afterRenderManager=H(qk),this.zonelessEnabled=H(SC),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new yt,this.afterTick=new yt,this.componentTypes=[],this.components=[],this.isStable=H(Wo).hasPendingTasks.pipe(ne(t=>!t)),this._injector=H(Xn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,i){let r=t instanceof ny;if(!this._injector.get(aF).done){let f=!r&&nP(t),p=!1;throw new ue(405,p)}let o;r?o=t:o=this._injector.get(ad).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let a=bq(o)?void 0:this._injector.get(Ga),l=i||o.selector,c=o.create(di.NULL,[],l,a),d=c.location.nativeElement,h=c.injector.get(NC,null);return h?.registerApplication(d),c.onDestroy(()=>{this.detachView(c.hostView),B_(this.components,c),h?.unregisterApplication(d)}),this._loadComponent(c),c}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new ue(101,!1);let t=_t(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,_t(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(ld,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<Eq;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:r,notifyErrorHandler:s}of this._views)Dq(r,s,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Ey(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;B_(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let i=this._injector.get(Gy,[]);[...this._bootstrapListeners,...i].forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>B_(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ue(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function B_(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Dq(n,e,t,i){if(!t&&!Ey(n))return;kk(n,e,t&&!i?0:1)}var z1=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Wy=(()=>{class n{compileModuleSync(t){return new ay(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let i=this.compileModuleSync(t),r=iP(t),s=rk(r.declarations).reduce((o,a)=>{let l=Lo(a);return l&&o.push(new dc(l)),o},[]);return new z1(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Iq=new J("");function Tq(n,e,t){let i=new ay(t);return Promise.resolve(i)}function kO(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var Sq=(()=>{class n{constructor(){this.zone=H(Fe),this.changeDetectionScheduler=H(od),this.applicationRef=H(Ss)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Aq({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Fe(ke(q({},cF()),{scheduleInRootZone:t})),[{provide:Fe,useFactory:n},{provide:td,multi:!0,useFactory:()=>{let i=H(Sq,{optional:!0});return()=>i.initialize()}},{provide:td,multi:!0,useFactory:()=>{let i=H(Mq);return()=>{i.initialize()}}},e===!0?{provide:Bk,useValue:!0}:[],{provide:jk,useValue:t??WP}]}function cF(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var Mq=(()=>{class n{constructor(){this.subscription=new hn,this.initialized=!1,this.zone=H(Fe),this.pendingTasks=H(Wo)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Fe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Fe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var xq=(()=>{class n{constructor(){this.appRef=H(Ss),this.taskService=H(Wo),this.ngZone=H(Fe),this.zonelessEnabled=H(SC),this.disableScheduling=H(Bk,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new hn,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(J_):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(H(jk,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Z_||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?wO:qP;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(J_+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(t),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,wO(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Rq(){return typeof $localize<"u"&&$localize.locale||cy}var qy=new J("",{providedIn:"root",factory:()=>H(qy,ze.Optional|ze.SkipSelf)||Rq()});var uy=new J("");function P_(n){return!n.moduleRef}function Nq(n){let e=P_(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Fe);return t.run(()=>{P_(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=e.get(Bo,null),r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:s=>{i.handleError(s)}})}),P_(n)){let s=()=>e.destroy(),o=n.platformInjector.get(uy);o.add(s),e.onDestroy(()=>{r.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(uy);o.add(s),n.moduleRef.onDestroy(()=>{B_(n.allPlatformModules,n.moduleRef),r.unsubscribe(),o.delete(s)})}return Cq(i,t,()=>{let s=e.get(aF);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(qy,cy);if(sq(o||cy),P_(n)){let a=e.get(Ss);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return Oq(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function Oq(n,e){let t=n.injector.get(Ss);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>t.bootstrap(i));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new ue(-403,!1);e.push(n)}var uF=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){let r=i?.scheduleInRootZone,s=()=>e8(i?.ngZone,ke(q({},cF({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing})),{scheduleInRootZone:r})),o=i?.ignoreChangesOutsideZone,a=[Aq({ngZoneFactory:s,ignoreChangesOutsideZone:o}),{provide:od,useExisting:xq}],l=b9(t.moduleType,this.injector,a);return Nq({moduleRef:l,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,i=[]){let r=lF({},i);return Tq(this.injector,r,t).then(s=>this.bootstrapModuleFactory(s,r))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ue(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let t=this._injector.get(uy,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(i){return new(i||n)(z(di))}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),Rf=null,dF=new J("");function Pq(n){if(Rf&&!Rf.get(dF,!1))throw new ue(400,!1);wq(),Rf=n;let e=n.get(uF);return Lq(n),e}function PC(n,e,t=[]){let i=`Platform: ${e}`,r=new J(i);return(s=[])=>{let o=hF();if(!o||o.injector.get(dF,!1)){let a=[...t,...s,{provide:r,useValue:!0}];n?n(a):Pq(kq(a,i))}return Fq(r)}}function kq(n=[],e){return di.create({name:e,providers:[{provide:_y,useValue:"platform"},{provide:uy,useValue:new Set([()=>Rf=null])},...n]})}function Fq(n){let e=hF();if(!e)throw new ue(401,!1);return e}function hF(){return Rf?.get(uF)??null}function Lq(n){n.get(hC,null)?.forEach(t=>t())}function kC(){return!1}var Yo=(()=>{class n{static{this.__NG_ELEMENT_ID__=Vq}}return n})();function Vq(n){return Bq($i(),vt(),(n&16)===16)}function Bq(n,e,t){if(wy(n)&&!t){let i=Wa(n.index,e);return new uc(i,i)}else if(n.type&175){let i=e[Jr];return new uc(i,e)}return null}var G1=class{constructor(){}supports(e){return Gk(e)}create(e){return new W1(e)}},jq=(n,e)=>e,W1=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||jq}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){let o=!i||t&&t.currentIndex<FO(i,r,s)?t:i,a=FO(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,o.previousIndex==null)r++;else{s||(s=[]);let c=a-r,d=l-r;if(c!=d){for(let f=0;f<c;f++){let p=f<s.length?s[f]:s[f]=0,y=p+f;d<=y&&y<c&&(s[f]=p+1)}let h=o.previousIndex;s[h]=d-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!Gk(e))throw new ue(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,i=!1,r,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),i=!0):(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else r=0,E9(e,a=>{o=this._trackByFn(r,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,r),i=!0):(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new q1(t,i),s,r)),e}_verifyReinsertion(e,t,i,r){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return s!==null?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,s=e._nextRemoved;return r===null?this._removalsHead=s:r._nextRemoved=s,s===null?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){let r=t===null?this._itHead:t._next;return e._next=r,e._prev=t,r===null?this._itTail=e:r._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new dy),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,i=e._next;return t===null?this._itHead=i:t._next=i,i===null?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new dy),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},q1=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},K1=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;i!==null;i=i._nextDup)if((t===null||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let t=e._prevDup,i=e._nextDup;return t===null?this._head=i:t._nextDup=i,i===null?this._tail=t:i._prevDup=t,this._head===null}},dy=class{constructor(){this.map=new Map}put(e){let t=e.trackById,i=this.map.get(t);i||(i=new K1,this.map.set(t,i)),i.add(e)}get(e,t){let i=e,r=this.map.get(i);return r?r.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function FO(n,e,t){let i=n.previousIndex;if(i===null)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function LO(){return new FC([new G1])}var FC=(()=>{class n{static{this.\u0275prov=te({token:n,providedIn:"root",factory:LO})}constructor(t){this.factories=t}static create(t,i){if(i!=null){let r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||LO()),deps:[[n,new Y1,new dd]]}}find(t){let i=this.factories.find(r=>r.supports(t));if(i!=null)return i;throw new ue(901,!1)}}return n})();var fF=PC(null,"core",[]),pF=(()=>{class n{constructor(t){}static{this.\u0275fac=function(i){return new(i||n)(z(Ss))}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Ne({})}}return n})();function Ky(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Qy(n,e){md("NgSignals");let t=MN(n);return e?.equal&&(t[No].equal=e.equal),t}function Ka(n){let e=_t(null);try{return n()}finally{_t(e)}}function Yy(n,e){let t=Lo(n),i=e.elementInjector||yy();return new dc(t).create(i,e.projectableNodes,e.hostElement,e.environmentInjector)}function gF(n){let e=Lo(n);if(!e)return null;let t=new dc(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var EF=null;function no(){return EF}function CF(n){EF??=n}var Jy=class{};var Rn=new J(""),$C=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=te({token:n,factory:()=>H(zq),providedIn:"platform"})}}return n})(),DF=new J(""),zq=(()=>{class n extends $C{constructor(){super(),this._doc=H(Rn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return no().getBaseHref(this._doc)}onPopState(t){let i=no().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){let i=no().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=te({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function HC(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function mF(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,i=t-(n[t-1]==="/"?1:0);return n.slice(0,i)+n.slice(t)}function Jo(n){return n&&n[0]!=="?"?"?"+n:n}var wc=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=te({token:n,factory:()=>H(zC),providedIn:"root"})}}return n})(),IF=new J(""),zC=(()=>{class n extends wc{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??H(Rn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return HC(this._baseHref,t)}path(t=!1){let i=this._platformLocation.pathname+Jo(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+Jo(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+Jo(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(i){return new(i||n)(z($C),z(IF,8))}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),TF=(()=>{class n extends wc{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(t){let i=HC(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+Jo(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+Jo(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(i){return new(i||n)(z($C),z(IF,8))}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac})}}return n})(),bd=(()=>{class n{constructor(t){this._subject=new en,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let i=this._locationStrategy.getBaseHref();this._basePath=qq(mF(_F(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Jo(i))}normalize(t){return n.stripTrailingSlash(Wq(this._basePath,_F(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Jo(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Jo(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}static{this.normalizeQueryParams=Jo}static{this.joinWithSlash=HC}static{this.stripTrailingSlash=mF}static{this.\u0275fac=function(i){return new(i||n)(z(wc))}}static{this.\u0275prov=te({token:n,factory:()=>Gq(),providedIn:"root"})}}return n})();function Gq(){return new bd(z(wc))}function Wq(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function _F(n){return n.replace(/\/index.html$/,"")}function qq(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function Zy(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,s]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}var LC=/\s+/,yF=[],SF=(()=>{class n{constructor(t,i){this._ngEl=t,this._renderer=i,this.initialClasses=yF,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(LC):yF}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(LC):t}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let i of t)this._updateState(i,!0);else if(t!=null)for(let i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){let r=this.stateMap.get(t);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){t=t.trim(),t.length>0&&t.split(LC).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static{this.\u0275fac=function(i){return new(i||n)(lt(Ci),lt(mc))}}static{this.\u0275dir=Tr({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var VC=class{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Xy=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new VC(r.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)i.remove(s===null?void 0:s);else if(s!==null){let a=i.get(s);i.move(a,o),vF(a,r)}});for(let r=0,s=i.length;r<s;r++){let a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{let s=i.get(r.currentIndex);vF(s,r)})}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(lt(Ko),lt(Uo),lt(FC))}}static{this.\u0275dir=Tr({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function vF(n,e){n.context.$implicit=e.item}var e0=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new BC,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){wF("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){wF("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(lt(Ko),lt(Uo))}}static{this.\u0275dir=Tr({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),BC=class{constructor(){this.$implicit=null,this.ngIf=null}};function wF(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Vi(e)}'.`)}var AF=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Ne({})}}return n})(),GC="browser",Kq="server";function MF(n){return n===GC}function Qa(n){return n===Kq}var xF=(()=>{class n{static{this.\u0275prov=te({token:n,providedIn:"root",factory:()=>MF(H($n))?new jC(H(Rn),window):new UC})}}return n})(),jC=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=Qq(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}};function Qq(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let s=r.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}var UC=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},wd=class{};var Qf=class{},i0=class{},Zo=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var qC=class{encodeKey(e){return RF(e)}encodeValue(e){return RF(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function Yq(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[o,a]=s==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}var Jq=/%(\d[a-f0-9])/gi,Zq={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function RF(n){return encodeURIComponent(n).replace(Jq,(e,t)=>Zq[t]??e)}function n0(n){return`${n}`}var Ja=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new qC,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=Yq(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(n0):[n0(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(n0(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(n0(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var KC=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function Xq(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function NF(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function OF(n){return typeof Blob<"u"&&n instanceof Blob}function PF(n){return typeof FormData<"u"&&n instanceof FormData}function e6(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Kf=class n{constructor(e,t,i,r){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(Xq(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Zo,this.context??=new KC,!this.params)this.params=new Ja,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),l=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+l+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||NF(this.body)||OF(this.body)||PF(this.body)||e6(this.body)?this.body:this.body instanceof Ja?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||PF(this.body)?null:OF(this.body)?this.body.type||null:NF(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Ja?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,c=e.headers||this.headers,d=e.params||this.params,h=e.context??this.context;return e.setHeaders!==void 0&&(c=Object.keys(e.setHeaders).reduce((f,p)=>f.set(p,e.setHeaders[p]),c)),e.setParams&&(d=Object.keys(e.setParams).reduce((f,p)=>f.set(p,e.setParams[p]),d)),new n(t,i,o,{params:d,headers:c,context:h,reportProgress:l,responseType:r,withCredentials:a,transferCache:s})}},Za=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Za||{}),Yf=class{constructor(e,t=200,i="OK"){this.headers=e.headers||new Zo,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},r0=class n extends Yf{constructor(e={}){super(e),this.type=Za.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Jf=class n extends Yf{constructor(e={}){super(e),this.type=Za.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Ya=class extends Yf{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},BF=200,t6=204;function WC(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var n6=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof Kf)s=t;else{let l;r.headers instanceof Zo?l=r.headers:l=new Zo(r.headers);let c;r.params&&(r.params instanceof Ja?c=r.params:c=new Ja({fromObject:r.params})),s=new Kf(t,i,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let o=se(s).pipe(ko(l=>this.handler.handle(l)));if(t instanceof Kf||r.observe==="events")return o;let a=o.pipe(Kt(l=>l instanceof Jf));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(ne(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(ne(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(ne(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return a.pipe(ne(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new Ja().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,WC(r,i))}post(t,i,r={}){return this.request("POST",t,WC(r,i))}put(t,i,r={}){return this.request("PUT",t,WC(r,i))}static{this.\u0275fac=function(i){return new(i||n)(z(Qf))}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac})}}return n})(),i6=/^\)\]\}',?\n/,r6="X-Request-URL";function kF(n){if(n.url)return n.url;let e=r6.toLocaleLowerCase();return n.headers.get(e)}var s6=(()=>{class n{constructor(){this.fetchImpl=H(QC,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=H(Fe)}handle(t){return new ge(i=>{let r=new AbortController;return this.doRequest(t,r.signal,i).then(YC,s=>i.error(new Ya({error:s}))),()=>r.abort()})}doRequest(t,i,r){return L(this,null,function*(){let s=this.createRequestInit(t),o;try{let p=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,q({signal:i},s)));o6(p),r.next({type:Za.Sent}),o=yield p}catch(p){r.error(new Ya({error:p,status:p.status??0,statusText:p.statusText,url:t.urlWithParams,headers:p.headers}));return}let a=new Zo(o.headers),l=o.statusText,c=kF(o)??t.urlWithParams,d=o.status,h=null;if(t.reportProgress&&r.next(new r0({headers:a,status:d,statusText:l,url:c})),o.body){let p=o.headers.get("content-length"),y=[],_=o.body.getReader(),w=0,A,x,M=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>L(this,null,function*(){for(;;){let{done:P,value:N}=yield _.read();if(P)break;if(y.push(N),w+=N.length,t.reportProgress){x=t.responseType==="text"?(x??"")+(A??=new TextDecoder).decode(N,{stream:!0}):void 0;let C=()=>r.next({type:Za.DownloadProgress,total:p?+p:void 0,loaded:w,partialText:x});M?M.run(C):C()}}}));let R=this.concatChunks(y,w);try{let P=o.headers.get("Content-Type")??"";h=this.parseBody(t,R,P)}catch(P){r.error(new Ya({error:P,headers:new Zo(o.headers),status:o.status,statusText:o.statusText,url:kF(o)??t.urlWithParams}));return}}d===0&&(d=h?BF:0),d>=200&&d<300?(r.next(new Jf({body:h,headers:a,status:d,statusText:l,url:c})),r.complete()):r.error(new Ya({error:h,headers:a,status:d,statusText:l,url:c}))})}parseBody(t,i,r){switch(t.responseType){case"json":let s=new TextDecoder().decode(i).replace(i6,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:r});case"arraybuffer":return i.buffer}}createRequestInit(t){let i={},r=t.withCredentials?"include":void 0;if(t.headers.forEach((s,o)=>i[s]=o.join(",")),t.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){let s=t.detectContentTypeHeader();s!==null&&(i["Content-Type"]=s)}return{body:t.serializeBody(),method:t.method,headers:i,credentials:r}}concatChunks(t,i){let r=new Uint8Array(i),s=0;for(let o of t)r.set(o,s),s+=o.length;return r}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac})}}return n})(),QC=class{};function YC(){}function o6(n){n.then(YC,YC)}function jF(n,e){return e(n)}function a6(n,e){return(t,i)=>e.intercept(t,{handle:r=>n(r,i)})}function l6(n,e,t){return(i,r)=>Xr(t,()=>e(i,s=>n(s,r)))}var c6=new J(""),JC=new J(""),u6=new J(""),UF=new J("",{providedIn:"root",factory:()=>!0});function d6(){let n=null;return(e,t)=>{n===null&&(n=(H(c6,{optional:!0})??[]).reduceRight(a6,jF));let i=H(Wo);if(H(UF)){let s=i.add();return n(e,t).pipe(Fo(()=>i.remove(s)))}else return n(e,t)}}var FF=(()=>{class n extends Qf{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null,this.pendingTasks=H(Wo),this.contributeToStability=H(UF)}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(JC),...this.injector.get(u6,[])]));this.chain=i.reduceRight((r,s)=>l6(r,s,this.injector),jF)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(Fo(()=>this.pendingTasks.remove(i)))}else return this.chain(t,i=>this.backend.handle(i))}static{this.\u0275fac=function(i){return new(i||n)(z(i0),z(Xn))}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac})}}return n})();var h6=/^\)\]\}',?\n/;function f6(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var LF=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new ue(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?at(i.\u0275loadImpl()):se(null)).pipe(xt(()=>new ge(s=>{let o=i.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((_,w)=>o.setRequestHeader(_,w.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let _=t.detectContentTypeHeader();_!==null&&o.setRequestHeader("Content-Type",_)}if(t.responseType){let _=t.responseType.toLowerCase();o.responseType=_!=="json"?_:"text"}let a=t.serializeBody(),l=null,c=()=>{if(l!==null)return l;let _=o.statusText||"OK",w=new Zo(o.getAllResponseHeaders()),A=f6(o)||t.url;return l=new r0({headers:w,status:o.status,statusText:_,url:A}),l},d=()=>{let{headers:_,status:w,statusText:A,url:x}=c(),M=null;w!==t6&&(M=typeof o.response>"u"?o.responseText:o.response),w===0&&(w=M?BF:0);let R=w>=200&&w<300;if(t.responseType==="json"&&typeof M=="string"){let P=M;M=M.replace(h6,"");try{M=M!==""?JSON.parse(M):null}catch(N){M=P,R&&(R=!1,M={error:N,text:M})}}R?(s.next(new Jf({body:M,headers:_,status:w,statusText:A,url:x||void 0})),s.complete()):s.error(new Ya({error:M,headers:_,status:w,statusText:A,url:x||void 0}))},h=_=>{let{url:w}=c(),A=new Ya({error:_,status:o.status||0,statusText:o.statusText||"Unknown Error",url:w||void 0});s.error(A)},f=!1,p=_=>{f||(s.next(c()),f=!0);let w={type:Za.DownloadProgress,loaded:_.loaded};_.lengthComputable&&(w.total=_.total),t.responseType==="text"&&o.responseText&&(w.partialText=o.responseText),s.next(w)},y=_=>{let w={type:Za.UploadProgress,loaded:_.loaded};_.lengthComputable&&(w.total=_.total),s.next(w)};return o.addEventListener("load",d),o.addEventListener("error",h),o.addEventListener("timeout",h),o.addEventListener("abort",h),t.reportProgress&&(o.addEventListener("progress",p),a!==null&&o.upload&&o.upload.addEventListener("progress",y)),o.send(a),s.next({type:Za.Sent}),()=>{o.removeEventListener("error",h),o.removeEventListener("abort",h),o.removeEventListener("load",d),o.removeEventListener("timeout",h),t.reportProgress&&(o.removeEventListener("progress",p),a!==null&&o.upload&&o.upload.removeEventListener("progress",y)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(i){return new(i||n)(z(wd))}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac})}}return n})(),$F=new J(""),p6="XSRF-TOKEN",g6=new J("",{providedIn:"root",factory:()=>p6}),m6="X-XSRF-TOKEN",_6=new J("",{providedIn:"root",factory:()=>m6}),s0=class{},y6=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Zy(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(i){return new(i||n)(z(Rn),z($n),z(g6))}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac})}}return n})();function v6(n,e){let t=n.url.toLowerCase();if(!H($F)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let i=H(s0).getToken(),r=H(_6);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var HF=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(HF||{});function w6(n,e){return{\u0275kind:n,\u0275providers:e}}function b6(...n){let e=[n6,LF,FF,{provide:Qf,useExisting:FF},{provide:i0,useFactory:()=>H(s6,{optional:!0})??H(LF)},{provide:JC,useValue:v6,multi:!0},{provide:$F,useValue:!0},{provide:s0,useClass:y6}];for(let t of n)e.push(...t.\u0275providers);return my(e)}var VF=new J("");function E6(){return w6(HF.LegacyInterceptors,[{provide:VF,useFactory:d6},{provide:JC,useExisting:VF,multi:!0}])}var zF=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Ne({providers:[b6(E6())]})}}return n})();var eD=class extends Jy{constructor(){super(...arguments),this.supportsDOMEvents=!0}},tD=class n extends eD{static makeCurrent(){CF(new n)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=C6();return t==null?null:D6(t)}resetBaseElement(){Zf=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Zy(document.cookie,e)}},Zf=null;function C6(){return Zf=Zf||document.querySelector("base"),Zf?Zf.getAttribute("href"):null}function D6(n){return new URL(n,document.baseURI).pathname}var nD=class{addToWindow(e){Ho.getAngularTestability=(i,r=!0)=>{let s=e.findTestabilityInTree(i,r);if(s==null)throw new ue(5103,!1);return s},Ho.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ho.getAllAngularRootElements=()=>e.getAllRootElements();let t=i=>{let r=Ho.getAllAngularTestabilities(),s=r.length,o=function(){s--,s==0&&i()};r.forEach(a=>{a.whenStable(o)})};Ho.frameworkStabilizers||(Ho.frameworkStabilizers=[]),Ho.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,i){if(t==null)return null;let r=e.getTestability(t);return r??(i?no().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},I6=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac})}}return n})(),iD=new J(""),KF=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new ue(5101,!1);return this._eventNameToPlugin.set(t,i),i}static{this.\u0275fac=function(i){return new(i||n)(z(iD),z(Fe))}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac})}}return n})(),o0=class{constructor(e){this._doc=e}},ZC="ng-app-id",QF=(()=>{class n{constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Qa(s),this.resetHostNodes()}addStyles(t){for(let i of t)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(t){for(let i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){let i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${ZC}="${this.appId}"]`);if(t?.length){let i=new Map;return t.forEach(r=>{r.textContent!=null&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){let r=this.styleRef;if(r.has(t)){let s=r.get(t);return s.usage+=i,s.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){let r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===t)return r.delete(i),s.removeAttribute(ZC),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(ZC,this.appId),t.appendChild(o),o}}addStyleToHost(t,i){let r=this.getStyleElement(t,i),s=this.styleRef,o=s.get(i)?.elements;o?o.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(z(Rn),z(My),z(fC,8),z($n))}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac})}}return n})(),XC={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},sD=/%COMP%/g,YF="%COMP%",T6=`_nghost-${YF}`,S6=`_ngcontent-${YF}`,A6=!0,M6=new J("",{providedIn:"root",factory:()=>A6});function x6(n){return S6.replace(sD,n)}function R6(n){return T6.replace(sD,n)}function JF(n,e){return e.map(t=>t.replace(sD,n))}var GF=(()=>{class n{constructor(t,i,r,s,o,a,l,c=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=Qa(a),this.defaultRenderer=new Xf(t,o,l,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Xs.ShadowDom&&(i=ke(q({},i),{encapsulation:Xs.Emulated}));let r=this.getOrCreateRenderer(t,i);return r instanceof a0?r.applyToHost(t):r instanceof ep&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,s=r.get(i.id);if(!s){let o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case Xs.Emulated:s=new a0(l,c,i,this.appId,d,o,a,h);break;case Xs.ShadowDom:return new rD(l,c,t,i,o,a,this.nonce,h);default:s=new ep(l,c,i,d,o,a,h);break}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(z(KF),z(QF),z(My),z(M6),z(Rn),z($n),z(Fe),z(fC))}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac})}}return n})(),Xf=class{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(XC[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(WF(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(WF(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new ue(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let s=XC[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=XC[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(jo.DashCase|jo.Important)?e.style.setProperty(t,i,r&jo.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&jo.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=no().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function WF(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var rD=class extends Xf{constructor(e,t,i,r,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=JF(r.id,r.styles);for(let d of c){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=d,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ep=class extends Xf{constructor(e,t,i,r,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=l?JF(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},a0=class extends ep{constructor(e,t,i,r,s,o,a,l){let c=r+"-"+i.id;super(e,t,i,s,o,a,l,c),this.contentAttr=x6(c),this.hostAttr=R6(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},N6=(()=>{class n extends o0{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||n)(z(Rn))}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac})}}return n})(),qF=["alt","control","meta","shift"],O6={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},P6={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},k6=(()=>{class n extends o0{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r){let s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>no().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let s=n._normalizeKey(i.pop()),o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),qF.forEach(c=>{let d=i.indexOf(c);d>-1&&(i.splice(d,1),o+=c+".")}),o+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(t,i){let r=O6[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),qF.forEach(o=>{if(o!==r){let a=P6[o];a(t)&&(s+=o+".")}}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(i){return new(i||n)(z(Rn))}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac})}}return n})();function F6(){tD.makeCurrent()}function L6(){return new Bo}function V6(){return ek(document),document}var B6=[{provide:$n,useValue:GC},{provide:hC,useValue:F6,multi:!0},{provide:Rn,useFactory:V6,deps:[]}],ZF=PC(fF,"browser",B6),j6=new J(""),U6=[{provide:qf,useClass:nD,deps:[]},{provide:NC,useClass:$y,deps:[Fe,Hy,qf]},{provide:$y,useClass:$y,deps:[Fe,Hy,qf]}],$6=[{provide:_y,useValue:"root"},{provide:Bo,useFactory:L6,deps:[]},{provide:iD,useClass:N6,multi:!0,deps:[Rn,Fe,$n]},{provide:iD,useClass:k6,multi:!0,deps:[Rn]},GF,QF,KF,{provide:ld,useExisting:GF},{provide:wd,useClass:I6,deps:[]},[]],XF=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:My,useValue:t.appId}]}}static{this.\u0275fac=function(i){return new(i||n)(z(j6,12))}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Ne({providers:[...$6,...U6],imports:[AF,pF]})}}return n})();var eL=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(i){return new(i||n)(z(Rn))}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var je="primary",gp=Symbol("RouteTitle"),uD=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Sd(n){return new uD(n)}function z6(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=n[s];if(o[0]===":")r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function G6(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!io(n[t],e[t]))return!1;return!0}function io(n,e){let t=n?dD(n):void 0,i=e?dD(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!hL(n[r],e[r]))return!1;return!0}function dD(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function hL(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}else return n===e}function fL(n){return n.length>0?n[n.length-1]:null}function el(n){return xE(n)?n:vc(n)?at(Promise.resolve(n)):se(n)}var W6={exact:gL,subset:mL},pL={exact:q6,subset:K6,ignored:()=>!0};function nL(n,e,t){return W6[t.paths](n.root,e.root,t.matrixParams)&&pL[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function q6(n,e){return io(n,e)}function gL(n,e,t){if(!Ec(n.segments,e.segments)||!u0(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!gL(n.children[i],e.children[i],t))return!1;return!0}function K6(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>hL(n[t],e[t]))}function mL(n,e,t){return _L(n,e,e.segments,t)}function _L(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!Ec(r,t)||e.hasChildren()||!u0(r,t,i))}else if(n.segments.length===t.length){if(!Ec(n.segments,t)||!u0(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!mL(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Ec(n.segments,r)||!u0(n.segments,r,i)||!n.children[je]?!1:_L(n.children[je],e,s,i)}}function u0(n,e,t){return e.every((i,r)=>pL[t](n[r].parameters,i.parameters))}var ea=class{constructor(e=new It([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Sd(this.queryParams),this._queryParamMap}toString(){return J6.serialize(this)}},It=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return d0(this)}},bc=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Sd(this.parameters),this._parameterMap}toString(){return vL(this)}};function Q6(n,e){return Ec(n,e)&&n.every((t,i)=>io(t.parameters,e[i].parameters))}function Ec(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function Y6(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===je&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==je&&(t=t.concat(e(r,i)))}),t}var mp=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=te({token:n,factory:()=>new Ad,providedIn:"root"})}}return n})(),Ad=class{parse(e){let t=new fD(e);return new ea(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${tp(e.root,!0)}`,i=eK(e.queryParams),r=typeof e.fragment=="string"?`#${Z6(e.fragment)}`:"";return`${t}${i}${r}`}},J6=new Ad;function d0(n){return n.segments.map(e=>vL(e)).join("/")}function tp(n,e){if(!n.hasChildren())return d0(n);if(e){let t=n.children[je]?tp(n.children[je],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==je&&i.push(`${r}:${tp(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=Y6(n,(i,r)=>r===je?[tp(n.children[je],!1)]:[`${r}:${tp(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[je]!=null?`${d0(n)}/${t[0]}`:`${d0(n)}/(${t.join("//")})`}}function yL(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function l0(n){return yL(n).replace(/%3B/gi,";")}function Z6(n){return encodeURI(n)}function hD(n){return yL(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function h0(n){return decodeURIComponent(n)}function iL(n){return h0(n.replace(/\+/g,"%20"))}function vL(n){return`${hD(n.path)}${X6(n.parameters)}`}function X6(n){return Object.entries(n).map(([e,t])=>`;${hD(e)}=${hD(t)}`).join("")}function eK(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${l0(t)}=${l0(r)}`).join("&"):`${l0(t)}=${l0(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var tK=/^[^\/()?;#]+/;function oD(n){let e=n.match(tK);return e?e[0]:""}var nK=/^[^\/()?;=#]+/;function iK(n){let e=n.match(nK);return e?e[0]:""}var rK=/^[^=?&#]+/;function sK(n){let e=n.match(rK);return e?e[0]:""}var oK=/^[^&#]+/;function aK(n){let e=n.match(oK);return e?e[0]:""}var fD=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new It([],{}):new It([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[je]=new It(e,t)),i}parseSegment(){let e=oD(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ue(4009,!1);return this.capture(e),new bc(h0(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=iK(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=oD(this.remaining);r&&(i=r,this.capture(i))}e[h0(t)]=h0(i)}parseQueryParam(e){let t=sK(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let o=aK(this.remaining);o&&(i=o,this.capture(i))}let r=iL(t),s=iL(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=oD(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new ue(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=je);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[je]:new It([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ue(4011,!1)}};function wL(n){return n.segments.length>0?new It([],{[je]:n}):n}function bL(n){let e={};for(let[i,r]of Object.entries(n.children)){let s=bL(r);if(i===je&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let t=new It(n.segments,e);return lK(t)}function lK(n){if(n.numberOfChildren===1&&n.children[je]){let e=n.children[je];return new It(n.segments.concat(e.segments),e.children)}return n}function ap(n){return n instanceof ea}function cK(n,e,t=null,i=null){let r=EL(n);return CL(r,e,t,i)}function EL(n){let e;function t(s){let o={};for(let l of s.children){let c=t(l);o[l.outlet]=c}let a=new It(s.url,o);return s===n&&(e=a),a}let i=t(n.root),r=wL(i);return e??r}function CL(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return aD(r,r,r,t,i);let s=uK(e);if(s.toRoot())return aD(r,r,new It([],{}),t,i);let o=dK(s,r,n),a=o.processChildren?rp(o.segmentGroup,o.index,s.commands):IL(o.segmentGroup,o.index,s.commands);return aD(r,o.segmentGroup,a,t,i)}function f0(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function lp(n){return typeof n=="object"&&n!=null&&n.outlets}function aD(n,e,t,i,r){let s={};i&&Object.entries(i).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(d=>`${d}`):`${c}`});let o;n===e?o=t:o=DL(n,e,t);let a=wL(bL(o));return new ea(a,s,r)}function DL(n,e,t){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===e?i[r]=t:i[r]=DL(s,e,t)}),new It(n.segments,i)}var p0=class{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&f0(i[0]))throw new ue(4003,!1);let r=i.find(lp);if(r&&r!==fL(i))throw new ue(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function uK(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new p0(!0,0,n);let e=0,t=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?t=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new p0(t,e,i)}var Dd=class{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function dK(n,e,t){if(n.isAbsolute)return new Dd(e,!0,0);if(!t)return new Dd(e,!1,NaN);if(t.parent===null)return new Dd(t,!0,0);let i=f0(n.commands[0])?0:1,r=t.segments.length-1+i;return hK(t,r,n.numberOfDoubleDots)}function hK(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new ue(4005,!1);r=i.segments.length}return new Dd(i,!1,r-s)}function fK(n){return lp(n[0])?n[0].outlets:{[je]:n}}function IL(n,e,t){if(n??=new It([],{}),n.segments.length===0&&n.hasChildren())return rp(n,e,t);let i=pK(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new It(n.segments.slice(0,i.pathIndex),{});return s.children[je]=new It(n.segments.slice(i.pathIndex),n.children),rp(s,0,r)}else return i.match&&r.length===0?new It(n.segments,{}):i.match&&!n.hasChildren()?pD(n,e,t):i.match?rp(n,0,r):pD(n,e,t)}function rp(n,e,t){if(t.length===0)return new It(n.segments,{});{let i=fK(t),r={};if(Object.keys(i).some(s=>s!==je)&&n.children[je]&&n.numberOfChildren===1&&n.children[je].segments.length===0){let s=rp(n.children[je],e,t);return new It(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=IL(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new It(n.segments,r)}}function pK(n,e,t){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;let o=n.segments[r],a=t[i];if(lp(a))break;let l=`${a}`,c=i<t.length-1?t[i+1]:null;if(r>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!sL(l,c,o))return s;i+=2}else{if(!sL(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function pD(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let s=t[r];if(lp(s)){let l=gK(s.outlets);return new It(i,l)}if(r===0&&f0(t[0])){let l=n.segments[e];i.push(new bc(l.path,rL(t[0]))),r++;continue}let o=lp(s)?s.outlets[je]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&f0(a)?(i.push(new bc(o,rL(a))),r+=2):(i.push(new bc(o,{})),r++)}return new It(i,{})}function gK(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=pD(new It([],{}),0,i))}),e}function rL(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function sL(n,e,t){return n==t.path&&io(e,t.parameters)}var sp="imperative",ti=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(ti||{}),ts=class{constructor(e,t){this.id=e,this.url=t}},Md=class extends ts{constructor(e,t,i="imperative",r=null){super(e,t),this.type=ti.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ta=class extends ts{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=ti.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ar=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Ar||{}),g0=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(g0||{}),Xo=class extends ts{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=ti.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Xa=class extends ts{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=ti.NavigationSkipped}},cp=class extends ts{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=ti.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},m0=class extends ts{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=ti.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gD=class extends ts{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=ti.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},mD=class extends ts{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=ti.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},_D=class extends ts{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=ti.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yD=class extends ts{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=ti.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vD=class{constructor(e){this.route=e,this.type=ti.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},wD=class{constructor(e){this.route=e,this.type=ti.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},bD=class{constructor(e){this.snapshot=e,this.type=ti.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ED=class{constructor(e){this.snapshot=e,this.type=ti.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},CD=class{constructor(e){this.snapshot=e,this.type=ti.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},DD=class{constructor(e){this.snapshot=e,this.type=ti.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_0=class{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=ti.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},up=class{},xd=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function mK(n,e){return n.providers&&!n._injector&&(n._injector=Fy(n.providers,e,`Route: ${n.path}`)),n._injector??e}function As(n){return n.outlet||je}function _K(n,e){let t=n.filter(i=>As(i)===e);return t.push(...n.filter(i=>As(i)!==e)),t}function _p(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var ID=class{get injector(){return _p(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new yp(this.rootInjector),this.attachRef=null}},yp=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new ID(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(i){return new(i||n)(z(Xn))}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),y0=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=TD(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=TD(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=SD(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return SD(e,this._root).map(t=>t.value)}};function TD(n,e){if(n===e.value)return e;for(let t of e.children){let i=TD(n,t);if(i)return i}return null}function SD(n,e){if(n===e.value)return[e];for(let t of e.children){let i=SD(n,t);if(i.length)return i.unshift(e),i}return[]}var Sr=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Cd(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var v0=class extends y0{constructor(e,t){super(e),this.snapshot=t,FD(this,e)}toString(){return this.snapshot.toString()}};function TL(n){let e=yK(n),t=new Zn([new bc("",{})]),i=new Zn({}),r=new Zn({}),s=new Zn({}),o=new Zn(""),a=new Rd(t,i,s,o,r,je,n,e.root);return a.snapshot=e.root,new v0(new Sr(a,[]),e)}function yK(n){let e={},t={},i={},r="",s=new Id([],e,i,r,t,je,n,null,{});return new b0("",new Sr(s,[]))}var Rd=class{constructor(e,t,i,r,s,o,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ne(c=>c[gp]))??se(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ne(e=>Sd(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ne(e=>Sd(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function w0(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:q(q({},e.params),n.params),data:q(q({},e.data),n.data),resolve:q(q(q(q({},n.data),e.data),r?.data),n._resolvedData)}:i={params:q({},n.params),data:q({},n.data),resolve:q(q({},n.data),n._resolvedData??{})},r&&AL(r)&&(i.resolve[gp]=r.title),i}var Id=class{get title(){return this.data?.[gp]}constructor(e,t,i,r,s,o,a,l,c){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Sd(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Sd(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},b0=class extends y0{constructor(e,t){super(t),this.url=e,FD(this,t)}toString(){return SL(this._root)}};function FD(n,e){e.value._routerState=n,e.children.forEach(t=>FD(n,t))}function SL(n){let e=n.children.length>0?` { ${n.children.map(SL).join(", ")} } `:"";return`${n.value}${e}`}function lD(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,io(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),io(e.params,t.params)||n.paramsSubject.next(t.params),G6(e.url,t.url)||n.urlSubject.next(t.url),io(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function AD(n,e){let t=io(n.params,e.params)&&Q6(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||AD(n.parent,e.parent))}function AL(n){return typeof n.title=="string"||n.title===null}var LD=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=je,this.activateEvents=new en,this.deactivateEvents=new en,this.attachEvents=new en,this.detachEvents=new en,this.parentContexts=H(yp),this.location=H(Ko),this.changeDetector=H(Yo),this.inputBinder=H(T0,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ue(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ue(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ue(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new ue(4013,!1);this._activatedRoute=t;let r=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new MD(t,a,r.injector);this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Tr({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[fc]})}}return n})(),MD=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Rd?this.route:e===yp?this.childContexts:this.parent.get(e,t)}},T0=new J(""),oL=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:i}=t,r=Hu([i.queryParams,i.params,i.data]).pipe(xt(([s,o,a],l)=>(a=q(q(q({},s),o),a),l===0?se(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(t);return}let o=gF(i.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(t,r)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac})}}return n})();function vK(n,e,t){let i=dp(n,e._root,t?t._root:void 0);return new v0(i,e)}function dp(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=wK(n,e,t);return new Sr(i,r)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>dp(n,a)),o}}let i=bK(e.value),r=e.children.map(s=>dp(n,s));return new Sr(i,r)}}function wK(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return dp(n,i,r);return dp(n,i)})}function bK(n){return new Rd(new Zn(n.url),new Zn(n.params),new Zn(n.queryParams),new Zn(n.fragment),new Zn(n.data),n.outlet,n.component,n)}var hp=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},ML="ngNavigationCancelingError";function E0(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=ap(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=xL(!1,Ar.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function xL(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[ML]=!0,t.cancellationCode=e,t}function EK(n){return RL(n)&&ap(n.url)}function RL(n){return!!n&&n[ML]}var CK=(n,e,t,i)=>ne(r=>(new xD(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),xD=class{constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),lD(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=Cd(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Cd(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Cd(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=Cd(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new DD(s.value.snapshot))}),e.children.length&&this.forwardEvent(new ED(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(lD(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),lD(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,i)}},C0=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Td=class{constructor(e,t){this.component=e,this.route=t}};function DK(n,e,t){let i=n._root,r=e?e._root:null;return np(i,r,t,[i.value])}function IK(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Od(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!UO(n)?n:e.get(n):i}function np(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=Cd(e);return n.children.forEach(o=>{TK(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>op(a,t.getContext(o),r)),r}function TK(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=SK(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new C0(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?np(n,e,a?a.children:null,i,r):np(n,e,t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Td(a.outlet.component,o))}else o&&op(e,a,r),r.canActivateChecks.push(new C0(i)),s.component?np(n,null,a?a.children:null,i,r):np(n,null,t,i,r);return r}function SK(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ec(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ec(n.url,e.url)||!io(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!AD(n,e)||!io(n.queryParams,e.queryParams);case"paramsChange":default:return!AD(n,e)}}function op(n,e,t){let i=Cd(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?e?op(o,e.children.getContext(s),t):op(o,null,t):op(o,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Td(e.outlet.component,r)):t.canDeactivateChecks.push(new Td(null,r)):t.canDeactivateChecks.push(new Td(null,r))}function vp(n){return typeof n=="function"}function AK(n){return typeof n=="boolean"}function MK(n){return n&&vp(n.canLoad)}function xK(n){return n&&vp(n.canActivate)}function RK(n){return n&&vp(n.canActivateChild)}function NK(n){return n&&vp(n.canDeactivate)}function OK(n){return n&&vp(n.canMatch)}function NL(n){return n instanceof Po||n?.name==="EmptyError"}var c0=Symbol("INITIAL_VALUE");function Nd(){return xt(n=>Hu(n.map(e=>e.pipe(cr(1),Va(c0)))).pipe(ne(e=>{for(let t of e)if(t!==!0){if(t===c0)return c0;if(t===!1||PK(t))return t}return!0}),Kt(e=>e!==c0),cr(1)))}function PK(n){return ap(n)||n instanceof hp}function kK(n,e){return Xt(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?se(ke(q({},t),{guardsResult:!0})):FK(o,i,r,n).pipe(Xt(a=>a&&AK(a)?LK(i,s,n,e):se(a)),ne(a=>ke(q({},t),{guardsResult:a})))})}function FK(n,e,t,i){return at(n).pipe(Xt(r=>$K(r.component,r.route,t,e,i)),Kr(r=>r!==!0,!0))}function LK(n,e,t,i){return at(e).pipe(ko(r=>ka(BK(r.route.parent,i),VK(r.route,i),UK(n,r.path,t),jK(n,r.route,t))),Kr(r=>r!==!0,!0))}function VK(n,e){return n!==null&&e&&e(new CD(n)),se(!0)}function BK(n,e){return n!==null&&e&&e(new bD(n)),se(!0)}function jK(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return se(!0);let r=i.map(s=>I_(()=>{let o=_p(e)??t,a=Od(s,o),l=xK(a)?a.canActivate(e,n):Xr(o,()=>a(e,n));return el(l).pipe(Kr())}));return se(r).pipe(Nd())}function UK(n,e,t){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>IK(o)).filter(o=>o!==null).map(o=>I_(()=>{let a=o.guards.map(l=>{let c=_p(o.node)??t,d=Od(l,c),h=RK(d)?d.canActivateChild(i,n):Xr(c,()=>d(i,n));return el(h).pipe(Kr())});return se(a).pipe(Nd())}));return se(s).pipe(Nd())}function $K(n,e,t,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return se(!0);let o=s.map(a=>{let l=_p(e)??r,c=Od(a,l),d=NK(c)?c.canDeactivate(n,e,t,i):Xr(l,()=>c(n,e,t,i));return el(d).pipe(Kr())});return se(o).pipe(Nd())}function HK(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return se(!0);let s=r.map(o=>{let a=Od(o,n),l=MK(a)?a.canLoad(e,t):Xr(n,()=>a(e,t));return el(l)});return se(s).pipe(Nd(),OL(i))}function OL(n){return CE(fn(e=>{if(typeof e!="boolean")throw E0(n,e)}),ne(e=>e===!0))}function zK(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return se(!0);let s=r.map(o=>{let a=Od(o,n),l=OK(a)?a.canMatch(e,t):Xr(n,()=>a(e,t));return el(l)});return se(s).pipe(Nd(),OL(i))}var fp=class{constructor(e){this.segmentGroup=e||null}},pp=class extends Error{constructor(e){super(),this.urlTree=e}};function Ed(n){return Uu(new fp(n))}function GK(n){return Uu(new ue(4e3,!1))}function WK(n){return Uu(xL(!1,Ar.GuardRejected))}var RD=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return se(i);if(r.numberOfChildren>1||!r.children[je])return GK(`${e.redirectTo}`);r=r.children[je]}}applyRedirectCommands(e,t,i,r,s){if(typeof t!="string"){let a=t,{queryParams:l,fragment:c,routeConfig:d,url:h,outlet:f,params:p,data:y,title:_}=r,w=Xr(s,()=>a({params:p,data:y,queryParams:l,fragment:c,routeConfig:d,url:h,outlet:f,title:_}));if(w instanceof ea)throw new pp(w);t=w}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t[0]==="/")throw new pp(o);return o}applyRedirectCreateUrlTree(e,t,i,r){let s=this.createSegmentGroup(e,t.root,i,r);return new ea(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);i[r]=t[a]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){let s=this.createSegments(e,t.segments,i,r),o={};return Object.entries(t.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,i,r)}),new It(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new ue(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},ND={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function qK(n,e,t,i,r){let s=PL(n,e,t);return s.matched?(i=mK(e,i),zK(i,e,t,r).pipe(ne(o=>o===!0?s:q({},ND)))):se(s)}function PL(n,e,t){if(e.path==="**")return KK(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?q({},ND):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||z6)(t,n,e);if(!r)return q({},ND);let s={};Object.entries(r.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=r.consumed.length>0?q(q({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function KK(n){return{matched:!0,parameters:n.length>0?fL(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function aL(n,e,t,i){return t.length>0&&JK(n,t,i)?{segmentGroup:new It(e,YK(i,new It(t,n.children))),slicedSegments:[]}:t.length===0&&ZK(n,t,i)?{segmentGroup:new It(n.segments,QK(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new It(n.segments,n.children),slicedSegments:t}}function QK(n,e,t,i){let r={};for(let s of t)if(S0(n,e,s)&&!i[As(s)]){let o=new It([],{});r[As(s)]=o}return q(q({},i),r)}function YK(n,e){let t={};t[je]=e;for(let i of n)if(i.path===""&&As(i)!==je){let r=new It([],{});t[As(i)]=r}return t}function JK(n,e,t){return t.some(i=>S0(n,e,i)&&As(i)!==je)}function ZK(n,e,t){return t.some(i=>S0(n,e,i))}function S0(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function XK(n,e,t){return e.length===0&&!n.children[t]}var OD=class{};function e7(n,e,t,i,r,s,o="emptyOnly"){return new PD(n,e,t,i,r,o,s).recognize()}var t7=31,PD=class{constructor(e,t,i,r,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new RD(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ue(4002,`'${e.segmentGroup}'`)}recognize(){let e=aL(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ne(({children:t,rootSnapshot:i})=>{let r=new Sr(i,t),s=new b0("",r),o=cK(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Id([],Object.freeze({}),Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),je,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,je,t).pipe(ne(i=>({children:i,rootSnapshot:t})),Fa(i=>{if(i instanceof pp)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof fp?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,s):this.processSegment(e,t,i,i.segments,r,!0,s).pipe(ne(o=>o instanceof Sr?[o]:[]))}processChildren(e,t,i,r){let s=[];for(let o of Object.keys(i.children))o==="primary"?s.unshift(o):s.push(o);return at(s).pipe(ko(o=>{let a=i.children[o],l=_K(t,o);return this.processSegmentGroup(e,l,a,o,r)}),Ys((o,a)=>(o.push(...a),o)),La(null),FE(),Xt(o=>{if(o===null)return Ed(i);let a=kL(o);return n7(a),se(a)}))}processSegment(e,t,i,r,s,o,a){return at(t).pipe(ko(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,i,r,s,o,a).pipe(Fa(c=>{if(c instanceof fp)return se(null);throw c}))),Kr(l=>!!l),Fa(l=>{if(NL(l))return XK(i,r,s)?se(new OD):Ed(i);throw l}))}processSegmentAgainstRoute(e,t,i,r,s,o,a,l){return As(i)!==o&&(o===je||!S0(r,s,i))?Ed(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,o,l):Ed(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o,a){let{matched:l,parameters:c,consumedSegments:d,positionalParamSegments:h,remainingSegments:f}=PL(t,r,s);if(!l)return Ed(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>t7&&(this.allowRedirects=!1));let p=new Id(s,c,Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,lL(r),As(r),r.component??r._loadedComponent??null,r,cL(r)),y=w0(p,a,this.paramsInheritanceStrategy);p.params=Object.freeze(y.params),p.data=Object.freeze(y.data);let _=this.applyRedirects.applyRedirectCommands(d,r.redirectTo,h,p,e);return this.applyRedirects.lineralizeSegments(r,_).pipe(Xt(w=>this.processSegment(e,i,t,w.concat(f),o,!1,a)))}matchSegmentAgainstRoute(e,t,i,r,s,o){let a=qK(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),a.pipe(xt(l=>l.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(xt(({routes:c})=>{let d=i._loadedInjector??e,{parameters:h,consumedSegments:f,remainingSegments:p}=l,y=new Id(f,h,Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,lL(i),As(i),i.component??i._loadedComponent??null,i,cL(i)),_=w0(y,o,this.paramsInheritanceStrategy);y.params=Object.freeze(_.params),y.data=Object.freeze(_.data);let{segmentGroup:w,slicedSegments:A}=aL(t,f,p,c);if(A.length===0&&w.hasChildren())return this.processChildren(d,c,w,y).pipe(ne(M=>new Sr(y,M)));if(c.length===0&&A.length===0)return se(new Sr(y,[]));let x=As(i)===s;return this.processSegment(d,c,w,A,x?je:s,!0,y).pipe(ne(M=>new Sr(y,M instanceof Sr?[M]:[])))}))):Ed(t)))}getChildConfig(e,t,i){return t.children?se({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?se({routes:t._loadedRoutes,injector:t._loadedInjector}):HK(e,t,i,this.urlSerializer).pipe(Xt(r=>r?this.configLoader.loadChildren(e,t).pipe(fn(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):WK(t))):se({routes:[],injector:e})}};function n7(n){n.sort((e,t)=>e.value.outlet===je?-1:t.value.outlet===je?1:e.value.outlet.localeCompare(t.value.outlet))}function i7(n){let e=n.value.routeConfig;return e&&e.path===""}function kL(n){let e=[],t=new Set;for(let i of n){if(!i7(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=kL(i.children);e.push(new Sr(i.value,r))}return e.filter(i=>!t.has(i))}function lL(n){return n.data||{}}function cL(n){return n.resolve||{}}function r7(n,e,t,i,r,s){return Xt(o=>e7(n,e,t,i,o.extractedUrl,r,s).pipe(ne(({state:a,tree:l})=>ke(q({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function s7(n,e){return Xt(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return se(t);let s=new Set(r.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let c of FL(l))o.add(c);let a=0;return at(o).pipe(ko(l=>s.has(l)?o7(l,i,n,e):(l.data=w0(l,l.parent,n).resolve,se(void 0))),fn(()=>a++),Gu(1),Xt(l=>a===o.size?se(t):jn))})}function FL(n){let e=n.children.map(t=>FL(t)).flat();return[n,...e]}function o7(n,e,t,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!AL(r)&&(s[gp]=r.title),a7(s,n,e,i).pipe(ne(o=>(n._resolvedData=o,n.data=w0(n,n.parent,t).resolve,null)))}function a7(n,e,t,i){let r=dD(n);if(r.length===0)return se({});let s={};return at(r).pipe(Xt(o=>l7(n[o],e,t,i).pipe(Kr(),fn(a=>{if(a instanceof hp)throw E0(new Ad,a);s[o]=a}))),Gu(1),PE(s),Fa(o=>NL(o)?jn:Uu(o)))}function l7(n,e,t,i){let r=_p(e)??i,s=Od(n,r),o=s.resolve?s.resolve(e,t):Xr(r,()=>s(e,t));return el(o)}function cD(n){return xt(e=>{let t=n(e);return t?at(t).pipe(ne(()=>e)):se(e)})}var LL=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===je);return i}getResolvedTitleForRoute(t){return t.data[gp]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=te({token:n,factory:()=>H(c7),providedIn:"root"})}}return n})(),c7=(()=>{class n extends LL{constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)(z(eL))}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),wp=new J("",{providedIn:"root",factory:()=>({})}),u7=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=Bi({type:n,selectors:[["ng-component"]],standalone:!0,features:[Wf],decls:1,vars:0,template:function(i,r){i&1&&Me(0,"router-outlet")},dependencies:[LD],encapsulation:2})}}return n})();function VD(n){let e=n.children&&n.children.map(VD),t=e?ke(q({},n),{children:e}):q({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==je&&(t.component=u7),t}var D0=new J(""),BD=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=H(Wy)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return se(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let i=el(t.loadComponent()).pipe(ne(VL),fn(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Fo(()=>{this.componentLoaders.delete(t)})),r=new Fu(i,()=>new yt).pipe(ku());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return se({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=d7(i,this.compiler,t,this.onLoadEndListener).pipe(Fo(()=>{this.childrenLoaders.delete(i)})),o=new Fu(s,()=>new yt).pipe(ku());return this.childrenLoaders.set(i,o),o}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function d7(n,e,t,i){return el(n.loadChildren()).pipe(ne(VL),Xt(r=>r instanceof Lf||Array.isArray(r)?se(r):at(e.compileModuleAsync(r))),ne(r=>{i&&i(n);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(t).injector,o=s.get(D0,[],{optional:!0,self:!0}).flat()),{routes:o.map(VD),injector:s}}))}function h7(n){return n&&typeof n=="object"&&"default"in n}function VL(n){return h7(n)?n.default:n}var jD=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=te({token:n,factory:()=>H(f7),providedIn:"root"})}}return n})(),f7=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),BL=new J(""),jL=new J("");function p7(n,e,t){let i=n.get(jL),r=n.get(Rn);return n.get(Fe).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(c=>setTimeout(c));let s,o=new Promise(c=>{s=c}),a=r.startViewTransition(()=>(s(),g7(n))),{onViewTransitionCreated:l}=i;return l&&Xr(n,()=>l({transition:a,from:e,to:t})),o})}function g7(n){return new Promise(e=>{MC({read:()=>setTimeout(e)},{injector:n})})}var m7=new J(""),UD=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new yt,this.transitionAbortSubject=new yt,this.configLoader=H(BD),this.environmentInjector=H(Xn),this.urlSerializer=H(mp),this.rootContexts=H(yp),this.location=H(bd),this.inputBindingEnabled=H(T0,{optional:!0})!==null,this.titleStrategy=H(LL),this.options=H(wp,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=H(jD),this.createViewTransition=H(BL,{optional:!0}),this.navigationErrorHandler=H(m7,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>se(void 0),this.rootComponentType=null;let t=r=>this.events.next(new vD(r)),i=r=>this.events.next(new wD(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(ke(q(q({},this.transitions.value),t),{id:i}))}setupNavigations(t,i,r){return this.transitions=new Zn({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:sp,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Kt(s=>s.id!==0),ne(s=>ke(q({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),xt(s=>{let o=!1,a=!1;return se(s).pipe(xt(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Ar.SupersededByNewNavigation),jn;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?ke(q({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!c&&d!=="reload"){let h="";return this.events.next(new Xa(l.id,this.urlSerializer.serialize(l.rawUrl),h,g0.IgnoredSameUrlNavigation)),l.resolve(!1),jn}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return se(l).pipe(xt(h=>{let f=this.transitions?.getValue();return this.events.next(new Md(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?jn:Promise.resolve(h)}),r7(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),fn(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=ke(q({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new m0(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:f,source:p,restoredState:y,extras:_}=l,w=new Md(h,this.urlSerializer.serialize(f),p,y);this.events.next(w);let A=TL(this.rootComponentType).snapshot;return this.currentTransition=s=ke(q({},l),{targetSnapshot:A,urlAfterRedirects:f,extras:ke(q({},_),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,se(s)}else{let h="";return this.events.next(new Xa(l.id,this.urlSerializer.serialize(l.extractedUrl),h,g0.IgnoredByUrlHandlingStrategy)),l.resolve(!1),jn}}),fn(l=>{let c=new gD(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),ne(l=>(this.currentTransition=s=ke(q({},l),{guards:DK(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),kK(this.environmentInjector,l=>this.events.next(l)),fn(l=>{if(s.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw E0(this.urlSerializer,l.guardsResult);let c=new mD(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),Kt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Ar.GuardRejected),!1)),cD(l=>{if(l.guards.canActivateChecks.length)return se(l).pipe(fn(c=>{let d=new _D(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}),xt(c=>{let d=!1;return se(c).pipe(s7(this.paramsInheritanceStrategy,this.environmentInjector),fn({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(c,"",Ar.NoDataFromResolver)}}))}),fn(c=>{let d=new yD(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}))}),cD(l=>{let c=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(fn(f=>{d.component=f}),ne(()=>{})));for(let f of d.children)h.push(...c(f));return h};return Hu(c(l.targetSnapshot.root)).pipe(La(null),cr(1))}),cD(()=>this.afterPreactivation()),xt(()=>{let{currentSnapshot:l,targetSnapshot:c}=s,d=this.createViewTransition?.(this.environmentInjector,l.root,c.root);return d?at(d).pipe(ne(()=>s)):se(s)}),ne(l=>{let c=vK(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=ke(q({},l),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,s}),fn(()=>{this.events.next(new up)}),CK(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),cr(1),fn({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ta(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),bi(this.transitionAbortSubject.pipe(fn(l=>{throw l}))),Fo(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Ar.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Fa(l=>{if(a=!0,RL(l))this.events.next(new Xo(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),EK(l)?this.events.next(new xd(l.url,l.navigationBehaviorOptions)):s.resolve(!1);else{let c=new cp(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0);try{let d=Xr(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(d instanceof hp){let{message:h,cancellationCode:f}=E0(this.urlSerializer,d);this.events.next(new Xo(s.id,this.urlSerializer.serialize(s.extractedUrl),h,f)),this.events.next(new xd(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(c);let h=t.errorHandler(l);s.resolve(!!h)}}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return jn}))}))}cancelNavigationTransition(t,i,r){let s=new Xo(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function _7(n){return n!==sp}var y7=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=te({token:n,factory:()=>H(v7),providedIn:"root"})}}return n})(),kD=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},v7=(()=>{class n extends kD{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=fd(n)))(r||n)}})()}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),UL=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=te({token:n,factory:()=>H(w7),providedIn:"root"})}}return n})(),w7=(()=>{class n extends UL{constructor(){super(...arguments),this.location=H(bd),this.urlSerializer=H(mp),this.options=H(wp,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=H(jD),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ea,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=TL(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&t(i.url,i.state)})}handleRouterEvent(t,i){if(t instanceof Md)this.stateMemento=this.createStateMemento();else if(t instanceof Xa)this.rawUrlTree=i.initialUrl;else if(t instanceof m0){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??r,i)}}else t instanceof up?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):t instanceof Xo&&(t.code===Ar.GuardRejected||t.code===Ar.NoDataFromResolver)?this.restoreHistory(i):t instanceof cp?this.restoreHistory(i,!0):t instanceof ta&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,i){let r=t instanceof ea?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){let s=this.browserPageId,o=q(q({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(r,"",o)}else{let s=q(q({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(r,"",s)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,s=this.currentPageId-r;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=fd(n)))(r||n)}})()}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ip=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(ip||{});function $L(n,e){n.events.pipe(Kt(t=>t instanceof ta||t instanceof Xo||t instanceof cp||t instanceof Xa),ne(t=>t instanceof ta||t instanceof Xa?ip.COMPLETE:(t instanceof Xo?t.code===Ar.Redirect||t.code===Ar.SupersededByNewNavigation:!1)?ip.REDIRECTING:ip.FAILED),Kt(t=>t!==ip.REDIRECTING),cr(1)).subscribe(()=>{e()})}function b7(n){throw n}var E7={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},C7={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ms=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=H(Uy),this.stateManager=H(UL),this.options=H(wp,{optional:!0})||{},this.pendingTasks=H(Wo),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=H(UD),this.urlSerializer=H(mp),this.location=H(bd),this.urlHandlingStrategy=H(jD),this._events=new yt,this.errorHandler=this.options.errorHandler||b7,this.navigated=!1,this.routeReuseStrategy=H(y7),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=H(D0,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!H(T0,{optional:!0}),this.eventsSubscription=new hn,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(r!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof Xo&&i.code!==Ar.Redirect&&i.code!==Ar.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof ta)this.navigated=!0;else if(i instanceof xd){let o=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),l=q({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||_7(r.source)},o);this.scheduleNavigation(a,sp,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}I7(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),sp,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",i)},0)})}navigateToSyncWithBrowser(t,i,r){let s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){let l=q({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let a=this.parseUrl(t);this.scheduleNavigation(a,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(VD),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:o,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=q(q({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=r?r.snapshot:this.routerState.snapshot.root;h=EL(f)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),h=this.currentUrlTree.root}return CL(h,t,d,c??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=ap(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,sp,null,i)}navigate(t,i={skipLocationChange:!1}){return D7(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=q({},E7):i===!1?r=q({},C7):r=i,ap(t))return nL(this.currentUrlTree,t,r);let s=this.parseUrl(t);return nL(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,s])=>(s!=null&&(i[r]=s),i),{})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((h,f)=>{a=h,l=f});let d=this.pendingTasks.add();return $L(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(h=>Promise.reject(h))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function D7(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ue(4008,!1)}function I7(n){return!(n instanceof up)&&!(n instanceof xd)}var I0=class{};var T7=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Kt(t=>t instanceof ta),ko(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){let r=[];for(let s of i){s.providers&&!s._injector&&(s._injector=Fy(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return at(r).pipe(Pa())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(t,i):r=se(null);let s=r.pipe(Xt(o=>o===null?se(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(i.loadComponent&&!i._loadedComponent){let o=this.loader.loadComponent(i);return at([s,o]).pipe(Pa())}else return s})}static{this.\u0275fac=function(i){return new(i||n)(z(Ms),z(Wy),z(Xn),z(I0),z(BD))}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),HL=new J(""),S7=(()=>{class n{constructor(t,i,r,s,o={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Md?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ta?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Xa&&t.code===g0.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof _0&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new _0(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(i){yk()}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac})}}return n})();function A7(n){return n.routerState.root}function bp(n,e){return{\u0275kind:n,\u0275providers:e}}function M7(){let n=H(di);return e=>{let t=n.get(Ss);if(e!==t.components[0])return;let i=n.get(Ms),r=n.get(zL);n.get($D)===1&&i.initialNavigation(),n.get(GL,null,ze.Optional)?.setUpPreloading(),n.get(HL,null,ze.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var zL=new J("",{factory:()=>new yt}),$D=new J("",{providedIn:"root",factory:()=>1});function x7(){return bp(2,[{provide:$D,useValue:0},{provide:zy,multi:!0,deps:[di],useFactory:e=>{let t=e.get(DF,Promise.resolve());return()=>t.then(()=>new Promise(i=>{let r=e.get(Ms),s=e.get(zL);$L(r,()=>{i(!0)}),e.get(UD).afterPreactivation=()=>(i(!0),s.closed?se(void 0):s),r.initialNavigation()}))}}])}function R7(){return bp(3,[{provide:zy,multi:!0,useFactory:()=>{let e=H(Ms);return()=>{e.setUpLocationChangeListener()}}},{provide:$D,useValue:2}])}var GL=new J("");function N7(n){return bp(0,[{provide:GL,useExisting:T7},{provide:I0,useExisting:n}])}function O7(){return bp(8,[oL,{provide:T0,useExisting:oL}])}function P7(n){let e=[{provide:BL,useValue:p7},{provide:jL,useValue:q({skipNextTransition:!!n?.skipInitialTransition},n)}];return bp(9,e)}var uL=new J("ROUTER_FORROOT_GUARD"),k7=[bd,{provide:mp,useClass:Ad},Ms,yp,{provide:Rd,useFactory:A7,deps:[Ms]},BD,[]],HD=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[k7,[],{provide:D0,multi:!0,useValue:t},{provide:uL,useFactory:B7,deps:[[Ms,new dd,new Y1]]},{provide:wp,useValue:i||{}},i?.useHash?L7():V7(),F7(),i?.preloadingStrategy?N7(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?j7(i):[],i?.bindToComponentInputs?O7().\u0275providers:[],i?.enableViewTransitions?P7().\u0275providers:[],U7()]}}static forChild(t){return{ngModule:n,providers:[{provide:D0,multi:!0,useValue:t}]}}static{this.\u0275fac=function(i){return new(i||n)(z(uL,8))}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Ne({})}}return n})();function F7(){return{provide:HL,useFactory:()=>{let n=H(xF),e=H(Fe),t=H(wp),i=H(UD),r=H(mp);return t.scrollOffset&&n.setOffset(t.scrollOffset),new S7(r,i,n,e,t)}}}function L7(){return{provide:wc,useClass:TF}}function V7(){return{provide:wc,useClass:zC}}function B7(n){return"guarded"}function j7(n){return[n.initialNavigation==="disabled"?R7().\u0275providers:[],n.initialNavigation==="enabledBlocking"?x7().\u0275providers:[]]}var dL=new J("");function U7(){return[{provide:dL,useFactory:M7},{provide:Gy,multi:!0,useExisting:dL}]}var HV=bz(WL());function na(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function e2(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var _r={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},kd={duration:.5,overwrite:!1,delay:0},uI,Ii,Qt,is=1e8,Bt=1/is,XD=Math.PI*2,$7=XD/4,H7=0,t2=Math.sqrt,z7=Math.cos,G7=Math.sin,zn=function(e){return typeof e=="string"},gn=function(e){return typeof e=="function"},ra=function(e){return typeof e=="number"},L0=function(e){return typeof e>"u"},oo=function(e){return typeof e=="object"},mr=function(e){return e!==!1},dI=function(){return typeof window<"u"},A0=function(e){return gn(e)||zn(e)},n2=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Ti=Array.isArray,eI=/(?:-?\.?\d|\.)+/gi,hI=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Sc=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,WD=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,fI=/[+-]=-?[.\d]+/,i2=/[^,'"\[\]\s]+/gi,W7=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,tn,ro,tI,pI,xr={},N0={},r2,s2=function(e){return(N0=Tc(e,xr))&&Si},V0=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Ap=function(e,t){return!t&&console.warn(e)},o2=function(e,t){return e&&(xr[e]=t)&&N0&&(N0[e]=t)||xr},Mp=function(){return 0},q7={suppressEvents:!0,isStart:!0,kill:!1},M0={suppressEvents:!0,kill:!1},K7={suppressEvents:!0},gI={},nl=[],nI={},a2,pr={},qD={},qL=30,x0=[],mI="",_I=function(e){var t=e[0],i,r;if(oo(t)||gn(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(r=x0.length;r--&&!x0[r].targetTest(t););i=x0[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new wI(e[r],i)))||e.splice(r,1);return e},il=function(e){return e._gsap||_I(rs(e))[0]._gsap},yI=function(e,t,i){return(i=e[t])&&gn(i)?e[t]():L0(i)&&e.getAttribute&&e.getAttribute(t)||i},Hi=function(e,t){return(e=e.split(",")).forEach(t)||e},mn=function(e){return Math.round(e*1e5)/1e5||0},ni=function(e){return Math.round(e*1e7)/1e7||0},Ac=function(e,t){var i=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),i==="+"?e+r:i==="-"?e-r:i==="*"?e*r:e/r},Q7=function(e,t){for(var i=t.length,r=0;e.indexOf(t[r])<0&&++r<i;);return r<i},O0=function(){var e=nl.length,t=nl.slice(0),i,r;for(nI={},nl.length=0,i=0;i<e;i++)r=t[i],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},l2=function(e,t,i,r){nl.length&&!Ii&&O0(),e.render(t,i,r||Ii&&t<0&&(e._initted||e._startAt)),nl.length&&!Ii&&O0()},c2=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(i2).length<2?t:zn(e)?e.trim():e},u2=function(e){return e},ss=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},Y7=function(e){return function(t,i){for(var r in i)r in t||r==="duration"&&e||r==="ease"||(t[r]=i[r])}},Tc=function(e,t){for(var i in t)e[i]=t[i];return e},KL=function n(e,t){for(var i in t)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(e[i]=oo(t[i])?n(e[i]||(e[i]={}),t[i]):t[i]);return e},P0=function(e,t){var i={},r;for(r in e)r in t||(i[r]=e[r]);return i},Ip=function(e){var t=e.parent||tn,i=e.keyframes?Y7(Ti(e.keyframes)):ss;if(mr(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},J7=function(e,t){for(var i=e.length,r=i===t.length;r&&i--&&e[i]===t[i];);return i<0},d2=function(e,t,i,r,s){i===void 0&&(i="_first"),r===void 0&&(r="_last");var o=e[r],a;if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[r]=t,t._prev=o,t.parent=t._dp=e,t},B0=function(e,t,i,r){i===void 0&&(i="_first"),r===void 0&&(r="_last");var s=t._prev,o=t._next;s?s._next=o:e[i]===t&&(e[i]=o),o?o._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},rl=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Cc=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},Z7=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},iI=function(e,t,i,r){return e._startAt&&(Ii?e._startAt.revert(M0):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},X7=function n(e){return!e||e._ts&&n(e.parent)},QL=function(e){return e._repeat?Fd(e._tTime,e=e.duration()+e._rDelay)*e:0},Fd=function(e,t){var i=Math.floor(e/=t);return e&&i===e?i-1:i},k0=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},j0=function(e){return e._end=ni(e._start+(e._tDur/Math.abs(e._ts||e._rts||Bt)||0))},U0=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=ni(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),j0(e),i._dirty||Cc(i,e)),e},h2=function(e,t){var i;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(i=k0(e.rawTime(),t),(!t._dur||Np(0,t.totalDuration(),i)-t._tTime>Bt)&&t.render(i,!0)),Cc(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-Bt}},so=function(e,t,i,r){return t.parent&&rl(t),t._start=ni((ra(i)?i:i||e!==tn?ns(e,i,t):e._time)+t._delay),t._end=ni(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),d2(e,t,"_first","_last",e._sort?"_start":0),rI(t)||(e._recent=t),r||h2(e,t),e._ts<0&&U0(e,e._tTime),e},f2=function(e,t){return(xr.ScrollTrigger||V0("scrollTrigger",t))&&xr.ScrollTrigger.create(t,e)},p2=function(e,t,i,r,s){if(CI(e,t,s),!e._initted)return 1;if(!i&&e._pt&&!Ii&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&a2!==gr.frame)return nl.push(e),e._lazy=[s,r],1},eQ=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},rI=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},tQ=function(e,t,i,r){var s=e.ratio,o=t<0||!t&&(!e._start&&eQ(e)&&!(!e._initted&&rI(e))||(e._ts<0||e._dp._ts<0)&&!rI(e))?0:1,a=e._rDelay,l=0,c,d,h;if(a&&e._repeat&&(l=Np(0,e._tDur,t),d=Fd(l,a),e._yoyo&&d&1&&(o=1-o),d!==Fd(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||Ii||r||e._zTime===Bt||!t&&e._zTime){if(!e._initted&&p2(e,t,r,i,l))return;for(h=e._zTime,e._zTime=t||(i?Bt:0),i||(i=t&&!h),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,c=e._pt;c;)c.r(o,c.d),c=c._next;t<0&&iI(e,t,i,!0),e._onUpdate&&!i&&Mr(e,"onUpdate"),l&&e._repeat&&!i&&e.parent&&Mr(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&rl(e,1),!i&&!Ii&&(Mr(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},nQ=function(e,t,i){var r;if(i>t)for(r=e._first;r&&r._start<=i;){if(r.data==="isPause"&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=i;){if(r.data==="isPause"&&r._start<t)return r;r=r._prev}},Ld=function(e,t,i,r){var s=e._repeat,o=ni(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:ni(o*(s+1)+e._rDelay*s):o,a>0&&!r&&U0(e,e._tTime=e._tDur*a),e.parent&&j0(e),i||Cc(e.parent,e),e},YL=function(e){return e instanceof fi?Cc(e):Ld(e,e._dur)},iQ={_start:0,endTime:Mp,totalDuration:Mp},ns=function n(e,t,i){var r=e.labels,s=e._recent||iQ,o=e.duration()>=is?s.endTime(!1):e._dur,a,l,c;return zn(t)&&(isNaN(t)||t in r)?(l=t.charAt(0),c=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(a<0?s:i).totalDuration()/100:1)):a<0?(t in r||(r[t]=o),r[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),c&&i&&(l=l/100*(Ti(i)?i[0]:i).totalDuration()),a>1?n(e,t.substr(0,a-1),i)+l:o+l)):t==null?o:+t},Tp=function(e,t,i){var r=ra(t[1]),s=(r?2:1)+(e<2?0:1),o=t[s],a,l;if(r&&(o.duration=t[1]),o.parent=i,e){for(a=o,l=i;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=mr(l.vars.inherit)&&l.parent;o.immediateRender=mr(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new bn(t[0],o,t[s+1])},sl=function(e,t){return e||e===0?t(e):t},Np=function(e,t,i){return i<e?e:i>t?t:i},pi=function(e,t){return!zn(e)||!(t=W7.exec(e))?"":t[1]},rQ=function(e,t,i){return sl(i,function(r){return Np(e,t,r)})},sI=[].slice,g2=function(e,t){return e&&oo(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&oo(e[0]))&&!e.nodeType&&e!==ro},sQ=function(e,t,i){return i===void 0&&(i=[]),e.forEach(function(r){var s;return zn(r)&&!t||g2(r,1)?(s=i).push.apply(s,rs(r)):i.push(r)})||i},rs=function(e,t,i){return Qt&&!t&&Qt.selector?Qt.selector(e):zn(e)&&!i&&(tI||!Vd())?sI.call((t||pI).querySelectorAll(e),0):Ti(e)?sQ(e,i):g2(e)?sI.call(e,0):e?[e]:[]},oI=function(e){return e=rs(e)[0]||Ap("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return rs(t,i.querySelectorAll?i:i===e?Ap("Invalid scope")||pI.createElement("div"):e)}},m2=function(e){return e.sort(function(){return .5-Math.random()})},_2=function(e){if(gn(e))return e;var t=oo(e)?e:{each:e},i=Dc(t.ease),r=t.from||0,s=parseFloat(t.base)||0,o={},a=r>0&&r<1,l=isNaN(r)||a,c=t.axis,d=r,h=r;return zn(r)?d=h={center:.5,edges:.5,end:1}[r]||0:!a&&l&&(d=r[0],h=r[1]),function(f,p,y){var _=(y||t).length,w=o[_],A,x,M,R,P,N,C,b,v;if(!w){if(v=t.grid==="auto"?0:(t.grid||[1,is])[1],!v){for(C=-is;C<(C=y[v++].getBoundingClientRect().left)&&v<_;);v<_&&v--}for(w=o[_]=[],A=l?Math.min(v,_)*d-.5:r%v,x=v===is?0:l?_*h/v-.5:r/v|0,C=0,b=is,N=0;N<_;N++)M=N%v-A,R=x-(N/v|0),w[N]=P=c?Math.abs(c==="y"?R:M):t2(M*M+R*R),P>C&&(C=P),P<b&&(b=P);r==="random"&&m2(w),w.max=C-b,w.min=b,w.v=_=(parseFloat(t.amount)||parseFloat(t.each)*(v>_?_-1:c?c==="y"?_/v:v:Math.max(v,_/v))||0)*(r==="edges"?-1:1),w.b=_<0?s-_:s,w.u=pi(t.amount||t.each)||0,i=i&&_<0?T2(i):i}return _=(w[f]-w.min)/w.max||0,ni(w.b+(i?i(_):_)*w.v)+w.u}},aI=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var r=ni(Math.round(parseFloat(i)/e)*e*t);return(r-r%1)/t+(ra(i)?0:pi(i))}},y2=function(e,t){var i=Ti(e),r,s;return!i&&oo(e)&&(r=i=e.radius||is,e.values?(e=rs(e.values),(s=!ra(e[0]))&&(r*=r)):e=aI(e.increment)),sl(t,i?gn(e)?function(o){return s=e(o),Math.abs(s-o)<=r?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),c=is,d=0,h=e.length,f,p;h--;)s?(f=e[h].x-a,p=e[h].y-l,f=f*f+p*p):f=Math.abs(e[h]-a),f<c&&(c=f,d=h);return d=!r||c<=r?e[d]:o,s||d===o||ra(o)?d:d+pi(o)}:aI(e))},v2=function(e,t,i,r){return sl(Ti(e)?!t:i===!0?!!(i=0):!r,function(){return Ti(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+i*.99))/i)*i*r)/r})},oQ=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(r){return t.reduce(function(s,o){return o(s)},r)}},aQ=function(e,t){return function(i){return e(parseFloat(i))+(t||pi(i))}},lQ=function(e,t,i){return b2(e,t,0,1,i)},w2=function(e,t,i){return sl(i,function(r){return e[~~t(r)]})},cQ=function n(e,t,i){var r=t-e;return Ti(e)?w2(e,n(0,e.length),t):sl(i,function(s){return(r+(s-e)%r)%r+e})},uQ=function n(e,t,i){var r=t-e,s=r*2;return Ti(e)?w2(e,n(0,e.length-1),t):sl(i,function(o){return o=(s+(o-e)%s)%s||0,e+(o>r?s-o:o)})},Bd=function(e){for(var t=0,i="",r,s,o,a;~(r=e.indexOf("random(",t));)o=e.indexOf(")",r),a=e.charAt(r+7)==="[",s=e.substr(r+7,o-r-7).match(a?i2:eI),i+=e.substr(t,r-t)+v2(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return i+e.substr(t,e.length-t)},b2=function(e,t,i,r,s){var o=t-e,a=r-i;return sl(s,function(l){return i+((l-e)/o*a||0)})},dQ=function n(e,t,i,r){var s=isNaN(e+t)?0:function(p){return(1-p)*e+p*t};if(!s){var o=zn(e),a={},l,c,d,h,f;if(i===!0&&(r=1)&&(i=null),o)e={p:e},t={p:t};else if(Ti(e)&&!Ti(t)){for(d=[],h=e.length,f=h-2,c=1;c<h;c++)d.push(n(e[c-1],e[c]));h--,s=function(y){y*=h;var _=Math.min(f,~~y);return d[_](y-_)},i=t}else r||(e=Tc(Ti(e)?[]:{},e));if(!d){for(l in t)bI.call(a,e,l,"get",t[l]);s=function(y){return TI(y,a)||(o?e.p:e)}}}return sl(i,s)},JL=function(e,t,i){var r=e.labels,s=is,o,a,l;for(o in r)a=r[o]-t,a<0==!!i&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},Mr=function(e,t,i){var r=e.vars,s=r[t],o=Qt,a=e._ctx,l,c,d;if(s)return l=r[t+"Params"],c=r.callbackScope||e,i&&nl.length&&O0(),a&&(Qt=a),d=l?s.apply(c,l):s.call(c),Qt=o,d},Cp=function(e){return rl(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Ii),e.progress()<1&&Mr(e,"onInterrupt"),e},Pd,E2=[],C2=function(e){if(e)if(e=!e.name&&e.default||e,dI()||e.headless){var t=e.name,i=gn(e),r=t&&!i&&e.init?function(){this._props=[]}:e,s={init:Mp,render:TI,add:bI,kill:SQ,modifier:TQ,rawVars:0},o={targetTest:0,get:0,getSetter:$0,aliases:{},register:0};if(Vd(),e!==r){if(pr[t])return;ss(r,ss(P0(e,s),o)),Tc(r.prototype,Tc(s,P0(e,o))),pr[r.prop=t]=r,e.targetTest&&(x0.push(r),gI[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}o2(t,r),e.register&&e.register(Si,r,zi)}else E2.push(e)},kt=255,Dp={aqua:[0,kt,kt],lime:[0,kt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,kt],navy:[0,0,128],white:[kt,kt,kt],olive:[128,128,0],yellow:[kt,kt,0],orange:[kt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[kt,0,0],pink:[kt,192,203],cyan:[0,kt,kt],transparent:[kt,kt,kt,0]},KD=function(e,t,i){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(i-t)*e*6:e<.5?i:e*3<2?t+(i-t)*(2/3-e)*6:t)*kt+.5|0},D2=function(e,t,i){var r=e?ra(e)?[e>>16,e>>8&kt,e&kt]:0:Dp.black,s,o,a,l,c,d,h,f,p,y;if(!r){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Dp[e])r=Dp[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return r=parseInt(e.substr(1,6),16),[r>>16,r>>8&kt,r&kt,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),r=[e>>16,e>>8&kt,e&kt]}else if(e.substr(0,3)==="hsl"){if(r=y=e.match(eI),!t)l=+r[0]%360/360,c=+r[1]/100,d=+r[2]/100,o=d<=.5?d*(c+1):d+c-d*c,s=d*2-o,r.length>3&&(r[3]*=1),r[0]=KD(l+1/3,s,o),r[1]=KD(l,s,o),r[2]=KD(l-1/3,s,o);else if(~e.indexOf("="))return r=e.match(hI),i&&r.length<4&&(r[3]=1),r}else r=e.match(eI)||Dp.transparent;r=r.map(Number)}return t&&!y&&(s=r[0]/kt,o=r[1]/kt,a=r[2]/kt,h=Math.max(s,o,a),f=Math.min(s,o,a),d=(h+f)/2,h===f?l=c=0:(p=h-f,c=d>.5?p/(2-h-f):p/(h+f),l=h===s?(o-a)/p+(o<a?6:0):h===o?(a-s)/p+2:(s-o)/p+4,l*=60),r[0]=~~(l+.5),r[1]=~~(c*100+.5),r[2]=~~(d*100+.5)),i&&r.length<4&&(r[3]=1),r},I2=function(e){var t=[],i=[],r=-1;return e.split(ia).forEach(function(s){var o=s.match(Sc)||[];t.push.apply(t,o),i.push(r+=o.length+1)}),t.c=i,t},ZL=function(e,t,i){var r="",s=(e+r).match(ia),o=t?"hsla(":"rgba(",a=0,l,c,d,h;if(!s)return e;if(s=s.map(function(f){return(f=D2(f,t,1))&&o+(t?f[0]+","+f[1]+"%,"+f[2]+"%,"+f[3]:f.join(","))+")"}),i&&(d=I2(e),l=i.c,l.join(r)!==d.c.join(r)))for(c=e.replace(ia,"1").split(Sc),h=c.length-1;a<h;a++)r+=c[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(d.length?d:s.length?s:i).shift());if(!c)for(c=e.split(ia),h=c.length-1;a<h;a++)r+=c[a]+s[a];return r+c[h]},ia=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Dp)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),hQ=/hsl[a]?\(/,vI=function(e){var t=e.join(" "),i;if(ia.lastIndex=0,ia.test(t))return i=hQ.test(t),e[1]=ZL(e[1],i),e[0]=ZL(e[0],i,I2(e[1])),!0},xp,gr=function(){var n=Date.now,e=500,t=33,i=n(),r=i,s=1e3/240,o=s,a=[],l,c,d,h,f,p,y=function _(w){var A=n()-r,x=w===!0,M,R,P,N;if((A>e||A<0)&&(i+=A-t),r+=A,P=r-i,M=P-o,(M>0||x)&&(N=++h.frame,f=P-h.time*1e3,h.time=P=P/1e3,o+=M+(M>=s?4:s-M),R=1),x||(l=c(_)),R)for(p=0;p<a.length;p++)a[p](P,f,N,w)};return h={time:0,frame:0,tick:function(){y(!0)},deltaRatio:function(w){return f/(1e3/(w||60))},wake:function(){r2&&(!tI&&dI()&&(ro=tI=window,pI=ro.document||{},xr.gsap=Si,(ro.gsapVersions||(ro.gsapVersions=[])).push(Si.version),s2(N0||ro.GreenSockGlobals||!ro.gsap&&ro||{}),E2.forEach(C2)),d=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&h.sleep(),c=d||function(w){return setTimeout(w,o-h.time*1e3+1|0)},xp=1,y(2))},sleep:function(){(d?cancelAnimationFrame:clearTimeout)(l),xp=0,c=Mp},lagSmoothing:function(w,A){e=w||1/0,t=Math.min(A||33,e)},fps:function(w){s=1e3/(w||240),o=h.time*1e3+s},add:function(w,A,x){var M=A?function(R,P,N,C){w(R,P,N,C),h.remove(M)}:w;return h.remove(w),a[x?"unshift":"push"](M),Vd(),M},remove:function(w,A){~(A=a.indexOf(w))&&a.splice(A,1)&&p>=A&&p--},_listeners:a},h}(),Vd=function(){return!xp&&gr.wake()},ct={},fQ=/^[\d.\-M][\d.\-,\s]/,pQ=/["']/g,gQ=function(e){for(var t={},i=e.substr(1,e.length-3).split(":"),r=i[0],s=1,o=i.length,a,l,c;s<o;s++)l=i[s],a=s!==o-1?l.lastIndexOf(","):l.length,c=l.substr(0,a),t[r]=isNaN(c)?c.replace(pQ,"").trim():+c,r=l.substr(a+1).trim();return t},mQ=function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<i?e.indexOf(")",i+1):i)},_Q=function(e){var t=(e+"").split("("),i=ct[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[gQ(t[1])]:mQ(e).split(",").map(c2)):ct._CE&&fQ.test(e)?ct._CE("",e):i},T2=function(e){return function(t){return 1-e(1-t)}},S2=function n(e,t){for(var i=e._first,r;i;)i instanceof fi?n(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?n(i.timeline,t):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=t)),i=i._next},Dc=function(e,t){return e&&(gn(e)?e:ct[e]||_Q(e))||t},Mc=function(e,t,i,r){i===void 0&&(i=function(l){return 1-t(1-l)}),r===void 0&&(r=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:i,easeInOut:r},o;return Hi(e,function(a){ct[a]=xr[a]=s,ct[o=a.toLowerCase()]=i;for(var l in s)ct[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=ct[a+"."+l]=s[l]}),s},A2=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},QD=function n(e,t,i){var r=t>=1?t:1,s=(i||(e?.3:.45))/(t<1?t:1),o=s/XD*(Math.asin(1/r)||0),a=function(d){return d===1?1:r*Math.pow(2,-10*d)*G7((d-o)*s)+1},l=e==="out"?a:e==="in"?function(c){return 1-a(1-c)}:A2(a);return s=XD/s,l.config=function(c,d){return n(e,c,d)},l},YD=function n(e,t){t===void 0&&(t=1.70158);var i=function(o){return o?--o*o*((t+1)*o+t)+1:0},r=e==="out"?i:e==="in"?function(s){return 1-i(1-s)}:A2(i);return r.config=function(s){return n(e,s)},r};Hi("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;Mc(n+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(i*2,t)/2:1-Math.pow((1-i)*2,t)/2})});ct.Linear.easeNone=ct.none=ct.Linear.easeIn;Mc("Elastic",QD("in"),QD("out"),QD());(function(n,e){var t=1/e,i=2*t,r=2.5*t,s=function(a){return a<t?n*a*a:a<i?n*Math.pow(a-1.5/e,2)+.75:a<r?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};Mc("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);Mc("Expo",function(n){return n?Math.pow(2,10*(n-1)):0});Mc("Circ",function(n){return-(t2(1-n*n)-1)});Mc("Sine",function(n){return n===1?1:-z7(n*$7)+1});Mc("Back",YD("in"),YD("out"),YD());ct.SteppedEase=ct.steps=xr.SteppedEase={config:function(e,t){e===void 0&&(e=1);var i=1/e,r=e+(t?0:1),s=t?1:0,o=1-Bt;return function(a){return((r*Np(0,o,a)|0)+s)*i}}};kd.ease=ct["quad.out"];Hi("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return mI+=n+","+n+"Params,"});var wI=function(e,t){this.id=H7++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:yI,this.set=t?t.getSetter:$0},Rp=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Ld(this,+t.duration,1,1),this.data=t.data,Qt&&(this._ctx=Qt,Qt.data.push(this)),xp||gr.wake()}var e=n.prototype;return e.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,Ld(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,r){if(Vd(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(U0(this,i),!s._dp||s.parent||h2(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&so(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===Bt||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),l2(this,i,r)),this},e.time=function(i,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+QL(this))%(this._dur+this._rDelay)||(i?this._dur:0),r):this._time},e.totalProgress=function(i,r){return arguments.length?this.totalTime(this.totalDuration()*i,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(i,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+QL(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(i,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,r):this._repeat?Fd(this._tTime,s)+1:1},e.timeScale=function(i,r){if(!arguments.length)return this._rts===-Bt?0:this._rts;if(this._rts===i)return this;var s=this.parent&&this._ts?k0(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-Bt?0:this._rts,this.totalTime(Np(-Math.abs(this._delay),this._tDur,s),r!==!1),j0(this),Z7(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Vd(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Bt&&(this._tTime-=Bt)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&so(r,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+(mr(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var r=this.parent||this._dp;return r?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?k0(r.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){i===void 0&&(i=K7);var r=Ii;return Ii=i,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),Ii=r,this},e.globalTime=function(i){for(var r=this,s=arguments.length?i:r.rawTime();r;)s=r._start+s/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(i):s},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,YL(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var r=this._time;return this._rDelay=i,YL(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,r){return this.totalTime(ns(this,i),mr(r))},e.restart=function(i,r){return this.play().totalTime(i?-this._delay:0,mr(r))},e.play=function(i,r){return i!=null&&this.seek(i,r),this.reversed(!1).paused(!1)},e.reverse=function(i,r){return i!=null&&this.seek(i||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(i,r){return i!=null&&this.seek(i,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-Bt:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Bt,this},e.isActive=function(){var i=this.parent||this._dp,r=this._start,s;return!!(!i||this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=r&&s<this.endTime(!0)-Bt)},e.eventCallback=function(i,r,s){var o=this.vars;return arguments.length>1?(r?(o[i]=r,s&&(o[i+"Params"]=s),i==="onUpdate"&&(this._onUpdate=r)):delete o[i],this):o[i]},e.then=function(i){var r=this;return new Promise(function(s){var o=gn(i)?i:u2,a=function(){var c=r.then;r.then=null,gn(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=c),s(o),r.then=c};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},e.kill=function(){Cp(this)},n}();ss(Rp.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Bt,_prom:0,_ps:!1,_rts:1});var fi=function(n){e2(e,n);function e(i,r){var s;return i===void 0&&(i={}),s=n.call(this,i)||this,s.labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=mr(i.sortChildren),tn&&so(i.parent||tn,na(s),r),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&f2(na(s),i.scrollTrigger),s}var t=e.prototype;return t.to=function(r,s,o){return Tp(0,arguments,this),this},t.from=function(r,s,o){return Tp(1,arguments,this),this},t.fromTo=function(r,s,o,a){return Tp(2,arguments,this),this},t.set=function(r,s,o){return s.duration=0,s.parent=this,Ip(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new bn(r,s,ns(this,o),1),this},t.call=function(r,s,o){return so(this,bn.delayedCall(0,r,s),o)},t.staggerTo=function(r,s,o,a,l,c,d){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=c,o.onCompleteParams=d,o.parent=this,new bn(r,o,ns(this,l)),this},t.staggerFrom=function(r,s,o,a,l,c,d){return o.runBackwards=1,Ip(o).immediateRender=mr(o.immediateRender),this.staggerTo(r,s,o,a,l,c,d)},t.staggerFromTo=function(r,s,o,a,l,c,d,h){return a.startAt=o,Ip(a).immediateRender=mr(a.immediateRender),this.staggerTo(r,s,a,l,c,d,h)},t.render=function(r,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,d=r<=0?0:ni(r),h=this._zTime<0!=r<0&&(this._initted||!c),f,p,y,_,w,A,x,M,R,P,N,C;if(this!==tn&&d>l&&r>=0&&(d=l),d!==this._tTime||o||h){if(a!==this._time&&c&&(d+=this._time-a,r+=this._time-a),f=d,R=this._start,M=this._ts,A=!M,h&&(c||(a=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(N=this._yoyo,w=c+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(w*100+r,s,o);if(f=ni(d%w),d===l?(_=this._repeat,f=c):(_=~~(d/w),_&&_===d/w&&(f=c,_--),f>c&&(f=c)),P=Fd(this._tTime,w),!a&&this._tTime&&P!==_&&this._tTime-P*w-this._dur<=0&&(P=_),N&&_&1&&(f=c-f,C=1),_!==P&&!this._lock){var b=N&&P&1,v=b===(N&&_&1);if(_<P&&(b=!b),a=b?0:d%c?c:d,this._lock=1,this.render(a||(C?0:ni(_*w)),s,!c)._lock=0,this._tTime=d,!s&&this.parent&&Mr(this,"onRepeat"),this.vars.repeatRefresh&&!C&&(this.invalidate()._lock=1),a&&a!==this._time||A!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,v&&(this._lock=2,a=b?c:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!C&&this.invalidate()),this._lock=0,!this._ts&&!A)return this;S2(this,C)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(x=nQ(this,ni(a),ni(f)),x&&(d-=f-(f=x._start))),this._tTime=d,this._time=f,this._act=!M,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&f&&!s&&!_&&(Mr(this,"onStart"),this._tTime!==d))return this;if(f>=a&&r>=0)for(p=this._first;p;){if(y=p._next,(p._act||f>=p._start)&&p._ts&&x!==p){if(p.parent!==this)return this.render(r,s,o);if(p.render(p._ts>0?(f-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(f-p._start)*p._ts,s,o),f!==this._time||!this._ts&&!A){x=0,y&&(d+=this._zTime=-Bt);break}}p=y}else{p=this._last;for(var E=r<0?r:f;p;){if(y=p._prev,(p._act||E<=p._end)&&p._ts&&x!==p){if(p.parent!==this)return this.render(r,s,o);if(p.render(p._ts>0?(E-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(E-p._start)*p._ts,s,o||Ii&&(p._initted||p._startAt)),f!==this._time||!this._ts&&!A){x=0,y&&(d+=this._zTime=E?-Bt:Bt);break}}p=y}}if(x&&!s&&(this.pause(),x.render(f>=a?0:-Bt)._zTime=f>=a?1:-1,this._ts))return this._start=R,j0(this),this.render(r,s,o);this._onUpdate&&!s&&Mr(this,"onUpdate",!0),(d===l&&this._tTime>=this.totalDuration()||!d&&a)&&(R===this._start||Math.abs(M)!==Math.abs(this._ts))&&(this._lock||((r||!c)&&(d===l&&this._ts>0||!d&&this._ts<0)&&rl(this,1),!s&&!(r<0&&!a)&&(d||a||!l)&&(Mr(this,d===l&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(d<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,s){var o=this;if(ra(s)||(s=ns(this,s,r)),!(r instanceof Rp)){if(Ti(r))return r.forEach(function(a){return o.add(a,s)}),this;if(zn(r))return this.addLabel(r,s);if(gn(r))r=bn.delayedCall(0,r);else return this}return this!==r?so(this,r,s):this},t.getChildren=function(r,s,o,a){r===void 0&&(r=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-is);for(var l=[],c=this._first;c;)c._start>=a&&(c instanceof bn?s&&l.push(c):(o&&l.push(c),r&&l.push.apply(l,c.getChildren(!0,s,o)))),c=c._next;return l},t.getById=function(r){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===r)return s[o]},t.remove=function(r){return zn(r)?this.removeLabel(r):gn(r)?this.killTweensOf(r):(B0(this,r),r===this._recent&&(this._recent=this._last),Cc(this))},t.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ni(gr.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),n.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},t.addLabel=function(r,s){return this.labels[r]=ns(this,s),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,s,o){var a=bn.delayedCall(0,s||Mp,o);return a.data="isPause",this._hasPause=1,so(this,a,ns(this,r))},t.removePause=function(r){var s=this._first;for(r=ns(this,r);s;)s._start===r&&s.data==="isPause"&&rl(s),s=s._next},t.killTweensOf=function(r,s,o){for(var a=this.getTweensOf(r,o),l=a.length;l--;)tl!==a[l]&&a[l].kill(r,s);return this},t.getTweensOf=function(r,s){for(var o=[],a=rs(r),l=this._first,c=ra(s),d;l;)l instanceof bn?Q7(l._targets,a)&&(c?(!tl||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(d=l.getTweensOf(a,s)).length&&o.push.apply(o,d),l=l._next;return o},t.tweenTo=function(r,s){s=s||{};var o=this,a=ns(o,r),l=s,c=l.startAt,d=l.onStart,h=l.onStartParams,f=l.immediateRender,p,y=bn.to(o,ss({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale())||Bt,onStart:function(){if(o.pause(),!p){var w=s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale());y._dur!==w&&Ld(y,w,0,1).render(y._time,!0,!0),p=1}d&&d.apply(y,h||[])}},s));return f?y.render(0):y},t.tweenFromTo=function(r,s,o){return this.tweenTo(s,ss({startAt:{time:ns(this,r)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(r){return r===void 0&&(r=this._time),JL(this,ns(this,r))},t.previousLabel=function(r){return r===void 0&&(r=this._time),JL(this,ns(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+Bt)},t.shiftChildren=function(r,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,c;a;)a._start>=o&&(a._start+=r,a._end+=r),a=a._next;if(s)for(c in l)l[c]>=o&&(l[c]+=r);return Cc(this)},t.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return n.prototype.invalidate.call(this,r)},t.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),Cc(this)},t.totalDuration=function(r){var s=0,o=this,a=o._last,l=is,c,d,h;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(h=o.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),d=a._start,d>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,so(o,a,d-a._delay,1)._lock=0):l=d,d<0&&a._ts&&(s-=d,(!h&&!o._dp||h&&h.smoothChildTiming)&&(o._start+=d/o._ts,o._time-=d,o._tTime-=d),o.shiftChildren(-d,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=c;Ld(o,o===tn&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(r){if(tn._ts&&(l2(tn,k0(r,tn)),a2=gr.frame),gr.frame>=qL){qL+=_r.autoSleep||120;var s=tn._first;if((!s||!s._ts)&&_r.autoSleep&&gr._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||gr.sleep()}}},e}(Rp);ss(fi.prototype,{_lock:0,_hasPause:0,_forcing:0});var yQ=function(e,t,i,r,s,o,a){var l=new zi(this._pt,e,t,0,1,II,null,s),c=0,d=0,h,f,p,y,_,w,A,x;for(l.b=i,l.e=r,i+="",r+="",(A=~r.indexOf("random("))&&(r=Bd(r)),o&&(x=[i,r],o(x,e,t),i=x[0],r=x[1]),f=i.match(WD)||[];h=WD.exec(r);)y=h[0],_=r.substring(c,h.index),p?p=(p+1)%5:_.substr(-5)==="rgba("&&(p=1),y!==f[d++]&&(w=parseFloat(f[d-1])||0,l._pt={_next:l._pt,p:_||d===1?_:",",s:w,c:y.charAt(1)==="="?Ac(w,y)-w:parseFloat(y)-w,m:p&&p<4?Math.round:0},c=WD.lastIndex);return l.c=c<r.length?r.substring(c,r.length):"",l.fp=a,(fI.test(r)||A)&&(l.e=0),this._pt=l,l},bI=function(e,t,i,r,s,o,a,l,c,d){gn(r)&&(r=r(s||0,e,o));var h=e[t],f=i!=="get"?i:gn(h)?c?e[t.indexOf("set")||!gn(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():h,p=gn(h)?c?CQ:R2:DI,y;if(zn(r)&&(~r.indexOf("random(")&&(r=Bd(r)),r.charAt(1)==="="&&(y=Ac(f,r)+(pi(f)||0),(y||y===0)&&(r=y))),!d||f!==r||lI)return!isNaN(f*r)&&r!==""?(y=new zi(this._pt,e,t,+f||0,r-(f||0),typeof h=="boolean"?IQ:N2,0,p),c&&(y.fp=c),a&&y.modifier(a,this,e),this._pt=y):(!h&&!(t in e)&&V0(t,r),yQ.call(this,e,t,f,r,p,l||_r.stringFilter,c))},vQ=function(e,t,i,r,s){if(gn(e)&&(e=Sp(e,s,t,i,r)),!oo(e)||e.style&&e.nodeType||Ti(e)||n2(e))return zn(e)?Sp(e,s,t,i,r):e;var o={},a;for(a in e)o[a]=Sp(e[a],s,t,i,r);return o},EI=function(e,t,i,r,s,o){var a,l,c,d;if(pr[e]&&(a=new pr[e]).init(s,a.rawVars?t[e]:vQ(t[e],r,s,o,i),i,r,o)!==!1&&(i._pt=l=new zi(i._pt,s,e,0,1,a.render,a,0,a.priority),i!==Pd))for(c=i._ptLookup[i._targets.indexOf(s)],d=a._props.length;d--;)c[a._props[d]]=l;return a},tl,lI,CI=function n(e,t,i){var r=e.vars,s=r.ease,o=r.startAt,a=r.immediateRender,l=r.lazy,c=r.onUpdate,d=r.runBackwards,h=r.yoyoEase,f=r.keyframes,p=r.autoRevert,y=e._dur,_=e._startAt,w=e._targets,A=e.parent,x=A&&A.data==="nested"?A.vars.targets:w,M=e._overwrite==="auto"&&!uI,R=e.timeline,P,N,C,b,v,E,S,I,T,le,ye,be,ae;if(R&&(!f||!s)&&(s="none"),e._ease=Dc(s,kd.ease),e._yEase=h?T2(Dc(h===!0?s:h,kd.ease)):0,h&&e._yoyo&&!e._repeat&&(h=e._yEase,e._yEase=e._ease,e._ease=h),e._from=!R&&!!r.runBackwards,!R||f&&!r.stagger){if(I=w[0]?il(w[0]).harness:0,be=I&&r[I.prop],P=P0(r,gI),_&&(_._zTime<0&&_.progress(1),t<0&&d&&a&&!p?_.render(-1,!0):_.revert(d&&y?M0:q7),_._lazy=0),o){if(rl(e._startAt=bn.set(w,ss({data:"isStart",overwrite:!1,parent:A,immediateRender:!0,lazy:!_&&mr(l),startAt:null,delay:0,onUpdate:c&&function(){return Mr(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Ii||!a&&!p)&&e._startAt.revert(M0),a&&y&&t<=0&&i<=0){t&&(e._zTime=t);return}}else if(d&&y&&!_){if(t&&(a=!1),C=ss({overwrite:!1,data:"isFromStart",lazy:a&&!_&&mr(l),immediateRender:a,stagger:0,parent:A},P),be&&(C[I.prop]=be),rl(e._startAt=bn.set(w,C)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Ii?e._startAt.revert(M0):e._startAt.render(-1,!0)),e._zTime=t,!a)n(e._startAt,Bt,Bt);else if(!t)return}for(e._pt=e._ptCache=0,l=y&&mr(l)||l&&!y,N=0;N<w.length;N++){if(v=w[N],S=v._gsap||_I(w)[N]._gsap,e._ptLookup[N]=le={},nI[S.id]&&nl.length&&O0(),ye=x===w?N:x.indexOf(v),I&&(T=new I).init(v,be||P,e,ye,x)!==!1&&(e._pt=b=new zi(e._pt,v,T.name,0,1,T.render,T,0,T.priority),T._props.forEach(function(Re){le[Re]=b}),T.priority&&(E=1)),!I||be)for(C in P)pr[C]&&(T=EI(C,P,e,ye,v,x))?T.priority&&(E=1):le[C]=b=bI.call(e,v,C,"get",P[C],ye,x,0,r.stringFilter);e._op&&e._op[N]&&e.kill(v,e._op[N]),M&&e._pt&&(tl=e,tn.killTweensOf(v,le,e.globalTime(t)),ae=!e.parent,tl=0),e._pt&&l&&(nI[S.id]=1)}E&&SI(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!ae,f&&t<=0&&R.render(is,!0,!0)},wQ=function(e,t,i,r,s,o,a,l){var c=(e._pt&&e._ptCache||(e._ptCache={}))[t],d,h,f,p;if(!c)for(c=e._ptCache[t]=[],f=e._ptLookup,p=e._targets.length;p--;){if(d=f[p][t],d&&d.d&&d.d._pt)for(d=d.d._pt;d&&d.p!==t&&d.fp!==t;)d=d._next;if(!d)return lI=1,e.vars[t]="+=0",CI(e,a),lI=0,l?Ap(t+" not eligible for reset"):1;c.push(d)}for(p=c.length;p--;)h=c[p],d=h._pt||h,d.s=(r||r===0)&&!s?r:d.s+(r||0)+o*d.c,d.c=i-d.s,h.e&&(h.e=mn(i)+pi(h.e)),h.b&&(h.b=d.s+pi(h.b))},bQ=function(e,t){var i=e[0]?il(e[0]).harness:0,r=i&&i.aliases,s,o,a,l;if(!r)return t;s=Tc({},t);for(o in r)if(o in s)for(l=r[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},EQ=function(e,t,i,r){var s=t.ease||r||"power1.inOut",o,a;if(Ti(t))a=i[e]||(i[e]=[]),t.forEach(function(l,c){return a.push({t:c/(t.length-1)*100,v:l,e:s})});else for(o in t)a=i[o]||(i[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:s})},Sp=function(e,t,i,r,s){return gn(e)?e.call(t,i,r,s):zn(e)&&~e.indexOf("random(")?Bd(e):e},M2=mI+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",x2={};Hi(M2+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return x2[n]=1});var bn=function(n){e2(e,n);function e(i,r,s,o){var a;typeof r=="number"&&(s.duration=r,r=s,s=null),a=n.call(this,o?r:Ip(r))||this;var l=a.vars,c=l.duration,d=l.delay,h=l.immediateRender,f=l.stagger,p=l.overwrite,y=l.keyframes,_=l.defaults,w=l.scrollTrigger,A=l.yoyoEase,x=r.parent||tn,M=(Ti(i)||n2(i)?ra(i[0]):"length"in r)?[i]:rs(i),R,P,N,C,b,v,E,S;if(a._targets=M.length?_I(M):Ap("GSAP target "+i+" not found. https://gsap.com",!_r.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=p,y||f||A0(c)||A0(d)){if(r=a.vars,R=a.timeline=new fi({data:"nested",defaults:_||{},targets:x&&x.data==="nested"?x.vars.targets:M}),R.kill(),R.parent=R._dp=na(a),R._start=0,f||A0(c)||A0(d)){if(C=M.length,E=f&&_2(f),oo(f))for(b in f)~M2.indexOf(b)&&(S||(S={}),S[b]=f[b]);for(P=0;P<C;P++)N=P0(r,x2),N.stagger=0,A&&(N.yoyoEase=A),S&&Tc(N,S),v=M[P],N.duration=+Sp(c,na(a),P,v,M),N.delay=(+Sp(d,na(a),P,v,M)||0)-a._delay,!f&&C===1&&N.delay&&(a._delay=d=N.delay,a._start+=d,N.delay=0),R.to(v,N,E?E(P,v,M):0),R._ease=ct.none;R.duration()?c=d=0:a.timeline=0}else if(y){Ip(ss(R.vars.defaults,{ease:"none"})),R._ease=Dc(y.ease||r.ease||"none");var I=0,T,le,ye;if(Ti(y))y.forEach(function(be){return R.to(M,be,">")}),R.duration();else{N={};for(b in y)b==="ease"||b==="easeEach"||EQ(b,y[b],N,y.easeEach);for(b in N)for(T=N[b].sort(function(be,ae){return be.t-ae.t}),I=0,P=0;P<T.length;P++)le=T[P],ye={ease:le.e,duration:(le.t-(P?T[P-1].t:0))/100*c},ye[b]=le.v,R.to(M,ye,I),I+=ye.duration;R.duration()<c&&R.to({},{duration:c-R.duration()})}}c||a.duration(c=R.duration())}else a.timeline=0;return p===!0&&!uI&&(tl=na(a),tn.killTweensOf(M),tl=0),so(x,na(a),s),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(h||!c&&!y&&a._start===ni(x._time)&&mr(h)&&X7(na(a))&&x.data!=="nested")&&(a._tTime=-Bt,a.render(Math.max(0,-d)||0)),w&&f2(na(a),w),a}var t=e.prototype;return t.render=function(r,s,o){var a=this._time,l=this._tDur,c=this._dur,d=r<0,h=r>l-Bt&&!d?l:r<Bt?0:r,f,p,y,_,w,A,x,M,R;if(!c)tQ(this,r,s,o);else if(h!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==d){if(f=h,M=this.timeline,this._repeat){if(_=c+this._rDelay,this._repeat<-1&&d)return this.totalTime(_*100+r,s,o);if(f=ni(h%_),h===l?(y=this._repeat,f=c):(y=~~(h/_),y&&y===ni(h/_)&&(f=c,y--),f>c&&(f=c)),A=this._yoyo&&y&1,A&&(R=this._yEase,f=c-f),w=Fd(this._tTime,_),f===a&&!o&&this._initted&&y===w)return this._tTime=h,this;y!==w&&(M&&this._yEase&&S2(M,A),this.vars.repeatRefresh&&!A&&!this._lock&&this._time!==_&&this._initted&&(this._lock=o=1,this.render(ni(_*y),!0).invalidate()._lock=0))}if(!this._initted){if(p2(this,d?r:f,o,s,h))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&y!==w))return this;if(c!==this._dur)return this.render(r,s,o)}if(this._tTime=h,this._time=f,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=x=(R||this._ease)(f/c),this._from&&(this.ratio=x=1-x),f&&!a&&!s&&!y&&(Mr(this,"onStart"),this._tTime!==h))return this;for(p=this._pt;p;)p.r(x,p.d),p=p._next;M&&M.render(r<0?r:M._dur*M._ease(f/this._dur),s,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(d&&iI(this,r,s,o),Mr(this,"onUpdate")),this._repeat&&y!==w&&this.vars.onRepeat&&!s&&this.parent&&Mr(this,"onRepeat"),(h===this._tDur||!h)&&this._tTime===h&&(d&&!this._onUpdate&&iI(this,r,!0,!0),(r||!c)&&(h===this._tDur&&this._ts>0||!h&&this._ts<0)&&rl(this,1),!s&&!(d&&!a)&&(h||a||A)&&(Mr(this,h===l?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),n.prototype.invalidate.call(this,r)},t.resetTo=function(r,s,o,a,l){xp||gr.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),d;return this._initted||CI(this,c),d=this._ease(c/this._dur),wQ(this,r,s,o,a,d,c,l)?this.resetTo(r,s,o,a,1):(U0(this,0),this.parent||d2(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?Cp(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,tl&&tl.vars.overwrite!==!0)._first||Cp(this),this.parent&&o!==this.timeline.totalDuration()&&Ld(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=r?rs(r):a,c=this._ptLookup,d=this._pt,h,f,p,y,_,w,A;if((!s||s==="all")&&J7(a,l))return s==="all"&&(this._pt=0),Cp(this);for(h=this._op=this._op||[],s!=="all"&&(zn(s)&&(_={},Hi(s,function(x){return _[x]=1}),s=_),s=bQ(a,s)),A=a.length;A--;)if(~l.indexOf(a[A])){f=c[A],s==="all"?(h[A]=s,y=f,p={}):(p=h[A]=h[A]||{},y=s);for(_ in y)w=f&&f[_],w&&((!("kill"in w.d)||w.d.kill(_)===!0)&&B0(this,w,"_pt"),delete f[_]),p!=="all"&&(p[_]=1)}return this._initted&&!this._pt&&d&&Cp(this),this},e.to=function(r,s){return new e(r,s,arguments[2])},e.from=function(r,s){return Tp(1,arguments)},e.delayedCall=function(r,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(r,s,o){return Tp(2,arguments)},e.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(r,s)},e.killTweensOf=function(r,s,o){return tn.killTweensOf(r,s,o)},e}(Rp);ss(bn.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Hi("staggerTo,staggerFrom,staggerFromTo",function(n){bn[n]=function(){var e=new fi,t=sI.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var DI=function(e,t,i){return e[t]=i},R2=function(e,t,i){return e[t](i)},CQ=function(e,t,i,r){return e[t](r.fp,i)},DQ=function(e,t,i){return e.setAttribute(t,i)},$0=function(e,t){return gn(e[t])?R2:L0(e[t])&&e.setAttribute?DQ:DI},N2=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},IQ=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},II=function(e,t){var i=t._pt,r="";if(!e&&t.b)r=t.b;else if(e===1&&t.e)r=t.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*e):Math.round((i.s+i.c*e)*1e4)/1e4)+r,i=i._next;r+=t.c}t.set(t.t,t.p,r,t)},TI=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},TQ=function(e,t,i,r){for(var s=this._pt,o;s;)o=s._next,s.p===r&&s.modifier(e,t,i),s=o},SQ=function(e){for(var t=this._pt,i,r;t;)r=t._next,t.p===e&&!t.op||t.op===e?B0(this,t,"_pt"):t.dep||(i=1),t=r;return!i},AQ=function(e,t,i,r){r.mSet(e,t,r.m.call(r.tween,i,r.mt),r)},SI=function(e){for(var t=e._pt,i,r,s,o;t;){for(i=t._next,r=s;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:o)?t._prev._next=t:s=t,(t._next=r)?r._prev=t:o=t,t=i}e._pt=s},zi=function(){function n(t,i,r,s,o,a,l,c,d){this.t=i,this.s=s,this.c=o,this.p=r,this.r=a||N2,this.d=l||this,this.set=c||DI,this.pr=d||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(i,r,s){this.mSet=this.mSet||this.set,this.set=AQ,this.m=i,this.mt=s,this.tween=r},n}();Hi(mI+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return gI[n]=1});xr.TweenMax=xr.TweenLite=bn;xr.TimelineLite=xr.TimelineMax=fi;tn=new fi({sortChildren:!1,defaults:kd,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});_r.stringFilter=vI;var Ic=[],R0={},MQ=[],XL=0,xQ=0,JD=function(e){return(R0[e]||MQ).map(function(t){return t()})},cI=function(){var e=Date.now(),t=[];e-XL>2&&(JD("matchMediaInit"),Ic.forEach(function(i){var r=i.queries,s=i.conditions,o,a,l,c;for(a in r)o=ro.matchMedia(r[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,c=1);c&&(i.revert(),l&&t.push(i))}),JD("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i,function(r){return i.add(null,r)})}),XL=e,JD("matchMedia"))},O2=function(){function n(t,i){this.selector=i&&oI(i),this.data=[],this._r=[],this.isReverted=!1,this.id=xQ++,t&&this.add(t)}var e=n.prototype;return e.add=function(i,r,s){gn(i)&&(s=r,r=i,i=gn);var o=this,a=function(){var c=Qt,d=o.selector,h;return c&&c!==o&&c.data.push(o),s&&(o.selector=oI(s)),Qt=o,h=r.apply(o,arguments),gn(h)&&o._r.push(h),Qt=c,o.selector=d,o.isReverted=!1,h};return o.last=a,i===gn?a(o,function(l){return o.add(null,l)}):i?o[i]=a:a},e.ignore=function(i){var r=Qt;Qt=null,i(this),Qt=r},e.getTweens=function(){var i=[];return this.data.forEach(function(r){return r instanceof n?i.push.apply(i,r.getTweens()):r instanceof bn&&!(r.parent&&r.parent.data==="nested")&&i.push(r)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,r){var s=this;if(i?function(){for(var a=s.getTweens(),l=s.data.length,c;l--;)c=s.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(d){return a.splice(a.indexOf(d),1)}));for(a.map(function(d){return{g:d._dur||d._delay||d._sat&&!d._sat.vars.immediateRender?d.globalTime(0):-1/0,t:d}}).sort(function(d,h){return h.g-d.g||-1/0}).forEach(function(d){return d.t.revert(i)}),l=s.data.length;l--;)c=s.data[l],c instanceof fi?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof bn)&&c.revert&&c.revert(i);s._r.forEach(function(d){return d(i,s)}),s.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),r)for(var o=Ic.length;o--;)Ic[o].id===this.id&&Ic.splice(o,1)},e.revert=function(i){this.kill(i||{})},n}(),RQ=function(){function n(t){this.contexts=[],this.scope=t,Qt&&Qt.data.push(this)}var e=n.prototype;return e.add=function(i,r,s){oo(i)||(i={matches:i});var o=new O2(0,s||this.scope),a=o.conditions={},l,c,d;Qt&&!o.selector&&(o.selector=Qt.selector),this.contexts.push(o),r=o.add("onMatch",r),o.queries=i;for(c in i)c==="all"?d=1:(l=ro.matchMedia(i[c]),l&&(Ic.indexOf(o)<0&&Ic.push(o),(a[c]=l.matches)&&(d=1),l.addListener?l.addListener(cI):l.addEventListener("change",cI)));return d&&r(o,function(h){return o.add(null,h)}),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(r){return r.kill(i,!0)})},n}(),F0={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(r){return C2(r)})},timeline:function(e){return new fi(e)},getTweensOf:function(e,t){return tn.getTweensOf(e,t)},getProperty:function(e,t,i,r){zn(e)&&(e=rs(e)[0]);var s=il(e||{}).get,o=i?u2:c2;return i==="native"&&(i=""),e&&(t?o((pr[t]&&pr[t].get||s)(e,t,i,r)):function(a,l,c){return o((pr[a]&&pr[a].get||s)(e,a,l,c))})},quickSetter:function(e,t,i){if(e=rs(e),e.length>1){var r=e.map(function(d){return Si.quickSetter(d,t,i)}),s=r.length;return function(d){for(var h=s;h--;)r[h](d)}}e=e[0]||{};var o=pr[t],a=il(e),l=a.harness&&(a.harness.aliases||{})[t]||t,c=o?function(d){var h=new o;Pd._pt=0,h.init(e,i?d+i:d,Pd,0,[e]),h.render(1,h),Pd._pt&&TI(1,Pd)}:a.set(e,l);return o?c:function(d){return c(e,l,i?d+i:d,a,1)}},quickTo:function(e,t,i){var r,s=Si.to(e,Tc((r={},r[t]="+=0.1",r.paused=!0,r),i||{})),o=function(l,c,d){return s.resetTo(t,l,c,d)};return o.tween=s,o},isTweening:function(e){return tn.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Dc(e.ease,kd.ease)),KL(kd,e||{})},config:function(e){return KL(_r,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,r=e.plugins,s=e.defaults,o=e.extendTimeline;(r||"").split(",").forEach(function(a){return a&&!pr[a]&&!xr[a]&&Ap(t+" effect requires "+a+" plugin.")}),qD[t]=function(a,l,c){return i(rs(a),ss(l||{},s),c)},o&&(fi.prototype[t]=function(a,l,c){return this.add(qD[t](a,oo(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){ct[e]=Dc(t)},parseEase:function(e,t){return arguments.length?Dc(e,t):ct},getById:function(e){return tn.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var i=new fi(e),r,s;for(i.smoothChildTiming=mr(e.smoothChildTiming),tn.remove(i),i._dp=0,i._time=i._tTime=tn._time,r=tn._first;r;)s=r._next,(t||!(!r._dur&&r instanceof bn&&r.vars.onComplete===r._targets[0]))&&so(i,r,r._start-r._delay),r=s;return so(tn,i,0),i},context:function(e,t){return e?new O2(e,t):Qt},matchMedia:function(e){return new RQ(e)},matchMediaRefresh:function(){return Ic.forEach(function(e){var t=e.conditions,i,r;for(r in t)t[r]&&(t[r]=!1,i=1);i&&e.revert()})||cI()},addEventListener:function(e,t){var i=R0[e]||(R0[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=R0[e],r=i&&i.indexOf(t);r>=0&&i.splice(r,1)},utils:{wrap:cQ,wrapYoyo:uQ,distribute:_2,random:v2,snap:y2,normalize:lQ,getUnit:pi,clamp:rQ,splitColor:D2,toArray:rs,selector:oI,mapRange:b2,pipe:oQ,unitize:aQ,interpolate:dQ,shuffle:m2},install:s2,effects:qD,ticker:gr,updateRoot:fi.updateRoot,plugins:pr,globalTimeline:tn,core:{PropTween:zi,globals:o2,Tween:bn,Timeline:fi,Animation:Rp,getCache:il,_removeLinkedListItem:B0,reverting:function(){return Ii},context:function(e){return e&&Qt&&(Qt.data.push(e),e._ctx=Qt),Qt},suppressOverwrites:function(e){return uI=e}}};Hi("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return F0[n]=bn[n]});gr.add(fi.updateRoot);Pd=F0.to({},{duration:0});var NQ=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},OQ=function(e,t){var i=e._targets,r,s,o;for(r in t)for(s=i.length;s--;)o=e._ptLookup[s][r],o&&(o=o.d)&&(o._pt&&(o=NQ(o,r)),o&&o.modifier&&o.modifier(t[r],e,i[s],r))},ZD=function(e,t){return{name:e,rawVars:1,init:function(r,s,o){o._onInit=function(a){var l,c;if(zn(s)&&(l={},Hi(s,function(d){return l[d]=1}),s=l),t){l={};for(c in s)l[c]=t(s[c]);s=l}OQ(a,s)}}}},Si=F0.registerPlugin({name:"attr",init:function(e,t,i,r,s){var o,a,l;this.tween=i;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],r,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var i=t._pt;i;)Ii?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},ZD("roundProps",aI),ZD("modifiers"),ZD("snap",y2))||F0;bn.version=fi.version=Si.version="3.12.5";r2=1;dI()&&Vd();var PQ=ct.Power0,kQ=ct.Power1,FQ=ct.Power2,LQ=ct.Power3,VQ=ct.Power4,BQ=ct.Linear,jQ=ct.Quad,UQ=ct.Cubic,$Q=ct.Quart,HQ=ct.Quint,zQ=ct.Strong,GQ=ct.Elastic,WQ=ct.Back,qQ=ct.SteppedEase,KQ=ct.Bounce,QQ=ct.Sine,YQ=ct.Expo,JQ=ct.Circ;var P2,ol,Ud,PI,Oc,ZQ,k2,kI,XQ=function(){return typeof window<"u"},oa={},Nc=180/Math.PI,$d=Math.PI/180,jd=Math.atan2,F2=1e8,FI=/([A-Z])/g,eY=/(left|right|width|margin|padding|x)/i,tY=/[\s,\(]\S/,ao={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},xI=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},nY=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},iY=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},rY=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},H2=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},z2=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},sY=function(e,t,i){return e.style[t]=i},oY=function(e,t,i){return e.style.setProperty(t,i)},aY=function(e,t,i){return e._gsap[t]=i},lY=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},cY=function(e,t,i,r,s){var o=e._gsap;o.scaleX=o.scaleY=i,o.renderTransform(s,o)},uY=function(e,t,i,r,s){var o=e._gsap;o[t]=i,o.renderTransform(s,o)},nn="transform",yr=nn+"Origin",dY=function n(e,t){var i=this,r=this.target,s=r.style,o=r._gsap;if(e in oa&&s){if(this.tfm=this.tfm||{},e!=="transform")e=ao[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return i.tfm[a]=sa(r,a)}):this.tfm[e]=o.x?o[e]:sa(r,e),e===yr&&(this.tfm.zOrigin=o.zOrigin);else return ao.transform.split(",").forEach(function(a){return n.call(i,a,t)});if(this.props.indexOf(nn)>=0)return;o.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(yr,t,"")),e=nn}(s||t)&&this.props.push(e,t,s[e])},G2=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},hY=function(){var e=this.props,t=this.target,i=t.style,r=t._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?t[e[s]]=e[s+2]:e[s+2]?i[e[s]]=e[s+2]:i.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(FI,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=kI(),(!s||!s.isStart)&&!i[nn]&&(G2(i),r.zOrigin&&i[yr]&&(i[yr]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},W2=function(e,t){var i={target:e,props:[],revert:hY,save:dY};return e._gsap||Si.core.getCache(e),t&&t.split(",").forEach(function(r){return i.save(r)}),i},q2,RI=function(e,t){var i=ol.createElementNS?ol.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):ol.createElement(e);return i&&i.style?i:ol.createElement(e)},lo=function n(e,t,i){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(FI,"-$1").toLowerCase())||r.getPropertyValue(t)||!i&&n(e,Hd(t)||t,1)||""},L2="O,Moz,ms,Ms,Webkit".split(","),Hd=function(e,t,i){var r=t||Oc,s=r.style,o=5;if(e in s&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(L2[o]+e in s););return o<0?null:(o===3?"ms":o>=0?L2[o]:"")+e},NI=function(){XQ()&&window.document&&(P2=window,ol=P2.document,Ud=ol.documentElement,Oc=RI("div")||{style:{}},ZQ=RI("div"),nn=Hd(nn),yr=nn+"Origin",Oc.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",q2=!!Hd("perspective"),kI=Si.core.reverting,PI=1)},AI=function n(e){var t=RI("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,r=this.nextSibling,s=this.style.cssText,o;if(Ud.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(o=this._gsapBBox());return i&&(r?i.insertBefore(this,r):i.appendChild(this)),Ud.removeChild(t),this.style.cssText=s,o},V2=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},K2=function(e){var t;try{t=e.getBBox()}catch{t=AI.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===AI||(t=AI.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+V2(e,["x","cx","x1"])||0,y:+V2(e,["y","cy","y1"])||0,width:0,height:0}:t},Q2=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&K2(e))},Pc=function(e,t){if(t){var i=e.style,r;t in oa&&t!==yr&&(t=nn),i.removeProperty?(r=t.substr(0,2),(r==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),i.removeProperty(r==="--"?t:t.replace(FI,"-$1").toLowerCase())):i.removeAttribute(t)}},al=function(e,t,i,r,s,o){var a=new zi(e._pt,t,i,0,1,o?z2:H2);return e._pt=a,a.b=r,a.e=s,e._props.push(i),a},B2={deg:1,rad:1,turn:1},fY={grid:1,flex:1},ll=function n(e,t,i,r){var s=parseFloat(i)||0,o=(i+"").trim().substr((s+"").length)||"px",a=Oc.style,l=eY.test(t),c=e.tagName.toLowerCase()==="svg",d=(c?"client":"offset")+(l?"Width":"Height"),h=100,f=r==="px",p=r==="%",y,_,w,A;if(r===o||!s||B2[r]||B2[o])return s;if(o!=="px"&&!f&&(s=n(e,t,i,"px")),A=e.getCTM&&Q2(e),(p||o==="%")&&(oa[t]||~t.indexOf("adius")))return y=A?e.getBBox()[l?"width":"height"]:e[d],mn(p?s/y*h:s/100*y);if(a[l?"width":"height"]=h+(f?o:r),_=~t.indexOf("adius")||r==="em"&&e.appendChild&&!c?e:e.parentNode,A&&(_=(e.ownerSVGElement||{}).parentNode),(!_||_===ol||!_.appendChild)&&(_=ol.body),w=_._gsap,w&&p&&w.width&&l&&w.time===gr.time&&!w.uncache)return mn(s/w.width*h);if(p&&(t==="height"||t==="width")){var x=e.style[t];e.style[t]=h+r,y=e[d],x?e.style[t]=x:Pc(e,t)}else(p||o==="%")&&!fY[lo(_,"display")]&&(a.position=lo(e,"position")),_===e&&(a.position="static"),_.appendChild(Oc),y=Oc[d],_.removeChild(Oc),a.position="absolute";return l&&p&&(w=il(_),w.time=gr.time,w.width=_[d]),mn(f?y*s/h:y&&s?h/y*s:0)},sa=function(e,t,i,r){var s;return PI||NI(),t in ao&&t!=="transform"&&(t=ao[t],~t.indexOf(",")&&(t=t.split(",")[0])),oa[t]&&t!=="transform"?(s=kp(e,r),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:z0(lo(e,yr))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=H0[t]&&H0[t](e,t,i)||lo(e,t)||yI(e,t)||(t==="opacity"?1:0))),i&&!~(s+"").trim().indexOf(" ")?ll(e,t,s,i)+i:s},pY=function(e,t,i,r){if(!i||i==="none"){var s=Hd(t,e,1),o=s&&lo(e,s,1);o&&o!==i?(t=s,i=o):t==="borderColor"&&(i=lo(e,"borderTopColor"))}var a=new zi(this._pt,e.style,t,0,1,II),l=0,c=0,d,h,f,p,y,_,w,A,x,M,R,P;if(a.b=i,a.e=r,i+="",r+="",r==="auto"&&(_=e.style[t],e.style[t]=r,r=lo(e,t)||r,_?e.style[t]=_:Pc(e,t)),d=[i,r],vI(d),i=d[0],r=d[1],f=i.match(Sc)||[],P=r.match(Sc)||[],P.length){for(;h=Sc.exec(r);)w=h[0],x=r.substring(l,h.index),y?y=(y+1)%5:(x.substr(-5)==="rgba("||x.substr(-5)==="hsla(")&&(y=1),w!==(_=f[c++]||"")&&(p=parseFloat(_)||0,R=_.substr((p+"").length),w.charAt(1)==="="&&(w=Ac(p,w)+R),A=parseFloat(w),M=w.substr((A+"").length),l=Sc.lastIndex-M.length,M||(M=M||_r.units[t]||R,l===r.length&&(r+=M,a.e+=M)),R!==M&&(p=ll(e,t,_,M)||0),a._pt={_next:a._pt,p:x||c===1?x:",",s:p,c:A-p,m:y&&y<4||t==="zIndex"?Math.round:0});a.c=l<r.length?r.substring(l,r.length):""}else a.r=t==="display"&&r==="none"?z2:H2;return fI.test(r)&&(a.e=0),this._pt=a,a},j2={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},gY=function(e){var t=e.split(" "),i=t[0],r=t[1]||"50%";return(i==="top"||i==="bottom"||r==="left"||r==="right")&&(e=i,i=r,r=e),t[0]=j2[i]||i,t[1]=j2[r]||r,t.join(" ")},mY=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var i=t.t,r=i.style,s=t.u,o=i._gsap,a,l,c;if(s==="all"||s===!0)r.cssText="",l=1;else for(s=s.split(","),c=s.length;--c>-1;)a=s[c],oa[a]&&(l=1,a=a==="transformOrigin"?yr:nn),Pc(i,a);l&&(Pc(i,nn),o&&(o.svg&&i.removeAttribute("transform"),kp(i,1),o.uncache=1,G2(r)))}},H0={clearProps:function(e,t,i,r,s){if(s.data!=="isFromStart"){var o=e._pt=new zi(e._pt,t,i,0,0,mY);return o.u=r,o.pr=-10,o.tween=s,e._props.push(i),1}}},Pp=[1,0,0,1,0,0],Y2={},J2=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},U2=function(e){var t=lo(e,nn);return J2(t)?Pp:t.substr(7).match(hI).map(mn)},LI=function(e,t){var i=e._gsap||il(e),r=e.style,s=U2(e),o,a,l,c;return i.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?Pp:s):(s===Pp&&!e.offsetParent&&e!==Ud&&!i.svg&&(l=r.display,r.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(c=1,a=e.nextElementSibling,Ud.appendChild(e)),s=U2(e),l?r.display=l:Pc(e,"display"),c&&(a?o.insertBefore(e,a):o?o.appendChild(e):Ud.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},OI=function(e,t,i,r,s,o){var a=e._gsap,l=s||LI(e,!0),c=a.xOrigin||0,d=a.yOrigin||0,h=a.xOffset||0,f=a.yOffset||0,p=l[0],y=l[1],_=l[2],w=l[3],A=l[4],x=l[5],M=t.split(" "),R=parseFloat(M[0])||0,P=parseFloat(M[1])||0,N,C,b,v;i?l!==Pp&&(C=p*w-y*_)&&(b=R*(w/C)+P*(-_/C)+(_*x-w*A)/C,v=R*(-y/C)+P*(p/C)-(p*x-y*A)/C,R=b,P=v):(N=K2(e),R=N.x+(~M[0].indexOf("%")?R/100*N.width:R),P=N.y+(~(M[1]||M[0]).indexOf("%")?P/100*N.height:P)),r||r!==!1&&a.smooth?(A=R-c,x=P-d,a.xOffset=h+(A*p+x*_)-A,a.yOffset=f+(A*y+x*w)-x):a.xOffset=a.yOffset=0,a.xOrigin=R,a.yOrigin=P,a.smooth=!!r,a.origin=t,a.originIsAbsolute=!!i,e.style[yr]="0px 0px",o&&(al(o,a,"xOrigin",c,R),al(o,a,"yOrigin",d,P),al(o,a,"xOffset",h,a.xOffset),al(o,a,"yOffset",f,a.yOffset)),e.setAttribute("data-svg-origin",R+" "+P)},kp=function(e,t){var i=e._gsap||new wI(e);if("x"in i&&!t&&!i.uncache)return i;var r=e.style,s=i.scaleX<0,o="px",a="deg",l=getComputedStyle(e),c=lo(e,yr)||"0",d,h,f,p,y,_,w,A,x,M,R,P,N,C,b,v,E,S,I,T,le,ye,be,ae,Re,mt,O,Ke,et,He,ot,Ve;return d=h=f=_=w=A=x=M=R=0,p=y=1,i.svg=!!(e.getCTM&&Q2(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(r[nn]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[nn]!=="none"?l[nn]:"")),r.scale=r.rotate=r.translate="none"),C=LI(e,i.svg),i.svg&&(i.uncache?(Re=e.getBBox(),c=i.xOrigin-Re.x+"px "+(i.yOrigin-Re.y)+"px",ae=""):ae=!t&&e.getAttribute("data-svg-origin"),OI(e,ae||c,!!ae||i.originIsAbsolute,i.smooth!==!1,C)),P=i.xOrigin||0,N=i.yOrigin||0,C!==Pp&&(S=C[0],I=C[1],T=C[2],le=C[3],d=ye=C[4],h=be=C[5],C.length===6?(p=Math.sqrt(S*S+I*I),y=Math.sqrt(le*le+T*T),_=S||I?jd(I,S)*Nc:0,x=T||le?jd(T,le)*Nc+_:0,x&&(y*=Math.abs(Math.cos(x*$d))),i.svg&&(d-=P-(P*S+N*T),h-=N-(P*I+N*le))):(Ve=C[6],He=C[7],O=C[8],Ke=C[9],et=C[10],ot=C[11],d=C[12],h=C[13],f=C[14],b=jd(Ve,et),w=b*Nc,b&&(v=Math.cos(-b),E=Math.sin(-b),ae=ye*v+O*E,Re=be*v+Ke*E,mt=Ve*v+et*E,O=ye*-E+O*v,Ke=be*-E+Ke*v,et=Ve*-E+et*v,ot=He*-E+ot*v,ye=ae,be=Re,Ve=mt),b=jd(-T,et),A=b*Nc,b&&(v=Math.cos(-b),E=Math.sin(-b),ae=S*v-O*E,Re=I*v-Ke*E,mt=T*v-et*E,ot=le*E+ot*v,S=ae,I=Re,T=mt),b=jd(I,S),_=b*Nc,b&&(v=Math.cos(b),E=Math.sin(b),ae=S*v+I*E,Re=ye*v+be*E,I=I*v-S*E,be=be*v-ye*E,S=ae,ye=Re),w&&Math.abs(w)+Math.abs(_)>359.9&&(w=_=0,A=180-A),p=mn(Math.sqrt(S*S+I*I+T*T)),y=mn(Math.sqrt(be*be+Ve*Ve)),b=jd(ye,be),x=Math.abs(b)>2e-4?b*Nc:0,R=ot?1/(ot<0?-ot:ot):0),i.svg&&(ae=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!J2(lo(e,nn)),ae&&e.setAttribute("transform",ae))),Math.abs(x)>90&&Math.abs(x)<270&&(s?(p*=-1,x+=_<=0?180:-180,_+=_<=0?180:-180):(y*=-1,x+=x<=0?180:-180)),t=t||i.uncache,i.x=d-((i.xPercent=d&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-d)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+o,i.y=h-((i.yPercent=h&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-h)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+o,i.z=f+o,i.scaleX=mn(p),i.scaleY=mn(y),i.rotation=mn(_)+a,i.rotationX=mn(w)+a,i.rotationY=mn(A)+a,i.skewX=x+a,i.skewY=M+a,i.transformPerspective=R+o,(i.zOrigin=parseFloat(c.split(" ")[2])||!t&&i.zOrigin||0)&&(r[yr]=z0(c)),i.xOffset=i.yOffset=0,i.force3D=_r.force3D,i.renderTransform=i.svg?yY:q2?Z2:_Y,i.uncache=0,i},z0=function(e){return(e=e.split(" "))[0]+" "+e[1]},MI=function(e,t,i){var r=pi(t);return mn(parseFloat(t)+parseFloat(ll(e,"x",i+"px",r)))+r},_Y=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,Z2(e,t)},xc="0deg",Op="0px",Rc=") ",Z2=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.z,c=i.rotation,d=i.rotationY,h=i.rotationX,f=i.skewX,p=i.skewY,y=i.scaleX,_=i.scaleY,w=i.transformPerspective,A=i.force3D,x=i.target,M=i.zOrigin,R="",P=A==="auto"&&e&&e!==1||A===!0;if(M&&(h!==xc||d!==xc)){var N=parseFloat(d)*$d,C=Math.sin(N),b=Math.cos(N),v;N=parseFloat(h)*$d,v=Math.cos(N),o=MI(x,o,C*v*-M),a=MI(x,a,-Math.sin(N)*-M),l=MI(x,l,b*v*-M+M)}w!==Op&&(R+="perspective("+w+Rc),(r||s)&&(R+="translate("+r+"%, "+s+"%) "),(P||o!==Op||a!==Op||l!==Op)&&(R+=l!==Op||P?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+Rc),c!==xc&&(R+="rotate("+c+Rc),d!==xc&&(R+="rotateY("+d+Rc),h!==xc&&(R+="rotateX("+h+Rc),(f!==xc||p!==xc)&&(R+="skew("+f+", "+p+Rc),(y!==1||_!==1)&&(R+="scale("+y+", "+_+Rc),x.style[nn]=R||"translate(0, 0)"},yY=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.rotation,c=i.skewX,d=i.skewY,h=i.scaleX,f=i.scaleY,p=i.target,y=i.xOrigin,_=i.yOrigin,w=i.xOffset,A=i.yOffset,x=i.forceCSS,M=parseFloat(o),R=parseFloat(a),P,N,C,b,v;l=parseFloat(l),c=parseFloat(c),d=parseFloat(d),d&&(d=parseFloat(d),c+=d,l+=d),l||c?(l*=$d,c*=$d,P=Math.cos(l)*h,N=Math.sin(l)*h,C=Math.sin(l-c)*-f,b=Math.cos(l-c)*f,c&&(d*=$d,v=Math.tan(c-d),v=Math.sqrt(1+v*v),C*=v,b*=v,d&&(v=Math.tan(d),v=Math.sqrt(1+v*v),P*=v,N*=v)),P=mn(P),N=mn(N),C=mn(C),b=mn(b)):(P=h,b=f,N=C=0),(M&&!~(o+"").indexOf("px")||R&&!~(a+"").indexOf("px"))&&(M=ll(p,"x",o,"px"),R=ll(p,"y",a,"px")),(y||_||w||A)&&(M=mn(M+y-(y*P+_*C)+w),R=mn(R+_-(y*N+_*b)+A)),(r||s)&&(v=p.getBBox(),M=mn(M+r/100*v.width),R=mn(R+s/100*v.height)),v="matrix("+P+","+N+","+C+","+b+","+M+","+R+")",p.setAttribute("transform",v),x&&(p.style[nn]=v)},vY=function(e,t,i,r,s){var o=360,a=zn(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?Nc:1),c=l-r,d=r+c+"deg",h,f;return a&&(h=s.split("_")[1],h==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-o)),h==="cw"&&c<0?c=(c+o*F2)%o-~~(c/o)*o:h==="ccw"&&c>0&&(c=(c-o*F2)%o-~~(c/o)*o)),e._pt=f=new zi(e._pt,t,i,r,c,nY),f.e=d,f.u="deg",e._props.push(i),f},$2=function(e,t){for(var i in t)e[i]=t[i];return e},wY=function(e,t,i){var r=$2({},i._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=i.style,a,l,c,d,h,f,p,y;r.svg?(c=i.getAttribute("transform"),i.setAttribute("transform",""),o[nn]=t,a=kp(i,1),Pc(i,nn),i.setAttribute("transform",c)):(c=getComputedStyle(i)[nn],o[nn]=t,a=kp(i,1),o[nn]=c);for(l in oa)c=r[l],d=a[l],c!==d&&s.indexOf(l)<0&&(p=pi(c),y=pi(d),h=p!==y?ll(i,l,c,y):parseFloat(c),f=parseFloat(d),e._pt=new zi(e._pt,a,l,h,f-h,xI),e._pt.u=y||0,e._props.push(l));$2(a,r)};Hi("padding,margin,Width,Radius",function(n,e){var t="Top",i="Right",r="Bottom",s="Left",o=(e<3?[t,i,r,s]:[t+s,t+i,r+i,r+s]).map(function(a){return e<2?n+a:"border"+a+n});H0[e>1?"border"+n:n]=function(a,l,c,d,h){var f,p;if(arguments.length<4)return f=o.map(function(y){return sa(a,y,c)}),p=f.join(" "),p.split(f[0]).length===5?f[0]:p;f=(d+"").split(" "),p={},o.forEach(function(y,_){return p[y]=f[_]=f[_]||f[(_-1)/2|0]}),a.init(l,p,h)}});var VI={name:"css",register:NI,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,r,s){var o=this._props,a=e.style,l=i.vars.startAt,c,d,h,f,p,y,_,w,A,x,M,R,P,N,C,b;PI||NI(),this.styles=this.styles||W2(e),b=this.styles.props,this.tween=i;for(_ in t)if(_!=="autoRound"&&(d=t[_],!(pr[_]&&EI(_,t,i,r,e,s)))){if(p=typeof d,y=H0[_],p==="function"&&(d=d.call(i,r,e,s),p=typeof d),p==="string"&&~d.indexOf("random(")&&(d=Bd(d)),y)y(this,e,_,d,i)&&(C=1);else if(_.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(_)+"").trim(),d+="",ia.lastIndex=0,ia.test(c)||(w=pi(c),A=pi(d)),A?w!==A&&(c=ll(e,_,c,A)+A):w&&(d+=w),this.add(a,"setProperty",c,d,r,s,0,0,_),o.push(_),b.push(_,0,a[_]);else if(p!=="undefined"){if(l&&_ in l?(c=typeof l[_]=="function"?l[_].call(i,r,e,s):l[_],zn(c)&&~c.indexOf("random(")&&(c=Bd(c)),pi(c+"")||c==="auto"||(c+=_r.units[_]||pi(sa(e,_))||""),(c+"").charAt(1)==="="&&(c=sa(e,_))):c=sa(e,_),f=parseFloat(c),x=p==="string"&&d.charAt(1)==="="&&d.substr(0,2),x&&(d=d.substr(2)),h=parseFloat(d),_ in ao&&(_==="autoAlpha"&&(f===1&&sa(e,"visibility")==="hidden"&&h&&(f=0),b.push("visibility",0,a.visibility),al(this,a,"visibility",f?"inherit":"hidden",h?"inherit":"hidden",!h)),_!=="scale"&&_!=="transform"&&(_=ao[_],~_.indexOf(",")&&(_=_.split(",")[0]))),M=_ in oa,M){if(this.styles.save(_),R||(P=e._gsap,P.renderTransform&&!t.parseTransform||kp(e,t.parseTransform),N=t.smoothOrigin!==!1&&P.smooth,R=this._pt=new zi(this._pt,a,nn,0,1,P.renderTransform,P,0,-1),R.dep=1),_==="scale")this._pt=new zi(this._pt,P,"scaleY",P.scaleY,(x?Ac(P.scaleY,x+h):h)-P.scaleY||0,xI),this._pt.u=0,o.push("scaleY",_),_+="X";else if(_==="transformOrigin"){b.push(yr,0,a[yr]),d=gY(d),P.svg?OI(e,d,0,N,0,this):(A=parseFloat(d.split(" ")[2])||0,A!==P.zOrigin&&al(this,P,"zOrigin",P.zOrigin,A),al(this,a,_,z0(c),z0(d)));continue}else if(_==="svgOrigin"){OI(e,d,1,N,0,this);continue}else if(_ in Y2){vY(this,P,_,f,x?Ac(f,x+d):d);continue}else if(_==="smoothOrigin"){al(this,P,"smooth",P.smooth,d);continue}else if(_==="force3D"){P[_]=d;continue}else if(_==="transform"){wY(this,d,e);continue}}else _ in a||(_=Hd(_)||_);if(M||(h||h===0)&&(f||f===0)&&!tY.test(d)&&_ in a)w=(c+"").substr((f+"").length),h||(h=0),A=pi(d)||(_ in _r.units?_r.units[_]:w),w!==A&&(f=ll(e,_,c,A)),this._pt=new zi(this._pt,M?P:a,_,f,(x?Ac(f,x+h):h)-f,!M&&(A==="px"||_==="zIndex")&&t.autoRound!==!1?rY:xI),this._pt.u=A||0,w!==A&&A!=="%"&&(this._pt.b=c,this._pt.r=iY);else if(_ in a)pY.call(this,e,_,c,x?x+d:d);else if(_ in e)this.add(e,_,c||e[_],x?x+d:d,r,s);else if(_!=="parseTransform"){V0(_,d);continue}M||(_ in a?b.push(_,0,a[_]):b.push(_,1,c||e[_])),o.push(_)}}C&&SI(this)},render:function(e,t){if(t.tween._time||!kI())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:sa,aliases:ao,getSetter:function(e,t,i){var r=ao[t];return r&&r.indexOf(",")<0&&(t=r),t in oa&&t!==yr&&(e._gsap.x||sa(e,"x"))?i&&k2===i?t==="scale"?lY:aY:(k2=i||{})&&(t==="scale"?cY:uY):e.style&&!L0(e.style[t])?sY:~t.indexOf("-")?oY:$0(e,t)},core:{_removeProperty:Pc,_getMatrix:LI}};Si.utils.checkPrefix=Hd;Si.core.getStyleSaver=W2;(function(n,e,t,i){var r=Hi(n+","+e+","+t,function(s){oa[s]=1});Hi(e,function(s){_r.units[s]="deg",Y2[s]=1}),ao[r[13]]=n+","+e,Hi(i,function(s){var o=s.split(":");ao[o[1]]=r[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Hi("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){_r.units[n]="px"});Si.registerPlugin(VI);var Fp=Si.registerPlugin(VI)||Si,Cfe=Fp.core.Tween;function X2(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function bY(n,e,t){return e&&X2(n.prototype,e),t&&X2(n,t),n}var gi,q0,EY,Rr,cl,ul,Gd,tV,kc,Vp,nV,aa,xs,iV,rV=function(){return gi||typeof window<"u"&&(gi=window.gsap)&&gi.registerPlugin&&gi},sV=1,zd=[],Ye=[],Rs=[],Bp=Date.now,BI=function(e,t){return t},CY=function(){var e=Vp.core,t=e.bridge||{},i=e._scrollers,r=e._proxies;i.push.apply(i,Ye),r.push.apply(r,Rs),Ye=i,Rs=r,BI=function(o,a){return t[o](a)}},ca=function(e,t){return~Rs.indexOf(e)&&Rs[Rs.indexOf(e)+1][t]},jp=function(e){return!!~nV.indexOf(e)},Wi=function(e,t,i,r,s){return e.addEventListener(t,i,{passive:r!==!1,capture:!!s})},Gi=function(e,t,i,r){return e.removeEventListener(t,i,!!r)},G0="scrollLeft",W0="scrollTop",jI=function(){return aa&&aa.isPressed||Ye.cache++},K0=function(e,t){var i=function r(s){if(s||s===0){sV&&(Rr.history.scrollRestoration="manual");var o=aa&&aa.isPressed;s=r.v=Math.round(s)||(aa&&aa.iOS?1:0),e(s),r.cacheID=Ye.cache,o&&BI("ss",s)}else(t||Ye.cache!==r.cacheID||BI("ref"))&&(r.cacheID=Ye.cache,r.v=e());return r.v+r.offset};return i.offset=0,e&&i},Ai={s:G0,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:K0(function(n){return arguments.length?Rr.scrollTo(n,Nn.sc()):Rr.pageXOffset||cl[G0]||ul[G0]||Gd[G0]||0})},Nn={s:W0,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:Ai,sc:K0(function(n){return arguments.length?Rr.scrollTo(Ai.sc(),n):Rr.pageYOffset||cl[W0]||ul[W0]||Gd[W0]||0})},qi=function(e,t){return(t&&t._ctx&&t._ctx.selector||gi.utils.toArray)(e)[0]||(typeof e=="string"&&gi.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},la=function(e,t){var i=t.s,r=t.sc;jp(e)&&(e=cl.scrollingElement||ul);var s=Ye.indexOf(e),o=r===Nn.sc?1:2;!~s&&(s=Ye.push(e)-1),Ye[s+o]||Wi(e,"scroll",jI);var a=Ye[s+o],l=a||(Ye[s+o]=K0(ca(e,i),!0)||(jp(e)?r:K0(function(c){return arguments.length?e[i]=c:e[i]})));return l.target=e,a||(l.smooth=gi.getProperty(e,"scrollBehavior")==="smooth"),l},Q0=function(e,t,i){var r=e,s=e,o=Bp(),a=o,l=t||50,c=Math.max(500,l*3),d=function(y,_){var w=Bp();_||w-o>l?(s=r,r=y,a=o,o=w):i?r+=y:r=s+(y-s)/(w-a)*(o-a)},h=function(){s=r=i?0:r,a=o=0},f=function(y){var _=a,w=s,A=Bp();return(y||y===0)&&y!==r&&d(y),o===a||A-a>c?0:(r+(i?w:-w))/((i?A:o)-_)*1e3};return{update:d,reset:h,getVelocity:f}},Lp=function(e,t){return t&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},eV=function(e){var t=Math.max.apply(Math,e),i=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(i)?t:i},oV=function(){Vp=gi.core.globals().ScrollTrigger,Vp&&Vp.core&&CY()},aV=function(e){return gi=e||rV(),!q0&&gi&&typeof document<"u"&&document.body&&(Rr=window,cl=document,ul=cl.documentElement,Gd=cl.body,nV=[Rr,cl,ul,Gd],EY=gi.utils.clamp,iV=gi.core.context||function(){},kc="onpointerenter"in Gd?"pointer":"mouse",tV=_n.isTouch=Rr.matchMedia&&Rr.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in Rr||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,xs=_n.eventTypes=("ontouchstart"in ul?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in ul?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return sV=0},500),oV(),q0=1),q0};Ai.op=Nn;Ye.cache=0;var _n=function(){function n(t){this.init(t)}var e=n.prototype;return e.init=function(i){q0||aV(gi)||console.warn("Please gsap.registerPlugin(Observer)"),Vp||oV();var r=i.tolerance,s=i.dragMinimum,o=i.type,a=i.target,l=i.lineHeight,c=i.debounce,d=i.preventDefault,h=i.onStop,f=i.onStopDelay,p=i.ignore,y=i.wheelSpeed,_=i.event,w=i.onDragStart,A=i.onDragEnd,x=i.onDrag,M=i.onPress,R=i.onRelease,P=i.onRight,N=i.onLeft,C=i.onUp,b=i.onDown,v=i.onChangeX,E=i.onChangeY,S=i.onChange,I=i.onToggleX,T=i.onToggleY,le=i.onHover,ye=i.onHoverEnd,be=i.onMove,ae=i.ignoreCheck,Re=i.isNormalizer,mt=i.onGestureStart,O=i.onGestureEnd,Ke=i.onWheel,et=i.onEnable,He=i.onDisable,ot=i.onClick,Ve=i.scrollSpeed,tt=i.capture,Ue=i.allowClicks,Vt=i.lockAxis,Rt=i.onLockAxis;this.target=a=qi(a)||ul,this.vars=i,p&&(p=gi.utils.toArray(p)),r=r||1e-9,s=s||0,y=y||1,Ve=Ve||1,o=o||"wheel,touch,pointer",c=c!==!1,l||(l=parseFloat(Rr.getComputedStyle(Gd).lineHeight)||22);var Zt,Ie,Te,me,dt,vn,yi,U=this,Pi=0,jr=0,gs=i.passive||!d,Gt=la(a,Ai),ms=la(a,Nn),So=Gt(),Us=ms(),ln=~o.indexOf("touch")&&!~o.indexOf("pointer")&&xs[0]==="pointerdown",Ur=jp(a),Qe=a.ownerDocument||cl,Nt=[0,0,0],ai=[0,0,0],$r=0,Ia=function(){return $r=Bp()},cn=function(he,ht){return(U.event=he)&&p&&~p.indexOf(he.target)||ht&&ln&&he.pointerType!=="touch"||ae&&ae(he,ht)},$s=function(){U._vx.reset(),U._vy.reset(),Ie.pause(),h&&h(U)},_s=function(){var he=U.deltaX=eV(Nt),ht=U.deltaY=eV(ai),Y=Math.abs(he)>=r,De=Math.abs(ht)>=r;S&&(Y||De)&&S(U,he,ht,Nt,ai),Y&&(P&&U.deltaX>0&&P(U),N&&U.deltaX<0&&N(U),v&&v(U),I&&U.deltaX<0!=Pi<0&&I(U),Pi=U.deltaX,Nt[0]=Nt[1]=Nt[2]=0),De&&(b&&U.deltaY>0&&b(U),C&&U.deltaY<0&&C(U),E&&E(U),T&&U.deltaY<0!=jr<0&&T(U),jr=U.deltaY,ai[0]=ai[1]=ai[2]=0),(me||Te)&&(be&&be(U),Te&&(x(U),Te=!1),me=!1),vn&&!(vn=!1)&&Rt&&Rt(U),dt&&(Ke(U),dt=!1),Zt=0},Ao=function(he,ht,Y){Nt[Y]+=he,ai[Y]+=ht,U._vx.update(he),U._vy.update(ht),c?Zt||(Zt=requestAnimationFrame(_s)):_s()},Hs=function(he,ht){Vt&&!yi&&(U.axis=yi=Math.abs(he)>Math.abs(ht)?"x":"y",vn=!0),yi!=="y"&&(Nt[2]+=he,U._vx.update(he,!0)),yi!=="x"&&(ai[2]+=ht,U._vy.update(ht,!0)),c?Zt||(Zt=requestAnimationFrame(_s)):_s()},zs=function(he){if(!cn(he,1)){he=Lp(he,d);var ht=he.clientX,Y=he.clientY,De=ht-U.x,ce=Y-U.y,ve=U.isDragging;U.x=ht,U.y=Y,(ve||Math.abs(U.startX-ht)>=s||Math.abs(U.startY-Y)>=s)&&(x&&(Te=!0),ve||(U.isDragging=!0),Hs(De,ce),ve||w&&w(U))}},Mo=U.onPress=function(Ce){cn(Ce,1)||Ce&&Ce.button||(U.axis=yi=null,Ie.pause(),U.isPressed=!0,Ce=Lp(Ce),Pi=jr=0,U.startX=U.x=Ce.clientX,U.startY=U.y=Ce.clientY,U._vx.reset(),U._vy.reset(),Wi(Re?a:Qe,xs[1],zs,gs,!0),U.deltaX=U.deltaY=0,M&&M(U))},Be=U.onRelease=function(Ce){if(!cn(Ce,1)){Gi(Re?a:Qe,xs[1],zs,!0);var he=!isNaN(U.y-U.startY),ht=U.isDragging,Y=ht&&(Math.abs(U.x-U.startX)>3||Math.abs(U.y-U.startY)>3),De=Lp(Ce);!Y&&he&&(U._vx.reset(),U._vy.reset(),d&&Ue&&gi.delayedCall(.08,function(){if(Bp()-$r>300&&!Ce.defaultPrevented){if(Ce.target.click)Ce.target.click();else if(Qe.createEvent){var ce=Qe.createEvent("MouseEvents");ce.initMouseEvent("click",!0,!0,Rr,1,De.screenX,De.screenY,De.clientX,De.clientY,!1,!1,!1,!1,0,null),Ce.target.dispatchEvent(ce)}}})),U.isDragging=U.isGesturing=U.isPressed=!1,h&&ht&&!Re&&Ie.restart(!0),A&&ht&&A(U),R&&R(U,Y)}},Gs=function(he){return he.touches&&he.touches.length>1&&(U.isGesturing=!0)&&mt(he,U.isDragging)},rr=function(){return(U.isGesturing=!1)||O(U)},li=function(he){if(!cn(he)){var ht=Gt(),Y=ms();Ao((ht-So)*Ve,(Y-Us)*Ve,1),So=ht,Us=Y,h&&Ie.restart(!0)}},ki=function(he){if(!cn(he)){he=Lp(he,d),Ke&&(dt=!0);var ht=(he.deltaMode===1?l:he.deltaMode===2?Rr.innerHeight:1)*y;Ao(he.deltaX*ht,he.deltaY*ht,0),h&&!Re&&Ie.restart(!0)}},ys=function(he){if(!cn(he)){var ht=he.clientX,Y=he.clientY,De=ht-U.x,ce=Y-U.y;U.x=ht,U.y=Y,me=!0,h&&Ie.restart(!0),(De||ce)&&Hs(De,ce)}},sr=function(he){U.event=he,le(U)},Hr=function(he){U.event=he,ye(U)},Ws=function(he){return cn(he)||Lp(he,d)&&ot(U)};Ie=U._dc=gi.delayedCall(f||.25,$s).pause(),U.deltaX=U.deltaY=0,U._vx=Q0(0,50,!0),U._vy=Q0(0,50,!0),U.scrollX=Gt,U.scrollY=ms,U.isDragging=U.isGesturing=U.isPressed=!1,iV(this),U.enable=function(Ce){return U.isEnabled||(Wi(Ur?Qe:a,"scroll",jI),o.indexOf("scroll")>=0&&Wi(Ur?Qe:a,"scroll",li,gs,tt),o.indexOf("wheel")>=0&&Wi(a,"wheel",ki,gs,tt),(o.indexOf("touch")>=0&&tV||o.indexOf("pointer")>=0)&&(Wi(a,xs[0],Mo,gs,tt),Wi(Qe,xs[2],Be),Wi(Qe,xs[3],Be),Ue&&Wi(a,"click",Ia,!0,!0),ot&&Wi(a,"click",Ws),mt&&Wi(Qe,"gesturestart",Gs),O&&Wi(Qe,"gestureend",rr),le&&Wi(a,kc+"enter",sr),ye&&Wi(a,kc+"leave",Hr),be&&Wi(a,kc+"move",ys)),U.isEnabled=!0,Ce&&Ce.type&&Mo(Ce),et&&et(U)),U},U.disable=function(){U.isEnabled&&(zd.filter(function(Ce){return Ce!==U&&jp(Ce.target)}).length||Gi(Ur?Qe:a,"scroll",jI),U.isPressed&&(U._vx.reset(),U._vy.reset(),Gi(Re?a:Qe,xs[1],zs,!0)),Gi(Ur?Qe:a,"scroll",li,tt),Gi(a,"wheel",ki,tt),Gi(a,xs[0],Mo,tt),Gi(Qe,xs[2],Be),Gi(Qe,xs[3],Be),Gi(a,"click",Ia,!0),Gi(a,"click",Ws),Gi(Qe,"gesturestart",Gs),Gi(Qe,"gestureend",rr),Gi(a,kc+"enter",sr),Gi(a,kc+"leave",Hr),Gi(a,kc+"move",ys),U.isEnabled=U.isPressed=U.isDragging=!1,He&&He(U))},U.kill=U.revert=function(){U.disable();var Ce=zd.indexOf(U);Ce>=0&&zd.splice(Ce,1),aa===U&&(aa=0)},zd.push(U),Re&&jp(a)&&(aa=U),U.enable(_)},bY(n,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),n}();_n.version="3.12.5";_n.create=function(n){return new _n(n)};_n.register=aV;_n.getAll=function(){return zd.slice()};_n.getById=function(n){return zd.filter(function(e){return e.vars.id===n})[0]};rV()&&gi.registerPlugin(_n);var re,Kd,ut,rn,Ns,Ht,IV,dv,Xp,qp,$p,Y0,Mi,gv,KI,Qi,lV,cV,Qd,TV,UI,SV,Ki,QI,AV,MV,dl,YI,tT,Yd,nT,hv,JI,$I,J0=1,xi=Date.now,HI=xi(),ls=0,Hp=0,uV=function(e,t,i){var r=Or(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return i["_"+t+"Clamp"]=r,r?e.substr(6,e.length-7):e},dV=function(e,t){return t&&(!Or(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},DY=function n(){return Hp&&requestAnimationFrame(n)},hV=function(){return gv=1},fV=function(){return gv=0},co=function(e){return e},zp=function(e){return Math.round(e*1e5)/1e5||0},xV=function(){return typeof window<"u"},RV=function(){return re||xV()&&(re=window.gsap)&&re.registerPlugin&&re},Uc=function(e){return!!~IV.indexOf(e)},NV=function(e){return(e==="Height"?nT:ut["inner"+e])||Ns["client"+e]||Ht["client"+e]},OV=function(e){return ca(e,"getBoundingClientRect")||(Uc(e)?function(){return uv.width=ut.innerWidth,uv.height=nT,uv}:function(){return ua(e)})},IY=function(e,t,i){var r=i.d,s=i.d2,o=i.a;return(o=ca(e,"getBoundingClientRect"))?function(){return o()[r]}:function(){return(t?NV(s):e["client"+s])||0}},TY=function(e,t){return!t||~Rs.indexOf(e)?OV(e):function(){return uv}},uo=function(e,t){var i=t.s,r=t.d2,s=t.d,o=t.a;return Math.max(0,(i="scroll"+r)&&(o=ca(e,i))?o()-OV(e)()[s]:Uc(e)?(Ns[i]||Ht[i])-NV(r):e[i]-e["offset"+r])},Z0=function(e,t){for(var i=0;i<Qd.length;i+=3)(!t||~t.indexOf(Qd[i+1]))&&e(Qd[i],Qd[i+1],Qd[i+2])},Or=function(e){return typeof e=="string"},Ji=function(e){return typeof e=="function"},Gp=function(e){return typeof e=="number"},Fc=function(e){return typeof e=="object"},Up=function(e,t,i){return e&&e.progress(t?0:1)&&i&&e.pause()},zI=function(e,t){if(e.enabled){var i=e._ctx?e._ctx.add(function(){return t(e)}):t(e);i&&i.totalTime&&(e.callbackAnimation=i)}},Wd=Math.abs,PV="left",kV="top",iT="right",rT="bottom",Vc="width",Bc="height",Kp="Right",Qp="Left",Yp="Top",Jp="Bottom",On="padding",os="margin",Zd="Width",sT="Height",Gn="px",as=function(e){return ut.getComputedStyle(e)},SY=function(e){var t=as(e).position;e.style.position=t==="absolute"||t==="fixed"?t:"relative"},pV=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},ua=function(e,t){var i=t&&as(e)[KI]!=="matrix(1, 0, 0, 1, 0, 0)"&&re.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),r=e.getBoundingClientRect();return i&&i.progress(0).kill(),r},fv=function(e,t){var i=t.d2;return e["offset"+i]||e["client"+i]||0},FV=function(e){var t=[],i=e.labels,r=e.duration(),s;for(s in i)t.push(i[s]/r);return t},AY=function(e){return function(t){return re.utils.snap(FV(e),t)}},oT=function(e){var t=re.utils.snap(e),i=Array.isArray(e)&&e.slice(0).sort(function(r,s){return r-s});return i?function(r,s,o){o===void 0&&(o=.001);var a;if(!s)return t(r);if(s>0){for(r-=o,a=0;a<i.length;a++)if(i[a]>=r)return i[a];return i[a-1]}else for(a=i.length,r+=o;a--;)if(i[a]<=r)return i[a];return i[0]}:function(r,s,o){o===void 0&&(o=.001);var a=t(r);return!s||Math.abs(a-r)<o||a-r<0==s<0?a:t(s<0?r-e:r+e)}},MY=function(e){return function(t,i){return oT(FV(e))(t,i.direction)}},X0=function(e,t,i,r){return i.split(",").forEach(function(s){return e(t,s,r)})},ri=function(e,t,i,r,s){return e.addEventListener(t,i,{passive:!r,capture:!!s})},ii=function(e,t,i,r){return e.removeEventListener(t,i,!!r)},ev=function(e,t,i){i=i&&i.wheelHandler,i&&(e(t,"wheel",i),e(t,"touchmove",i))},gV={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},tv={toggleActions:"play",anticipatePin:0},pv={top:0,left:0,center:.5,bottom:1,right:1},ov=function(e,t){if(Or(e)){var i=e.indexOf("="),r=~i?+(e.charAt(i-1)+1)*parseFloat(e.substr(i+1)):0;~i&&(e.indexOf("%")>i&&(r*=t/100),e=e.substr(0,i-1)),e=r+(e in pv?pv[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},nv=function(e,t,i,r,s,o,a,l){var c=s.startColor,d=s.endColor,h=s.fontSize,f=s.indent,p=s.fontWeight,y=rn.createElement("div"),_=Uc(i)||ca(i,"pinType")==="fixed",w=e.indexOf("scroller")!==-1,A=_?Ht:i,x=e.indexOf("start")!==-1,M=x?c:d,R="border-color:"+M+";font-size:"+h+";color:"+M+";font-weight:"+p+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return R+="position:"+((w||l)&&_?"fixed;":"absolute;"),(w||l||!_)&&(R+=(r===Nn?iT:rT)+":"+(o+parseFloat(f))+"px;"),a&&(R+="box-sizing:border-box;text-align:left;width:"+a.offsetWidth+"px;"),y._isStart=x,y.setAttribute("class","gsap-marker-"+e+(t?" marker-"+t:"")),y.style.cssText=R,y.innerText=t||t===0?e+"-"+t:e,A.children[0]?A.insertBefore(y,A.children[0]):A.appendChild(y),y._offset=y["offset"+r.op.d2],av(y,0,r,x),y},av=function(e,t,i,r){var s={display:"block"},o=i[r?"os2":"p2"],a=i[r?"p2":"os2"];e._isFlipped=r,s[i.a+"Percent"]=r?-100:0,s[i.a]=r?"1px":0,s["border"+o+Zd]=1,s["border"+a+Zd]=0,s[i.p]=t+"px",re.set(e,s)},Je=[],ZI={},eg,mV=function(){return xi()-ls>34&&(eg||(eg=requestAnimationFrame(da)))},qd=function(){(!Ki||!Ki.isPressed||Ki.startX>Ht.clientWidth)&&(Ye.cache++,Ki?eg||(eg=requestAnimationFrame(da)):da(),ls||Hc("scrollStart"),ls=xi())},GI=function(){MV=ut.innerWidth,AV=ut.innerHeight},Wp=function(){Ye.cache++,!Mi&&!SV&&!rn.fullscreenElement&&!rn.webkitFullscreenElement&&(!QI||MV!==ut.innerWidth||Math.abs(ut.innerHeight-AV)>ut.innerHeight*.25)&&dv.restart(!0)},$c={},xY=[],LV=function n(){return ii(Ze,"scrollEnd",n)||Lc(!0)},Hc=function(e){return $c[e]&&$c[e].map(function(t){return t()})||xY},Nr=[],VV=function(e){for(var t=0;t<Nr.length;t+=5)(!e||Nr[t+4]&&Nr[t+4].query===e)&&(Nr[t].style.cssText=Nr[t+1],Nr[t].getBBox&&Nr[t].setAttribute("transform",Nr[t+2]||""),Nr[t+3].uncache=1)},aT=function(e,t){var i;for(Qi=0;Qi<Je.length;Qi++)i=Je[Qi],i&&(!t||i._ctx===t)&&(e?i.kill(1):i.revert(!0,!0));hv=!0,t&&VV(t),t||Hc("revert")},BV=function(e,t){Ye.cache++,(t||!Yi)&&Ye.forEach(function(i){return Ji(i)&&i.cacheID++&&(i.rec=0)}),Or(e)&&(ut.history.scrollRestoration=tT=e)},Yi,jc=0,_V,RY=function(){if(_V!==jc){var e=_V=jc;requestAnimationFrame(function(){return e===jc&&Lc(!0)})}},jV=function(){Ht.appendChild(Yd),nT=!Ki&&Yd.offsetHeight||ut.innerHeight,Ht.removeChild(Yd)},yV=function(e){return Xp(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(t){return t.style.display=e?"none":"block"})},Lc=function(e,t){if(ls&&!e&&!hv){ri(Ze,"scrollEnd",LV);return}jV(),Yi=Ze.isRefreshing=!0,Ye.forEach(function(r){return Ji(r)&&++r.cacheID&&(r.rec=r())});var i=Hc("refreshInit");TV&&Ze.sort(),t||aT(),Ye.forEach(function(r){Ji(r)&&(r.smooth&&(r.target.style.scrollBehavior="auto"),r(0))}),Je.slice(0).forEach(function(r){return r.refresh()}),hv=!1,Je.forEach(function(r){if(r._subPinOffset&&r.pin){var s=r.vars.horizontal?"offsetWidth":"offsetHeight",o=r.pin[s];r.revert(!0,1),r.adjustPinSpacing(r.pin[s]-o),r.refresh()}}),JI=1,yV(!0),Je.forEach(function(r){var s=uo(r.scroller,r._dir),o=r.vars.end==="max"||r._endClamp&&r.end>s,a=r._startClamp&&r.start>=s;(o||a)&&r.setPositions(a?s-1:r.start,o?Math.max(a?s:r.start+1,s):r.end,!0)}),yV(!1),JI=0,i.forEach(function(r){return r&&r.render&&r.render(-1)}),Ye.forEach(function(r){Ji(r)&&(r.smooth&&requestAnimationFrame(function(){return r.target.style.scrollBehavior="smooth"}),r.rec&&r(r.rec))}),BV(tT,1),dv.pause(),jc++,Yi=2,da(2),Je.forEach(function(r){return Ji(r.vars.onRefresh)&&r.vars.onRefresh(r)}),Yi=Ze.isRefreshing=!1,Hc("refresh")},XI=0,lv=1,Zp,da=function(e){if(e===2||!Yi&&!hv){Ze.isUpdating=!0,Zp&&Zp.update(0);var t=Je.length,i=xi(),r=i-HI>=50,s=t&&Je[0].scroll();if(lv=XI>s?-1:1,Yi||(XI=s),r&&(ls&&!gv&&i-ls>200&&(ls=0,Hc("scrollEnd")),$p=HI,HI=i),lv<0){for(Qi=t;Qi-- >0;)Je[Qi]&&Je[Qi].update(0,r);lv=1}else for(Qi=0;Qi<t;Qi++)Je[Qi]&&Je[Qi].update(0,r);Ze.isUpdating=!1}eg=0},eT=[PV,kV,rT,iT,os+Jp,os+Kp,os+Yp,os+Qp,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],cv=eT.concat([Vc,Bc,"boxSizing","max"+Zd,"max"+sT,"position",os,On,On+Yp,On+Kp,On+Jp,On+Qp]),NY=function(e,t,i){Jd(i);var r=e._gsap;if(r.spacerIsNative)Jd(r.spacerState);else if(e._gsap.swappedIn){var s=t.parentNode;s&&(s.insertBefore(e,t),s.removeChild(t))}e._gsap.swappedIn=!1},WI=function(e,t,i,r){if(!e._gsap.swappedIn){for(var s=eT.length,o=t.style,a=e.style,l;s--;)l=eT[s],o[l]=i[l];o.position=i.position==="absolute"?"absolute":"relative",i.display==="inline"&&(o.display="inline-block"),a[rT]=a[iT]="auto",o.flexBasis=i.flexBasis||"auto",o.overflow="visible",o.boxSizing="border-box",o[Vc]=fv(e,Ai)+Gn,o[Bc]=fv(e,Nn)+Gn,o[On]=a[os]=a[kV]=a[PV]="0",Jd(r),a[Vc]=a["max"+Zd]=i[Vc],a[Bc]=a["max"+sT]=i[Bc],a[On]=i[On],e.parentNode!==t&&(e.parentNode.insertBefore(t,e),t.appendChild(e)),e._gsap.swappedIn=!0}},OY=/([A-Z])/g,Jd=function(e){if(e){var t=e.t.style,i=e.length,r=0,s,o;for((e.t._gsap||re.core.getCache(e.t)).uncache=1;r<i;r+=2)o=e[r+1],s=e[r],o?t[s]=o:t[s]&&t.removeProperty(s.replace(OY,"-$1").toLowerCase())}},iv=function(e){for(var t=cv.length,i=e.style,r=[],s=0;s<t;s++)r.push(cv[s],i[cv[s]]);return r.t=e,r},PY=function(e,t,i){for(var r=[],s=e.length,o=i?8:0,a;o<s;o+=2)a=e[o],r.push(a,a in t?t[a]:e[o+1]);return r.t=e.t,r},uv={left:0,top:0},vV=function(e,t,i,r,s,o,a,l,c,d,h,f,p,y){Ji(e)&&(e=e(l)),Or(e)&&e.substr(0,3)==="max"&&(e=f+(e.charAt(4)==="="?ov("0"+e.substr(3),i):0));var _=p?p.time():0,w,A,x;if(p&&p.seek(0),isNaN(e)||(e=+e),Gp(e))p&&(e=re.utils.mapRange(p.scrollTrigger.start,p.scrollTrigger.end,0,f,e)),a&&av(a,i,r,!0);else{Ji(t)&&(t=t(l));var M=(e||"0").split(" "),R,P,N,C;x=qi(t,l)||Ht,R=ua(x)||{},(!R||!R.left&&!R.top)&&as(x).display==="none"&&(C=x.style.display,x.style.display="block",R=ua(x),C?x.style.display=C:x.style.removeProperty("display")),P=ov(M[0],R[r.d]),N=ov(M[1]||"0",i),e=R[r.p]-c[r.p]-d+P+s-N,a&&av(a,N,r,i-N<20||a._isStart&&N>20),i-=i-N}if(y&&(l[y]=e||-.001,e<0&&(e=0)),o){var b=e+i,v=o._isStart;w="scroll"+r.d2,av(o,b,r,v&&b>20||!v&&(h?Math.max(Ht[w],Ns[w]):o.parentNode[w])<=b+1),h&&(c=ua(a),h&&(o.style[r.op.p]=c[r.op.p]-r.op.m-o._offset+Gn))}return p&&x&&(w=ua(x),p.seek(f),A=ua(x),p._caScrollDist=w[r.p]-A[r.p],e=e/p._caScrollDist*f),p&&p.seek(_),p?e:Math.round(e)},kY=/(webkit|moz|length|cssText|inset)/i,wV=function(e,t,i,r){if(e.parentNode!==t){var s=e.style,o,a;if(t===Ht){e._stOrig=s.cssText,a=as(e);for(o in a)!+o&&!kY.test(o)&&a[o]&&typeof s[o]=="string"&&o!=="0"&&(s[o]=a[o]);s.top=i,s.left=r}else s.cssText=e._stOrig;re.core.getCache(e).uncache=1,t.appendChild(e)}},UV=function(e,t,i){var r=t,s=r;return function(o){var a=Math.round(e());return a!==r&&a!==s&&Math.abs(a-r)>3&&Math.abs(a-s)>3&&(o=a,i&&i()),s=r,r=o,o}},rv=function(e,t,i){var r={};r[t.p]="+="+i,re.set(e,r)},bV=function(e,t){var i=la(e,t),r="_scroll"+t.p2,s=function o(a,l,c,d,h){var f=o.tween,p=l.onComplete,y={};c=c||i();var _=UV(i,c,function(){f.kill(),o.tween=0});return h=d&&h||0,d=d||a-c,f&&f.kill(),l[r]=a,l.inherit=!1,l.modifiers=y,y[r]=function(){return _(c+d*f.ratio+h*f.ratio*f.ratio)},l.onUpdate=function(){Ye.cache++,o.tween&&da()},l.onComplete=function(){o.tween=0,p&&p.call(f)},f=o.tween=re.to(e,l),f};return e[r]=i,i.wheelHandler=function(){return s.tween&&s.tween.kill()&&(s.tween=0)},ri(e,"wheel",i.wheelHandler),Ze.isTouch&&ri(e,"touchmove",i.wheelHandler),s},Ze=function(){function n(t,i){Kd||n.register(re)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),YI(this),this.init(t,i)}var e=n.prototype;return e.init=function(i,r){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!Hp){this.update=this.refresh=this.kill=co;return}i=pV(Or(i)||Gp(i)||i.nodeType?{trigger:i}:i,tv);var s=i,o=s.onUpdate,a=s.toggleClass,l=s.id,c=s.onToggle,d=s.onRefresh,h=s.scrub,f=s.trigger,p=s.pin,y=s.pinSpacing,_=s.invalidateOnRefresh,w=s.anticipatePin,A=s.onScrubComplete,x=s.onSnapComplete,M=s.once,R=s.snap,P=s.pinReparent,N=s.pinSpacer,C=s.containerAnimation,b=s.fastScrollEnd,v=s.preventOverlaps,E=i.horizontal||i.containerAnimation&&i.horizontal!==!1?Ai:Nn,S=!h&&h!==0,I=qi(i.scroller||ut),T=re.core.getCache(I),le=Uc(I),ye=("pinType"in i?i.pinType:ca(I,"pinType")||le&&"fixed")==="fixed",be=[i.onEnter,i.onLeave,i.onEnterBack,i.onLeaveBack],ae=S&&i.toggleActions.split(" "),Re="markers"in i?i.markers:tv.markers,mt=le?0:parseFloat(as(I)["border"+E.p2+Zd])||0,O=this,Ke=i.onRefreshInit&&function(){return i.onRefreshInit(O)},et=IY(I,le,E),He=TY(I,le),ot=0,Ve=0,tt=0,Ue=la(I,E),Vt,Rt,Zt,Ie,Te,me,dt,vn,yi,U,Pi,jr,gs,Gt,ms,So,Us,ln,Ur,Qe,Nt,ai,$r,Ia,cn,$s,_s,Ao,Hs,zs,Mo,Be,Gs,rr,li,ki,ys,sr,Hr;if(O._startClamp=O._endClamp=!1,O._dir=E,w*=45,O.scroller=I,O.scroll=C?C.time.bind(C):Ue,Ie=Ue(),O.vars=i,r=r||i.animation,"refreshPriority"in i&&(TV=1,i.refreshPriority===-9999&&(Zp=O)),T.tweenScroll=T.tweenScroll||{top:bV(I,Nn),left:bV(I,Ai)},O.tweenTo=Vt=T.tweenScroll[E.p],O.scrubDuration=function(Y){Gs=Gp(Y)&&Y,Gs?Be?Be.duration(Y):Be=re.to(r,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:Gs,paused:!0,onComplete:function(){return A&&A(O)}}):(Be&&Be.progress(1).kill(),Be=0)},r&&(r.vars.lazy=!1,r._initted&&!O.isReverted||r.vars.immediateRender!==!1&&i.immediateRender!==!1&&r.duration()&&r.render(0,!0,!0),O.animation=r.pause(),r.scrollTrigger=O,O.scrubDuration(h),zs=0,l||(l=r.vars.id)),R&&((!Fc(R)||R.push)&&(R={snapTo:R}),"scrollBehavior"in Ht.style&&re.set(le?[Ht,Ns]:I,{scrollBehavior:"auto"}),Ye.forEach(function(Y){return Ji(Y)&&Y.target===(le?rn.scrollingElement||Ns:I)&&(Y.smooth=!1)}),Zt=Ji(R.snapTo)?R.snapTo:R.snapTo==="labels"?AY(r):R.snapTo==="labelsDirectional"?MY(r):R.directional!==!1?function(Y,De){return oT(R.snapTo)(Y,xi()-Ve<500?0:De.direction)}:re.utils.snap(R.snapTo),rr=R.duration||{min:.1,max:2},rr=Fc(rr)?qp(rr.min,rr.max):qp(rr,rr),li=re.delayedCall(R.delay||Gs/2||.1,function(){var Y=Ue(),De=xi()-Ve<500,ce=Vt.tween;if((De||Math.abs(O.getVelocity())<10)&&!ce&&!gv&&ot!==Y){var ve=(Y-me)/Gt,Sn=r&&!S?r.totalProgress():ve,nt=De?0:(Sn-Mo)/(xi()-$p)*1e3||0,At=re.utils.clamp(-ve,1-ve,Wd(nt/2)*nt/.185),Kn=ve+(R.inertia===!1?0:At),Wt,Tt,Dt=R,Fi=Dt.onStart,Mt=Dt.onInterrupt,un=Dt.onComplete;if(Wt=Zt(Kn,O),Gp(Wt)||(Wt=Kn),Tt=Math.round(me+Wt*Gt),Y<=dt&&Y>=me&&Tt!==Y){if(ce&&!ce._initted&&ce.data<=Wd(Tt-Y))return;R.inertia===!1&&(At=Wt-ve),Vt(Tt,{duration:rr(Wd(Math.max(Wd(Kn-Sn),Wd(Wt-Sn))*.185/nt/.05||0)),ease:R.ease||"power3",data:Wd(Tt-Y),onInterrupt:function(){return li.restart(!0)&&Mt&&Mt(O)},onComplete:function(){O.update(),ot=Ue(),r&&(Be?Be.resetTo("totalProgress",Wt,r._tTime/r._tDur):r.progress(Wt)),zs=Mo=r&&!S?r.totalProgress():O.progress,x&&x(O),un&&un(O)}},Y,At*Gt,Tt-Y-At*Gt),Fi&&Fi(O,Vt.tween)}}else O.isActive&&ot!==Y&&li.restart(!0)}).pause()),l&&(ZI[l]=O),f=O.trigger=qi(f||p!==!0&&p),Hr=f&&f._gsap&&f._gsap.stRevert,Hr&&(Hr=Hr(O)),p=p===!0?f:qi(p),Or(a)&&(a={targets:f,className:a}),p&&(y===!1||y===os||(y=!y&&p.parentNode&&p.parentNode.style&&as(p.parentNode).display==="flex"?!1:On),O.pin=p,Rt=re.core.getCache(p),Rt.spacer?ms=Rt.pinState:(N&&(N=qi(N),N&&!N.nodeType&&(N=N.current||N.nativeElement),Rt.spacerIsNative=!!N,N&&(Rt.spacerState=iv(N))),Rt.spacer=ln=N||rn.createElement("div"),ln.classList.add("pin-spacer"),l&&ln.classList.add("pin-spacer-"+l),Rt.pinState=ms=iv(p)),i.force3D!==!1&&re.set(p,{force3D:!0}),O.spacer=ln=Rt.spacer,Hs=as(p),Ia=Hs[y+E.os2],Qe=re.getProperty(p),Nt=re.quickSetter(p,E.a,Gn),WI(p,ln,Hs),Us=iv(p)),Re){jr=Fc(Re)?pV(Re,gV):gV,U=nv("scroller-start",l,I,E,jr,0),Pi=nv("scroller-end",l,I,E,jr,0,U),Ur=U["offset"+E.op.d2];var Ws=qi(ca(I,"content")||I);vn=this.markerStart=nv("start",l,Ws,E,jr,Ur,0,C),yi=this.markerEnd=nv("end",l,Ws,E,jr,Ur,0,C),C&&(sr=re.quickSetter([vn,yi],E.a,Gn)),!ye&&!(Rs.length&&ca(I,"fixedMarkers")===!0)&&(SY(le?Ht:I),re.set([U,Pi],{force3D:!0}),$s=re.quickSetter(U,E.a,Gn),Ao=re.quickSetter(Pi,E.a,Gn))}if(C){var Ce=C.vars.onUpdate,he=C.vars.onUpdateParams;C.eventCallback("onUpdate",function(){O.update(0,0,1),Ce&&Ce.apply(C,he||[])})}if(O.previous=function(){return Je[Je.indexOf(O)-1]},O.next=function(){return Je[Je.indexOf(O)+1]},O.revert=function(Y,De){if(!De)return O.kill(!0);var ce=Y!==!1||!O.enabled,ve=Mi;ce!==O.isReverted&&(ce&&(ki=Math.max(Ue(),O.scroll.rec||0),tt=O.progress,ys=r&&r.progress()),vn&&[vn,yi,U,Pi].forEach(function(Sn){return Sn.style.display=ce?"none":"block"}),ce&&(Mi=O,O.update(ce)),p&&(!P||!O.isActive)&&(ce?NY(p,ln,ms):WI(p,ln,as(p),cn)),ce||O.update(ce),Mi=ve,O.isReverted=ce)},O.refresh=function(Y,De,ce,ve){if(!((Mi||!O.enabled)&&!De)){if(p&&Y&&ls){ri(n,"scrollEnd",LV);return}!Yi&&Ke&&Ke(O),Mi=O,Vt.tween&&!ce&&(Vt.tween.kill(),Vt.tween=0),Be&&Be.pause(),_&&r&&r.revert({kill:!1}).invalidate(),O.isReverted||O.revert(!0,!0),O._subPinOffset=!1;var Sn=et(),nt=He(),At=C?C.duration():uo(I,E),Kn=Gt<=.01,Wt=0,Tt=ve||0,Dt=Fc(ce)?ce.end:i.end,Fi=i.endTrigger||f,Mt=Fc(ce)?ce.start:i.start||(i.start===0||!f?0:p?"0 0":"0 100%"),un=O.pinnedContainer=i.pinnedContainer&&qi(i.pinnedContainer,O),wr=f&&Math.max(0,Je.indexOf(O))||0,An=wr,wn,Mn,qs,Gl,Qn,qt,br,Wl,Ta,Er,or,ql,Kl;for(Re&&Fc(ce)&&(ql=re.getProperty(U,E.p),Kl=re.getProperty(Pi,E.p));An--;)qt=Je[An],qt.end||qt.refresh(0,1)||(Mi=O),br=qt.pin,br&&(br===f||br===p||br===un)&&!qt.isReverted&&(Er||(Er=[]),Er.unshift(qt),qt.revert(!0,!0)),qt!==Je[An]&&(wr--,An--);for(Ji(Mt)&&(Mt=Mt(O)),Mt=uV(Mt,"start",O),me=vV(Mt,f,Sn,E,Ue(),vn,U,O,nt,mt,ye,At,C,O._startClamp&&"_startClamp")||(p?-.001:0),Ji(Dt)&&(Dt=Dt(O)),Or(Dt)&&!Dt.indexOf("+=")&&(~Dt.indexOf(" ")?Dt=(Or(Mt)?Mt.split(" ")[0]:"")+Dt:(Wt=ov(Dt.substr(2),Sn),Dt=Or(Mt)?Mt:(C?re.utils.mapRange(0,C.duration(),C.scrollTrigger.start,C.scrollTrigger.end,me):me)+Wt,Fi=f)),Dt=uV(Dt,"end",O),dt=Math.max(me,vV(Dt||(Fi?"100% 0":At),Fi,Sn,E,Ue()+Wt,yi,Pi,O,nt,mt,ye,At,C,O._endClamp&&"_endClamp"))||-.001,Wt=0,An=wr;An--;)qt=Je[An],br=qt.pin,br&&qt.start-qt._pinPush<=me&&!C&&qt.end>0&&(wn=qt.end-(O._startClamp?Math.max(0,qt.start):qt.start),(br===f&&qt.start-qt._pinPush<me||br===un)&&isNaN(Mt)&&(Wt+=wn*(1-qt.progress)),br===p&&(Tt+=wn));if(me+=Wt,dt+=Wt,O._startClamp&&(O._startClamp+=Wt),O._endClamp&&!Yi&&(O._endClamp=dt||-.001,dt=Math.min(dt,uo(I,E))),Gt=dt-me||(me-=.01)&&.001,Kn&&(tt=re.utils.clamp(0,1,re.utils.normalize(me,dt,ki))),O._pinPush=Tt,vn&&Wt&&(wn={},wn[E.a]="+="+Wt,un&&(wn[E.p]="-="+Ue()),re.set([vn,yi],wn)),p&&!(JI&&O.end>=uo(I,E)))wn=as(p),Gl=E===Nn,qs=Ue(),ai=parseFloat(Qe(E.a))+Tt,!At&&dt>1&&(or=(le?rn.scrollingElement||Ns:I).style,or={style:or,value:or["overflow"+E.a.toUpperCase()]},le&&as(Ht)["overflow"+E.a.toUpperCase()]!=="scroll"&&(or.style["overflow"+E.a.toUpperCase()]="scroll")),WI(p,ln,wn),Us=iv(p),Mn=ua(p,!0),Wl=ye&&la(I,Gl?Ai:Nn)(),y?(cn=[y+E.os2,Gt+Tt+Gn],cn.t=ln,An=y===On?fv(p,E)+Gt+Tt:0,An&&(cn.push(E.d,An+Gn),ln.style.flexBasis!=="auto"&&(ln.style.flexBasis=An+Gn)),Jd(cn),un&&Je.forEach(function(Sa){Sa.pin===un&&Sa.vars.pinSpacing!==!1&&(Sa._subPinOffset=!0)}),ye&&Ue(ki)):(An=fv(p,E),An&&ln.style.flexBasis!=="auto"&&(ln.style.flexBasis=An+Gn)),ye&&(Qn={top:Mn.top+(Gl?qs-me:Wl)+Gn,left:Mn.left+(Gl?Wl:qs-me)+Gn,boxSizing:"border-box",position:"fixed"},Qn[Vc]=Qn["max"+Zd]=Math.ceil(Mn.width)+Gn,Qn[Bc]=Qn["max"+sT]=Math.ceil(Mn.height)+Gn,Qn[os]=Qn[os+Yp]=Qn[os+Kp]=Qn[os+Jp]=Qn[os+Qp]="0",Qn[On]=wn[On],Qn[On+Yp]=wn[On+Yp],Qn[On+Kp]=wn[On+Kp],Qn[On+Jp]=wn[On+Jp],Qn[On+Qp]=wn[On+Qp],So=PY(ms,Qn,P),Yi&&Ue(0)),r?(Ta=r._initted,UI(1),r.render(r.duration(),!0,!0),$r=Qe(E.a)-ai+Gt+Tt,_s=Math.abs(Gt-$r)>1,ye&&_s&&So.splice(So.length-2,2),r.render(0,!0,!0),Ta||r.invalidate(!0),r.parent||r.totalTime(r.totalTime()),UI(0)):$r=Gt,or&&(or.value?or.style["overflow"+E.a.toUpperCase()]=or.value:or.style.removeProperty("overflow-"+E.a));else if(f&&Ue()&&!C)for(Mn=f.parentNode;Mn&&Mn!==Ht;)Mn._pinOffset&&(me-=Mn._pinOffset,dt-=Mn._pinOffset),Mn=Mn.parentNode;Er&&Er.forEach(function(Sa){return Sa.revert(!1,!0)}),O.start=me,O.end=dt,Ie=Te=Yi?ki:Ue(),!C&&!Yi&&(Ie<ki&&Ue(ki),O.scroll.rec=0),O.revert(!1,!0),Ve=xi(),li&&(ot=-1,li.restart(!0)),Mi=0,r&&S&&(r._initted||ys)&&r.progress()!==ys&&r.progress(ys||0,!0).render(r.time(),!0,!0),(Kn||tt!==O.progress||C||_)&&(r&&!S&&r.totalProgress(C&&me<-.001&&!tt?re.utils.normalize(me,dt,0):tt,!0),O.progress=Kn||(Ie-me)/Gt===tt?0:tt),p&&y&&(ln._pinOffset=Math.round(O.progress*$r)),Be&&Be.invalidate(),isNaN(ql)||(ql-=re.getProperty(U,E.p),Kl-=re.getProperty(Pi,E.p),rv(U,E,ql),rv(vn,E,ql-(ve||0)),rv(Pi,E,Kl),rv(yi,E,Kl-(ve||0))),Kn&&!Yi&&O.update(),d&&!Yi&&!gs&&(gs=!0,d(O),gs=!1)}},O.getVelocity=function(){return(Ue()-Te)/(xi()-$p)*1e3||0},O.endAnimation=function(){Up(O.callbackAnimation),r&&(Be?Be.progress(1):r.paused()?S||Up(r,O.direction<0,1):Up(r,r.reversed()))},O.labelToScroll=function(Y){return r&&r.labels&&(me||O.refresh()||me)+r.labels[Y]/r.duration()*Gt||0},O.getTrailing=function(Y){var De=Je.indexOf(O),ce=O.direction>0?Je.slice(0,De).reverse():Je.slice(De+1);return(Or(Y)?ce.filter(function(ve){return ve.vars.preventOverlaps===Y}):ce).filter(function(ve){return O.direction>0?ve.end<=me:ve.start>=dt})},O.update=function(Y,De,ce){if(!(C&&!ce&&!Y)){var ve=Yi===!0?ki:O.scroll(),Sn=Y?0:(ve-me)/Gt,nt=Sn<0?0:Sn>1?1:Sn||0,At=O.progress,Kn,Wt,Tt,Dt,Fi,Mt,un,wr;if(De&&(Te=Ie,Ie=C?Ue():ve,R&&(Mo=zs,zs=r&&!S?r.totalProgress():nt)),w&&p&&!Mi&&!J0&&ls&&(!nt&&me<ve+(ve-Te)/(xi()-$p)*w?nt=1e-4:nt===1&&dt>ve+(ve-Te)/(xi()-$p)*w&&(nt=.9999)),nt!==At&&O.enabled){if(Kn=O.isActive=!!nt&&nt<1,Wt=!!At&&At<1,Mt=Kn!==Wt,Fi=Mt||!!nt!=!!At,O.direction=nt>At?1:-1,O.progress=nt,Fi&&!Mi&&(Tt=nt&&!At?0:nt===1?1:At===1?2:3,S&&(Dt=!Mt&&ae[Tt+1]!=="none"&&ae[Tt+1]||ae[Tt],wr=r&&(Dt==="complete"||Dt==="reset"||Dt in r))),v&&(Mt||wr)&&(wr||h||!r)&&(Ji(v)?v(O):O.getTrailing(v).forEach(function(qs){return qs.endAnimation()})),S||(Be&&!Mi&&!J0?(Be._dp._time-Be._start!==Be._time&&Be.render(Be._dp._time-Be._start),Be.resetTo?Be.resetTo("totalProgress",nt,r._tTime/r._tDur):(Be.vars.totalProgress=nt,Be.invalidate().restart())):r&&r.totalProgress(nt,!!(Mi&&(Ve||Y)))),p){if(Y&&y&&(ln.style[y+E.os2]=Ia),!ye)Nt(zp(ai+$r*nt));else if(Fi){if(un=!Y&&nt>At&&dt+1>ve&&ve+1>=uo(I,E),P)if(!Y&&(Kn||un)){var An=ua(p,!0),wn=ve-me;wV(p,Ht,An.top+(E===Nn?wn:0)+Gn,An.left+(E===Nn?0:wn)+Gn)}else wV(p,ln);Jd(Kn||un?So:Us),_s&&nt<1&&Kn||Nt(ai+(nt===1&&!un?$r:0))}}R&&!Vt.tween&&!Mi&&!J0&&li.restart(!0),a&&(Mt||M&&nt&&(nt<1||!$I))&&Xp(a.targets).forEach(function(qs){return qs.classList[Kn||M?"add":"remove"](a.className)}),o&&!S&&!Y&&o(O),Fi&&!Mi?(S&&(wr&&(Dt==="complete"?r.pause().totalProgress(1):Dt==="reset"?r.restart(!0).pause():Dt==="restart"?r.restart(!0):r[Dt]()),o&&o(O)),(Mt||!$I)&&(c&&Mt&&zI(O,c),be[Tt]&&zI(O,be[Tt]),M&&(nt===1?O.kill(!1,1):be[Tt]=0),Mt||(Tt=nt===1?1:3,be[Tt]&&zI(O,be[Tt]))),b&&!Kn&&Math.abs(O.getVelocity())>(Gp(b)?b:2500)&&(Up(O.callbackAnimation),Be?Be.progress(1):Up(r,Dt==="reverse"?1:!nt,1))):S&&o&&!Mi&&o(O)}if(Ao){var Mn=C?ve/C.duration()*(C._caScrollDist||0):ve;$s(Mn+(U._isFlipped?1:0)),Ao(Mn)}sr&&sr(-ve/C.duration()*(C._caScrollDist||0))}},O.enable=function(Y,De){O.enabled||(O.enabled=!0,ri(I,"resize",Wp),le||ri(I,"scroll",qd),Ke&&ri(n,"refreshInit",Ke),Y!==!1&&(O.progress=tt=0,Ie=Te=ot=Ue()),De!==!1&&O.refresh())},O.getTween=function(Y){return Y&&Vt?Vt.tween:Be},O.setPositions=function(Y,De,ce,ve){if(C){var Sn=C.scrollTrigger,nt=C.duration(),At=Sn.end-Sn.start;Y=Sn.start+At*Y/nt,De=Sn.start+At*De/nt}O.refresh(!1,!1,{start:dV(Y,ce&&!!O._startClamp),end:dV(De,ce&&!!O._endClamp)},ve),O.update()},O.adjustPinSpacing=function(Y){if(cn&&Y){var De=cn.indexOf(E.d)+1;cn[De]=parseFloat(cn[De])+Y+Gn,cn[1]=parseFloat(cn[1])+Y+Gn,Jd(cn)}},O.disable=function(Y,De){if(O.enabled&&(Y!==!1&&O.revert(!0,!0),O.enabled=O.isActive=!1,De||Be&&Be.pause(),ki=0,Rt&&(Rt.uncache=1),Ke&&ii(n,"refreshInit",Ke),li&&(li.pause(),Vt.tween&&Vt.tween.kill()&&(Vt.tween=0)),!le)){for(var ce=Je.length;ce--;)if(Je[ce].scroller===I&&Je[ce]!==O)return;ii(I,"resize",Wp),le||ii(I,"scroll",qd)}},O.kill=function(Y,De){O.disable(Y,De),Be&&!De&&Be.kill(),l&&delete ZI[l];var ce=Je.indexOf(O);ce>=0&&Je.splice(ce,1),ce===Qi&&lv>0&&Qi--,ce=0,Je.forEach(function(ve){return ve.scroller===O.scroller&&(ce=1)}),ce||Yi||(O.scroll.rec=0),r&&(r.scrollTrigger=null,Y&&r.revert({kill:!1}),De||r.kill()),vn&&[vn,yi,U,Pi].forEach(function(ve){return ve.parentNode&&ve.parentNode.removeChild(ve)}),Zp===O&&(Zp=0),p&&(Rt&&(Rt.uncache=1),ce=0,Je.forEach(function(ve){return ve.pin===p&&ce++}),ce||(Rt.spacer=0)),i.onKill&&i.onKill(O)},Je.push(O),O.enable(!1,!1),Hr&&Hr(O),r&&r.add&&!Gt){var ht=O.update;O.update=function(){O.update=ht,me||dt||O.refresh()},re.delayedCall(.01,O.update),Gt=.01,me=dt=0}else O.refresh();p&&RY()},n.register=function(i){return Kd||(re=i||RV(),xV()&&window.document&&n.enable(),Kd=Hp),Kd},n.defaults=function(i){if(i)for(var r in i)tv[r]=i[r];return tv},n.disable=function(i,r){Hp=0,Je.forEach(function(o){return o[r?"kill":"disable"](i)}),ii(ut,"wheel",qd),ii(rn,"scroll",qd),clearInterval(Y0),ii(rn,"touchcancel",co),ii(Ht,"touchstart",co),X0(ii,rn,"pointerdown,touchstart,mousedown",hV),X0(ii,rn,"pointerup,touchend,mouseup",fV),dv.kill(),Z0(ii);for(var s=0;s<Ye.length;s+=3)ev(ii,Ye[s],Ye[s+1]),ev(ii,Ye[s],Ye[s+2])},n.enable=function(){if(ut=window,rn=document,Ns=rn.documentElement,Ht=rn.body,re&&(Xp=re.utils.toArray,qp=re.utils.clamp,YI=re.core.context||co,UI=re.core.suppressOverwrites||co,tT=ut.history.scrollRestoration||"auto",XI=ut.pageYOffset,re.core.globals("ScrollTrigger",n),Ht)){Hp=1,Yd=document.createElement("div"),Yd.style.height="100vh",Yd.style.position="absolute",jV(),DY(),_n.register(re),n.isTouch=_n.isTouch,dl=_n.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),QI=_n.isTouch===1,ri(ut,"wheel",qd),IV=[ut,rn,Ns,Ht],re.matchMedia?(n.matchMedia=function(l){var c=re.matchMedia(),d;for(d in l)c.add(d,l[d]);return c},re.addEventListener("matchMediaInit",function(){return aT()}),re.addEventListener("matchMediaRevert",function(){return VV()}),re.addEventListener("matchMedia",function(){Lc(0,1),Hc("matchMedia")}),re.matchMedia("(orientation: portrait)",function(){return GI(),GI})):console.warn("Requires GSAP 3.11.0 or later"),GI(),ri(rn,"scroll",qd);var i=Ht.style,r=i.borderTopStyle,s=re.core.Animation.prototype,o,a;for(s.revert||Object.defineProperty(s,"revert",{value:function(){return this.time(-.01,!0)}}),i.borderTopStyle="solid",o=ua(Ht),Nn.m=Math.round(o.top+Nn.sc())||0,Ai.m=Math.round(o.left+Ai.sc())||0,r?i.borderTopStyle=r:i.removeProperty("border-top-style"),Y0=setInterval(mV,250),re.delayedCall(.5,function(){return J0=0}),ri(rn,"touchcancel",co),ri(Ht,"touchstart",co),X0(ri,rn,"pointerdown,touchstart,mousedown",hV),X0(ri,rn,"pointerup,touchend,mouseup",fV),KI=re.utils.checkPrefix("transform"),cv.push(KI),Kd=xi(),dv=re.delayedCall(.2,Lc).pause(),Qd=[rn,"visibilitychange",function(){var l=ut.innerWidth,c=ut.innerHeight;rn.hidden?(lV=l,cV=c):(lV!==l||cV!==c)&&Wp()},rn,"DOMContentLoaded",Lc,ut,"load",Lc,ut,"resize",Wp],Z0(ri),Je.forEach(function(l){return l.enable(0,1)}),a=0;a<Ye.length;a+=3)ev(ii,Ye[a],Ye[a+1]),ev(ii,Ye[a],Ye[a+2])}},n.config=function(i){"limitCallbacks"in i&&($I=!!i.limitCallbacks);var r=i.syncInterval;r&&clearInterval(Y0)||(Y0=r)&&setInterval(mV,r),"ignoreMobileResize"in i&&(QI=n.isTouch===1&&i.ignoreMobileResize),"autoRefreshEvents"in i&&(Z0(ii)||Z0(ri,i.autoRefreshEvents||"none"),SV=(i.autoRefreshEvents+"").indexOf("resize")===-1)},n.scrollerProxy=function(i,r){var s=qi(i),o=Ye.indexOf(s),a=Uc(s);~o&&Ye.splice(o,a?6:2),r&&(a?Rs.unshift(ut,r,Ht,r,Ns,r):Rs.unshift(s,r))},n.clearMatchMedia=function(i){Je.forEach(function(r){return r._ctx&&r._ctx.query===i&&r._ctx.kill(!0,!0)})},n.isInViewport=function(i,r,s){var o=(Or(i)?qi(i):i).getBoundingClientRect(),a=o[s?Vc:Bc]*r||0;return s?o.right-a>0&&o.left+a<ut.innerWidth:o.bottom-a>0&&o.top+a<ut.innerHeight},n.positionInViewport=function(i,r,s){Or(i)&&(i=qi(i));var o=i.getBoundingClientRect(),a=o[s?Vc:Bc],l=r==null?a/2:r in pv?pv[r]*a:~r.indexOf("%")?parseFloat(r)*a/100:parseFloat(r)||0;return s?(o.left+l)/ut.innerWidth:(o.top+l)/ut.innerHeight},n.killAll=function(i){if(Je.slice(0).forEach(function(s){return s.vars.id!=="ScrollSmoother"&&s.kill()}),i!==!0){var r=$c.killAll||[];$c={},r.forEach(function(s){return s()})}},n}();Ze.version="3.12.5";Ze.saveStyles=function(n){return n?Xp(n).forEach(function(e){if(e&&e.style){var t=Nr.indexOf(e);t>=0&&Nr.splice(t,5),Nr.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),re.core.getCache(e),YI())}}):Nr};Ze.revert=function(n,e){return aT(!n,e)};Ze.create=function(n,e){return new Ze(n,e)};Ze.refresh=function(n){return n?Wp():(Kd||Ze.register())&&Lc(!0)};Ze.update=function(n){return++Ye.cache&&da(n===!0?2:0)};Ze.clearScrollMemory=BV;Ze.maxScroll=function(n,e){return uo(n,e?Ai:Nn)};Ze.getScrollFunc=function(n,e){return la(qi(n),e?Ai:Nn)};Ze.getById=function(n){return ZI[n]};Ze.getAll=function(){return Je.filter(function(n){return n.vars.id!=="ScrollSmoother"})};Ze.isScrolling=function(){return!!ls};Ze.snapDirectional=oT;Ze.addEventListener=function(n,e){var t=$c[n]||($c[n]=[]);~t.indexOf(e)||t.push(e)};Ze.removeEventListener=function(n,e){var t=$c[n],i=t&&t.indexOf(e);i>=0&&t.splice(i,1)};Ze.batch=function(n,e){var t=[],i={},r=e.interval||.016,s=e.batchMax||1e9,o=function(c,d){var h=[],f=[],p=re.delayedCall(r,function(){d(h,f),h=[],f=[]}).pause();return function(y){h.length||p.restart(!0),h.push(y.trigger),f.push(y),s<=h.length&&p.progress(1)}},a;for(a in e)i[a]=a.substr(0,2)==="on"&&Ji(e[a])&&a!=="onRefreshInit"?o(a,e[a]):e[a];return Ji(s)&&(s=s(),ri(Ze,"refresh",function(){return s=e.batchMax()})),Xp(n).forEach(function(l){var c={};for(a in i)c[a]=i[a];c.trigger=l,t.push(Ze.create(c))}),t};var EV=function(e,t,i,r){return t>r?e(r):t<0&&e(0),i>r?(r-t)/(i-t):i<0?t/(t-i):1},qI=function n(e,t){t===!0?e.style.removeProperty("touch-action"):e.style.touchAction=t===!0?"auto":t?"pan-"+t+(_n.isTouch?" pinch-zoom":""):"none",e===Ns&&n(Ht,t)},sv={auto:1,scroll:1},FY=function(e){var t=e.event,i=e.target,r=e.axis,s=(t.changedTouches?t.changedTouches[0]:t).target,o=s._gsap||re.core.getCache(s),a=xi(),l;if(!o._isScrollT||a-o._isScrollT>2e3){for(;s&&s!==Ht&&(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth||!(sv[(l=as(s)).overflowY]||sv[l.overflowX]));)s=s.parentNode;o._isScroll=s&&s!==i&&!Uc(s)&&(sv[(l=as(s)).overflowY]||sv[l.overflowX]),o._isScrollT=a}(o._isScroll||r==="x")&&(t.stopPropagation(),t._gsapAllow=!0)},$V=function(e,t,i,r){return _n.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:t,onWheel:r=r&&FY,onPress:r,onDrag:r,onScroll:r,onEnable:function(){return i&&ri(rn,_n.eventTypes[0],DV,!1,!0)},onDisable:function(){return ii(rn,_n.eventTypes[0],DV,!0)}})},LY=/(input|label|select|textarea)/i,CV,DV=function(e){var t=LY.test(e.target.tagName);(t||CV)&&(e._gsapAllow=!0,CV=t)},VY=function(e){Fc(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var t=e,i=t.normalizeScrollX,r=t.momentum,s=t.allowNestedScroll,o=t.onRelease,a,l,c=qi(e.target)||Ns,d=re.core.globals().ScrollSmoother,h=d&&d.get(),f=dl&&(e.content&&qi(e.content)||h&&e.content!==!1&&!h.smooth()&&h.content()),p=la(c,Nn),y=la(c,Ai),_=1,w=(_n.isTouch&&ut.visualViewport?ut.visualViewport.scale*ut.visualViewport.width:ut.outerWidth)/ut.innerWidth,A=0,x=Ji(r)?function(){return r(a)}:function(){return r||2.8},M,R,P=$V(c,e.type,!0,s),N=function(){return R=!1},C=co,b=co,v=function(){l=uo(c,Nn),b=qp(dl?1:0,l),i&&(C=qp(0,uo(c,Ai))),M=jc},E=function(){f._gsap.y=zp(parseFloat(f._gsap.y)+p.offset)+"px",f.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(f._gsap.y)+", 0, 1)",p.offset=p.cacheID=0},S=function(){if(R){requestAnimationFrame(N);var Re=zp(a.deltaY/2),mt=b(p.v-Re);if(f&&mt!==p.v+p.offset){p.offset=mt-p.v;var O=zp((parseFloat(f&&f._gsap.y)||0)-p.offset);f.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+O+", 0, 1)",f._gsap.y=O+"px",p.cacheID=Ye.cache,da()}return!0}p.offset&&E(),R=!0},I,T,le,ye,be=function(){v(),I.isActive()&&I.vars.scrollY>l&&(p()>l?I.progress(1)&&p(l):I.resetTo("scrollY",l))};return f&&re.set(f,{y:"+=0"}),e.ignoreCheck=function(ae){return dl&&ae.type==="touchmove"&&S(ae)||_>1.05&&ae.type!=="touchstart"||a.isGesturing||ae.touches&&ae.touches.length>1},e.onPress=function(){R=!1;var ae=_;_=zp((ut.visualViewport&&ut.visualViewport.scale||1)/w),I.pause(),ae!==_&&qI(c,_>1.01?!0:i?!1:"x"),T=y(),le=p(),v(),M=jc},e.onRelease=e.onGestureStart=function(ae,Re){if(p.offset&&E(),!Re)ye.restart(!0);else{Ye.cache++;var mt=x(),O,Ke;i&&(O=y(),Ke=O+mt*.05*-ae.velocityX/.227,mt*=EV(y,O,Ke,uo(c,Ai)),I.vars.scrollX=C(Ke)),O=p(),Ke=O+mt*.05*-ae.velocityY/.227,mt*=EV(p,O,Ke,uo(c,Nn)),I.vars.scrollY=b(Ke),I.invalidate().duration(mt).play(.01),(dl&&I.vars.scrollY>=l||O>=l-1)&&re.to({},{onUpdate:be,duration:mt})}o&&o(ae)},e.onWheel=function(){I._ts&&I.pause(),xi()-A>1e3&&(M=0,A=xi())},e.onChange=function(ae,Re,mt,O,Ke){if(jc!==M&&v(),Re&&i&&y(C(O[2]===Re?T+(ae.startX-ae.x):y()+Re-O[1])),mt){p.offset&&E();var et=Ke[2]===mt,He=et?le+ae.startY-ae.y:p()+mt-Ke[1],ot=b(He);et&&He!==ot&&(le+=ot-He),p(ot)}(mt||Re)&&da()},e.onEnable=function(){qI(c,i?!1:"x"),Ze.addEventListener("refresh",be),ri(ut,"resize",be),p.smooth&&(p.target.style.scrollBehavior="auto",p.smooth=y.smooth=!1),P.enable()},e.onDisable=function(){qI(c,!0),ii(ut,"resize",be),Ze.removeEventListener("refresh",be),P.kill()},e.lockAxis=e.lockAxis!==!1,a=new _n(e),a.iOS=dl,dl&&!p()&&p(1),dl&&re.ticker.add(co),ye=a._dc,I=re.to(a,{ease:"power4",paused:!0,inherit:!1,scrollX:i?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:UV(p,p(),function(){return I.pause()})},onUpdate:da,onComplete:ye.vars.onComplete}),a};Ze.sort=function(n){return Je.sort(n||function(e,t){return(e.vars.refreshPriority||0)*-1e6+e.start-(t.start+(t.vars.refreshPriority||0)*-1e6)})};Ze.observe=function(n){return new _n(n)};Ze.normalizeScroll=function(n){if(typeof n>"u")return Ki;if(n===!0&&Ki)return Ki.enable();if(n===!1){Ki&&Ki.kill(),Ki=n;return}var e=n instanceof _n?n:VY(n);return Ki&&Ki.target===e.target&&Ki.kill(),Uc(e.target)&&(Ki=e),e};Ze.core={_getVelocityProp:Q0,_inputObserver:$V,_scrollers:Ye,_proxies:Rs,bridge:{ss:function(){ls||Hc("scrollStart"),ls=xi()},ref:function(){return Mi}}};RV()&&re.registerPlugin(Ze);var mv=class n{constructor(e,t){this.router=e;this.elementRef=t}buyButton={text:"V\xE1s\xE1rl\xE1s",path:"product"};ngAfterViewInit(){Fp.registerPlugin(Ze),Fp.to(".pingcredit",{y:"-200",opacity:1,duration:4,ease:"power2.out",scrollTrigger:{trigger:".small-trigger",start:"top 60%",end:"bottom 20%",scrub:1,markers:!1}}),Fp.to(".pingtrack",{y:"200",duration:2,ease:"power2.out",scrollTrigger:{trigger:".small-trigger",start:"top 90%",end:"bottom 40%",scrub:1,markers:!1}});let e=this.elementRef.nativeElement.querySelector("video"),t=this.elementRef.nativeElement.querySelector(".video-container");Ze.create({trigger:e,start:"top 90%",end:"bottom 10%",onEnter:()=>e.play(),onEnterBack:()=>e.play(),onLeaveBack:()=>e.pause(),markers:!1})}ngOnInit(){HV.default.init({once:!0})}buyButtonClick(){this.router.navigate([this.buyButton.path])}static \u0275fac=function(t){return new(t||n)(lt(Ms),lt(Ci))};static \u0275cmp=Bi({type:n,selectors:[["app-home"]],decls:201,vars:17,consts:[["video",""],[1,"content"],[1,"header"],[1,"landing"],[1,"title"],["src","/assets/images/trackcard.png","alt","SafeCard",1,"TrackCard"],["data-aos","fade-up",1,"descript","mt-5"],["src","/assets/images/findmybadge.png","alt","",1,"findmybadge"],[1,"card_container","desktop-only"],[1,"card"],[1,"card-body"],[1,"row"],[1,"card1","col"],[1,"card-text"],[1,"card-2","col"],["alt","iphone",1,"card1pic",3,"src"],[1,"card-2","col","pingcard"],[1,"container","desktop-only"],["muted","","playsinline","",1,"trigger-video"],["src","/assets/videos/aaaa.mp4","type","video/mp4",1,"trackcard-card","video-container"],["alt","iphone",1,"trackcard-card",3,"src"],[1,"border-effect"],[1,"container","mobile-only"],[1,"container","animationcont"],["alt","iphone",1,"trackcard-card","pingtrack",3,"src"],["alt","iphone",1,"creditcard-card","pingcredit",3,"src"],[1,"small-trigger",2,"margin-bottom","600px"],["alt","iphone",3,"src"],["alt","iphone",1,"card5pic",3,"src"],[1,"card_container","mobile-only"],[1,"card-2","pingcard"],[1,"container"],[1,"bottom_section"],[1,"guide_section"],["data-aos","fade-up",1,"row","images"],[1,"col-3","guide"],["src","/assets/images/tutor1.png","alt",""],[1,"guide"],["src","/assets/images/tutor2.png","alt",""],["src","/assets/images/tutor3.png","alt",""],["src","/assets/images/tutor4.png","alt",""],["src","/assets/images/tutor5.png","alt",""],[1,"buy","desktop-only"],[1,"card-text-dark"],[1,"card-2","trackcard-buy"],[1,"price-button"],[1,"price"],[1,"btn","btn-primary",3,"click"],[1,"card-2","col","desktop-only"],[1,"buy","mobile-only"],[1,"cardbuy"],[1,"trackcard-buy"]],template:function(t,i){if(t&1){let r=hr();$(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1",4),Q(4,"SafeCard"),j(),Me(5,"img",5),j(),$(6,"div",6)(7,"h3"),Q(8,"Ne hagyd,"),j(),$(9,"h3"),Q(10,"hogy elhagyd."),j(),Me(11,"img",7),j()(),$(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11)(16,"div",12)(17,"h1",4),Q(18,"Tudod hol keresd"),j(),$(19,"p",13),Q(20,"Egy helyen tal\xE1lod az Apple eszk\xF6zeiddel a Lok\xE1tor App-ban, \xEDgy mindig pontosan tudhatod, hol van a p\xE9nzt\xE1rc\xE1d."),j()(),$(21,"div",14),Me(22,"img",15),j()()()(),$(23,"div",9)(24,"div",10)(25,"div",11)(26,"div",16)(27,"div",17)(28,"video",18,0),Me(30,"source",19)(31,"img",20),j()(),Me(32,"div",21),j(),$(33,"div",12)(34,"h1",4),Q(35,"Pingeld meg"),j(),$(36,"p",13),Q(37,"Helyezz egy SafeCardot a t\xE1rc\xE1dba, hogy k\xF6nnyebben megtal\xE1ld, ha elvesz\xEDten\xE9d. A Lok\xE1tor app T\xE1rgyak lapj\xE1r\xF3l hangot j\xE1tszhatsz le a SafeCard be\xE9p\xEDtett hangsz\xF3r\xF3j\xE1n kereszt\xFCl."),j()(),Me(38,"div",22),j()()(),$(39,"div",9)(40,"div",10)(41,"div",11)(42,"div",12)(43,"h1",4),Q(44,"Kicsi \xE9s k\xF6nny\u0171"),j(),$(45,"p",13),Q(46,"Kialak\xEDt\xE1sa teljesen megegyezik egy bankk\xE1rtya m\xE9reteivel, \xEDgy egyszer\u0171en elhelyezheted p\xE9nzt\xE1rc\xE1dban, k\xE1rtyatart\xF3dban vagy ak\xE1r kism\xE9ret\u0171 t\xE1sk\xE1dban is."),j()(),$(47,"div",14)(48,"div",23),Me(49,"img",24)(50,"img",25),j()()()()(),Me(51,"div",26),$(52,"div",9)(53,"div",10)(54,"div",11)(55,"div",14),Me(56,"img",27),j(),$(57,"div",12)(58,"h1",4),Q(59,"Ha elvesz\xEDten\xE9d"),j(),$(60,"p",13),Q(61,"A SafeCardot Elveszett m\xF3dba \xE1ll\xEDthat\xF3, \xEDgy a h\xE1l\xF3zat \xE9rtes\xEDt, ha megtal\xE1lj\xE1k. Be\xE1ll\xEDthatod, hogy a megtal\xE1l\xF3 NFC-s telefonnal l\xE1ssa az el\xE9rhet\u0151s\xE9geidet."),j()()()()(),$(62,"div",9)(63,"div",10)(64,"div",11)(65,"div",12)(66,"h1",4),Q(67,"Megoszthatod ismer\u0151seiddel"),j(),$(68,"p",13),Q(69,"Egy Safecardot ak\xE1r \xF6t emberrel is megoszthatsz, \xEDgy ha elhagyn\xE1d a telefonod csal\xE1dtagjaid vagy bar\xE1taid tov\xE1bbra is k\xF6vethetik a SafeCard \xFAtj\xE1t."),j()(),$(70,"div",14),Me(71,"img",28),j()()()()(),$(72,"div",29)(73,"div",9)(74,"div",10)(75,"div",11)(76,"div",12)(77,"h1",4),Q(78,"Tudod hol keresd"),j(),$(79,"p",13),Q(80,"Egy helyen tal\xE1lod az Apple eszk\xF6zeiddel a Lok\xE1tor App-ban, \xEDgy mindig pontosan tudhatod, hol van a p\xE9nzt\xE1rc\xE1d."),j()(),$(81,"div",14),Me(82,"img",28),j()()()(),$(83,"div",9)(84,"div",10)(85,"div",11)(86,"div",12)(87,"h1",4),Q(88,"Pingeld meg"),j(),$(89,"p",13),Q(90," Helyezz egy SafeCardot a t\xE1rc\xE1dba, hogy k\xF6nnyebben megtal\xE1ld, ha elvesz\xEDten\xE9d. A Lok\xE1tor app T\xE1rgyak lapj\xE1r\xF3l hangot j\xE1tszhatsz le a SafeCard be\xE9p\xEDtett hangsz\xF3r\xF3j\xE1n kereszt\xFCl. "),j()(),$(91,"div",30)(92,"div",31)(93,"video",18,0),Me(95,"source",19)(96,"img",20),j()()(),Me(97,"div",22),j()()(),$(98,"div",9)(99,"div",10)(100,"div",11)(101,"div",12)(102,"h1",4),Q(103,"Kicsi \xE9s k\xF6nny\u0171"),j(),$(104,"p",13),Q(105,"Kialak\xEDt\xE1sa teljesen megegyezik egy bankk\xE1rtya m\xE9reteivel, \xEDgy egyszer\u0171en elhelyezheted p\xE9nzt\xE1rc\xE1dban, k\xE1rtyatart\xF3dban vagy ak\xE1r kism\xE9ret\u0171 t\xE1sk\xE1dban is."),j()(),$(106,"div",14)(107,"div",23),Me(108,"img",24)(109,"img",25),j()()()()(),Me(110,"div",26),$(111,"div",9)(112,"div",10)(113,"div",11)(114,"div",12)(115,"h1",4),Q(116,"Ha elvesz\xEDten\xE9d"),j(),$(117,"p",13),Q(118,"A SafeCardot Elveszett m\xF3dba \xE1ll\xEDthat\xF3, \xEDgy a h\xE1l\xF3zat \xE9rtes\xEDt, ha megtal\xE1lj\xE1k. Be\xE1ll\xEDthatod, hogy a megtal\xE1l\xF3 NFC-s telefonnal l\xE1ssa az el\xE9rhet\u0151s\xE9geidet."),j()(),$(119,"div",14),Me(120,"img",27),j()()()(),$(121,"div",9)(122,"div",10)(123,"div",11)(124,"div",12)(125,"h1",4),Q(126,"Megoszthatod ismer\u0151seiddel"),j(),$(127,"p",13),Q(128,"Egy Safecardot ak\xE1r \xF6t emberrel is megoszthatsz, \xEDgy ha elhagyn\xE1d a telefonod csal\xE1dtagjaid vagy bar\xE1taid tov\xE1bbra is k\xF6vethetik a SafeCard \xFAtj\xE1t."),j()(),$(129,"div",14),Me(130,"img",28),j()()()()(),$(131,"div",32)(132,"div",33)(133,"h1"),Q(134,"\xDAtmutat\xF3 "),j(),$(135,"div",34)(136,"div",35)(137,"h3"),Q(138,"1. l\xE9p\xE9s"),j(),$(139,"p"),Q(140,"Nyisd meg a Lok\xE1tor-t \xE9s koppints a T\xE1rgyak-ra"),j(),Me(141,"img",36),j(),$(142,"div",37)(143,"h3"),Q(144,"2. l\xE9p\xE9s"),j(),$(145,"p"),Q(146,"Nyomj a T\xE1rgy Hozz\xE1ad\xE1sa gombra"),j(),Me(147,"img",38),j(),$(148,"div",37)(149,"h3"),Q(150,"3. l\xE9p\xE9s"),j(),$(151,"p"),Q(152,"Nyomd a SafeCardon tal\xE1lhat\xF3 gombot, m\xEDg hangjelz\xE9st nem ad"),j(),Me(153,"img",39),j(),$(154,"div",37)(155,"h3"),Q(156,"4. l\xE9p\xE9s"),j(),$(157,"p"),Q(158,'Nyomj az "Egy\xE9b t\xE1mogatott t\xE1rgyak"-ra \xE9s v\xE1laszd ki a SafeCardot'),j(),Me(159,"img",40),j(),$(160,"div",37)(161,"h3"),Q(162,"5. l\xE9p\xE9s"),j(),$(163,"p"),Q(164,"Sikeresen csatlakoztattad a SafeCardot"),j(),Me(165,"img",41),j()()(),$(166,"div",42)(167,"div",9)(168,"div",10)(169,"div",11)(170,"div",12)(171,"h1",4),Q(172,"SafeCard"),j(),$(173,"ul")(174,"li",43),Q(175,"2 \xE9ves akkuml\xE1tor id\u0151"),j(),$(176,"li",43),Q(177,"Apple Find My t\xE1mogat\xE1s"),j(),$(178,"li",43),Q(179,"Be\xE9p\xEDtett hangsz\xF3r\xF3"),j()(),$(180,"div",44),Me(181,"img",27),j(),$(182,"div",45)(183,"span",46),Q(184,"8.990 Ft"),j(),$(185,"button",47),hi("click",function(){return ji(r),Ui(i.buyButtonClick())}),Q(186),j()()(),$(187,"div",48),Me(188,"img",27),j()()()()(),$(189,"div",49)(190,"div",9)(191,"div",50)(192,"h1",4),Q(193,"SafeCard"),j(),$(194,"div",51),Me(195,"img",27),j(),$(196,"div",45)(197,"span",46),Q(198,"8.990 Ft"),j(),$(199,"button",47),hi("click",function(){return ji(r),Ui(i.buyButtonClick())}),Q(200),j()()()()()()()}t&2&&(fe(22),Ae("src","/assets/images/tutor5.png",Di),fe(9),Ae("src","/assets/images/ping_card_pic.png",Di),fe(18),Ae("src","/assets/images/trackcard.png",Di),fe(),Ae("src","/assets/images/creditcard.png",Di),fe(6),Ae("src","/assets/images/iphone_lokator.png",Di),fe(15),Ae("src","/assets/images/share_card.png",Di),fe(11),Ae("src","/assets/images/tutor5.png",Di),fe(14),Ae("src","/assets/images/ping_card_pic.png",Di),fe(12),Ae("src","/assets/images/trackcard.png",Di),fe(),Ae("src","/assets/images/creditcard.png",Di),fe(11),Ae("src","/assets/images/iphone_lokator.png",Di),fe(10),Ae("src","/assets/images/share_card.png",Di),fe(51),Ae("src","/assets/images/trackcard.png",Di),fe(5),fr(i.buyButton.text),fe(2),Ae("src","/assets/images/trackcard_rotate.png",Di),fe(7),Ae("src","/assets/images/trackcard.png",Di),fe(5),fr(i.buyButton.text))},styles:[".content[_ngcontent-%COMP%]{background-color:var(--white-grey);padding-top:4vw}.landing[_ngcontent-%COMP%]   .TrackCard[_ngcontent-%COMP%]{width:30%;display:block;margin:auto}.findmybadge[_ngcontent-%COMP%]{width:15%;display:block;margin:20px auto}.descript[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:5rem}.bold[_ngcontent-%COMP%]{font-weight:700}.title[_ngcontent-%COMP%]{background:-webkit-linear-gradient(45deg,#09009f,#00ff95 80%);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;font-family:VolteRounded-Bold;font-size:5rem}.header[_ngcontent-%COMP%]{text-align:center;padding-top:20px;padding-bottom:20vh}.card[_ngcontent-%COMP%]{background-color:#f5f5f7;border-radius:20px;width:80%;margin:30px auto;border-width:0;box-shadow:0 0 10px #0003;height:80vh;font-family:VolteRounded-Bold;overflow:hidden;font-size:20px;font-style:normal;display:flex;position:sticky;top:10%;gap:100px}.card[_ngcontent-%COMP%]   .trackcard-card[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .creditcard-card[_ngcontent-%COMP%]{height:30vh;margin:auto auto auto 60px}.small-trigger[_ngcontent-%COMP%]{height:10vh}.card[_ngcontent-%COMP%]   .creditcard-card[_ngcontent-%COMP%]{z-index:100}.card[_ngcontent-%COMP%]   .trackcard-card[_ngcontent-%COMP%]{z-index:0}.card_container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding:30px 30px 0}.card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-top:10px;padding-left:30px;font-weight:100;font-size:2rem;color:#000}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100vh}.card1pic[_ngcontent-%COMP%]{height:100vh;margin:12% auto auto}.card5pic[_ngcontent-%COMP%]{height:100vh;margin:1% auto auto}.card1[_ngcontent-%COMP%]{width:20%;display:block}.card2[_ngcontent-%COMP%]{width:50%;display:block}.card-text-dark[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000}.animationcont[_ngcontent-%COMP%]{margin-top:50px}.video-container[_ngcontent-%COMP%]{width:100%;height:30vh;overflow:hidden}.trigger-video[_ngcontent-%COMP%]{padding:0;margin-bottom:70px;margin-left:170px}video[_ngcontent-%COMP%]{width:45vh}.bottom_section[_ngcontent-%COMP%]{background:-webkit-linear-gradient(45deg,#09009f,#00ff95 80%);background:linear-gradient(45deg,#09009f,#00ff95 80%);-webkit-background-clip:border-box;background-clip:border-box;font-family:VolteRounded-bold;border-radius:30px 30px 0 0}.guide_section[_ngcontent-%COMP%]{background-color:#262626;height:23%;border-radius:20px}.guide[_ngcontent-%COMP%]{margin-right:280px}.guide[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{height:80px}.guide_section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding:80px 80px 0;color:#fff;font-size:5rem;font-family:VolteRounded-Bold}.guide_section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:60vh;margin:auto}.guide_section[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;overflow-x:auto;scrollbar-width:thin;padding-bottom:40px;margin:auto;color:#fff;text-align:center;border-radius:20px}.guide_section[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%]   .guide[_ngcontent-%COMP%]{display:flex;flex:3;flex-direction:column;margin:0;padding:5px;min-width:270px;gap:0}.buy[_ngcontent-%COMP%]{margin:0 auto;width:80%;padding-top:10px;padding-bottom:30px}.buy[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#000;font-size:2rem;font-family:VolteRounded-Bold;margin-left:25px}.buy[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:65%;height:auto}.buy[_ngcontent-%COMP%]   .card2[_ngcontent-%COMP%]{width:100%;display:block;margin-top:50px;margin-left:50px}.buy[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#000}.buy[_ngcontent-%COMP%]   .card1[_ngcontent-%COMP%]{width:100%;display:block;margin-top:50px;margin-left:50px;margin-right:100px}.buy[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:30px;width:200px;height:70px;font-size:2rem;display:block}.price[_ngcontent-%COMP%]{display:inline-block;margin-left:30px;font-size:2rem}.price-button[_ngcontent-%COMP%]{display:inline-block;margin-top:90px}.mobile-only[_ngcontent-%COMP%]{display:none}.desktop-only[_ngcontent-%COMP%]{display:block}.card1[_ngcontent-%COMP%], .card2[_ngcontent-%COMP%]{width:50%;display:block}.trackcard-buy[_ngcontent-%COMP%]{display:none}@media screen and (max-width: 1000px){.landing[_ngcontent-%COMP%]{margin-top:4rem}.findmybadge[_ngcontent-%COMP%]{width:50%;display:block;margin:20px auto}.desktop-only[_ngcontent-%COMP%]{display:none;z-index:-1}.mobile-only[_ngcontent-%COMP%]{display:block}.content[_ngcontent-%COMP%]{padding-top:12vw}.landing[_ngcontent-%COMP%]   .TrackCard[_ngcontent-%COMP%]{width:50%;display:block;margin:auto}.landing[_ngcontent-%COMP%]   .findmybadge[_ngcontent-%COMP%]{width:30%;display:block;margin:20px auto}.descript[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:3rem}.header[_ngcontent-%COMP%]{margin-bottom:40px}.guide_section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3rem;padding-top:90px;padding-left:40px}.guide_section[_ngcontent-%COMP%]{height:115vh}.guide_section[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%]{height:90vh}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:40vh;margin:15% auto auto}.card[_ngcontent-%COMP%]{text-align:center;height:87vh;width:92%}.card1[_ngcontent-%COMP%]{display:block;width:100%;height:20%}.card1[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding-bottom:0;font-size:2.5rem}.card1[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-bottom:0;font-size:1rem}.card2[_ngcontent-%COMP%]{width:100%;display:block;margin:0 auto}.card[_ngcontent-%COMP%]   .trackcard-card[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .creditcard-card[_ngcontent-%COMP%]{height:20vh;margin:auto;padding-bottom:30px}.card1pic[_ngcontent-%COMP%]{width:10%;height:auto;width:50%;display:block;margin-top:50px;margin-left:50px}.animationcont[_ngcontent-%COMP%]{margin-top:50px}.video-container[_ngcontent-%COMP%]{width:30%;overflow:hidden}.trigger-video[_ngcontent-%COMP%]{padding:0;margin-bottom:20px}video[_ngcontent-%COMP%]{width:20vh}.buy[_ngcontent-%COMP%]{margin:0 auto;width:96%;padding-top:20px;padding-bottom:30px}.buy[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:fit-content}.buy[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#000;font-size:2rem;font-family:VolteRounded-Bold;margin-left:25px}.buy[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:65%;height:auto}.buy[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#000;font-size:3rem}.buy[_ngcontent-%COMP%]   .card1[_ngcontent-%COMP%]{width:100%;display:block;margin-top:50px;margin-left:50px;margin-right:100px}.trackcard-buy[_ngcontent-%COMP%]{display:block;margin:0 auto}.buy[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 auto;width:200px;height:70px;font-size:2rem;display:block;border-radius:40px}.price[_ngcontent-%COMP%]{display:inline-block;margin:0 auto;font-size:2rem}.price-button[_ngcontent-%COMP%]{display:inline-block;margin-top:90px;padding-bottom:30px}}"]})};var BY="firebase",jY="10.14.1";ws(BY,jY,"app");var hl=new $o("ANGULARFIRE2_VERSION");var UY=(n,e)=>{let t=e?[e]:wN(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},ha=class{constructor(){return UY($Y)}},$Y="app-check";function lT(){}var yv=class{zone;delegate;constructor(e,t=AE){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let r=this.zone,s=function(o){r.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,i)}},cT=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",lT,{},lT,lT)),t.pipe(fn({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Xd=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new yv(Zone.current)),this.insideAngular=t.run(()=>new yv(Zone.current,Na)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(z(Fe))};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function HY(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function En(n){return zY(HY())(n)}function zY(n){return function(t){return t=t.lift(new cT(n.ngZone)),t.pipe(Es(n.outsideAngular),Wr(n.insideAngular))}}var GY=new Map,WY={activated:!1,tokenObservers:[]},qY={initialized:!1,enabled:!1};function Os(n){return GY.get(n)||Object.assign({},WY)}function YV(){return qY}var KY="https://content-firebaseappcheck.googleapis.com/v1";var QY="exchangeDebugToken",zV={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},qfe=24*60*60*1e3;var hT=class{constructor(e,t,i,r,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return L(this,null,function*(){this.stop();try{this.pending=new Yn,this.pending.promise.catch(t=>{}),yield YY(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Yn,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function YY(n){return new Promise(e=>{setTimeout(e,n)})}var JY={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},fl=new pN("appCheck","AppCheck",JY);function JV(n){if(!Os(n).activated)throw fl.create("use-before-activation",{appName:n.name})}function ZV(i,r){return L(this,arguments,function*({url:n,body:e},t){let s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){let p=yield o.getHeartbeatsHeader();p&&(s["X-Firebase-Client"]=p)}let a={method:"POST",body:JSON.stringify(e),headers:s},l;try{l=yield fetch(n,a)}catch(p){throw fl.create("fetch-network-error",{originalErrorMessage:p?.message})}if(l.status!==200)throw fl.create("fetch-status-error",{httpStatus:l.status});let c;try{c=yield l.json()}catch(p){throw fl.create("fetch-parse-error",{originalErrorMessage:p?.message})}let d=c.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw fl.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});let h=Number(d[1])*1e3,f=Date.now();return{token:c.token,expireTimeMillis:f+h,issuedAtTimeMillis:f}})}function XV(n,e){let{projectId:t,appId:i,apiKey:r}=n.options;return{url:`${KY}/projects/${t}/apps/${i}:${QY}?key=${r}`,body:{debug_token:e}}}var ZY="firebase-app-check-database",XY=1,fT="firebase-app-check-store";var vv=null;function eJ(){return vv||(vv=new Promise((n,e)=>{try{let t=indexedDB.open(ZY,XY);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e(fl.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},t.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(fT,{keyPath:"compositeKey"})}}}catch(t){e(fl.create("storage-open",{originalErrorMessage:t?.message}))}}),vv)}function tJ(n,e){return nJ(iJ(n),e)}function nJ(n,e){return L(this,null,function*(){let i=(yield eJ()).transaction(fT,"readwrite"),s=i.objectStore(fT).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=l=>{o()},i.onerror=l=>{var c;a(fl.create("storage-set",{originalErrorMessage:(c=l.target.error)===null||c===void 0?void 0:c.message}))}})})}function iJ(n){return`${n.options.appId}-${n.name}`}var pT=new Ra("@firebase/app-check");function dT(n,e){return qm()?tJ(n,e).catch(t=>{pT.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function eB(){return YV().enabled}function tB(){return L(this,null,function*(){let n=YV();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var rJ={error:"UNKNOWN_ERROR"};function sJ(n){return Gm.encodeString(JSON.stringify(n),!1)}function gT(n,e=!1){return L(this,null,function*(){let t=n.app;JV(t);let i=Os(t),r=i.token,s;if(r&&!tg(r)&&(i.token=void 0,r=void 0),!r){let l=yield i.cachedTokenPromise;l&&(tg(l)?r=l:yield dT(t,void 0))}if(!e&&r&&tg(r))return{token:r.token};let o=!1;if(eB()){i.exchangeTokenPromise||(i.exchangeTokenPromise=ZV(XV(t,yield tB()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),o=!0);let l=yield i.exchangeTokenPromise;return yield dT(t,l),i.token=l,{token:l.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),o=!0),r=yield Os(t).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?pT.warn(l.message):pT.error(l),s=l}let a;return r?s?tg(r)?a={token:r.token,internalError:s}:a=WV(s):(a={token:r.token},i.token=r,yield dT(t,r)):a=WV(s),o&&cJ(t,a),a})}function oJ(n){return L(this,null,function*(){let e=n.app;JV(e);let{provider:t}=Os(e);if(eB()){let i=yield tB(),{token:r}=yield ZV(XV(e,i),n.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield t.getToken();return{token:i}}})}function aJ(n,e,t,i){let{app:r}=n,s=Os(r),o={next:t,error:i,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&tg(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),GV(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>GV(n))}function nB(n,e){let t=Os(n),i=t.tokenObservers.filter(r=>r.next!==e);i.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function GV(n){let{app:e}=n,t=Os(e),i=t.tokenRefresher;i||(i=lJ(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function lJ(n){let{app:e}=n;return new hT(()=>L(this,null,function*(){let t=Os(e),i;if(t.token?i=yield gT(n,!0):i=yield gT(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let t=Os(e);if(t.token){let i=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,r=t.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},zV.RETRIAL_MIN_WAIT,zV.RETRIAL_MAX_WAIT)}function cJ(n,e){let t=Os(n).tokenObservers;for(let i of t)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function tg(n){return n.expireTimeMillis-Date.now()>0}function WV(n){return{token:sJ(rJ),error:n}}var mT=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Os(this.app);for(let t of e)nB(this.app,t.next);return Promise.resolve()}};function uJ(n,e){return new mT(n,e)}function dJ(n){return{getToken:e=>gT(n,e),getLimitedUseToken:()=>oJ(n),addTokenListener:e=>aJ(n,"INTERNAL",e),removeTokenListener:e=>nB(n.app,e)}}var hJ="@firebase/app-check",fJ="0.8.8";var pJ="app-check",qV="app-check-internal";function gJ(){Jl(new Dr(pJ,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return uJ(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(qV).initialize()})),Jl(new Dr(qV,n=>{let e=n.getProvider("app-check").getImmediate();return dJ(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ws(hJ,fJ)}gJ();var mJ=["localhost","0.0.0.0","127.0.0.1"],spe=typeof window<"u"&&mJ.includes(window.location.hostname);var _J="firebase",yJ="10.14.1";Jn.registerVersion(_J,yJ,"app-compat");var vJ=["ngOnDestroy"],rB=(n,e,t,i={})=>new Proxy(n,{get:(r,s)=>t.runOutsideAngular(()=>{if(n[s])return i?.spy?.get&&i.spy.get(s,n[s]),n[s];if(vJ.indexOf(s)>-1)return()=>{};let o=e.toPromise().then(a=>{let l=a?.[s];return typeof l=="function"?l.bind(a):l?.then?l.then(c=>t.run(()=>c)):t.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>o[l],apply:(a,l,c)=>o.then(d=>{let h=d?.(...c);return i?.spy?.apply&&i.spy.apply(s,c,h),h})})})});var wv=class{constructor(e){return e}},pl=new J("angularfire2.app.options"),gl=new J("angularfire2.app.name");function zc(n,e,t){let i=typeof t=="string"&&t||"[DEFAULT]",r=typeof t=="object"&&t||{};r.name=r.name||i;let o=Jn.apps.filter(a=>a&&a.name===r.name)[0]||e.runOutsideAngular(()=>Jn.initializeApp(n,r));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){let a=!!module.hot;wJ("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new wv(o)}var wJ=(n,...e)=>{kC()&&typeof console<"u"&&console[n](...e)},bJ={provide:wv,useFactory:zc,deps:[pl,Fe,[new dd,gl]]},sB=(()=>{class n{static initializeApp(t,i){return{ngModule:n,providers:[{provide:pl,useValue:t},{provide:gl,useValue:i}]}}constructor(t){Jn.registerVersion("angularfire",hl.full,"core"),Jn.registerVersion("angularfire",hl.full,"app-compat"),Jn.registerVersion("angular",sF.full,t.toString())}static \u0275fac=function(i){return new(i||n)(z($n))};static \u0275mod=Oe({type:n});static \u0275inj=Ne({providers:[bJ]})}return n})();function eh(n,e,t,i,r){let[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return EJ(r,o)||(iB("error",`${e} was already initialized on the ${t} Firebase App with different settings.${CJ?" You may need to reload as Firebase is not HMR aware.":""}`),iB("warn",{is:r,was:o})),s;{let a=i();return globalThis.\u0275AngularfireInstanceCache.push([n,a,r]),a}}function EJ(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var CJ=typeof module<"u"&&!!module.hot,iB=(n,...e)=>{kC()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var ng=new J("angularfire2.auth.use-emulator"),ig=new J("angularfire2.auth.settings"),rg=new J("angularfire2.auth.tenant-id"),sg=new J("angularfire2.auth.langugage-code"),og=new J("angularfire2.auth.use-device-language"),ag=new J("angularfire.auth.persistence"),lg=(n,e,t,i,r,s,o,a)=>eh(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let l=e.runOutsideAngular(()=>n.auth());if(t&&l.useEmulator(...t),i&&(l.tenantId=i),l.languageCode=r,s&&l.useDeviceLanguage(),o)for(let[c,d]of Object.entries(o))l.settings[c]=d;return a&&l.setPersistence(a),l},[t,i,r,s,o,a]),bv=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,i,r,s,o,a,l,c,d,h,f,p){let y=new yt,_=se(void 0).pipe(Wr(o.outsideAngular),xt(()=>s.runOutsideAngular(()=>import("./chunk-IUXD6GHS.js"))),ne(()=>zc(t,s,i)),ne(w=>lg(w,s,a,c,d,h,l,f)),A_({bufferSize:1,refCount:!1}));if(Qa(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=se(null);else{_.pipe(Kr()).subscribe();let w=_.pipe(xt(M=>M.getRedirectResult().then(R=>R,()=>null)),En,A_({bufferSize:1,refCount:!1})),A=_.pipe(xt(M=>new ge(R=>({unsubscribe:s.runOutsideAngular(()=>M.onAuthStateChanged(P=>R.next(P),P=>R.error(P),()=>R.complete()))})))),x=_.pipe(xt(M=>new ge(R=>({unsubscribe:s.runOutsideAngular(()=>M.onIdTokenChanged(P=>R.next(P),P=>R.error(P),()=>R.complete()))}))));this.authState=w.pipe(M_(A),Es(o.outsideAngular),Wr(o.insideAngular)),this.user=w.pipe(M_(x),Es(o.outsideAngular),Wr(o.insideAngular)),this.idToken=this.user.pipe(xt(M=>M?at(M.getIdToken()):se(null))),this.idTokenResult=this.user.pipe(xt(M=>M?at(M.getIdTokenResult()):se(null))),this.credential=nc(w,y,this.authState.pipe(Kt(M=>!M))).pipe(ne(M=>M?.user?M:null),Es(o.outsideAngular),Wr(o.insideAngular))}return rB(this,_,s,{spy:{apply:(w,A,x)=>{(w.startsWith("signIn")||w.startsWith("createUser"))&&x.then(M=>y.next(M))}}})}static \u0275fac=function(i){return new(i||n)(z(pl),z(gl,8),z($n),z(Fe),z(Xd),z(ng,8),z(ig,8),z(rg,8),z(sg,8),z(og,8),z(ag,8),z(ha,8))};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var aB="@firebase/database",lB="1.0.8";var MS="";function xS(n){MS=n}var IT=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),xn(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Km(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var TT=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return zr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var BB=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new IT(e)}}catch{}return new TT},Wc=BB("localStorage"),ST=BB("sessionStorage");var rh=new Ra("@firebase/database"),jB=function(){let n=1;return function(){return n++}}(),UB=function(n){let e=vN(n),t=new yN;t.update(e);let i=t.digest();return Gm.encodeByteArray(i)},Ng=function(...n){let e="";for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Ng.apply(null,i):typeof i=="object"?e+=xn(i):e+=i,e+=" "}return e},qc=null,cB=!0,$B=function(n,e){K(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(rh.logLevel=Gr.VERBOSE,qc=rh.log.bind(rh),e&&ST.set("logging_enabled",!0)):typeof n=="function"?qc=n:(qc=null,ST.remove("logging_enabled"))},si=function(...n){if(cB===!0&&(cB=!1,qc===null&&ST.get("logging_enabled")===!0&&$B(!0)),qc){let e=Ng.apply(null,n);qc(e)}},Og=function(n){return function(...e){si(n,...e)}},AT=function(...n){let e="FIREBASE INTERNAL ERROR: "+Ng(...n);rh.error(e)},po=function(...n){let e=`FIREBASE FATAL ERROR: ${Ng(...n)}`;throw rh.error(e),new Error(e)},Ri=function(...n){let e="FIREBASE WARNING: "+Ng(...n);rh.warn(e)},IJ=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ri("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Qv=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},TJ=function(n){if(Ks()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},vl="[MIN_NAME]",fa="[MAX_NAME]",Qc=function(n,e){if(n===e)return 0;if(n===vl||e===fa)return-1;if(e===vl||n===fa)return 1;{let t=uB(n),i=uB(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},SJ=function(n,e){return n===e?0:n<e?-1:1},cg=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+xn(e))},RS=function(n){if(typeof n!="object"||n===null)return xn(n);let e=[];for(let i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=xn(e[i]),t+=":",t+=RS(n[e[i]]);return t+="}",t},HB=function(n,e){let t=n.length;if(t<=e)return[n];let i=[];for(let r=0;r<t;r+=e)r+e>t?i.push(n.substring(r,t)):i.push(n.substring(r,r+e));return i};function oi(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var zB=function(n){K(!Qv(n),"Invalid JSON number");let e=11,t=52,i=(1<<e-1)-1,r,s,o,a,l;n===0?(s=0,o=0,r=1/n===-1/0?1:0):(r=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=a+i,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(s=0,o=Math.round(n/Math.pow(2,1-i-t))));let c=[];for(l=t;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(r?1:0),c.reverse();let d=c.join(""),h="";for(l=0;l<64;l+=8){let f=parseInt(d.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),h=h+f}return h.toLowerCase()},AJ=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},MJ=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function xJ(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");let i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}var RJ=new RegExp("^-?(0*)\\d{1,10}$"),NJ=-2147483648,OJ=2147483647,uB=function(n){if(RJ.test(n)){let e=Number(n);if(e>=NJ&&e<=OJ)return e}return null},fh=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw Ri("Exception was thrown by user callback.",t),e},Math.floor(0))}},PJ=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},fg=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var MT=class{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Ri(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var xT=class{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(si("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ri(e)}},pg=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),Cv="5",GB="v",WB="s",qB="r",KB="f",QB=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,YB="ls",JB="p",RT="ac",ZB="websocket",XB="long_polling";var Dv=class{constructor(e,t,i,r,s=!1,o="",a=!1,l=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Wc.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Wc.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function kJ(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function ej(n,e,t){K(typeof e=="string","typeof type must == string"),K(typeof t=="object","typeof params must == object");let i;if(e===ZB)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===XB)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);kJ(n)&&(t.ns=n.namespace);let r=[];return oi(t,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}var NT=class{constructor(){this.counters_={}}incrementCounter(e,t=1){zr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return dN(this.counters_)}};var yT={},vT={};function NS(n){let e=n.toString();return yT[e]||(yT[e]=new NT),yT[e]}function FJ(n,e){let t=n.toString();return vT[t]||(vT[t]=e()),vT[t]}var OT=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&fh(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var dB="start",LJ="close",VJ="pLPCommand",BJ="pRTLPCB",tj="id",nj="pw",ij="ser",jJ="cb",UJ="seg",$J="ts",HJ="d",zJ="dframe",rj=1870,sj=30,GJ=rj-sj,WJ=25e3,qJ=3e4,yg=class n{constructor(e,t,i,r,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Og(e),this.stats_=NS(t),this.urlFn=l=>(this.appCheckToken&&(l[RT]=this.appCheckToken),ej(t,XB,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new OT(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(qJ)),TJ(()=>{if(this.isClosed_)return;this.scriptTagHolder=new PT((...s)=>{let[o,a,l,c,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===dB)this.id=a,this.password=l;else if(o===LJ)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let i={};i[dB]="t",i[ij]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[jJ]=this.scriptTagHolder.uniqueCallbackIdentifier),i[GB]=Cv,this.transportSessionId&&(i[WB]=this.transportSessionId),this.lastSessionId&&(i[YB]=this.lastSessionId),this.applicationId&&(i[JB]=this.applicationId),this.appCheckToken&&(i[RT]=this.appCheckToken),typeof location<"u"&&location.hostname&&QB.test(location.hostname)&&(i[qB]=KB);let r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return Ks()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!AJ()&&!MJ()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=xn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let i=uN(t),r=HB(i,GJ);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Ks())return;this.myDisconnFrame=document.createElement("iframe");let i={};i[zJ]="t",i[tj]=e,i[nj]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=xn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},PT=class n{constructor(e,t,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Ks())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=jB(),window[VJ+this.uniqueCallbackIdentifier]=e,window[BJ+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){si("frame writing exception"),a.stack&&si(a.stack),si(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||si("No IE domain setting required")}catch{let i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[tj]=this.myID,e[nj]=this.myPW,e[ij]=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+sj+i.length<=rj;){let o=this.pendingSegs.shift();i=i+"&"+UJ+r+"="+o.seg+"&"+$J+r+"="+o.ts+"&"+HJ+r+"="+o.d,r++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(WJ)),s=()=>{clearTimeout(r),i()};this.addTag(e,s)}addTag(e,t){Ks()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){let r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{si("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}};var KJ=16384,QJ=45e3,Iv=null;typeof MozWebSocket<"u"?Iv=MozWebSocket:typeof WebSocket<"u"&&(Iv=WebSocket);var nh=(()=>{class n{constructor(t,i,r,s,o,a,l){this.connId=t,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Og(this.connId),this.stats_=NS(i),this.connURL=n.connectionURL_(i,a,l,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,s,o){let a={};return a[GB]=Cv,!Ks()&&typeof location<"u"&&location.hostname&&QB.test(location.hostname)&&(a[qB]=KB),i&&(a[WB]=i),r&&(a[YB]=r),s&&(a[RT]=s),o&&(a[JB]=o),ej(t,ZB,a)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Wc.set("previous_websocket_failure",!0);try{let r;if(Ks()){let s=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":`Firebase/${Cv}/${MS}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(r.proxy={origin:a})}this.mySock=new Iv(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let i=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(i);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&Iv!==null&&!n.forceDisallow_}static previouslyFailed(){return Wc.isInMemoryStorage||Wc.get("previous_websocket_failure")===!0}markConnectionHealthy(){Wc.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let i=this.frames.join("");this.frames=null;let r=Km(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(K(this.frames===null,"We already have a frame buffer"),t.length<=6){let i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{let r=this.extractFrameCount_(i);r!==null&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();let i=xn(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);let r=HB(i,KJ);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(QJ))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),oj=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[yg,nh]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){let i=nh&&nh.isAvailable(),r=i&&!nh.previouslyFailed();if(t.webSocketOnly&&(i||Ri("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[nh];else{let s=this.transports_=[];for(let o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),YJ=6e4,JJ=5e3,ZJ=10*1024,XJ=100*1024,wT="t",hB="d",eZ="s",fB="r",tZ="e",pB="o",gB="a",mB="n",_B="p",nZ="h",kT=class{constructor(e,t,i,r,s,o,a,l,c,d){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Og("c:"+this.id+":"),this.transportManager_=new oj(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));let r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=fg(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>XJ?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>ZJ?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(wT in e){let t=e[wT];t===gB?this.upgradeIfSecondaryHealthy_():t===fB?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===pB&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=cg("t",e),i=cg("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:_B,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:gB,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:mB,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=cg("t",e),i=cg("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=cg(wT,e);if(hB in e){let i=e[hB];if(t===nZ){let r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(t===mB){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===eZ?this.onConnectionShutdown_(i):t===fB?this.onReset_(i):t===tZ?AT("Server Error: "+i):t===pB?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):AT("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Cv!==i&&Ri("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),fg(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(YJ))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):fg(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(JJ))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:_B,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Wc.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Tv=class{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}};var Sv=class{constructor(e){this.allowedEvents_=e,this.listeners_={},K(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});let r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);let r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!i||i===r[s].context)){r.splice(s,1);return}}validateEventType_(e){K(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var Av=class n extends Sv{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!oE()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new n}getInitialEvent(e){return K(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var yB=32,vB=768,Ct=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function Et(){return new Ct("")}function We(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function wl(n){return n.pieces_.length-n.pieceNum_}function Ft(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Ct(n.pieces_,e)}function OS(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function iZ(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function vg(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function aj(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Ct(e,0)}function Yt(n,e){let t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof Ct)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{let i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new Ct(t,0)}function qe(n){return n.pieceNum_>=n.pieces_.length}function Zi(n,e){let t=We(n),i=We(e);if(t===null)return e;if(t===i)return Zi(Ft(n),Ft(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function rZ(n,e){let t=vg(n,0),i=vg(e,0);for(let r=0;r<t.length&&r<i.length;r++){let s=Qc(t[r],i[r]);if(s!==0)return s}return t.length===i.length?0:t.length<i.length?-1:1}function PS(n,e){if(wl(n)!==wl(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function cs(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(wl(n)>wl(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}var FT=class{constructor(e,t){this.errorPrefix_=t,this.parts_=vg(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=bf(this.parts_[i]);lj(this)}};function sZ(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=bf(e),lj(n)}function oZ(n){let e=n.parts_.pop();n.byteLength_-=bf(e),n.parts_.length>0&&(n.byteLength_-=1)}function lj(n){if(n.byteLength_>vB)throw new Error(n.errorPrefix_+"has a key path longer than "+vB+" bytes ("+n.byteLength_+").");if(n.parts_.length>yB)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+yB+") or object contains a cycle "+Gc(n))}function Gc(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var LT=class n extends Sv{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new n}getInitialEvent(e){return K(e==="visible","Unknown event type: "+e),[this.visible_]}};var ug=1e3,aZ=60*5*1e3,wB=30*1e3,lZ=1.3,cZ=3e4,uZ="server_kill",bB=3,kS=(()=>{class n extends Tv{constructor(t,i,r,s,o,a,l,c){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=n.nextPersistentConnectionId_++,this.log_=Og("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ug,this.maxReconnectDelay_=aZ,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!Ks())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");LT.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Av.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){let s=++this.requestNumber_,o={r:s,a:t,b:i};this.log_(xn(o)),K(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(t){this.initConnection_();let i=new Yn,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let l=a.d;a.s==="ok"?i.resolve(l):i.reject(l)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),i.promise}listen(t,i,r,s){this.initConnection_();let o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),K(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),K(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let l={onComplete:s,hashFn:i,query:t,tag:r};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){let i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){let i=t.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);let o={p:r},a="q";t.tag&&(o.q=i._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(a,o,l=>{let c=l.d,d=l.s;n.warnOnListenWarnings_(c,i),(this.listens.get(r)&&this.listens.get(r).get(s))===t&&(this.log_("listen response",l),d!=="ok"&&this.removeListen_(r,s),t.onComplete&&t.onComplete(d,c))})}static warnOnListenWarnings_(t,i){if(t&&typeof t=="object"&&zr(t,"w")){let r=xa(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){let s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();Ri(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||mN(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=wB)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,i=gN(t)?"auth":"gauth",r={cred:t};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{let o=s.s,a=s.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let i=t.s,r=t.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){let r=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),K(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,t._queryObject,i)}sendUnlisten_(t,i,r,s){this.log_("Unlisten on "+t+" for "+i);let o={p:t},a="n";s&&(o.q=r,o.t=s),this.sendRequest(a,o)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,s){let o={p:i,d:r};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,i,r,s){this.putInternal("p",t,i,r,s)}merge(t,i,r,s){this.putInternal("m",t,i,r,s)}putInternal(t,i,r,s,o){this.initConnection_();let a={p:i,d:r};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++;let l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+i)}sendPut_(t){let i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){let i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{if(r.s!=="ok"){let o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+xn(t));let i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),t==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):t==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):t==="c"?this.onListenRevoked_(i.p,i.q):t==="ac"?this.onAuthRevoked_(i.s,i.d):t==="apc"?this.onAppCheckRevoked_(i.s,i.d):t==="sd"?this.onSecurityDebugPacket_(i):AT("Unrecognized action received from server: "+xn(t)+`
Are you using the latest client?`)}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){K(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ug,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=ug,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>cZ&&(this.reconnectDelay_=ug),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*lZ)}this.onConnectStatus_(!1)}establishConnection_(){return L(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,a=!1,l=null,c=function(){l?l.close():(a=!0,r())},d=function(f){K(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(f)};this.realtime_={close:c,sendRequest:d};let h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,p]=yield Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);a?si("getToken() completed but was canceled"):(si("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=p&&p.token,l=new kT(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,i,r,y=>{Ri(y+" ("+this.repoInfo_.toString()+")"),this.interrupt(uZ)},o))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&Ri(f),c())}}})}interrupt(t){si("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){si("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Qm(this.interruptReasons_)&&(this.reconnectDelay_=ug,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let i=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;i?r=i.map(o=>RS(o)).join("$"):r="default";let s=this.removeListen_(t,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,i){let r=new Ct(t).toString(),s;if(this.listens.has(r)){let o=this.listens.get(r);s=o.get(i),o.delete(i),o.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(t,i){si("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=bB&&(this.reconnectDelay_=wB,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){si("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=bB&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},i="js";Ks()&&(this.repoInfo_.nodeAdmin?i="admin_node":i="node"),t["sdk."+i+"."+MS.replace(/\./g,"-")]=1,oE()?t["framework.cordova"]=1:hN()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=Av.getInstance().currentlyOnline();return Qm(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),Xe=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var sh=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let i=new Xe(vl,e),r=new Xe(vl,t);return this.compare(i,r)!==0}minPost(){return Xe.MIN}};var Ev,Mv=class extends sh{static get __EMPTY_NODE(){return Ev}static set __EMPTY_NODE(e){Ev=e}compare(e,t){return Qc(e.name,t.name)}isDefinedOn(e){throw xu("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Xe.MIN}maxPost(){return new Xe(fa,Ev)}makePost(e,t){return K(typeof e=="string","KeyIndex indexValue must always be a string."),new Xe(e,Ev)}toString(){return".key"}},fo=new Mv;var ih=class{constructor(e,t,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?i(e.key,t):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Ps=(()=>{class n{constructor(t,i,r,s,o){this.key=t,this.value=i,this.color=r??n.RED,this.left=s??us.EMPTY_NODE,this.right=o??us.EMPTY_NODE}copy(t,i,r,s,o){return new n(t??this.key,i??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let s=this,o=r(t,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(t,i,r),null):o===0?s=s.copy(null,i,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return us.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,s;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),i(t,r.key)===0){if(r.right.isEmpty())return us.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),VT=class{copy(e,t,i,r,s){return this}insert(e,t,i){return new Ps(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},us=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ps.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ps.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ih(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new ih(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new ih(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new ih(this.root_,null,this.comparator_,!0,e)}};us.EMPTY_NODE=new VT;function dZ(n,e){return Qc(n.name,e.name)}function FS(n,e){return Qc(n,e)}var BT;function hZ(n){BT=n}var cj=function(n){return typeof n=="number"?"number:"+zB(n):"string:"+n},uj=function(n){if(n.isLeafNode()){let e=n.val();K(typeof e=="string"||typeof e=="number"||typeof e=="object"&&zr(e,".sv"),"Priority must be a string or number.")}else K(n===BT||n.isEmpty(),"priority of unexpected type.");K(n===BT||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var EB,oh=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,K(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),uj(this.priorityNode_)}static set __childrenNodeConstructor(t){EB=t}static get __childrenNodeConstructor(){return EB}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return qe(t)?this:We(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return t===".priority"?this.updatePriority(i):i.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){let r=We(t);return r===null?i:i.isEmpty()&&r!==".priority"?this:(K(r!==".priority"||wl(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ft(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+cj(this.priorityNode_.val())+":");let i=typeof this.value_;t+=i+":",i==="number"?t+=zB(this.value_):t+=this.value_,this.lazyHash_=UB(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(K(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let i=typeof t.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),o=n.VALUE_TYPE_ORDER.indexOf(r);return K(s>=0,"Unknown leaf type: "+i),K(o>=0,"Unknown leaf type: "+r),s===o?r==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),dj,hj;function fZ(n){dj=n}function pZ(n){hj=n}var jT=class extends sh{compare(e,t){let i=e.node.getPriority(),r=t.node.getPriority(),s=i.compareTo(r);return s===0?Qc(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Xe.MIN}maxPost(){return new Xe(fa,new oh("[PRIORITY-POST]",hj))}makePost(e,t){let i=dj(e);return new Xe(t,new oh("[PRIORITY-POST]",i))}toString(){return".priority"}},jt=new jT;var gZ=Math.log(2),UT=class{constructor(e){let t=s=>parseInt(Math.log(s)/gZ,10),i=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},xv=function(n,e,t,i){n.sort(e);let r=function(l,c){let d=c-l,h,f;if(d===0)return null;if(d===1)return h=n[l],f=t?t(h):h,new Ps(f,h.node,Ps.BLACK,null,null);{let p=parseInt(d/2,10)+l,y=r(l,p),_=r(p+1,c);return h=n[p],f=t?t(h):h,new Ps(f,h.node,Ps.BLACK,y,_)}},s=function(l){let c=null,d=null,h=n.length,f=function(y,_){let w=h-y,A=h;h-=y;let x=r(w+1,A),M=n[w],R=t?t(M):M;p(new Ps(R,M.node,_,null,x))},p=function(y){c?(c.left=y,c=y):(d=y,c=y)};for(let y=0;y<l.count;++y){let _=l.nextBitIsOne(),w=Math.pow(2,l.count-(y+1));_?f(w,Ps.BLACK):(f(w,Ps.BLACK),f(w,Ps.RED))}return d},o=new UT(n.length),a=s(o);return new us(i||e,a)};var bT,th={},ah=class n{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return K(th&&jt,"ChildrenNode.ts has not been loaded"),bT=bT||new n({".priority":th},{".priority":jt}),bT}get(e){let t=xa(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof us?t:null}hasIndex(e){return zr(this.indexSet_,e.toString())}addIndex(e,t){K(e!==fo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let i=[],r=!1,s=t.getIterator(Xe.Wrap),o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),i.push(o),o=s.getNext();let a;r?a=xv(i,e.getCompare()):a=th;let l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;let d=Object.assign({},this.indexes_);return d[l]=a,new n(d,c)}addToIndexes(e,t){let i=wf(this.indexes_,(r,s)=>{let o=xa(this.indexSet_,s);if(K(o,"Missing index implementation for "+s),r===th)if(o.isDefinedOn(e.node)){let a=[],l=t.getIterator(Xe.Wrap),c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),xv(a,o.getCompare())}else return th;else{let a=t.get(e.name),l=r;return a&&(l=l.remove(new Xe(e.name,a))),l.insert(e,e.node)}});return new n(i,this.indexSet_)}removeFromIndexes(e,t){let i=wf(this.indexes_,r=>{if(r===th)return r;{let s=t.get(e.name);return s?r.remove(new Xe(e.name,s)):r}});return new n(i,this.indexSet_)}};var dg,Pe=(()=>{class n{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&uj(this.priorityNode_),this.children_.isEmpty()&&K(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return dg||(dg=new n(new us(FS),null,ah.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||dg}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let i=this.children_.get(t);return i===null?dg:i}}getChild(t){let i=We(t);return i===null?this:this.getImmediateChild(i).getChild(Ft(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,i){if(K(i,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(i);{let r=new Xe(t,i),s,o;i.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(t,i),o=this.indexMap_.addToIndexes(r,this.children_));let a=s.isEmpty()?dg:this.priorityNode_;return new n(s,a,o)}}updateChild(t,i){let r=We(t);if(r===null)return i;{K(We(t)!==".priority"||wl(t)===1,".priority must be the last token in a path");let s=this.getImmediateChild(r).updateChild(Ft(t),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let i={},r=0,s=0,o=!0;if(this.forEachChild(jt,(a,l)=>{i[a]=l.val(t),r++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*r){let a=[];for(let l in i)a[l]=i[l];return a}else return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+cj(this.getPriority().val())+":"),this.forEachChild(jt,(i,r)=>{let s=r.hash();s!==""&&(t+=":"+i+":"+s)}),this.lazyHash_=t===""?"":UB(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){let s=this.resolveIndex_(r);if(s){let o=s.getPredecessorKey(new Xe(t,i));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let i=this.resolveIndex_(t);if(i){let r=i.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(t){let i=this.getFirstChildName(t);return i?new Xe(i,this.children_.get(i)):null}getLastChildName(t){let i=this.resolveIndex_(t);if(i){let r=i.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(t){let i=this.getLastChildName(t);return i?new Xe(i,this.children_.get(i)):null}forEachChild(t,i){let r=this.resolveIndex_(t);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){let r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,s=>s);{let s=this.children_.getIteratorFrom(t.name,Xe.Wrap),o=s.peek();for(;o!=null&&i.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){let r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,s=>s);{let s=this.children_.getReverseIteratorFrom(t.name,Xe.Wrap),o=s.peek();for(;o!=null&&i.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Pg?-1:0}withIndex(t){if(t===fo||this.indexMap_.hasIndex(t))return this;{let i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===fo||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let i=t;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){let r=this.getIterator(jt),s=i.getIterator(jt),o=r.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=r.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===fo?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),$T=class extends Pe{constructor(){super(new us(FS),Pe.EMPTY_NODE,ah.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Pe.EMPTY_NODE}isEmpty(){return!1}},Pg=new $T;Object.defineProperties(Xe,{MIN:{value:new Xe(vl,Pe.EMPTY_NODE)},MAX:{value:new Xe(fa,Pg)}});Mv.__EMPTY_NODE=Pe.EMPTY_NODE;oh.__childrenNodeConstructor=Pe;hZ(Pg);pZ(Pg);var mZ=!0;function sn(n,e=null){if(n===null)return Pe.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),K(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new oh(t,sn(e))}if(!(n instanceof Array)&&mZ){let t=[],i=!1;if(oi(n,(o,a)=>{if(o.substring(0,1)!=="."){let l=sn(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),t.push(new Xe(o,l)))}}),t.length===0)return Pe.EMPTY_NODE;let s=xv(t,dZ,o=>o.name,FS);if(i){let o=xv(t,jt.getCompare());return new Pe(s,sn(e),new ah({".priority":o},{".priority":jt}))}else return new Pe(s,sn(e),ah.Default)}else{let t=Pe.EMPTY_NODE;return oi(n,(i,r)=>{if(zr(n,i)&&i.substring(0,1)!=="."){let s=sn(r);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(i,s))}}),t.updatePriority(sn(e))}}fZ(sn);var wg=class extends sh{constructor(e){super(),this.indexPath_=e,K(!qe(e)&&We(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let i=this.extractChild(e.node),r=this.extractChild(t.node),s=i.compareTo(r);return s===0?Qc(e.name,t.name):s}makePost(e,t){let i=sn(e),r=Pe.EMPTY_NODE.updateChild(this.indexPath_,i);return new Xe(t,r)}maxPost(){let e=Pe.EMPTY_NODE.updateChild(this.indexPath_,Pg);return new Xe(fa,e)}toString(){return vg(this.indexPath_,0).join("/")}};var HT=class extends sh{compare(e,t){let i=e.node.compareTo(t.node);return i===0?Qc(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Xe.MIN}maxPost(){return Xe.MAX}makePost(e,t){let i=sn(e);return new Xe(t,i)}toString(){return".value"}},LS=new HT;function fj(n){return{type:"value",snapshotNode:n}}function lh(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function bg(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Eg(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function _Z(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var Cg=class{constructor(e){this.index_=e}updateChild(e,t,i,r,s,o){K(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(t);return a.getChild(r).equals(i.getChild(r))&&a.isEmpty()===i.isEmpty()||(o!=null&&(i.isEmpty()?e.hasChild(t)?o.trackChildChange(bg(t,a)):K(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(lh(t,i)):o.trackChildChange(Eg(t,i,a))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return i!=null&&(e.isLeafNode()||e.forEachChild(jt,(r,s)=>{t.hasChild(r)||i.trackChildChange(bg(r,s))}),t.isLeafNode()||t.forEachChild(jt,(r,s)=>{if(e.hasChild(r)){let o=e.getImmediateChild(r);o.equals(s)||i.trackChildChange(Eg(r,s,o))}else i.trackChildChange(lh(r,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Pe.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Rv=class n{constructor(e){this.indexedFilter_=new Cg(e.getIndex()),this.index_=e.getIndex(),this.startPost_=n.getStartPost_(e),this.endPost_=n.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,r,s,o){return this.matches(new Xe(t,i))||(i=Pe.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,s,o)}updateFullNode(e,t,i){t.isLeafNode()&&(t=Pe.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(Pe.EMPTY_NODE);let s=this;return t.forEachChild(jt,(o,a)=>{s.matches(new Xe(o,a))||(r=r.updateImmediateChild(o,Pe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}};var zT=class{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{let i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{let i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Rv(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,r,s,o){return this.rangedFilter_.matches(new Xe(t,i))||(i=Pe.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,s,o):this.fullLimitUpdateChild_(e,t,i,s,o)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=Pe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){r=Pe.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))r=r.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{r=t.withIndex(this.index_),r=r.updatePriority(Pe.EMPTY_NODE);let s;this.reverse_?s=r.getReverseIterator(this.index_):s=r.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:r=r.updateImmediateChild(a.name,Pe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,s){let o;if(this.reverse_){let h=this.index_.getCompare();o=(f,p)=>h(p,f)}else o=this.index_.getCompare();let a=e;K(a.numChildren()===this.limit_,"");let l=new Xe(t,i),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(l);if(a.hasChild(t)){let h=a.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);for(;f!=null&&(f.name===t||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);let p=f==null?1:o(f,l);if(d&&!i.isEmpty()&&p>=0)return s?.trackChildChange(Eg(t,i,h)),a.updateImmediateChild(t,i);{s?.trackChildChange(bg(t,h));let _=a.updateImmediateChild(t,Pe.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(s?.trackChildChange(lh(f.name,f.node)),_.updateImmediateChild(f.name,f.node)):_}}else return i.isEmpty()?e:d&&o(c,l)>=0?(s!=null&&(s.trackChildChange(bg(c.name,c.node)),s.trackChildChange(lh(t,i))),a.updateImmediateChild(t,i).updateImmediateChild(c.name,Pe.EMPTY_NODE)):e}};var Dg=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=jt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return K(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return K(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:vl}hasEnd(){return this.endSet_}getIndexEndValue(){return K(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return K(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:fa}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return K(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===jt}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function yZ(n){return n.loadsAllData()?new Cg(n.getIndex()):n.hasLimit()?new zT(n):new Rv(n)}function vZ(n,e){let t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}function wZ(n,e){let t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}function GT(n,e,t){let i=n.copy();return i.startSet_=!0,e===void 0&&(e=null),i.indexStartValue_=e,t!=null?(i.startNameSet_=!0,i.indexStartName_=t):(i.startNameSet_=!1,i.indexStartName_=""),i}function bZ(n,e,t){let i;return n.index_===fo||t?i=GT(n,e,t):i=GT(n,e,fa),i.startAfterSet_=!0,i}function WT(n,e,t){let i=n.copy();return i.endSet_=!0,e===void 0&&(e=null),i.indexEndValue_=e,t!==void 0?(i.endNameSet_=!0,i.indexEndName_=t):(i.endNameSet_=!1,i.indexEndName_=""),i}function EZ(n,e,t){let i;return n.index_===fo||t?i=WT(n,e,t):i=WT(n,e,vl),i.endBeforeSet_=!0,i}function Yv(n,e){let t=n.copy();return t.index_=e,t}function CB(n){let e={};if(n.isDefault())return e;let t;if(n.index_===jt?t="$priority":n.index_===LS?t="$value":n.index_===fo?t="$key":(K(n.index_ instanceof wg,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=xn(t),n.startSet_){let i=n.startAfterSet_?"startAfter":"startAt";e[i]=xn(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+xn(n.indexStartName_))}if(n.endSet_){let i=n.endBeforeSet_?"endBefore":"endAt";e[i]=xn(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+xn(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function DB(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==jt&&(e.i=n.index_.toString()),e}var qT=class n extends Tv{constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=Og("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(K(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=n.getListenId_(e,i),a={};this.listens_[o]=a;let l=CB(e._queryParams);this.restRequest_(s+".json",l,(c,d)=>{let h=d;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(s,h,!1,i),xa(this.listens_,o)===a){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",r(f,null)}})}unlisten(e,t){let i=n.getListenId_(e,t);delete this.listens_[i]}get(e){let t=CB(e._queryParams),i=e._path.toString(),r=new Yn;return this.restRequest_(i+".json",t,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+_N(t);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Km(a.responseText)}catch{Ri("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else a.status!==401&&a.status!==404&&Ri("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}};var KT=class{constructor(){this.rootNode_=Pe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function Nv(){return{value:null,children:new Map}}function ph(n,e,t){if(qe(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let i=We(e);n.children.has(i)||n.children.set(i,Nv());let r=n.children.get(i);e=Ft(e),ph(r,e,t)}}function QT(n,e){if(qe(e))return n.value=null,n.children.clear(),!0;if(n.value!==null){if(n.value.isLeafNode())return!1;{let t=n.value;return n.value=null,t.forEachChild(jt,(i,r)=>{ph(n,new Ct(i),r)}),QT(n,e)}}else if(n.children.size>0){let t=We(e);return e=Ft(e),n.children.has(t)&&QT(n.children.get(t),e)&&n.children.delete(t),n.children.size===0}else return!0}function YT(n,e,t){n.value!==null?t(e,n.value):CZ(n,(i,r)=>{let s=new Ct(e.toString()+"/"+i);YT(r,s,t)})}function CZ(n,e){n.children.forEach((t,i)=>{e(i,t)})}var JT=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&oi(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}};var IB=10*1e3,DZ=30*1e3,IZ=5*60*1e3,ZT=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new JT(e);let i=IB+(DZ-IB)*Math.random();fg(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){let e=this.statsListener_.get(),t={},i=!1;oi(e,(r,s)=>{s>0&&zr(this.statsToReport_,r)&&(t[r]=s,i=!0)}),i&&this.server_.reportStats(t),fg(this.reportStats_.bind(this),Math.floor(Math.random()*2*IZ))}};var ho=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(ho||{});function VS(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function BS(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function jS(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var XT=class n{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=ho.ACK_USER_WRITE,this.source=VS()}operationForChild(e){if(qe(this.path)){if(this.affectedTree.value!=null)return K(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new Ct(e));return new n(Et(),t,this.revert)}}else return K(We(this.path)===e,"operationForChild called for unrelated child."),new n(Ft(this.path),this.affectedTree,this.revert)}};var Ov=class n{constructor(e,t){this.source=e,this.path=t,this.type=ho.LISTEN_COMPLETE}operationForChild(e){return qe(this.path)?new n(this.source,Et()):new n(this.source,Ft(this.path))}};var ch=class n{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=ho.OVERWRITE}operationForChild(e){return qe(this.path)?new n(this.source,Et(),this.snap.getImmediateChild(e)):new n(this.source,Ft(this.path),this.snap)}};var Ig=class n{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=ho.MERGE}operationForChild(e){if(qe(this.path)){let t=this.children.subtree(new Ct(e));return t.isEmpty()?null:t.value?new ch(this.source,Et(),t.value):new n(this.source,Et(),t)}else return K(We(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,Ft(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var go=class{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(qe(e))return this.isFullyInitialized()&&!this.filtered_;let t=We(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var eS=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function TZ(n,e,t,i){let r=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(_Z(o.childName,o.snapshotNode))}),hg(n,r,"child_removed",e,i,t),hg(n,r,"child_added",e,i,t),hg(n,r,"child_moved",s,i,t),hg(n,r,"child_changed",e,i,t),hg(n,r,"value",e,i,t),r}function hg(n,e,t,i,r,s){let o=i.filter(a=>a.type===t);o.sort((a,l)=>AZ(n,a,l)),o.forEach(a=>{let l=SZ(n,a,s);r.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function SZ(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function AZ(n,e,t){if(e.childName==null||t.childName==null)throw xu("Should only compare child_ events.");let i=new Xe(e.childName,e.snapshotNode),r=new Xe(t.childName,t.snapshotNode);return n.index_.compare(i,r)}function Jv(n,e){return{eventCache:n,serverCache:e}}function gg(n,e,t,i){return Jv(new go(e,t,i),n.serverCache)}function pj(n,e,t,i){return Jv(n.eventCache,new go(e,t,i))}function Pv(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Kc(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var ET,MZ=()=>(ET||(ET=new us(SJ)),ET),Xi=class n{constructor(e,t=MZ()){this.value=e,this.children=t}static fromObject(e){let t=new n(null);return oi(e,(i,r)=>{t=t.set(new Ct(i),r)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Et(),value:this.value};if(qe(e))return null;{let i=We(e),r=this.children.get(i);if(r!==null){let s=r.findRootMostMatchingPathAndValue(Ft(e),t);return s!=null?{path:Yt(new Ct(i),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(qe(e))return this;{let t=We(e),i=this.children.get(t);return i!==null?i.subtree(Ft(e)):new n(null)}}set(e,t){if(qe(e))return new n(t,this.children);{let i=We(e),s=(this.children.get(i)||new n(null)).set(Ft(e),t),o=this.children.insert(i,s);return new n(this.value,o)}}remove(e){if(qe(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=We(e),i=this.children.get(t);if(i){let r=i.remove(Ft(e)),s;return r.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,r),this.value===null&&s.isEmpty()?new n(null):new n(this.value,s)}else return this}}get(e){if(qe(e))return this.value;{let t=We(e),i=this.children.get(t);return i?i.get(Ft(e)):null}}setTree(e,t){if(qe(e))return t;{let i=We(e),s=(this.children.get(i)||new n(null)).setTree(Ft(e),t),o;return s.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,s),new n(this.value,o)}}fold(e){return this.fold_(Et(),e)}fold_(e,t){let i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(Yt(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,Et(),t)}findOnPath_(e,t,i){let r=this.value?i(t,this.value):!1;if(r)return r;if(qe(e))return null;{let s=We(e),o=this.children.get(s);return o?o.findOnPath_(Ft(e),Yt(t,s),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Et(),t)}foreachOnPath_(e,t,i){if(qe(e))return this;{this.value&&i(t,this.value);let r=We(e),s=this.children.get(r);return s?s.foreachOnPath_(Ft(e),Yt(t,r),i):new n(null)}}foreach(e){this.foreach_(Et(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(Yt(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}};var ks=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new Xi(null))}};function mg(n,e,t){if(qe(e))return new ks(new Xi(t));{let i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){let r=i.path,s=i.value,o=Zi(r,e);return s=s.updateChild(o,t),new ks(n.writeTree_.set(r,s))}else{let r=new Xi(t),s=n.writeTree_.setTree(e,r);return new ks(s)}}}function tS(n,e,t){let i=n;return oi(t,(r,s)=>{i=mg(i,Yt(e,r),s)}),i}function TB(n,e){if(qe(e))return ks.empty();{let t=n.writeTree_.setTree(e,new Xi(null));return new ks(t)}}function nS(n,e){return Yc(n,e)!=null}function Yc(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Zi(t.path,e)):null}function SB(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(jt,(i,r)=>{e.push(new Xe(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new Xe(i,r.value))}),e}function _l(n,e){if(qe(e))return n;{let t=Yc(n,e);return t!=null?new ks(new Xi(t)):new ks(n.writeTree_.subtree(e))}}function iS(n){return n.writeTree_.isEmpty()}function uh(n,e){return gj(Et(),n.writeTree_,e)}function gj(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{r===".priority"?(K(s.value!==null,"Priority writes must always be leaf nodes"),i=s.value):t=gj(Yt(n,r),s,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(Yt(n,".priority"),i)),t}}function Zv(n,e){return vj(e,n)}function xZ(n,e,t,i,r){K(i>n.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=mg(n.visibleWrites,e,t)),n.lastWriteId=i}function RZ(n,e,t,i){K(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=tS(n.visibleWrites,e,t),n.lastWriteId=i}function NZ(n,e){for(let t=0;t<n.allWrites.length;t++){let i=n.allWrites[t];if(i.writeId===e)return i}return null}function OZ(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);K(t>=0,"removeWrite called with nonexistent writeId.");let i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,s=!1,o=n.allWrites.length-1;for(;r&&o>=0;){let a=n.allWrites[o];a.visible&&(o>=t&&PZ(a,i.path)?r=!1:cs(i.path,a.path)&&(s=!0)),o--}if(r){if(s)return kZ(n),!0;if(i.snap)n.visibleWrites=TB(n.visibleWrites,i.path);else{let a=i.children;oi(a,l=>{n.visibleWrites=TB(n.visibleWrites,Yt(i.path,l))})}return!0}else return!1}function PZ(n,e){if(n.snap)return cs(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&cs(Yt(n.path,t),e))return!0;return!1}function kZ(n){n.visibleWrites=mj(n.allWrites,FZ,Et()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function FZ(n){return n.visible}function mj(n,e,t){let i=ks.empty();for(let r=0;r<n.length;++r){let s=n[r];if(e(s)){let o=s.path,a;if(s.snap)cs(t,o)?(a=Zi(t,o),i=mg(i,a,s.snap)):cs(o,t)&&(a=Zi(o,t),i=mg(i,Et(),s.snap.getChild(a)));else if(s.children){if(cs(t,o))a=Zi(t,o),i=tS(i,a,s.children);else if(cs(o,t))if(a=Zi(o,t),qe(a))i=tS(i,Et(),s.children);else{let l=xa(s.children,We(a));if(l){let c=l.getChild(Ft(a));i=mg(i,Et(),c)}}}else throw xu("WriteRecord should have .snap or .children")}}return i}function _j(n,e,t,i,r){if(!i&&!r){let s=Yc(n.visibleWrites,e);if(s!=null)return s;{let o=_l(n.visibleWrites,e);if(iS(o))return t;if(t==null&&!nS(o,Et()))return null;{let a=t||Pe.EMPTY_NODE;return uh(o,a)}}}else{let s=_l(n.visibleWrites,e);if(!r&&iS(s))return t;if(!r&&t==null&&!nS(s,Et()))return null;{let o=function(c){return(c.visible||r)&&(!i||!~i.indexOf(c.writeId))&&(cs(c.path,e)||cs(e,c.path))},a=mj(n.allWrites,o,e),l=t||Pe.EMPTY_NODE;return uh(a,l)}}}function LZ(n,e,t){let i=Pe.EMPTY_NODE,r=Yc(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(jt,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(t){let s=_l(n.visibleWrites,e);return t.forEachChild(jt,(o,a)=>{let l=uh(_l(s,new Ct(o)),a);i=i.updateImmediateChild(o,l)}),SB(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{let s=_l(n.visibleWrites,e);return SB(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function VZ(n,e,t,i,r){K(i||r,"Either existingEventSnap or existingServerSnap must exist");let s=Yt(e,t);if(nS(n.visibleWrites,s))return null;{let o=_l(n.visibleWrites,s);return iS(o)?r.getChild(t):uh(o,r.getChild(t))}}function BZ(n,e,t,i){let r=Yt(e,t),s=Yc(n.visibleWrites,r);if(s!=null)return s;if(i.isCompleteForChild(t)){let o=_l(n.visibleWrites,r);return uh(o,i.getNode().getImmediateChild(t))}else return null}function jZ(n,e){return Yc(n.visibleWrites,e)}function UZ(n,e,t,i,r,s,o){let a,l=_l(n.visibleWrites,e),c=Yc(l,Et());if(c!=null)a=c;else if(t!=null)a=uh(l,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let d=[],h=o.getCompare(),f=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o),p=f.getNext();for(;p&&d.length<r;)h(p,i)!==0&&d.push(p),p=f.getNext();return d}else return[]}function $Z(){return{visibleWrites:ks.empty(),allWrites:[],lastWriteId:-1}}function kv(n,e,t,i){return _j(n.writeTree,n.treePath,e,t,i)}function US(n,e){return LZ(n.writeTree,n.treePath,e)}function AB(n,e,t,i){return VZ(n.writeTree,n.treePath,e,t,i)}function Fv(n,e){return jZ(n.writeTree,Yt(n.treePath,e))}function HZ(n,e,t,i,r,s){return UZ(n.writeTree,n.treePath,e,t,i,r,s)}function $S(n,e,t){return BZ(n.writeTree,n.treePath,e,t)}function yj(n,e){return vj(Yt(n.treePath,e),n.writeTree)}function vj(n,e){return{treePath:n,writeTree:e}}var rS=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,i=e.childName;K(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),K(i!==".priority","Only non-priority child changes can be tracked.");let r=this.changeMap.get(i);if(r){let s=r.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(i,Eg(i,e.snapshotNode,r.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(i,bg(i,r.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(i,lh(i,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(i,Eg(i,e.snapshotNode,r.oldSnap));else throw xu("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}};var sS=class{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}},wj=new sS,Tg=class{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let i=this.optCompleteServerCache_!=null?new go(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return $S(this.writes_,e,i)}}getChildAfterChild(e,t,i){let r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Kc(this.viewCache_),s=HZ(this.writes_,r,t,1,i,e);return s.length===0?null:s[0]}};function zZ(n){return{filter:n}}function GZ(n,e){K(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),K(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function WZ(n,e,t,i,r){let s=new rS,o,a;if(t.type===ho.OVERWRITE){let c=t;c.source.fromUser?o=oS(n,e,c.path,c.snap,i,r,s):(K(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!qe(c.path),o=Lv(n,e,c.path,c.snap,i,r,a,s))}else if(t.type===ho.MERGE){let c=t;c.source.fromUser?o=KZ(n,e,c.path,c.children,i,r,s):(K(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=aS(n,e,c.path,c.children,i,r,a,s))}else if(t.type===ho.ACK_USER_WRITE){let c=t;c.revert?o=JZ(n,e,c.path,i,r,s):o=QZ(n,e,c.path,c.affectedTree,i,r,s)}else if(t.type===ho.LISTEN_COMPLETE)o=YZ(n,e,t.path,i,s);else throw xu("Unknown operation type: "+t.type);let l=s.getChanges();return qZ(e,o,l),{viewCache:o,changes:l}}function qZ(n,e,t){let i=e.eventCache;if(i.isFullyInitialized()){let r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Pv(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&t.push(fj(Pv(e)))}}function bj(n,e,t,i,r,s){let o=e.eventCache;if(Fv(i,t)!=null)return e;{let a,l;if(qe(t))if(K(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let c=Kc(e),d=c instanceof Pe?c:Pe.EMPTY_NODE,h=US(i,d);a=n.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{let c=kv(i,Kc(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{let c=We(t);if(c===".priority"){K(wl(t)===1,"Can't have a priority with additional path components");let d=o.getNode();l=e.serverCache.getNode();let h=AB(i,t,d,l);h!=null?a=n.filter.updatePriority(d,h):a=o.getNode()}else{let d=Ft(t),h;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();let f=AB(i,t,o.getNode(),l);f!=null?h=o.getNode().getImmediateChild(c).updateChild(d,f):h=o.getNode().getImmediateChild(c)}else h=$S(i,c,e.serverCache);h!=null?a=n.filter.updateChild(o.getNode(),c,h,d,r,s):a=o.getNode()}}return gg(e,a,o.isFullyInitialized()||qe(t),n.filter.filtersNodes())}}function Lv(n,e,t,i,r,s,o,a){let l=e.serverCache,c,d=o?n.filter:n.filter.getIndexedFilter();if(qe(t))c=d.updateFullNode(l.getNode(),i,null);else if(d.filtersNodes()&&!l.isFiltered()){let p=l.getNode().updateChild(t,i);c=d.updateFullNode(l.getNode(),p,null)}else{let p=We(t);if(!l.isCompleteForPath(t)&&wl(t)>1)return e;let y=Ft(t),w=l.getNode().getImmediateChild(p).updateChild(y,i);p===".priority"?c=d.updatePriority(l.getNode(),w):c=d.updateChild(l.getNode(),p,w,y,wj,null)}let h=pj(e,c,l.isFullyInitialized()||qe(t),d.filtersNodes()),f=new Tg(r,h,s);return bj(n,h,t,r,f,a)}function oS(n,e,t,i,r,s,o){let a=e.eventCache,l,c,d=new Tg(r,e,s);if(qe(t))c=n.filter.updateFullNode(e.eventCache.getNode(),i,o),l=gg(e,c,!0,n.filter.filtersNodes());else{let h=We(t);if(h===".priority")c=n.filter.updatePriority(e.eventCache.getNode(),i),l=gg(e,c,a.isFullyInitialized(),a.isFiltered());else{let f=Ft(t),p=a.getNode().getImmediateChild(h),y;if(qe(f))y=i;else{let _=d.getCompleteChild(h);_!=null?OS(f)===".priority"&&_.getChild(aj(f)).isEmpty()?y=_:y=_.updateChild(f,i):y=Pe.EMPTY_NODE}if(p.equals(y))l=e;else{let _=n.filter.updateChild(a.getNode(),h,y,f,d,o);l=gg(e,_,a.isFullyInitialized(),n.filter.filtersNodes())}}}return l}function MB(n,e){return n.eventCache.isCompleteForChild(e)}function KZ(n,e,t,i,r,s,o){let a=e;return i.foreach((l,c)=>{let d=Yt(t,l);MB(e,We(d))&&(a=oS(n,a,d,c,r,s,o))}),i.foreach((l,c)=>{let d=Yt(t,l);MB(e,We(d))||(a=oS(n,a,d,c,r,s,o))}),a}function xB(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function aS(n,e,t,i,r,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;qe(t)?c=i:c=new Xi(null).setTree(t,i);let d=e.serverCache.getNode();return c.children.inorderTraversal((h,f)=>{if(d.hasChild(h)){let p=e.serverCache.getNode().getImmediateChild(h),y=xB(n,p,f);l=Lv(n,l,new Ct(h),y,r,s,o,a)}}),c.children.inorderTraversal((h,f)=>{let p=!e.serverCache.isCompleteForChild(h)&&f.value===null;if(!d.hasChild(h)&&!p){let y=e.serverCache.getNode().getImmediateChild(h),_=xB(n,y,f);l=Lv(n,l,new Ct(h),_,r,s,o,a)}}),l}function QZ(n,e,t,i,r,s,o){if(Fv(r,t)!=null)return e;let a=e.serverCache.isFiltered(),l=e.serverCache;if(i.value!=null){if(qe(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return Lv(n,e,t,l.getNode().getChild(t),r,s,a,o);if(qe(t)){let c=new Xi(null);return l.getNode().forEachChild(fo,(d,h)=>{c=c.set(new Ct(d),h)}),aS(n,e,t,c,r,s,a,o)}else return e}else{let c=new Xi(null);return i.foreach((d,h)=>{let f=Yt(t,d);l.isCompleteForPath(f)&&(c=c.set(d,l.getNode().getChild(f)))}),aS(n,e,t,c,r,s,a,o)}}function YZ(n,e,t,i,r){let s=e.serverCache,o=pj(e,s.getNode(),s.isFullyInitialized()||qe(t),s.isFiltered());return bj(n,o,t,i,wj,r)}function JZ(n,e,t,i,r,s){let o;if(Fv(i,t)!=null)return e;{let a=new Tg(i,e,r),l=e.eventCache.getNode(),c;if(qe(t)||We(t)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=kv(i,Kc(e));else{let h=e.serverCache.getNode();K(h instanceof Pe,"serverChildren would be complete if leaf node"),d=US(i,h)}d=d,c=n.filter.updateFullNode(l,d,s)}else{let d=We(t),h=$S(i,d,e.serverCache);h==null&&e.serverCache.isCompleteForChild(d)&&(h=l.getImmediateChild(d)),h!=null?c=n.filter.updateChild(l,d,h,Ft(t),a,s):e.eventCache.getNode().hasChild(d)?c=n.filter.updateChild(l,d,Pe.EMPTY_NODE,Ft(t),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=kv(i,Kc(e)),o.isLeafNode()&&(c=n.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||Fv(i,Et())!=null,gg(e,c,o,n.filter.filtersNodes())}}var lS=class{constructor(e,t){this.query_=e,this.eventRegistrations_=[];let i=this.query_._queryParams,r=new Cg(i.getIndex()),s=yZ(i);this.processor_=zZ(s);let o=t.serverCache,a=t.eventCache,l=r.updateFullNode(Pe.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(Pe.EMPTY_NODE,a.getNode(),null),d=new go(l,o.isFullyInitialized(),r.filtersNodes()),h=new go(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Jv(h,d),this.eventGenerator_=new eS(this.query_)}get query(){return this.query_}};function ZZ(n){return n.viewCache_.serverCache.getNode()}function XZ(n){return Pv(n.viewCache_)}function eX(n,e){let t=Kc(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!qe(e)&&!t.getImmediateChild(We(e)).isEmpty())?t.getChild(e):null}function RB(n){return n.eventRegistrations_.length===0}function tX(n,e){n.eventRegistrations_.push(e)}function NB(n,e,t){let i=[];if(t){K(e==null,"A cancel should cancel all event registrations.");let r=n.query._path;n.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(t,r);o&&i.push(o)})}if(e){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){let o=n.eventRegistrations_[s];if(!o.matches(e))r.push(o);else if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function OB(n,e,t,i){e.type===ho.MERGE&&e.source.queryId!==null&&(K(Kc(n.viewCache_),"We should always have a full cache before handling merges"),K(Pv(n.viewCache_),"Missing event cache, even though we have a server cache"));let r=n.viewCache_,s=WZ(n.processor_,r,e,t,i);return GZ(n.processor_,s.viewCache),K(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,Ej(n,s.changes,s.viewCache.eventCache.getNode(),null)}function nX(n,e){let t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(jt,(s,o)=>{i.push(lh(s,o))}),t.isFullyInitialized()&&i.push(fj(t.getNode())),Ej(n,i,t.getNode(),e)}function Ej(n,e,t,i){let r=i?[i]:n.eventRegistrations_;return TZ(n.eventGenerator_,e,t,r)}var Vv,Bv=class{constructor(){this.views=new Map}};function iX(n){K(!Vv,"__referenceConstructor has already been defined"),Vv=n}function rX(){return K(Vv,"Reference.ts has not been loaded"),Vv}function sX(n){return n.views.size===0}function HS(n,e,t,i){let r=e.source.queryId;if(r!==null){let s=n.views.get(r);return K(s!=null,"SyncTree gave us an op for an invalid query."),OB(s,e,t,i)}else{let s=[];for(let o of n.views.values())s=s.concat(OB(o,e,t,i));return s}}function Cj(n,e,t,i,r){let s=e._queryIdentifier,o=n.views.get(s);if(!o){let a=kv(t,r?i:null),l=!1;a?l=!0:i instanceof Pe?(a=US(t,i),l=!1):(a=Pe.EMPTY_NODE,l=!1);let c=Jv(new go(a,l,!1),new go(i,r,!1));return new lS(e,c)}return o}function oX(n,e,t,i,r,s){let o=Cj(n,e,i,r,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),tX(o,t),nX(o,t)}function aX(n,e,t,i){let r=e._queryIdentifier,s=[],o=[],a=bl(n);if(r==="default")for(let[l,c]of n.views.entries())o=o.concat(NB(c,t,i)),RB(c)&&(n.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{let l=n.views.get(r);l&&(o=o.concat(NB(l,t,i)),RB(l)&&(n.views.delete(r),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!bl(n)&&s.push(new(rX())(e._repo,e._path)),{removed:s,events:o}}function Dj(n){let e=[];for(let t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function yl(n,e){let t=null;for(let i of n.views.values())t=t||eX(i,e);return t}function Ij(n,e){if(e._queryParams.loadsAllData())return Xv(n);{let i=e._queryIdentifier;return n.views.get(i)}}function Tj(n,e){return Ij(n,e)!=null}function bl(n){return Xv(n)!=null}function Xv(n){for(let e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var jv;function lX(n){K(!jv,"__referenceConstructor has already been defined"),jv=n}function cX(){return K(jv,"Reference.ts has not been loaded"),jv}var uX=1,Uv=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Xi(null),this.pendingWriteTree_=$Z(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function zS(n,e,t,i,r){return xZ(n.pendingWriteTree_,e,t,i,r),r?gh(n,new ch(VS(),e,t)):[]}function dX(n,e,t,i){RZ(n.pendingWriteTree_,e,t,i);let r=Xi.fromObject(t);return gh(n,new Ig(VS(),e,r))}function ml(n,e,t=!1){let i=NZ(n.pendingWriteTree_,e);if(OZ(n.pendingWriteTree_,e)){let s=new Xi(null);return i.snap!=null?s=s.set(Et(),!0):oi(i.children,o=>{s=s.set(new Ct(o),!0)}),gh(n,new XT(i.path,s,t))}else return[]}function kg(n,e,t){return gh(n,new ch(BS(),e,t))}function hX(n,e,t){let i=Xi.fromObject(t);return gh(n,new Ig(BS(),e,i))}function fX(n,e){return gh(n,new Ov(BS(),e))}function pX(n,e,t){let i=GS(n,t);if(i){let r=WS(i),s=r.path,o=r.queryId,a=Zi(s,e),l=new Ov(jS(o),a);return qS(n,s,l)}else return[]}function $v(n,e,t,i,r=!1){let s=e._path,o=n.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||Tj(o,e))){let l=aX(o,e,t,i);sX(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));let c=l.removed;if(a=l.events,!r){let d=c.findIndex(f=>f._queryParams.loadsAllData())!==-1,h=n.syncPointTree_.findOnPath(s,(f,p)=>bl(p));if(d&&!h){let f=n.syncPointTree_.subtree(s);if(!f.isEmpty()){let p=_X(f);for(let y=0;y<p.length;++y){let _=p[y],w=_.query,A=xj(n,_);n.listenProvider_.startListening(_g(w),Sg(n,w),A.hashFn,A.onComplete)}}}!h&&c.length>0&&!i&&(d?n.listenProvider_.stopListening(_g(e),null):c.forEach(f=>{let p=n.queryToTagMap.get(tw(f));n.listenProvider_.stopListening(_g(f),p)}))}yX(n,c)}return a}function Sj(n,e,t,i){let r=GS(n,i);if(r!=null){let s=WS(r),o=s.path,a=s.queryId,l=Zi(o,e),c=new ch(jS(a),l,t);return qS(n,o,c)}else return[]}function gX(n,e,t,i){let r=GS(n,i);if(r){let s=WS(r),o=s.path,a=s.queryId,l=Zi(o,e),c=Xi.fromObject(t),d=new Ig(jS(a),l,c);return qS(n,o,d)}else return[]}function cS(n,e,t,i=!1){let r=e._path,s=null,o=!1;n.syncPointTree_.foreachOnPath(r,(f,p)=>{let y=Zi(f,r);s=s||yl(p,y),o=o||bl(p)});let a=n.syncPointTree_.get(r);a?(o=o||bl(a),s=s||yl(a,Et())):(a=new Bv,n.syncPointTree_=n.syncPointTree_.set(r,a));let l;s!=null?l=!0:(l=!1,s=Pe.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((p,y)=>{let _=yl(y,Et());_&&(s=s.updateImmediateChild(p,_))}));let c=Tj(a,e);if(!c&&!e._queryParams.loadsAllData()){let f=tw(e);K(!n.queryToTagMap.has(f),"View does not exist, but we have a tag");let p=vX();n.queryToTagMap.set(f,p),n.tagToQueryMap.set(p,f)}let d=Zv(n.pendingWriteTree_,r),h=oX(a,e,t,d,s,l);if(!c&&!o&&!i){let f=Ij(a,e);h=h.concat(wX(n,e,f))}return h}function ew(n,e,t){let r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{let l=Zi(o,e),c=yl(a,l);if(c)return c});return _j(r,e,s,t,!0)}function mX(n,e){let t=e._path,i=null;n.syncPointTree_.foreachOnPath(t,(c,d)=>{let h=Zi(c,t);i=i||yl(d,h)});let r=n.syncPointTree_.get(t);r?i=i||yl(r,Et()):(r=new Bv,n.syncPointTree_=n.syncPointTree_.set(t,r));let s=i!=null,o=s?new go(i,!0,!1):null,a=Zv(n.pendingWriteTree_,e._path),l=Cj(r,e,a,s?o.getNode():Pe.EMPTY_NODE,s);return XZ(l)}function gh(n,e){return Aj(e,n.syncPointTree_,null,Zv(n.pendingWriteTree_,Et()))}function Aj(n,e,t,i){if(qe(n.path))return Mj(n,e,t,i);{let r=e.get(Et());t==null&&r!=null&&(t=yl(r,Et()));let s=[],o=We(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){let c=t?t.getImmediateChild(o):null,d=yj(i,o);s=s.concat(Aj(a,l,c,d))}return r&&(s=s.concat(HS(r,n,i,t))),s}}function Mj(n,e,t,i){let r=e.get(Et());t==null&&r!=null&&(t=yl(r,Et()));let s=[];return e.children.inorderTraversal((o,a)=>{let l=t?t.getImmediateChild(o):null,c=yj(i,o),d=n.operationForChild(o);d&&(s=s.concat(Mj(d,a,l,c)))}),r&&(s=s.concat(HS(r,n,i,t))),s}function xj(n,e){let t=e.query,i=Sg(n,t);return{hashFn:()=>(ZZ(e)||Pe.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?pX(n,t._path,i):fX(n,t._path);{let s=xJ(r,t);return $v(n,t,null,s)}}}}function Sg(n,e){let t=tw(e);return n.queryToTagMap.get(t)}function tw(n){return n._path.toString()+"$"+n._queryIdentifier}function GS(n,e){return n.tagToQueryMap.get(e)}function WS(n){let e=n.indexOf("$");return K(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Ct(n.substr(0,e))}}function qS(n,e,t){let i=n.syncPointTree_.get(e);K(i,"Missing sync point for query tag that we're tracking");let r=Zv(n.pendingWriteTree_,e);return HS(i,t,r,null)}function _X(n){return n.fold((e,t,i)=>{if(t&&bl(t))return[Xv(t)];{let r=[];return t&&(r=Dj(t)),oi(i,(s,o)=>{r=r.concat(o)}),r}})}function _g(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(cX())(n._repo,n._path):n}function yX(n,e){for(let t=0;t<e.length;++t){let i=e[t];if(!i._queryParams.loadsAllData()){let r=tw(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}function vX(){return uX++}function wX(n,e,t){let i=e._path,r=Sg(n,e),s=xj(n,t),o=n.listenProvider_.startListening(_g(e),r,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(i);if(r)K(!bl(a.value),"If we're adding a query, it shouldn't be shadowed");else{let l=a.fold((c,d,h)=>{if(!qe(c)&&d&&bl(d))return[Xv(d).query];{let f=[];return d&&(f=f.concat(Dj(d).map(p=>p.query))),oi(h,(p,y)=>{f=f.concat(y)}),f}});for(let c=0;c<l.length;++c){let d=l[c];n.listenProvider_.stopListening(_g(d),Sg(n,d))}}return o}var uS=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},dS=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=Yt(this.path_,e);return new n(this.syncTree_,t)}node(){return ew(this.syncTree_,this.path_)}},bX=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},PB=function(n,e,t){if(!n||typeof n!="object")return n;if(K(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return EX(n[".sv"],e,t);if(typeof n[".sv"]=="object")return CX(n[".sv"],e);K(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},EX=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:K(!1,"Unexpected server value: "+n)}},CX=function(n,e,t){n.hasOwnProperty("increment")||K(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let i=n.increment;typeof i!="number"&&K(!1,"Unexpected increment value: "+i);let r=e.node();if(K(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;let o=r.getValue();return typeof o!="number"?i:o+i},Rj=function(n,e,t,i){return QS(e,new dS(t,n),i)},KS=function(n,e,t){return QS(n,new uS(e),t)};function QS(n,e,t){let i=n.getPriority().val(),r=PB(i,e.getImmediateChild(".priority"),t),s;if(n.isLeafNode()){let o=n,a=PB(o.getValue(),e,t);return a!==o.getValue()||r!==o.getPriority().val()?new oh(a,sn(r)):n}else{let o=n;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new oh(r))),o.forEachChild(jt,(a,l)=>{let c=QS(l,e.getImmediateChild(a),t);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}var Ag=class{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}};function nw(n,e){let t=e instanceof Ct?e:new Ct(e),i=n,r=We(t);for(;r!==null;){let s=xa(i.node.children,r)||{children:{},childCount:0};i=new Ag(r,i,s),t=Ft(t),r=We(t)}return i}function Jc(n){return n.node.value}function YS(n,e){n.node.value=e,hS(n)}function Nj(n){return n.node.childCount>0}function DX(n){return Jc(n)===void 0&&!Nj(n)}function iw(n,e){oi(n.node.children,(t,i)=>{e(new Ag(t,n,i))})}function Oj(n,e,t,i){t&&!i&&e(n),iw(n,r=>{Oj(r,e,!0,i)}),t&&i&&e(n)}function IX(n,e,t){let i=t?n:n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Fg(n){return new Ct(n.parent===null?n.name:Fg(n.parent)+"/"+n.name)}function hS(n){n.parent!==null&&TX(n.parent,n.name,n)}function TX(n,e,t){let i=DX(t),r=zr(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,hS(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,hS(n))}var SX=/[\[\].#$\/\u0000-\u001F\u007F]/,AX=/[\[\].#$\u0000-\u001F\u007F]/,CT=10*1024*1024,rw=function(n){return typeof n=="string"&&n.length!==0&&!SX.test(n)},Pj=function(n){return typeof n=="string"&&n.length!==0&&!AX.test(n)},MX=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Pj(n)},Mg=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!Qv(n)||n&&typeof n=="object"&&zr(n,".sv")},mo=function(n,e,t,i){i&&e===void 0||Lg(ar(n,"value"),e,t)},Lg=function(n,e,t){let i=t instanceof Ct?new FT(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Gc(i));if(typeof e=="function")throw new Error(n+"contains a function "+Gc(i)+" with contents = "+e.toString());if(Qv(e))throw new Error(n+"contains "+e.toString()+" "+Gc(i));if(typeof e=="string"&&e.length>CT/3&&bf(e)>CT)throw new Error(n+"contains a string greater than "+CT+" utf8 bytes "+Gc(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,s=!1;if(oi(e,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!rw(o)))throw new Error(n+" contains an invalid key ("+o+") "+Gc(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);sZ(i,o),Lg(n,a,i),oZ(i)}),r&&s)throw new Error(n+' contains ".value" child '+Gc(i)+" in addition to actual children.")}},xX=function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];let s=vg(i);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!rw(s[o]))throw new Error(n+"contains an invalid key ("+s[o]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(rZ);let r=null;for(t=0;t<e.length;t++){if(i=e[t],r!==null&&cs(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}},kj=function(n,e,t,i){if(i&&e===void 0)return;let r=ar(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");let s=[];oi(e,(o,a)=>{let l=new Ct(o);if(Lg(r,a,Yt(t,l)),OS(l)===".priority"&&!Mg(a))throw new Error(r+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),xX(r,s)},JS=function(n,e,t){if(!(t&&e===void 0)){if(Qv(e))throw new Error(ar(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Mg(e))throw new Error(ar(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Vg=function(n,e,t,i){if(!(i&&t===void 0)&&!rw(t))throw new Error(ar(n,e)+'was an invalid key = "'+t+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},mh=function(n,e,t,i){if(!(i&&t===void 0)&&!Pj(t))throw new Error(ar(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},RX=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),mh(n,e,t,i)},Pr=function(n,e){if(We(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},Fj=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!rw(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!MX(t))throw new Error(ar(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var fS=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function sw(n,e){let t=null;for(let i=0;i<e.length;i++){let r=e[i],s=r.getPath();t!==null&&!PS(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(r)}t&&n.eventLists_.push(t)}function Lj(n,e,t){sw(n,t),Vj(n,i=>PS(i,e))}function kr(n,e,t){sw(n,t),Vj(n,i=>cs(i,e)||cs(e,i))}function Vj(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){let r=n.eventLists_[i];if(r){let s=r.path;e(s)?(NX(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function NX(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let i=t.getEventRunner();qc&&si("event: "+t.toString()),fh(i)}}}var Bj="repo_interrupt",OX=25,pS=class{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new fS,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Nv(),this.transactionQueueTree_=new Ag,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function PX(n,e,t){if(n.stats_=NS(n.repoInfo_),n.forceRestClient_||PJ())n.server_=new qT(n.repoInfo_,(i,r,s,o)=>{kB(n,i,r,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>FB(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{xn(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new kS(n.repoInfo_,e,(i,r,s,o)=>{kB(n,i,r,s,o)},i=>{FB(n,i)},i=>{kX(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=FJ(n.repoInfo_,()=>new ZT(n.stats_,n.server_)),n.infoData_=new KT,n.infoSyncTree_=new Uv({startListening:(i,r,s,o)=>{let a=[],l=n.infoData_.getNode(i._path);return l.isEmpty()||(a=kg(n.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),ZS(n,"connected",!1),n.serverSyncTree_=new Uv({startListening:(i,r,s,o)=>(n.server_.listen(i,s,r,(a,l)=>{let c=o(a,l);kr(n.eventQueue_,i._path,c)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}function jj(n){let t=n.infoData_.getNode(new Ct(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function Bg(n){return bX({timestamp:jj(n)})}function kB(n,e,t,i,r){n.dataUpdateCount++;let s=new Ct(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(r)if(i){let l=wf(t,c=>sn(c));o=gX(n.serverSyncTree_,s,l,r)}else{let l=sn(t);o=Sj(n.serverSyncTree_,s,l,r)}else if(i){let l=wf(t,c=>sn(c));o=hX(n.serverSyncTree_,s,l)}else{let l=sn(t);o=kg(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=dh(n,s)),kr(n.eventQueue_,a,o)}function FB(n,e){ZS(n,"connected",e),e===!1&&VX(n)}function kX(n,e){oi(e,(t,i)=>{ZS(n,t,i)})}function ZS(n,e,t){let i=new Ct("/.info/"+e),r=sn(t);n.infoData_.updateSnapshot(i,r);let s=kg(n.infoSyncTree_,i,r);kr(n.eventQueue_,i,s)}function ow(n){return n.nextWriteId_++}function FX(n,e,t){let i=mX(n.serverSyncTree_,e);return i!=null?Promise.resolve(i):n.server_.get(e).then(r=>{let s=sn(r).withIndex(e._queryParams.getIndex());cS(n.serverSyncTree_,e,t,!0);let o;if(e._queryParams.loadsAllData())o=kg(n.serverSyncTree_,e._path,s);else{let a=Sg(n.serverSyncTree_,e);o=Sj(n.serverSyncTree_,e._path,s,a)}return kr(n.eventQueue_,e._path,o),$v(n.serverSyncTree_,e,t,null,!0),s},r=>(_h(n,"get for query "+xn(e)+" failed: "+r),Promise.reject(new Error(r))))}function XS(n,e,t,i,r){_h(n,"set",{path:e.toString(),value:t,priority:i});let s=Bg(n),o=sn(t,i),a=ew(n.serverSyncTree_,e),l=KS(o,a,s),c=ow(n),d=zS(n.serverSyncTree_,e,l,c,!0);sw(n.eventQueue_,d),n.server_.put(e.toString(),o.val(!0),(f,p)=>{let y=f==="ok";y||Ri("set at "+e+" failed: "+f);let _=ml(n.serverSyncTree_,c,!y);kr(n.eventQueue_,e,_),El(n,r,f,p)});let h=tA(n,e);dh(n,h),kr(n.eventQueue_,h,[])}function LX(n,e,t,i){_h(n,"update",{path:e.toString(),value:t});let r=!0,s=Bg(n),o={};if(oi(t,(a,l)=>{r=!1,o[a]=Rj(Yt(e,a),sn(l),n.serverSyncTree_,s)}),r)si("update() called with empty data.  Don't do anything."),El(n,i,"ok",void 0);else{let a=ow(n),l=dX(n.serverSyncTree_,e,o,a);sw(n.eventQueue_,l),n.server_.merge(e.toString(),t,(c,d)=>{let h=c==="ok";h||Ri("update at "+e+" failed: "+c);let f=ml(n.serverSyncTree_,a,!h),p=f.length>0?dh(n,e):e;kr(n.eventQueue_,p,f),El(n,i,c,d)}),oi(t,c=>{let d=tA(n,Yt(e,c));dh(n,d)}),kr(n.eventQueue_,e,[])}}function VX(n){_h(n,"onDisconnectEvents");let e=Bg(n),t=Nv();YT(n.onDisconnect_,Et(),(r,s)=>{let o=Rj(r,s,n.serverSyncTree_,e);ph(t,r,o)});let i=[];YT(t,Et(),(r,s)=>{i=i.concat(kg(n.serverSyncTree_,r,s));let o=tA(n,r);dh(n,o)}),n.onDisconnect_=Nv(),kr(n.eventQueue_,Et(),i)}function BX(n,e,t){n.server_.onDisconnectCancel(e.toString(),(i,r)=>{i==="ok"&&QT(n.onDisconnect_,e),El(n,t,i,r)})}function LB(n,e,t,i){let r=sn(t);n.server_.onDisconnectPut(e.toString(),r.val(!0),(s,o)=>{s==="ok"&&ph(n.onDisconnect_,e,r),El(n,i,s,o)})}function jX(n,e,t,i,r){let s=sn(t,i);n.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{o==="ok"&&ph(n.onDisconnect_,e,s),El(n,r,o,a)})}function UX(n,e,t,i){if(Qm(t)){si("onDisconnect().update() called with empty data.  Don't do anything."),El(n,i,"ok",void 0);return}n.server_.onDisconnectMerge(e.toString(),t,(r,s)=>{r==="ok"&&oi(t,(o,a)=>{let l=sn(a);ph(n.onDisconnect_,Yt(e,o),l)}),El(n,i,r,s)})}function $X(n,e,t){let i;We(e._path)===".info"?i=cS(n.infoSyncTree_,e,t):i=cS(n.serverSyncTree_,e,t),Lj(n.eventQueue_,e._path,i)}function gS(n,e,t){let i;We(e._path)===".info"?i=$v(n.infoSyncTree_,e,t):i=$v(n.serverSyncTree_,e,t),Lj(n.eventQueue_,e._path,i)}function Uj(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Bj)}function HX(n){n.persistentConnection_&&n.persistentConnection_.resume(Bj)}function _h(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),si(t,...e)}function El(n,e,t,i){e&&fh(()=>{if(t==="ok")e(null);else{let r=(t||"error").toUpperCase(),s=r;i&&(s+=": "+i);let o=new Error(s);o.code=r,e(o)}})}function zX(n,e,t,i,r,s){_h(n,"transaction on "+e);let o={path:e,update:t,onComplete:i,status:null,order:jB(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=eA(n,e,void 0);o.currentInputSnapshot=a;let l=o.update(a.val());if(l===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Lg("transaction failed: Data returned ",l,o.path),o.status=0;let c=nw(n.transactionQueueTree_,e),d=Jc(c)||[];d.push(o),YS(c,d);let h;typeof l=="object"&&l!==null&&zr(l,".priority")?(h=xa(l,".priority"),K(Mg(h),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):h=(ew(n.serverSyncTree_,e)||Pe.EMPTY_NODE).getPriority().val();let f=Bg(n),p=sn(l,h),y=KS(p,a,f);o.currentOutputSnapshotRaw=p,o.currentOutputSnapshotResolved=y,o.currentWriteId=ow(n);let _=zS(n.serverSyncTree_,e,y,o.currentWriteId,o.applyLocally);kr(n.eventQueue_,e,_),aw(n,n.transactionQueueTree_)}}function eA(n,e,t){return ew(n.serverSyncTree_,e,t)||Pe.EMPTY_NODE}function aw(n,e=n.transactionQueueTree_){if(e||lw(n,e),Jc(e)){let t=Hj(n,e);K(t.length>0,"Sending zero length transaction queue"),t.every(r=>r.status===0)&&GX(n,Fg(e),t)}else Nj(e)&&iw(e,t=>{aw(n,t)})}function GX(n,e,t){let i=t.map(c=>c.currentWriteId),r=eA(n,e,i),s=r,o=r.hash();for(let c=0;c<t.length;c++){let d=t[c];K(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let h=Zi(e,d.path);s=s.updateChild(h,d.currentOutputSnapshotRaw)}let a=s.val(!0),l=e;n.server_.put(l.toString(),a,c=>{_h(n,"transaction put response",{path:l.toString(),status:c});let d=[];if(c==="ok"){let h=[];for(let f=0;f<t.length;f++)t[f].status=2,d=d.concat(ml(n.serverSyncTree_,t[f].currentWriteId)),t[f].onComplete&&h.push(()=>t[f].onComplete(null,!0,t[f].currentOutputSnapshotResolved)),t[f].unwatcher();lw(n,nw(n.transactionQueueTree_,e)),aw(n,n.transactionQueueTree_),kr(n.eventQueue_,e,d);for(let f=0;f<h.length;f++)fh(h[f])}else{if(c==="datastale")for(let h=0;h<t.length;h++)t[h].status===3?t[h].status=4:t[h].status=0;else{Ri("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<t.length;h++)t[h].status=4,t[h].abortReason=c}dh(n,e)}},o)}function dh(n,e){let t=$j(n,e),i=Fg(t),r=Hj(n,t);return WX(n,r,i),i}function WX(n,e,t){if(e.length===0)return;let i=[],r=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let l=e[a],c=Zi(t,l.path),d=!1,h;if(K(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)d=!0,h=l.abortReason,r=r.concat(ml(n.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=OX)d=!0,h="maxretry",r=r.concat(ml(n.serverSyncTree_,l.currentWriteId,!0));else{let f=eA(n,l.path,o);l.currentInputSnapshot=f;let p=e[a].update(f.val());if(p!==void 0){Lg("transaction failed: Data returned ",p,l.path);let y=sn(p);typeof p=="object"&&p!=null&&zr(p,".priority")||(y=y.updatePriority(f.getPriority()));let w=l.currentWriteId,A=Bg(n),x=KS(y,f,A);l.currentOutputSnapshotRaw=y,l.currentOutputSnapshotResolved=x,l.currentWriteId=ow(n),o.splice(o.indexOf(w),1),r=r.concat(zS(n.serverSyncTree_,l.path,x,l.currentWriteId,l.applyLocally)),r=r.concat(ml(n.serverSyncTree_,w,!0))}else d=!0,h="nodata",r=r.concat(ml(n.serverSyncTree_,l.currentWriteId,!0))}kr(n.eventQueue_,t,r),r=[],d&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?i.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):i.push(()=>e[a].onComplete(new Error(h),!1,null))))}lw(n,n.transactionQueueTree_);for(let a=0;a<i.length;a++)fh(i[a]);aw(n,n.transactionQueueTree_)}function $j(n,e){let t,i=n.transactionQueueTree_;for(t=We(e);t!==null&&Jc(i)===void 0;)i=nw(i,t),e=Ft(e),t=We(e);return i}function Hj(n,e){let t=[];return zj(n,e,t),t.sort((i,r)=>i.order-r.order),t}function zj(n,e,t){let i=Jc(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);iw(e,r=>{zj(n,r,t)})}function lw(n,e){let t=Jc(e);if(t){let i=0;for(let r=0;r<t.length;r++)t[r].status!==2&&(t[i]=t[r],i++);t.length=i,YS(e,t.length>0?t:void 0)}iw(e,i=>{lw(n,i)})}function tA(n,e){let t=Fg($j(n,e)),i=nw(n.transactionQueueTree_,e);return IX(i,r=>{DT(n,r)}),DT(n,i),Oj(i,r=>{DT(n,r)}),t}function DT(n,e){let t=Jc(e);if(t){let i=[],r=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(K(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(K(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),r=r.concat(ml(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&i.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?YS(e,void 0):t.length=s+1,kr(n.eventQueue_,Fg(e),r);for(let o=0;o<i.length;o++)fh(i[o])}}function qX(n){let e="",t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function KX(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Ri(`Invalid query segment '${t}' in query '${n}'`)}return e}var mS=function(n,e){let t=QX(n),i=t.namespace;t.domain==="firebase.com"&&po(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&po("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||IJ();let r=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new Dv(t.host,t.secure,i,r,e,"",i!==t.subdomain),path:new Ct(t.pathString)}},QX=function(n){let e="",t="",i="",r="",s="",o=!0,a="https",l=443;if(typeof n=="string"){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let d=n.indexOf("/");d===-1&&(d=n.length);let h=n.indexOf("?");h===-1&&(h=n.length),e=n.substring(0,Math.min(d,h)),d<h&&(r=qX(n.substring(d,h)));let f=KX(n.substring(Math.min(n.length,h)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;let p=e.slice(0,c);if(p.toLowerCase()==="localhost")t="localhost";else if(p.split(".").length<=2)t=p;else{let y=e.indexOf(".");i=e.substring(0,y).toLowerCase(),t=e.substring(y+1),s=i}"ns"in f&&(s=f.ns)}return{host:e,port:l,domain:t,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};var VB="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",YX=function(){let n=0,e=[];return function(t){let i=t===n;n=t;let r,s=new Array(8);for(r=7;r>=0;r--)s[r]=VB.charAt(t%64),t=Math.floor(t/64);K(t===0,"Cannot push at time == 0");let o=s.join("");if(i){for(r=11;r>=0&&e[r]===63;r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(Math.random()*64);for(r=0;r<12;r++)o+=VB.charAt(e[r]);return K(o.length===20,"nextPushId: Length should be 20."),o}}();var Hv=class{constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+xn(this.snapshot.exportVal())}},zv=class{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var xg=class{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return K(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var Gv=class{constructor(e,t){this._repo=e,this._path=t}cancel(){let e=new Yn;return BX(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Pr("OnDisconnect.remove",this._path);let e=new Yn;return LB(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Pr("OnDisconnect.set",this._path),mo("OnDisconnect.set",e,this._path,!1);let t=new Yn;return LB(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Pr("OnDisconnect.setWithPriority",this._path),mo("OnDisconnect.setWithPriority",e,this._path,!1),JS("OnDisconnect.setWithPriority",t,!1);let i=new Yn;return jX(this._repo,this._path,e,t,i.wrapCallback(()=>{})),i.promise}update(e){Pr("OnDisconnect.update",this._path),kj("OnDisconnect.update",e,this._path,!1);let t=new Yn;return UX(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}};var er=class n{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return qe(this._path)?null:OS(this._path)}get ref(){return new Fr(this._repo,this._path)}get _queryIdentifier(){let e=DB(this._queryParams),t=RS(e);return t==="{}"?"default":t}get _queryObject(){return DB(this._queryParams)}isEqual(e){if(e=it(e),!(e instanceof n))return!1;let t=this._repo===e._repo,i=PS(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+iZ(this._path)}};function cw(n,e){if(n._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function Dl(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===fo){let i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==vl)throw new Error(i);if(typeof e!="string")throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==fa)throw new Error(i);if(typeof t!="string")throw new Error(r)}}else if(n.getIndex()===jt){if(e!=null&&!Mg(e)||t!=null&&!Mg(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(K(n.getIndex()instanceof wg||n.getIndex()===LS,"unknown index type."),e!=null&&typeof e=="object"||t!=null&&typeof t=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function uw(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Fr=class n extends er{constructor(e,t){super(e,t,new Dg,!1)}get parent(){let e=aj(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},hh=class n{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let t=new Ct(e),i=Cl(this.ref,e);return new n(this._node.getChild(t),i,jt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>e(new n(r,Cl(this.ref,i),jt)))}hasChild(e){let t=new Ct(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function nA(n,e){return n=it(n),n._checkNotDeleted("ref"),e!==void 0?Cl(n._root,e):n._root}function iA(n,e){n=it(n),n._checkNotDeleted("refFromURL");let t=mS(e,n._repo.repoInfo_.nodeAdmin);Fj("refFromURL",t);let i=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&po("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),nA(n,t.path.toString())}function Cl(n,e){return n=it(n),We(n._path)===null?RX("child","path",e,!1):mh("child","path",e,!1),new Fr(n._repo,Yt(n._path,e))}function Gj(n,e){n=it(n),Pr("push",n._path),mo("push",e,n._path,!0);let t=jj(n._repo),i=YX(t),r=Cl(n,i),s=Cl(n,i),o;return e!=null?o=dw(s,e).then(()=>s):o=Promise.resolve(s),r.then=o.then.bind(o),r.catch=o.then.bind(o,void 0),r}function Wj(n){return Pr("remove",n._path),dw(n,null)}function dw(n,e){n=it(n),Pr("set",n._path),mo("set",e,n._path,!1);let t=new Yn;return XS(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function qj(n,e){n=it(n),Pr("setPriority",n._path),JS("setPriority",e,!1);let t=new Yn;return XS(n._repo,Yt(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}function Kj(n,e,t){if(Pr("setWithPriority",n._path),mo("setWithPriority",e,n._path,!1),JS("setWithPriority",t,!1),n.key===".length"||n.key===".keys")throw"setWithPriority failed: "+n.key+" is a read-only object.";let i=new Yn;return XS(n._repo,n._path,e,t,i.wrapCallback(()=>{})),i.promise}function Qj(n,e){kj("update",e,n._path,!1);let t=new Yn;return LX(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function Yj(n){n=it(n);let e=new xg(()=>{}),t=new Rg(e);return FX(n._repo,n,t).then(i=>new hh(i,new Fr(n._repo,n._path),n._queryParams.getIndex()))}var Rg=class n{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){let i=t._queryParams.getIndex();return new Hv("value",this,new hh(e.snapshotNode,new Fr(t._repo,t._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new zv(this,e,t):null}matches(e){return e instanceof n?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Wv=class n{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t=e==="children_added"?"child_added":e;return t=t==="children_removed"?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new zv(this,e,t):null}createEvent(e,t){K(e.childName!=null,"Child events should have a childName.");let i=Cl(new Fr(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new Hv(e.type,this,new hh(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof n?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function jg(n,e,t,i,r){let s;if(typeof i=="object"&&(s=void 0,r=i),typeof i=="function"&&(s=i),r&&r.onlyOnce){let l=t,c=(d,h)=>{gS(n._repo,n,a),l(d,h)};c.userCallback=t.userCallback,c.context=t.context,t=c}let o=new xg(t,s||void 0),a=e==="value"?new Rg(o):new Wv(e,o);return $X(n._repo,n,a),()=>gS(n._repo,n,a)}function hw(n,e,t,i){return jg(n,"value",e,t,i)}function rA(n,e,t,i){return jg(n,"child_added",e,t,i)}function sA(n,e,t,i){return jg(n,"child_changed",e,t,i)}function oA(n,e,t,i){return jg(n,"child_moved",e,t,i)}function aA(n,e,t,i){return jg(n,"child_removed",e,t,i)}function lA(n,e,t){let i=null,r=t?new xg(t):null;e==="value"?i=new Rg(r):e&&(i=new Wv(e,r)),gS(n._repo,n,i)}var Lr=class{},qv=class extends Lr{constructor(e,t){super(),this._value=e,this._key=t,this.type="endAt"}_apply(e){mo("endAt",this._value,e._path,!0);let t=WT(e._queryParams,this._value,this._key);if(uw(t),Dl(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new er(e._repo,e._path,t,e._orderByCalled)}};function Jj(n,e){return Vg("endAt","key",e,!0),new qv(n,e)}var _S=class extends Lr{constructor(e,t){super(),this._value=e,this._key=t,this.type="endBefore"}_apply(e){mo("endBefore",this._value,e._path,!1);let t=EZ(e._queryParams,this._value,this._key);if(uw(t),Dl(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new er(e._repo,e._path,t,e._orderByCalled)}};function Zj(n,e){return Vg("endBefore","key",e,!0),new _S(n,e)}var Kv=class extends Lr{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAt"}_apply(e){mo("startAt",this._value,e._path,!0);let t=GT(e._queryParams,this._value,this._key);if(uw(t),Dl(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new er(e._repo,e._path,t,e._orderByCalled)}};function Xj(n=null,e){return Vg("startAt","key",e,!0),new Kv(n,e)}var yS=class extends Lr{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAfter"}_apply(e){mo("startAfter",this._value,e._path,!1);let t=bZ(e._queryParams,this._value,this._key);if(uw(t),Dl(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new er(e._repo,e._path,t,e._orderByCalled)}};function eU(n,e){return Vg("startAfter","key",e,!0),new yS(n,e)}var vS=class extends Lr{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new er(e._repo,e._path,vZ(e._queryParams,this._limit),e._orderByCalled)}};function tU(n){if(typeof n!="number"||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new vS(n)}var wS=class extends Lr{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new er(e._repo,e._path,wZ(e._queryParams,this._limit),e._orderByCalled)}};function nU(n){if(typeof n!="number"||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new wS(n)}var bS=class extends Lr{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){cw(e,"orderByChild");let t=new Ct(this._path);if(qe(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let i=new wg(t),r=Yv(e._queryParams,i);return Dl(r),new er(e._repo,e._path,r,!0)}};function iU(n){if(n==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(n==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(n==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return mh("orderByChild","path",n,!1),new bS(n)}var ES=class extends Lr{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){cw(e,"orderByKey");let t=Yv(e._queryParams,fo);return Dl(t),new er(e._repo,e._path,t,!0)}};function rU(){return new ES}var CS=class extends Lr{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){cw(e,"orderByPriority");let t=Yv(e._queryParams,jt);return Dl(t),new er(e._repo,e._path,t,!0)}};function sU(){return new CS}var DS=class extends Lr{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){cw(e,"orderByValue");let t=Yv(e._queryParams,LS);return Dl(t),new er(e._repo,e._path,t,!0)}};function oU(){return new DS}var IS=class extends Lr{constructor(e,t){super(),this._value=e,this._key=t,this.type="equalTo"}_apply(e){if(mo("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new qv(this._value,this._key)._apply(new Kv(this._value,this._key)._apply(e))}};function aU(n,e){return Vg("equalTo","key",e,!0),new IS(n,e)}function ds(n,...e){let t=it(n);for(let i of e)t=i._apply(t);return t}iX(Fr);lX(Fr);var JX="FIREBASE_DATABASE_EMULATOR_HOST",TS={},ZX=!1;function XX(n,e,t,i){n.repoInfo_=new Dv(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}function cA(n,e,t,i,r){let s=i||n.options.databaseURL;s===void 0&&(n.options.projectId||po("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),si("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=mS(s,r),a=o.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[JX]),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=mS(s,r),a=o.repoInfo):l=!o.repoInfo.secure;let d=r&&l?new pg(pg.OWNER):new xT(n.name,n.options,e);Fj("Invalid Firebase Database URL",o),qe(o.path)||po("Database URL must point to the root of a Firebase Database (not including a child path).");let h=tee(a,n,d,new MT(n.name,t));return new SS(h,n)}function eee(n,e){let t=TS[e];(!t||t[n.key]!==n)&&po(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Uj(n),delete t[n.key]}function tee(n,e,t,i){let r=TS[e.name];r||(r={},TS[e.name]=r);let s=r[n.toURLString()];return s&&po("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new pS(n,ZX,t,i),r[n.toURLString()]=s,s}var SS=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(PX(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Fr(this._repo,Et())),this._rootInternal}_delete(){return this._rootInternal!==null&&(eee(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&po("Cannot call "+e+" on a deleted database.")}};function lU(){oj.IS_TRANSPORT_INITIALIZED&&Ri("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function cU(){lU(),yg.forceDisallow()}function uU(){lU(),nh.forceDisallow(),yg.forceAllow()}function dU(n,e,t,i={}){n=it(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&po("Cannot call useEmulator() after instance has already been initialized.");let r=n._repoInternal,s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&po('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new pg(pg.OWNER);else if(i.mockUserToken){let o=typeof i.mockUserToken=="string"?i.mockUserToken:Wm(i.mockUserToken,n.app.options.projectId);s=new pg(o)}XX(r,e,t,s)}function hU(n){n=it(n),n._checkNotDeleted("goOffline"),Uj(n._repo)}function fU(n){n=it(n),n._checkNotDeleted("goOnline"),HX(n._repo)}function pU(n,e){$B(n,e)}function nee(n){xS(Jm),Jl(new Dr("database",(e,{instanceIdentifier:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return cA(i,r,s,t)},"PUBLIC").setMultipleInstances(!0)),ws(aB,lB,n),ws(aB,lB,"esm2017")}var iee={".sv":"timestamp"};function gU(){return iee}function mU(n){return{".sv":{increment:n}}}var AS=class{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function _U(n,e,t){var i;if(n=it(n),Pr("Reference.transaction",n._path),n.key===".length"||n.key===".keys")throw"Reference.transaction failed: "+n.key+" is a read-only object.";let r=(i=t?.applyLocally)!==null&&i!==void 0?i:!0,s=new Yn,o=(l,c,d)=>{let h=null;l?s.reject(l):(h=new hh(d,new Fr(n._repo,n._path),jt),s.resolve(new AS(c,h)))},a=hw(n,()=>{});return zX(n._repo,n._path,e,o,a,r),s.promise}kS.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};kS.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};nee();var ree="@firebase/database-compat",see="1.0.8";var oee=new Ra("@firebase/database-compat"),yU=function(n){let e="FIREBASE WARNING: "+n;oee.warn(e)};var aee=function(n,e,t,i){if(!(i&&t===void 0)&&typeof t!="boolean")throw new Error(ar(n,e)+"must be a boolean.")},lee=function(n,e,t){if(!(t&&e===void 0))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(ar(n,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};var uA=class{constructor(e){this._delegate=e}cancel(e){_e("OnDisconnect.cancel",0,1,arguments.length),Vn("OnDisconnect.cancel","onComplete",e,!0);let t=this._delegate.cancel();return e&&t.then(()=>e(null),i=>e(i)),t}remove(e){_e("OnDisconnect.remove",0,1,arguments.length),Vn("OnDisconnect.remove","onComplete",e,!0);let t=this._delegate.remove();return e&&t.then(()=>e(null),i=>e(i)),t}set(e,t){_e("OnDisconnect.set",1,2,arguments.length),Vn("OnDisconnect.set","onComplete",t,!0);let i=this._delegate.set(e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){_e("OnDisconnect.setWithPriority",2,3,arguments.length),Vn("OnDisconnect.setWithPriority","onComplete",i,!0);let r=this._delegate.setWithPriority(e,t);return i&&r.then(()=>i(null),s=>i(s)),r}update(e,t){if(_e("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){let r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,yU("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Vn("OnDisconnect.update","onComplete",t,!0);let i=this._delegate.update(e);return t&&i.then(()=>t(null),r=>t(r)),i}};var dA=class{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return _e("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}};var Zc=class n{constructor(e,t){this._database=e,this._delegate=t}val(){return _e("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return _e("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return _e("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return _e("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return _e("DataSnapshot.child",0,1,arguments.length),e=String(e),mh("DataSnapshot.child","path",e,!1),new n(this._database,this._delegate.child(e))}hasChild(e){return _e("DataSnapshot.hasChild",1,1,arguments.length),mh("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return _e("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return _e("DataSnapshot.forEach",1,1,arguments.length),Vn("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new n(this._database,t)))}hasChildren(){return _e("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return _e("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return _e("DataSnapshot.ref",0,0,arguments.length),new pa(this._database,this._delegate.ref)}get ref(){return this.getRef()}},fw=class n{constructor(e,t){this.database=e,this._delegate=t}on(e,t,i,r){var s;_e("Query.on",2,4,arguments.length),Vn("Query.on","callback",t,!1);let o=n.getCancelAndContextArgs_("Query.on",i,r),a=(c,d)=>{t.call(o.context,new Zc(this.database,c),d)};a.userCallback=t,a.context=o.context;let l=(s=o.cancel)===null||s===void 0?void 0:s.bind(o.context);switch(e){case"value":return hw(this._delegate,a,l),t;case"child_added":return rA(this._delegate,a,l),t;case"child_removed":return aA(this._delegate,a,l),t;case"child_changed":return sA(this._delegate,a,l),t;case"child_moved":return oA(this._delegate,a,l),t;default:throw new Error(ar("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,i){if(_e("Query.off",0,3,arguments.length),lee("Query.off",e,!0),Vn("Query.off","callback",t,!0),cE("Query.off","context",i,!0),t){let r=()=>{};r.userCallback=t,r.context=i,lA(this._delegate,e,r)}else lA(this._delegate,e)}get(){return Yj(this._delegate).then(e=>new Zc(this.database,e))}once(e,t,i,r){_e("Query.once",1,4,arguments.length),Vn("Query.once","callback",t,!0);let s=n.getCancelAndContextArgs_("Query.once",i,r),o=new Yn,a=(c,d)=>{let h=new Zc(this.database,c);t&&t.call(s.context,h,d),o.resolve(h)};a.userCallback=t,a.context=s.context;let l=c=>{s.cancel&&s.cancel.call(s.context,c),o.reject(c)};switch(e){case"value":hw(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":rA(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":aA(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":sA(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":oA(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error(ar("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return _e("Query.limitToFirst",1,1,arguments.length),new n(this.database,ds(this._delegate,tU(e)))}limitToLast(e){return _e("Query.limitToLast",1,1,arguments.length),new n(this.database,ds(this._delegate,nU(e)))}orderByChild(e){return _e("Query.orderByChild",1,1,arguments.length),new n(this.database,ds(this._delegate,iU(e)))}orderByKey(){return _e("Query.orderByKey",0,0,arguments.length),new n(this.database,ds(this._delegate,rU()))}orderByPriority(){return _e("Query.orderByPriority",0,0,arguments.length),new n(this.database,ds(this._delegate,sU()))}orderByValue(){return _e("Query.orderByValue",0,0,arguments.length),new n(this.database,ds(this._delegate,oU()))}startAt(e=null,t){return _e("Query.startAt",0,2,arguments.length),new n(this.database,ds(this._delegate,Xj(e,t)))}startAfter(e=null,t){return _e("Query.startAfter",0,2,arguments.length),new n(this.database,ds(this._delegate,eU(e,t)))}endAt(e=null,t){return _e("Query.endAt",0,2,arguments.length),new n(this.database,ds(this._delegate,Jj(e,t)))}endBefore(e=null,t){return _e("Query.endBefore",0,2,arguments.length),new n(this.database,ds(this._delegate,Zj(e,t)))}equalTo(e,t){return _e("Query.equalTo",1,2,arguments.length),new n(this.database,ds(this._delegate,aU(e,t)))}toString(){return _e("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return _e("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(_e("Query.isEqual",1,1,arguments.length),!(e instanceof n)){let t="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(t)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,i){let r={cancel:void 0,context:void 0};if(t&&i)r.cancel=t,Vn(e,"cancel",r.cancel,!0),r.context=i,cE(e,"context",r.context,!0);else if(t)if(typeof t=="object"&&t!==null)r.context=t;else if(typeof t=="function")r.cancel=t;else throw new Error(ar(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return r}get ref(){return new pa(this.database,new Fr(this._delegate._repo,this._delegate._path))}},pa=class n extends fw{constructor(e,t){super(e,new er(t._repo,t._path,new Dg,!1)),this.database=e,this._delegate=t}getKey(){return _e("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return _e("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new n(this.database,Cl(this._delegate,e))}getParent(){_e("Reference.parent",0,0,arguments.length);let e=this._delegate.parent;return e?new n(this.database,e):null}getRoot(){return _e("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}set(e,t){_e("Reference.set",1,2,arguments.length),Vn("Reference.set","onComplete",t,!0);let i=dw(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}update(e,t){if(_e("Reference.update",1,2,arguments.length),Array.isArray(e)){let r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,yU("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Pr("Reference.update",this._delegate._path),Vn("Reference.update","onComplete",t,!0);let i=Qj(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){_e("Reference.setWithPriority",2,3,arguments.length),Vn("Reference.setWithPriority","onComplete",i,!0);let r=Kj(this._delegate,e,t);return i&&r.then(()=>i(null),s=>i(s)),r}remove(e){_e("Reference.remove",0,1,arguments.length),Vn("Reference.remove","onComplete",e,!0);let t=Wj(this._delegate);return e&&t.then(()=>e(null),i=>e(i)),t}transaction(e,t,i){_e("Reference.transaction",1,3,arguments.length),Vn("Reference.transaction","transactionUpdate",e,!1),Vn("Reference.transaction","onComplete",t,!0),aee("Reference.transaction","applyLocally",i,!0);let r=_U(this._delegate,e,{applyLocally:i}).then(s=>new dA(s.committed,new Zc(this.database,s.snapshot)));return t&&r.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),r}setPriority(e,t){_e("Reference.setPriority",1,2,arguments.length),Vn("Reference.setPriority","onComplete",t,!0);let i=qj(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}push(e,t){_e("Reference.push",0,2,arguments.length),Vn("Reference.push","onComplete",t,!0);let i=Gj(this._delegate,e),r=i.then(o=>new n(this.database,o));t&&r.then(()=>t(null),o=>t(o));let s=new n(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return Pr("Reference.onDisconnect",this._delegate._path),new uA(new Gv(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}};var Xc=class{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:cU,forceLongPolling:uU}}useEmulator(e,t,i={}){dU(this._delegate,e,t,i)}ref(e){if(_e("database.ref",0,1,arguments.length),e instanceof pa){let t=iA(this._delegate,e.toString());return new pa(this,t)}else{let t=nA(this._delegate,e);return new pa(this,t)}}refFromURL(e){_e("database.refFromURL",1,1,arguments.length);let i=iA(this._delegate,e);return new pa(this,i)}goOffline(){return _e("database.goOffline",0,0,arguments.length),hU(this._delegate)}goOnline(){return _e("database.goOnline",0,0,arguments.length),fU(this._delegate)}};Xc.ServerValue={TIMESTAMP:gU(),increment:n=>mU(n)};function cee({app:n,url:e,version:t,customAuthImpl:i,customAppCheckImpl:r,namespace:s,nodeAdmin:o=!1}){xS(t);let a=new uE("database-standalone"),l=new Ym("auth-internal",a);l.setComponent(new Dr("auth-internal",()=>i,"PRIVATE"));let c;return r&&(c=new Ym("app-check-internal",a),c.setComponent(new Dr("app-check-internal",()=>r,"PRIVATE"))),{instance:new Xc(cA(n,l,c,e,o),n),namespace:s}}var uee=Object.freeze({__proto__:null,initStandalone:cee});var dee=Xc.ServerValue;function hee(n){n.INTERNAL.registerComponent(new Dr("database-compat",(e,{instanceIdentifier:t})=>{let i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:t});return new Xc(r,i)},"PUBLIC").setServiceProps({Reference:pa,Query:fw,Database:Xc,DataSnapshot:Zc,enableLogging:pU,INTERNAL:uee,ServerValue:dee}).setMultipleInstances(!0)),n.registerVersion(ree,see)}hee(Jn);function Ug(n,e,t="on",i=Na){return new ge(r=>{let s=null;return s=n[t](e,(o,a)=>{i.schedule(()=>{r.next({snapshot:o,prevKey:a})}),t==="once"&&i.schedule(()=>r.complete())},o=>{i.schedule(()=>r.error(o))}),t==="on"?{unsubscribe(){s!=null&&n.off(e,s)}}:{unsubscribe(){}}}).pipe(ne(r=>{let{snapshot:s,prevKey:o}=r,a=null;return s.exists()&&(a=s.key),{type:e,payload:s,prevKey:o,key:a}}),Af())}function fee(n){return typeof n=="string"}function pee(n){return typeof n.exportVal=="function"}function CU(n){return n==null}function DU(n){return typeof n.set=="function"}function vU(n,e){return DU(e)?e:n.ref(e)}function IU(n,e){if(fee(n))return e.stringCase();if(DU(n))return e.firebaseCase();if(pee(n))return e.snapshotCase();throw new Error(`Expects a string, snapshot, or reference. Got: ${typeof n}`)}function TU(n){return(CU(n)||n.length===0)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function SU(n,e,t){e=TU(e);let i=e.map(r=>Ug(n,r,"on",t));return nc(...i)}function gee(n,e,t){let i=SU(n,e).pipe(Ys((r,s)=>[...r,s],[]));return _ee(n,i,t)}function mee(n,e){return Ug(n,"value","on",e).pipe(ne(t=>{let i;return t.payload.forEach(r=>(i=r.key,!1)),{data:t,lastKeyToLoad:i}}))}function _ee(n,e,t){return mee(n,t).pipe(Wu(e),ne(([r,s])=>{let o=r.lastKeyToLoad,a=s.map(l=>l.key);return{actions:s,lastKeyToLoad:o,loadedKeys:a}}),VE(r=>r.loadedKeys.indexOf(r.lastKeyToLoad)===-1),ne(r=>r.actions))}function wU(n,e){return function(i,r){return IU(i,{stringCase:()=>n.child(i)[e](r),firebaseCase:()=>i[e](r),snapshotCase:()=>i.ref[e](r)})}}function yee(n){return function(t){return t?IU(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function vee(n,e,t){return Ug(n,"value","once",t).pipe(xt(i=>{let r=[se(i)];return e.forEach(s=>r.push(Ug(n,s,"on",t))),nc(...r).pipe(Ys(bee,[]))}),zu())}function AU(n,e){let t=n.length;for(let i=0;i<t;i++)if(n[i].payload.key===e)return i;return-1}function wee(n,e){if(CU(e))return 0;{let t=AU(n,e);return t===-1?n.length:t+1}}function bee(n,e){let{payload:t,prevKey:i,key:r}=e,s=AU(n,r),o=wee(n,i);switch(e.type){case"value":if(e.payload?.exists()){let a=null;e.payload.forEach(l=>{let c={payload:l,type:"value",prevKey:a,key:l.key};return a=l.key,n=[...n,c],!1})}return n;case"child_added":if(s>-1)(n[s-1]?.key||null)!==i&&(n=n.filter(l=>l.payload.key!==t.key),n.splice(o,0,e));else{if(i==null)return[e,...n];n=n.slice(),n.splice(o,0,e)}return n;case"child_removed":return n.filter(a=>a.payload.key!==t.key);case"child_changed":return n.map(a=>a.payload.key===r?e:a);case"child_moved":if(s>-1){let a=n.splice(s,1)[0];return n=n.slice(),n.splice(o,0,a),n}return n;default:return n}}function bU(n,e,t){return e=TU(e),vee(n,e,t)}function Eee(n,e){let t=e.schedulers.outsideAngular,i=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:wU(i,"update"),set:wU(i,"set"),push:r=>i.push(r),remove:yee(i),snapshotChanges(r){return bU(n,r,t).pipe(En)},stateChanges(r){return SU(n,r,t).pipe(En)},auditTrail(r){return gee(n,r,t).pipe(En)},valueChanges(r,s){return bU(n,r,t).pipe(ne(a=>a.map(l=>s&&s.idField?ke(q({},l.payload.val()),{[s.idField]:l.key}):l.payload.val())),En)}}}function EU(n,e){return function(){return Ug(n,"value","on",e)}}function Cee(n,e){return{query:n,snapshotChanges(){return EU(n,e.schedulers.outsideAngular)().pipe(En)},update(t){return n.ref.update(t)},set(t){return n.ref.set(t)},remove(){return n.ref.remove()},valueChanges(){return EU(n,e.schedulers.outsideAngular)().pipe(En,ne(i=>i.payload.exists()?i.payload.val():null))}}}var Dee=new J("angularfire2.realtimeDatabaseURL"),Iee=new J("angularfire2.database.use-emulator"),hA=(()=>{class n{schedulers;database;constructor(t,i,r,s,o,a,l,c,d,h,f,p,y,_,w){this.schedulers=a;let A=l,x=zc(t,o,i);c&&lg(x,o,d,f,p,y,h,_),this.database=eh(`${x.name}.database.${r}`,"AngularFireDatabase",x.name,()=>{let M=o.runOutsideAngular(()=>x.database(r||void 0));return A&&M.useEmulator(...A),M},[A])}list(t,i){let r=this.schedulers.ngZone.runOutsideAngular(()=>vU(this.database,t)),s=r;return i&&(s=i(r)),Eee(s,this)}object(t){let i=this.schedulers.ngZone.runOutsideAngular(()=>vU(this.database,t));return Cee(i,this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(i){return new(i||n)(z(pl),z(gl,8),z(Dee,8),z($n),z(Fe),z(Xd),z(Iee,8),z(bv,8),z(ng,8),z(ig,8),z(rg,8),z(sg,8),z(og,8),z(ag,8),z(ha,8))};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),MU=(()=>{class n{constructor(){Jn.registerVersion("angularfire",hl.full,"rtdb-compat")}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Oe({type:n});static \u0275inj=Ne({providers:[hA]})}return n})();var yh=class n{constructor(e){this.db=e;this.product=e.list("/product")}product;addProduct(e){this.product.push(e)}updateProduct(e){let t=e.key;delete e.key,this.product.update(t,e)}getProduct(){return this.product}static \u0275fac=function(t){return new(t||n)(z(hA))};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})};function See(n,e){if(n&1&&($(0,"span",38),Q(1),j()),n&2){let t=rt();fe(),qa(" ",t.stockInfo.inStockDelivery," ")}}function Aee(n,e){if(n&1&&($(0,"span",39),Q(1),j()),n&2){let t=rt();fe(),qa(" ",t.stockInfo.outOfStockDelivery," ")}}function Mee(n,e){if(n&1&&($(0,"span",40),Q(1),j()),n&2){let t=rt();fe(),fr(t.stockInfo.inStock)}}function xee(n,e){if(n&1&&($(0,"span",41),Q(1),j()),n&2){let t=rt();fe(),fr(t.stockInfo.outOfStock)}}function Ree(n,e){if(n&1){let t=hr();$(0,"button",42),hi("click",function(){ji(t);let r=rt();return Ui(r.buyButtonClick())}),Q(1," V\xE1s\xE1rl\xE1s "),j()}if(n&2){let t=rt();Qo(t.stockInfo.buttonClass)}}function Nee(n,e){if(n&1&&($(0,"button",43),Q(1," V\xE1s\xE1rl\xE1s "),j()),n&2){let t=rt();Qo(t.stockInfo.buttonClass)}}function Oee(n,e){if(n&1&&($(0,"span",38),Q(1),j()),n&2){let t=rt();fe(),qa(" ",t.stockInfo.inStockDelivery," ")}}function Pee(n,e){if(n&1&&($(0,"span",39),Q(1),j()),n&2){let t=rt();fe(),qa(" ",t.stockInfo.outOfStockDelivery," ")}}function kee(n,e){if(n&1&&($(0,"span",40),Q(1),j()),n&2){let t=rt();fe(),fr(t.stockInfo.inStock)}}function Fee(n,e){if(n&1&&($(0,"span",41),Q(1),j()),n&2){let t=rt();fe(),fr(t.stockInfo.outOfStock)}}function Lee(n,e){if(n&1){let t=hr();$(0,"button",44),hi("click",function(){ji(t);let r=rt();return Ui(r.buyButtonClick())}),Q(1," V\xE1s\xE1rl\xE1s "),j()}if(n&2){let t=rt();Qo(t.stockInfo.buttonClass)}}function Vee(n,e){if(n&1&&($(0,"button",43),Q(1," V\xE1s\xE1rl\xE1s "),j()),n&2){let t=rt();Qo(t.stockInfo.buttonClass)}}var pw=class n{constructor(e){this.base=e;this.loadItems(this.product)}stockInfo={inStock:"K\xE9szleten",inStockDelivery:"2-4 munkanap",outOfStock:"Nincs k\xE9szleten",outOfStockDelivery:"2 h\xE9t",stock:0,buttonClass:"btn btn-primary"};columns=[{key:"name",label:"Ne\u0301v",type:"text"},{key:"stock",label:"Rakt\xE1rk\xE9szlet",type:"number"}];product=[];ngOnInit(){this.loadItems(this.product)}loadItems(e){this.base.getProduct().snapshotChanges().pipe(ne(t=>t.map(i=>q({key:i.payload.key},i.payload.val())))).subscribe(t=>{this.product=t,this.product.length>0&&(this.stockInfo.stock=this.product[0].stock||0)})}buyButtonClick(){this.stockInfo.stock==1&&(this.stockInfo.buttonClass="btn btn-primary-disabled"),this.stockInfo.stock--,window.location.href="https://buy.stripe.com/14kfZ750Hdlt2nC5kk"}updateProduct(e){this.base.updateProduct(e)}static \u0275fac=function(t){return new(t||n)(lt(yh))};static \u0275cmp=Bi({type:n,selectors:[["app-product"]],decls:126,vars:12,consts:[[1,"content"],[1,"container"],[1,"row"],[1,"col"],[1,"row","landing"],[1,"picture","col-2","desktop-only"],["src","/assets/images/trackcard.png","alt","SafeCard","id","trackcard-image",1,"TrackCard"],[1,"card","col","desktop-only"],[1,"product-main-block","warehouse-open-btn"],[1,"info"],[1,"delivery-info"],[1,"delivery-time"],["class","stock-status text-body-secondary",4,"ngIf"],["class","stock-status out text-body-secondary",4,"ngIf"],[1,"rc-summary-price-box"],[1,"rc-price"],[1,"rc-prices-currentprice","typography-label"],[1,"fullprice"],[1,"rc-prices-footer"],[1,"price-disclaimer"],[1,"text-body-secondary"],[1,"availability-info"],[1,"stock-status-wrapper"],["class","stock-status",4,"ngIf"],["class","stock-status out",4,"ngIf"],["id","checkout-button",3,"class","click",4,"ngIf"],["disabled","",3,"class",4,"ngIf"],[1,"row","landing","mobile-only"],[1,"picture","col"],["src","/assets/images/trackcard.png","alt","SafeCard",1,"TrackCard"],[1,"card","col"],[3,"class","click",4,"ngIf"],[1,"row","details"],[1,"line"],[1,"row","info"],["src","","alt",""],["role","list",1,"text-body-secondary"],["role","listitem"],[1,"stock-status","text-body-secondary"],[1,"stock-status","out","text-body-secondary"],[1,"stock-status"],[1,"stock-status","out"],["id","checkout-button",3,"click"],["disabled",""],[3,"click"]],template:function(t,i){t&1&&($(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1"),Q(5,"SafeCard"),j()()(),$(6,"div",4)(7,"div",5),Me(8,"img",6),j(),$(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"h3"),Q(14,"H\xE1zhozsz\xE1ll\xEDt\xE1s:"),j(),$(15,"div",11),ei(16,See,2,1,"span",12)(17,Aee,2,1,"span",13),j()(),$(18,"div",14)(19,"div",15)(20,"div",16)(21,"span",17),Q(22,"8\xA0990 Ft"),j()()(),$(23,"div",18)(24,"div",19)(25,"p",20),Q(26," A k\xE9sz\xFCl\xE9k teljes \xE1ra az \xE1f\xE1t is tartalmazza (nagyj\xE1b\xF3l 2\xA0425 Ft).* "),j()()()(),$(27,"div",21)(28,"span",22),ei(29,Mee,2,1,"span",23)(30,xee,2,1,"span",24),j()(),ei(31,Ree,2,3,"button",25)(32,Nee,2,3,"button",26),j()()()(),$(33,"div",27)(34,"div",28),Me(35,"img",29),j(),$(36,"div",30)(37,"div",8)(38,"div",9)(39,"div",10)(40,"h3"),Q(41,"H\xE1zhozsz\xE1ll\xEDt\xE1s:"),j(),$(42,"div",11),ei(43,Oee,2,1,"span",12)(44,Pee,2,1,"span",13),j()(),$(45,"div",14)(46,"div",15)(47,"div",16)(48,"span",17),Q(49,"8\xA0990 Ft"),j()()(),$(50,"div",18)(51,"div",19)(52,"p",20),Q(53," A k\xE9sz\xFCl\xE9k teljes \xE1ra az \xE1f\xE1t is tartalmazza (nagyj\xE1b\xF3l 2\xA0425 Ft).* "),j()()()(),$(54,"div",21)(55,"span",22),ei(56,kee,2,1,"span",23)(57,Fee,2,1,"span",24),j()(),ei(58,Lee,2,3,"button",31)(59,Vee,2,3,"button",26),j()()()(),$(60,"div",1)(61,"div",32)(62,"h2"),Q(63,"Term\xE9kinform\xE1ci\xF3k"),j(),Me(64,"div",33),$(65,"div",34)(66,"div",3)(67,"h3"),Q(68,"M\xE9ret"),j()(),$(69,"div",3),Me(70,"img",35),j()(),Me(71,"div",33),$(72,"div",34)(73,"div",3)(74,"h3"),Q(75,"Csatlakoztat\xE1si lehet\u0151s\xE9gek"),j()(),$(76,"div",3)(77,"ul",36)(78,"li",37),Q(79,"Bluetooth a k\xF6zels\xE9galap\xFA keres\xE9shez"),j()()()(),Me(80,"div",33),$(81,"div",34)(82,"div",3)(83,"h3"),Q(84,"Hangsz\xF3r\xF3"),j()(),$(85,"div",3)(86,"ul",36)(87,"li",37),Q(88,"Teljes\xEDtm\xE9nye: Maximum 100 Db"),j()()()(),Me(89,"div",33),$(90,"div",34)(91,"div",3)(92,"h3"),Q(93,"Akkumul\xE1tor"),j()(),$(94,"div",3)(95,"ul",36)(96,"li",37),Q(97,"T\xEDpusa: CR2016"),j(),$(98,"li",37),Q(99,"Fesz\xFClts\xE9g: 3 V"),j(),$(100,"li",37),Q(101,"Darabsz\xE1ma: 3"),j()()()(),Me(102,"div",33),$(103,"div",34)(104,"div",3)(105,"h3"),Q(106,"Rendszer\xAD-k\xF6vetelm\xE9nyek \xE9s kompatibilit\xE1s"),j()(),$(107,"div",3)(108,"ul",36)(109,"li",37),Q(110,"Apple\xA0ID"),j(),$(111,"li",37),Q(112,"iPhone vagy iPod\xA0touch iOS\xA014.5-\xF6s vagy \xFAjabb rendszerrel"),j(),$(113,"li",37),Q(114,"iPad iPadOS\xA014.5-\xF6s vagy \xFAjabb rendszerrel"),j()()()(),Me(115,"div",33),$(116,"div",34)(117,"div",3)(118,"h3"),Q(119,"A doboz tartalma"),j()(),$(120,"div",3)(121,"ul",20)(122,"li"),Q(123,"SafeCard"),j(),$(124,"li"),Q(125,"Dokument\xE1ci\xF3"),j()()()()()()()()),t&2&&(fe(16),Ae("ngIf",i.stockInfo.stock>0),fe(),Ae("ngIf",i.stockInfo.stock==0),fe(12),Ae("ngIf",i.stockInfo.stock>0),fe(),Ae("ngIf",i.stockInfo.stock==0),fe(),Ae("ngIf",i.stockInfo.stock>0),fe(),Ae("ngIf",i.stockInfo.stock==0),fe(11),Ae("ngIf",i.stockInfo.stock>0),fe(),Ae("ngIf",i.stockInfo.stock==0),fe(12),Ae("ngIf",i.stockInfo.stock>0),fe(),Ae("ngIf",i.stockInfo.stock==0),fe(),Ae("ngIf",i.stockInfo.stock>0),fe(),Ae("ngIf",i.stockInfo.stock==0))},dependencies:[e0],styles:[".content[_ngcontent-%COMP%]{padding-top:5vw;font-family:VolteRounded-Bold}.landing[_ngcontent-%COMP%]{padding-top:.5rem}.landing[_ngcontent-%COMP%]   .picture[_ngcontent-%COMP%]{padding-top:2rem;width:50%}.price-disclaimer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:color(srgb red green blue)}.content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:4rem}.details[_ngcontent-%COMP%]{margin-top:5vw}.details[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{margin-top:2vw}.line[_ngcontent-%COMP%]{border-top:2px solid rgb(147,147,147);width:99%;margin:2rem auto}.info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:0;padding-bottom:0}.delivery-time[_ngcontent-%COMP%]{margin-top:0;padding-top:0}.delivery-info[_ngcontent-%COMP%]{margin-bottom:20px}.delivery-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0}.desktop-only[_ngcontent-%COMP%]   .TrackCard[_ngcontent-%COMP%]{height:70%!important}.landing[_ngcontent-%COMP%]   .picture[_ngcontent-%COMP%]{margin-left:80px}.desktop-only[_ngcontent-%COMP%]   .picture[_ngcontent-%COMP%]   .TrackCard[_ngcontent-%COMP%]{margin:20px auto 0}.details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:VolteRounded-Bold}.card[_ngcontent-%COMP%]{background-color:#f5f5f7;border-radius:20px;width:fit-content;margin:30px auto;border-width:0;padding:50px;box-shadow:0 0 10px #0003;height:fit-content;font-family:VolteRounded-Bold;font-size:20px;font-style:normal;top:10%;width:50%}.fullprice[_ngcontent-%COMP%]{font-size:32px}.text-body-secondary[_ngcontent-%COMP%]{font-size:1em;font-family:VolteRounded-Bold}.text-body-secondary[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:1em;list-style-type:none;padding-left:0}.col-3[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;line-height:1.16667}button[_ngcontent-%COMP%]{width:100%}.mobile-only[_ngcontent-%COMP%]{display:none}.desktop-only[_ngcontent-%COMP%]{display:block}@media screen and (max-width: 1000px){.card[_ngcontent-%COMP%]{padding:20px;width:90%}.TrackCard[_ngcontent-%COMP%]{width:90%;margin:0 auto}.picture[_ngcontent-%COMP%]{width:90%;margin:0 auto;margin-top:2rem}.container[_ngcontent-%COMP%]{width:98%}.col-3[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}.title[_ngcontent-%COMP%]{font-size:10px}.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:block}}"]})};var VU=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(i){return new(i||n)(lt(mc),lt(Ci))}}static{this.\u0275dir=Tr({type:n})}}return n})(),Bee=(()=>{class n extends VU{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=fd(n)))(r||n)}})()}static{this.\u0275dir=Tr({type:n,features:[_c]})}}return n})(),BU=new J("");var jee={provide:BU,useExisting:ud(()=>vw),multi:!0};function Uee(){let n=no()?no().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var $ee=new J(""),vw=(()=>{class n extends VU{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Uee())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(i){return new(i||n)(lt(mc),lt(Ci),lt($ee,8))}}static{this.\u0275dir=Tr({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&hi("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[Vy([jee]),_c]})}}return n})();var Hee=new J(""),zee=new J("");function jU(n){return n!=null}function UU(n){return vc(n)?at(n):n}function $U(n){let e={};return n.forEach(t=>{e=t!=null?q(q({},e),t):e}),Object.keys(e).length===0?null:e}function HU(n,e){return e.map(t=>t(n))}function Gee(n){return!n.validate}function zU(n){return n.map(e=>Gee(e)?e:t=>e.validate(t))}function Wee(n){if(!n)return null;let e=n.filter(jU);return e.length==0?null:function(t){return $U(HU(t,e))}}function GU(n){return n!=null?Wee(zU(n)):null}function qee(n){if(!n)return null;let e=n.filter(jU);return e.length==0?null:function(t){let i=HU(t,e).map(UU);return RE(i).pipe(ne($U))}}function WU(n){return n!=null?qee(zU(n)):null}function RU(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Kee(n){return n._rawValidators}function Qee(n){return n._rawAsyncValidators}function fA(n){return n?Array.isArray(n)?n:[n]:[]}function mw(n,e){return Array.isArray(n)?n.includes(e):n===e}function NU(n,e){let t=fA(e);return fA(n).forEach(r=>{mw(t,r)||t.push(r)}),t}function OU(n,e){return fA(e).filter(t=>!mw(n,t))}var _w=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=GU(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=WU(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},pA=class extends _w{get formDirective(){return null}get path(){return null}},Wg=class extends _w{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},gA=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Yee={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},bge=ke(q({},Yee),{"[class.ng-submitted]":"isSubmitted"}),qU=(()=>{class n extends gA{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(lt(Wg,2))}}static{this.\u0275dir=Tr({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&_d("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[_c]})}}return n})();var $g="VALID",gw="INVALID",vh="PENDING",Hg="DISABLED",bh=class{},yw=class extends bh{constructor(e,t){super(),this.value=e,this.source=t}},zg=class extends bh{constructor(e,t){super(),this.pristine=e,this.source=t}},Gg=class extends bh{constructor(e,t){super(),this.touched=e,this.source=t}},wh=class extends bh{constructor(e,t){super(),this.status=e,this.source=t}};function Jee(n){return(ww(n)?n.validators:n)||null}function Zee(n){return Array.isArray(n)?GU(n):n||null}function Xee(n,e){return(ww(e)?e.asyncValidators:n)||null}function ete(n){return Array.isArray(n)?WU(n):n||null}function ww(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var mA=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Qy(()=>this.statusReactive()),this.statusReactive=ky(void 0),this._pristine=Qy(()=>this.pristineReactive()),this.pristineReactive=ky(!0),this._touched=Qy(()=>this.touchedReactive()),this.touchedReactive=ky(!1),this._events=new yt,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Ka(this.statusReactive)}set status(e){Ka(()=>this.statusReactive.set(e))}get valid(){return this.status===$g}get invalid(){return this.status===gw}get pending(){return this.status==vh}get disabled(){return this.status===Hg}get enabled(){return this.status!==Hg}get pristine(){return Ka(this.pristineReactive)}set pristine(e){Ka(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Ka(this.touchedReactive)}set touched(e){Ka(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(NU(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(NU(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(OU(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(OU(e,this._rawAsyncValidators))}hasValidator(e){return mw(this._rawValidators,e)}hasAsyncValidator(e){return mw(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ke(q({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Gg(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new Gg(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ke(q({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new zg(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new zg(!0,i))}markAsPending(e={}){this.status=vh;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new wh(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ke(q({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Hg,this.errors=null,this._forEachChild(r=>{r.disable(ke(q({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new yw(this.value,i)),this._events.next(new wh(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ke(q({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=$g,this._forEachChild(i=>{i.enable(ke(q({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ke(q({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===$g||this.status===vh)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new yw(this.value,t)),this._events.next(new wh(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ke(q({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Hg:$g}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=vh,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=UU(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new wh(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new en,this.statusChanges=new en}_calculateStatus(){return this._allControlsDisabled()?Hg:this.errors?gw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(vh)?vh:this._anyControlsHaveStatus(gw)?gw:$g}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new zg(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Gg(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ww(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Zee(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=ete(this._rawAsyncValidators)}};var KU=new J("CallSetDisabledState",{providedIn:"root",factory:()=>_A}),_A="always";function tte(n,e){return[...e.path,n]}function nte(n,e,t=_A){rte(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),ste(n,e),ate(n,e),ote(n,e),ite(n,e)}function PU(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ite(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function rte(n,e){let t=Kee(n);e.validator!==null?n.setValidators(RU(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=Qee(n);e.asyncValidator!==null?n.setAsyncValidators(RU(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();PU(e._rawValidators,r),PU(e._rawAsyncValidators,r)}function ste(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&QU(n,e)})}function ote(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&QU(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function QU(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function ate(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function lte(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function cte(n){return Object.getPrototypeOf(n.constructor)===Bee}function ute(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(s=>{s.constructor===vw?t=s:cte(s)?i=s:r=s}),r||i||t||null}function kU(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function FU(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var dte=class extends mA{constructor(e=null,t,i){super(Jee(t),Xee(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ww(t)&&(t.nonNullable||t.initialValueIsDefault)&&(FU(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){kU(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){kU(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){FU(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var hte={provide:Wg,useExisting:ud(()=>yA)},LU=Promise.resolve(),yA=(()=>{class n extends Wg{constructor(t,i,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new dte,this._registered=!1,this.name="",this.update=new en,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=ute(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),lte(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){nte(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){LU.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&Ky(i);LU.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?tte(t,this._parent):[t]}static{this.\u0275fac=function(i){return new(i||n)(lt(pA,9),lt(Hee,10),lt(zee,10),lt(BU,10),lt(Yo,8),lt(KU,8))}}static{this.\u0275dir=Tr({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Vy([hte]),_c,fc]})}}return n})();var fte=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Ne({})}}return n})();var YU=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:KU,useValue:t.callSetDisabledState??_A}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Ne({imports:[fte]})}}return n})();function gte(n,e){if(n&1&&($(0,"div",4),Q(1),j()),n&2){let t=e.$implicit;fe(),fr(t.text)}}function mte(n,e){if(n&1){let t=hr();Hf(0),$(1,"textarea",9),vd("ngModelChange",function(r){ji(t);let s=rt().$implicit,o=rt();return Gf(o.newProduct[s.key],r)||(o.newProduct[s.key]=r),Ui(r)}),j(),zf()}if(n&2){let t=rt().$implicit,i=rt();fe(),yd("ngModel",i.newProduct[t.key])}}function _te(n,e){if(n&1){let t=hr();$(0,"input",10),vd("ngModelChange",function(r){ji(t);let s=rt().$implicit,o=rt();return Gf(o.newProduct[s.key],r)||(o.newProduct[s.key]=r),Ui(r)}),j()}if(n&2){let t=rt().$implicit,i=rt();yd("ngModel",i.newProduct[t.key]),Ae("type",t.type)}}function yte(n,e){if(n&1&&($(0,"div",4),ei(1,mte,2,1,"ng-container",8)(2,_te,1,2,"ng-template",null,0,jy),j()),n&2){let t=e.$implicit,i=Ly(3);fe(),Ae("ngIf",t.type=="textarea")("ngIfElse",i)}}function vte(n,e){if(n&1){let t=hr();Hf(0),$(1,"textarea",9),vd("ngModelChange",function(r){ji(t);let s=rt().$implicit,o=rt().$implicit;return Gf(o[s.key],r)||(o[s.key]=r),Ui(r)}),j(),zf()}if(n&2){let t=rt().$implicit,i=rt().$implicit;fe(),yd("ngModel",i[t.key])}}function wte(n,e){if(n&1){let t=hr();$(0,"input",10),vd("ngModelChange",function(r){ji(t);let s=rt().$implicit,o=rt().$implicit;return Gf(o[s.key],r)||(o[s.key]=r),Ui(r)}),j()}if(n&2){let t=rt().$implicit,i=rt().$implicit;yd("ngModel",i[t.key]),Ae("type",t.type)}}function bte(n,e){if(n&1&&($(0,"div",4),ei(1,vte,2,1,"ng-container",8)(2,wte,1,2,"ng-template",null,0,jy),j()),n&2){let t=e.$implicit,i=Ly(3);fe(),Ae("ngIf",t.type=="textarea")("ngIfElse",i)}}function Ete(n,e){if(n&1){let t=hr();$(0,"div",11),ei(1,bte,4,2,"div",3),$(2,"div",4)(3,"button",6),hi("click",function(){let r=ji(t).$implicit,s=rt();return Ui(s.updatedProduct(r))}),Q(4,"Ment"),j()()()}if(n&2){let t=rt();fe(),Ae("ngForOf",t.columns)}}var bw=class n{constructor(e){this.base=e;this.base.getProduct().snapshotChanges().pipe(ne(t=>t.map(i=>q({key:i.payload.key},i.payload.val())))).subscribe(t=>this.products=t)}products=[];newProduct={};columns=[{key:"name",label:"Ne\u0301v",type:"text"},{key:"stock",label:"Rakt\xE1rk\xE9szlet",type:"number"}];addProduct(){this.base.addProduct(this.newProduct),this.newProduct={}}updatedProduct(e){this.base.updateProduct(e)}static \u0275fac=function(t){return new(t||n)(lt(yh))};static \u0275cmp=Bi({type:n,selectors:[["app-manage-product"]],decls:11,vars:3,consts:[["simainput",""],[1,"container"],[1,"row","my-3","fw-bold"],["class","col",4,"ngFor","ngForOf"],[1,"col"],[1,"row","my-3"],["type","button",1,"btn","btn-primary",3,"click"],["class","row",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["rows","3",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel","type"],[1,"row"]],template:function(t,i){t&1&&($(0,"div",1)(1,"div",2),ei(2,gte,2,1,"div",3),$(3,"div",4),Q(4,"M\u0171veletek"),j()(),$(5,"div",5),ei(6,yte,4,2,"div",3),$(7,"div",4)(8,"button",6),hi("click",function(){return i.addProduct()}),Q(9,"Hozz\xE1ad"),j()()(),ei(10,Ete,5,1,"div",7),j()),t&2&&(fe(2),Ae("ngForOf",i.columns),fe(4),Ae("ngForOf",i.columns),fe(4),Ae("ngForOf",i.products))},dependencies:[Xy,e0,vw,qU,yA],styles:[".container[_ngcontent-%COMP%]{padding-top:4vw}"]})};var Cte=[{path:"home",component:mv},{path:"product",component:pw},{path:"manage",component:bw},{path:"**",redirectTo:"home"}],Ew=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=Oe({type:n});static \u0275inj=Ne({imports:[HD.forRoot(Cte),HD]})};var Dte=n=>({active:n}),Ite=n=>({open:n});function Tte(n,e){if(n&1){let t=hr();$(0,"li",8)(1,"a",9),hi("click",function(){let r=ji(t).$implicit,s=rt();return s.toggleNavbar(),Ui(s.navigateto(r.path))}),Q(2),j()()}if(n&2){let t=e.$implicit;fe(2),fr(t.text)}}var Cw=class n{constructor(e){this.router=e}isNavbarOpen=!1;dropDownNavCollapse=!0;hamburgerActive=!1;navItems=[{path:"home",text:"F\u0151oldal"},{path:"product",text:"V\xE1s\xE1rl\xE1s"},{path:"manage",text:"Manage"}];toggleNavbar(){this.isNavbarOpen=!this.isNavbarOpen,this.hamburgerActive=!this.hamburgerActive}navigateto(e){this.router.navigate([e])}static \u0275fac=function(t){return new(t||n)(lt(Ms))};static \u0275cmp=Bi({type:n,selectors:[["app-navbar"]],decls:10,vars:7,consts:[["id","navPrimary",1,"navbar","navbar-expand-lg"],[1,"container-fluid"],[1,"navbar-brand"],["type","button",1,"hamburger",3,"click","ngClass"],[1,"line"],["id","navbarSupportedContent",1,"navbar-collapse",3,"ngClass"],[1,"navbar-nav"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],[1,"nav-link",3,"click"]],template:function(t,i){t&1&&($(0,"nav",0)(1,"div",1)(2,"a",2),Q(3,"SafeCard"),j(),$(4,"button",3),hi("click",function(){return i.toggleNavbar()}),Me(5,"span",4)(6,"span",4),j(),$(7,"div",5)(8,"ul",6),ei(9,Tte,3,1,"li",7),j()()()()),t&2&&(fe(4),Ae("ngClass",By(3,Dte,i.hamburgerActive)),fe(3),Ae("ngClass",By(5,Ite,i.isNavbarOpen)),fe(2),Ae("ngForOf",i.navItems))},dependencies:[SF,Xy],styles:["#navPrimary[_ngcontent-%COMP%]{padding:0;background-color:#171717cc;position:fixed;top:0;width:100%;z-index:1000;-webkit-backdrop-filter:blur(7px);backdrop-filter:blur(7px)}#navPrimary[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-family:Secondary-Font-Bold,NotoSans-Bold,sans-serif;line-height:3.3rem;text-align:center;font-weight:400;color:#fff;font-size:20px;padding:8px 16px;text-decoration:none;cursor:pointer;transition:background-color .3s}#navPrimary[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{background-color:#fff;color:#171717cc}.navbar-brand[_ngcontent-%COMP%]{font-family:Secondary-Font-Bold,NotoSans-Bold,sans-serif;line-height:3.3rem;text-align:center;font-weight:600;color:#fff;font-size:20px;padding:8px 16px;text-decoration:none;cursor:pointer;transition:background-color .3s}.navbar-brand[_ngcontent-%COMP%]:hover{color:#fff}@media (max-width: 991px){.navbar-brand[_ngcontent-%COMP%]{line-height:3.3rem}.navbar-collapse[_ngcontent-%COMP%]{height:0;opacity:0;transform:translateY(-20px);transition:height .5s ease,opacity .8s ease,transform .5s ease;overflow:hidden}.navbar-collapse.open[_ngcontent-%COMP%]{height:1000px;opacity:1;transform:translateY(0)}button[_ngcontent-%COMP%]{border:0;line-height:3.3rem}.hamburger[_ngcontent-%COMP%]{background-color:transparent;border:none;outline:none;cursor:pointer}.hamburger[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{display:block;width:30px;height:3px;background-color:#fff;margin-block:10px;border-radius:4px;transition:transform .2s,opacity .2s}.hamburger.active[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]:nth-child(1){transform:translateY(7px) rotate(45deg)}.hamburger.active[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]:nth-child(2){transform:translateY(-7px) rotate(-45deg)}li[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{width:100%;text-align:center;margin:0 auto}.nav-link[_ngcontent-%COMP%]{display:block;width:100%;margin:0 auto;padding:10px 0;text-align:center;opacity:100%}.navbar-toggler[_ngcontent-%COMP%]{display:block}.navbar-langselect[_ngcontent-%COMP%]{margin:0 auto;justify-content:center}.dropdown-item[_ngcontent-%COMP%]{font-size:20px}.dropdown-menu.show[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline;width:100%;font-size:20px}.dropdown-menu[_ngcontent-%COMP%]{background:none;max-height:0;opacity:0;transform:translateY(-20px);transition:max-height .5s ease,opacity .5s ease,transform .5s ease;overflow:hidden}.dropdown-menu.show[_ngcontent-%COMP%]{position:relative;max-height:800px;opacity:1;transform:translateY(0)}}@media (min-width: 992px){.navbar-toggler[_ngcontent-%COMP%], .hamburger[_ngcontent-%COMP%]{display:none}.navbar-collapse[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}}"]})};var Dw=class n{title="SafeCard";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Bi({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,i){t&1&&Me(0,"app-navbar")(1,"router-outlet")},dependencies:[LD,Cw],styles:['@font-face{font-family:VolteRounded-Bold;src:url(/assets/fonts/VolteRounded-Bold.otf) format("truetype")}@font-face{font-family:VolteRounded;src:url(/assets/fonts/VolteRounded-Bold.otf) format("truetype")}@font-face{font-family:VolteRounded;src:url(/assets/fonts/VolteRounded-Bold.otf) format("truetype");font-weight:lighter}app-navbar[_ngcontent-%COMP%]{height:3.3rem;margin-bottom:3.3vw}router-outlet[_ngcontent-%COMP%]{padding-top:3.3vw}app-router-outlet[_ngcontent-%COMP%]{font-family:VolteRounded-Bold}']})};var Ate=["*"];var Mte=["dialog"];var JU={animation:!0,transitionTimerDelayMs:5},xte=(()=>{class n{constructor(){this.animation=JU.animation}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Rte(n){let{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n),i=parseFloat(e),r=parseFloat(t);return(i+r)*1e3}function ZU(n){return typeof n=="string"}function vA(n){return n!=null}function Nte(n){return n&&n.then}function XU(n){return(n||document.body).getBoundingClientRect()}function Ote(n){return e=>new ge(t=>{let i=o=>n.run(()=>t.next(o)),r=o=>n.run(()=>t.error(o)),s=()=>n.run(()=>t.complete());return e.subscribe({next:i,error:r,complete:s})})}var Pte=()=>{},{transitionTimerDelayMs:kte}=JU,Iw=new Map,eu=(n,e,t,i)=>{let r=i.context||{},s=Iw.get(e);if(s)switch(i.runningTransition){case"continue":return jn;case"stop":n.run(()=>s.transition$.complete()),r=Object.assign(s.context,r),Iw.delete(e)}let o=t(e,i.animation,r)||Pte;if(!i.animation||window.getComputedStyle(e).transitionProperty==="none")return n.run(()=>o()),se(void 0).pipe(Ote(n));let a=new yt,l=new yt,c=a.pipe(kE(!0));Iw.set(e,{transition$:a,complete:()=>{l.next(),l.complete()},context:r});let d=Rte(e);return n.runOutsideAngular(()=>{let h=qr(e,"transitionend").pipe(bi(c),Kt(({target:p})=>p===e)),f=NE(d+kte).pipe(bi(c));OE(f,h,l).pipe(bi(c)).subscribe(()=>{Iw.delete(e),n.run(()=>{o(),a.next(),a.complete()})})}),a.asObservable()};var e3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Ne({})}}return n})();var t3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Ne({})}}return n})();var n3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Ne({})}}return n})(),i3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Ne({})}}return n})();var yme=(()=>{let n=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,e=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(n()||e()):!1})();var Fte=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function r3(n){let e=Array.from(n.querySelectorAll(Fte)).filter(t=>t.tabIndex!==-1);return[e[0],e[e.length-1]]}var Lte=(n,e,t,i=!1)=>{n.runOutsideAngular(()=>{let r=qr(e,"focusin").pipe(bi(t),ne(s=>s.target));qr(e,"keydown").pipe(bi(t),Kt(s=>s.key==="Tab"),Wu(r)).subscribe(([s,o])=>{let[a,l]=r3(e);(o===a||o===e)&&s.shiftKey&&(l.focus(),s.preventDefault()),o===l&&!s.shiftKey&&(a.focus(),s.preventDefault())}),i&&qr(e,"click").pipe(bi(t),Wu(r),ne(s=>s[1])).subscribe(s=>s.focus())})};var vme=new Date(1882,10,12),wme=new Date(2174,10,25);var bme=1e3*60*60*24;var EA=1080,Vte=24*EA,Bte=12*EA+793,Eme=29*Vte+Bte,Cme=11*EA+204;var s3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Ne({})}}return n})();var o3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Ne({})}}return n})(),jte=(()=>{class n{constructor(){this._ngbConfig=H(xte),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(t){this._animation=t}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Eh=class{constructor(e,t,i){this.nodes=e,this.viewRef=t,this.componentRef=i}};var Ute=(()=>{class n{constructor(){this._document=H(Rn)}hide(){let t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,r=i.style,{overflow:s,paddingRight:o}=r;if(t>0){let a=parseFloat(window.getComputedStyle(i).paddingRight);r.paddingRight=`${a+t}px`}return r.overflow="hidden",()=>{t>0&&(r.paddingRight=o),r.overflow=s}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),$te=(()=>{class n{constructor(){this._nativeElement=H(Ci).nativeElement,this._zone=H(Fe)}ngOnInit(){this._zone.onStable.asObservable().pipe(cr(1)).subscribe(()=>{eu(this._zone,this._nativeElement,(t,i)=>{i&&XU(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return eu(this._zone,this._nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=Bi({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(i,r){i&2&&(Qo("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),_d("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[Wf],decls:0,vars:0,template:function(i,r){},encapsulation:2})}}return n})(),Tw=class{update(e){}close(e){}dismiss(e){}},Hte=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],zte=["animation","backdropClass"],wA=class{_applyWindowOptions(e,t){Hte.forEach(i=>{vA(t[i])&&(e[i]=t[i])})}_applyBackdropOptions(e,t){zte.forEach(i=>{vA(t[i])&&(e[i]=t[i])})}update(e){this._applyWindowOptions(this._windowCmptRef.instance,e),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,e)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(bi(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(bi(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(e,t,i,r){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new yt,this._dismissed=new yt,this._hidden=new yt,e.instance.dismissEvent.subscribe(s=>{this.dismiss(s)}),this.result=new Promise((s,o)=>{this._resolve=s,this._reject=o}),this.result.then(null,()=>{})}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(e);else{let t=this._beforeDismiss();Nte(t)?t.then(i=>{i!==!1&&this._dismiss(e)},()=>{}):t!==!1&&this._dismiss(e)}}_removeModalElements(){let e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():se(void 0);e.subscribe(()=>{let{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef?.viewRef?.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Tf(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},bA=function(n){return n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",n}(bA||{}),Gte=(()=>{class n{constructor(){this._document=H(Rn),this._elRef=H(Ci),this._zone=H(Fe),this._closed$=new yt,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new en,this.shown=new yt,this.hidden=new yt}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":ZU(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(cr(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:t}=this._elRef,i={animation:this.animation,runningTransition:"stop"},r=eu(this._zone,t,()=>t.classList.remove("show"),i),s=eu(this._zone,this._dialogEl.nativeElement,()=>{},i),o=Tf(r,s);return o.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),o}_show(){let t={animation:this.animation,runningTransition:"continue"},i=eu(this._zone,this._elRef.nativeElement,(s,o)=>{o&&XU(s),s.classList.add("show")},t),r=eu(this._zone,this._dialogEl.nativeElement,()=>{},t);Tf(i,r).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{qr(t,"keydown").pipe(bi(this._closed$),Kt(r=>r.key==="Escape")).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(bA.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let i=!1;qr(this._dialogEl.nativeElement,"mousedown").pipe(bi(this._closed$),fn(()=>i=!1),xt(()=>qr(t,"mouseup").pipe(bi(this._closed$),cr(1))),Kt(({target:r})=>t===r)).subscribe(()=>{i=!0}),qr(t,"click").pipe(bi(this._closed$)).subscribe(({target:r})=>{t===r&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!i&&this._zone.run(()=>this.dismiss(bA.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){let i=t.querySelector("[ngbAutofocus]"),r=r3(t)[0];(i||r||t).focus()}}_restoreFocus(){let t=this._document.body,i=this._elWithFocus,r;i&&i.focus&&t.contains(i)?r=i:r=t,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&eu(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=Bi({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(i,r){if(i&1&&iF(Mte,7),i&2){let s;xC(s=RC())&&(r._dialogEl=s.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(i,r){i&2&&($f("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),Qo("modal d-block"+(r.windowClass?" "+r.windowClass:"")),_d("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[Wf],ngContentSelectors:Ate,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(i,r){i&1&&(tF(),$(0,"div",1,0)(2,"div",2),nF(3),j()()),i&2&&Qo("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2})}}return n})(),Wte=(()=>{class n{constructor(){this._applicationRef=H(Ss),this._injector=H(di),this._environmentInjector=H(Xn),this._document=H(Rn),this._scrollBar=H(Ute),this._activeWindowCmptHasChanged=new yt,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new en;let t=H(Fe);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let i=this._windowCmpts[this._windowCmpts.length-1];Lte(t,i.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(i.location.nativeElement)}})}_restoreScrollBar(){let t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,i,r){let s=r.container instanceof HTMLElement?r.container:vA(r.container)?this._document.querySelector(r.container):this._document.body;if(!s)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let o=new Tw;t=r.injector||t;let a=t.get(Xn,null)||this._environmentInjector,l=this._getContentRef(t,a,i,o,r),c=r.backdrop!==!1?this._attachBackdrop(s):void 0,d=this._attachWindowComponent(s,l.nodes),h=new wA(d,l,c,r.beforeDismiss);return this._registerModalRef(h),this._registerWindowCmpt(d),h.hidden.pipe(cr(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),o.close=f=>{h.close(f)},o.dismiss=f=>{h.dismiss(f)},o.update=f=>{h.update(f)},h.update(r),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),c&&c.instance&&c.changeDetectorRef.detectChanges(),d.changeDetectorRef.detectChanges(),h}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(i=>i.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t){let i=Yy($te,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(i.hostView),t.appendChild(i.location.nativeElement),i}_attachWindowComponent(t,i){let r=Yy(Gte,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:i});return this._applicationRef.attachView(r.hostView),t.appendChild(r.location.nativeElement),r}_getContentRef(t,i,r,s,o){return r?r instanceof Uo?this._createFromTemplateRef(r,s):ZU(r)?this._createFromString(r):this._createFromComponent(t,i,r,s,o):new Eh([])}_createFromTemplateRef(t,i){let r={$implicit:i,close(o){i.close(o)},dismiss(o){i.dismiss(o)}},s=t.createEmbeddedView(r);return this._applicationRef.attachView(s),new Eh([s.rootNodes],s)}_createFromString(t){let i=this._document.createTextNode(`${t}`);return new Eh([[i]])}_createFromComponent(t,i,r,s,o){let a=di.create({providers:[{provide:Tw,useValue:s}],parent:t}),l=Yy(r,{environmentInjector:i,elementInjector:a}),c=l.location.nativeElement;return o.scrollable&&c.classList.add("component-host-scrollable"),this._applicationRef.attachView(l.hostView),new Eh([[c]],l.hostView,l)}_setAriaHidden(t){let i=t.parentElement;i&&t!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==t&&r.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,i)=>{t?i.setAttribute("aria-hidden",t):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){let i=()=>{let r=this._modalRefs.indexOf(t);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(i,i)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{let i=this._windowCmpts.indexOf(t);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),qte=(()=>{class n{constructor(){this._injector=H(di),this._modalStack=H(Wte),this._config=H(jte)}open(t,i={}){let r=q(ke(q({},this._config),{animation:this._config.animation}),i);return this._modalStack.open(this._injector,t,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),a3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Ne({providers:[qte]})}}return n})();var l3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Ne({})}}return n})();var c3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Ne({})}}return n})();var u3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Ne({})}}return n})();var d3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Ne({})}}return n})();var h3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Ne({})}}return n})();var f3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Ne({})}}return n})();var p3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Ne({})}}return n})();var g3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Ne({})}}return n})();var m3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Ne({})}}return n})();var Dme=new J("live announcer delay",{providedIn:"root",factory:()=>100});var _3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Ne({})}}return n})();var y3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Ne({})}}return n})(),Kte=[e3,t3,n3,i3,s3,o3,a3,l3,y3,c3,u3,d3,h3,f3,p3,g3,m3,_3],v3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Oe({type:n})}static{this.\u0275inj=Ne({imports:[Kte,e3,t3,n3,i3,s3,o3,a3,l3,y3,c3,u3,d3,h3,f3,p3,g3,m3,_3]})}}return n})();var w3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},b3={};var Il,CA;(function(){var n;function e(C,b){function v(){}v.prototype=b.prototype,C.D=b.prototype,C.prototype=new v,C.prototype.constructor=C,C.C=function(E,S,I){for(var T=Array(arguments.length-2),le=2;le<arguments.length;le++)T[le-2]=arguments[le];return b.prototype[S].apply(E,T)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(C,b,v){v||(v=0);var E=Array(16);if(typeof b=="string")for(var S=0;16>S;++S)E[S]=b.charCodeAt(v++)|b.charCodeAt(v++)<<8|b.charCodeAt(v++)<<16|b.charCodeAt(v++)<<24;else for(S=0;16>S;++S)E[S]=b[v++]|b[v++]<<8|b[v++]<<16|b[v++]<<24;b=C.g[0],v=C.g[1],S=C.g[2];var I=C.g[3],T=b+(I^v&(S^I))+E[0]+3614090360&4294967295;b=v+(T<<7&4294967295|T>>>25),T=I+(S^b&(v^S))+E[1]+3905402710&4294967295,I=b+(T<<12&4294967295|T>>>20),T=S+(v^I&(b^v))+E[2]+606105819&4294967295,S=I+(T<<17&4294967295|T>>>15),T=v+(b^S&(I^b))+E[3]+3250441966&4294967295,v=S+(T<<22&4294967295|T>>>10),T=b+(I^v&(S^I))+E[4]+4118548399&4294967295,b=v+(T<<7&4294967295|T>>>25),T=I+(S^b&(v^S))+E[5]+1200080426&4294967295,I=b+(T<<12&4294967295|T>>>20),T=S+(v^I&(b^v))+E[6]+2821735955&4294967295,S=I+(T<<17&4294967295|T>>>15),T=v+(b^S&(I^b))+E[7]+4249261313&4294967295,v=S+(T<<22&4294967295|T>>>10),T=b+(I^v&(S^I))+E[8]+1770035416&4294967295,b=v+(T<<7&4294967295|T>>>25),T=I+(S^b&(v^S))+E[9]+2336552879&4294967295,I=b+(T<<12&4294967295|T>>>20),T=S+(v^I&(b^v))+E[10]+4294925233&4294967295,S=I+(T<<17&4294967295|T>>>15),T=v+(b^S&(I^b))+E[11]+2304563134&4294967295,v=S+(T<<22&4294967295|T>>>10),T=b+(I^v&(S^I))+E[12]+1804603682&4294967295,b=v+(T<<7&4294967295|T>>>25),T=I+(S^b&(v^S))+E[13]+4254626195&4294967295,I=b+(T<<12&4294967295|T>>>20),T=S+(v^I&(b^v))+E[14]+2792965006&4294967295,S=I+(T<<17&4294967295|T>>>15),T=v+(b^S&(I^b))+E[15]+1236535329&4294967295,v=S+(T<<22&4294967295|T>>>10),T=b+(S^I&(v^S))+E[1]+4129170786&4294967295,b=v+(T<<5&4294967295|T>>>27),T=I+(v^S&(b^v))+E[6]+3225465664&4294967295,I=b+(T<<9&4294967295|T>>>23),T=S+(b^v&(I^b))+E[11]+643717713&4294967295,S=I+(T<<14&4294967295|T>>>18),T=v+(I^b&(S^I))+E[0]+3921069994&4294967295,v=S+(T<<20&4294967295|T>>>12),T=b+(S^I&(v^S))+E[5]+3593408605&4294967295,b=v+(T<<5&4294967295|T>>>27),T=I+(v^S&(b^v))+E[10]+38016083&4294967295,I=b+(T<<9&4294967295|T>>>23),T=S+(b^v&(I^b))+E[15]+3634488961&4294967295,S=I+(T<<14&4294967295|T>>>18),T=v+(I^b&(S^I))+E[4]+3889429448&4294967295,v=S+(T<<20&4294967295|T>>>12),T=b+(S^I&(v^S))+E[9]+568446438&4294967295,b=v+(T<<5&4294967295|T>>>27),T=I+(v^S&(b^v))+E[14]+3275163606&4294967295,I=b+(T<<9&4294967295|T>>>23),T=S+(b^v&(I^b))+E[3]+4107603335&4294967295,S=I+(T<<14&4294967295|T>>>18),T=v+(I^b&(S^I))+E[8]+1163531501&4294967295,v=S+(T<<20&4294967295|T>>>12),T=b+(S^I&(v^S))+E[13]+2850285829&4294967295,b=v+(T<<5&4294967295|T>>>27),T=I+(v^S&(b^v))+E[2]+4243563512&4294967295,I=b+(T<<9&4294967295|T>>>23),T=S+(b^v&(I^b))+E[7]+1735328473&4294967295,S=I+(T<<14&4294967295|T>>>18),T=v+(I^b&(S^I))+E[12]+2368359562&4294967295,v=S+(T<<20&4294967295|T>>>12),T=b+(v^S^I)+E[5]+4294588738&4294967295,b=v+(T<<4&4294967295|T>>>28),T=I+(b^v^S)+E[8]+2272392833&4294967295,I=b+(T<<11&4294967295|T>>>21),T=S+(I^b^v)+E[11]+1839030562&4294967295,S=I+(T<<16&4294967295|T>>>16),T=v+(S^I^b)+E[14]+4259657740&4294967295,v=S+(T<<23&4294967295|T>>>9),T=b+(v^S^I)+E[1]+2763975236&4294967295,b=v+(T<<4&4294967295|T>>>28),T=I+(b^v^S)+E[4]+1272893353&4294967295,I=b+(T<<11&4294967295|T>>>21),T=S+(I^b^v)+E[7]+4139469664&4294967295,S=I+(T<<16&4294967295|T>>>16),T=v+(S^I^b)+E[10]+3200236656&4294967295,v=S+(T<<23&4294967295|T>>>9),T=b+(v^S^I)+E[13]+681279174&4294967295,b=v+(T<<4&4294967295|T>>>28),T=I+(b^v^S)+E[0]+3936430074&4294967295,I=b+(T<<11&4294967295|T>>>21),T=S+(I^b^v)+E[3]+3572445317&4294967295,S=I+(T<<16&4294967295|T>>>16),T=v+(S^I^b)+E[6]+76029189&4294967295,v=S+(T<<23&4294967295|T>>>9),T=b+(v^S^I)+E[9]+3654602809&4294967295,b=v+(T<<4&4294967295|T>>>28),T=I+(b^v^S)+E[12]+3873151461&4294967295,I=b+(T<<11&4294967295|T>>>21),T=S+(I^b^v)+E[15]+530742520&4294967295,S=I+(T<<16&4294967295|T>>>16),T=v+(S^I^b)+E[2]+3299628645&4294967295,v=S+(T<<23&4294967295|T>>>9),T=b+(S^(v|~I))+E[0]+4096336452&4294967295,b=v+(T<<6&4294967295|T>>>26),T=I+(v^(b|~S))+E[7]+1126891415&4294967295,I=b+(T<<10&4294967295|T>>>22),T=S+(b^(I|~v))+E[14]+2878612391&4294967295,S=I+(T<<15&4294967295|T>>>17),T=v+(I^(S|~b))+E[5]+4237533241&4294967295,v=S+(T<<21&4294967295|T>>>11),T=b+(S^(v|~I))+E[12]+1700485571&4294967295,b=v+(T<<6&4294967295|T>>>26),T=I+(v^(b|~S))+E[3]+2399980690&4294967295,I=b+(T<<10&4294967295|T>>>22),T=S+(b^(I|~v))+E[10]+4293915773&4294967295,S=I+(T<<15&4294967295|T>>>17),T=v+(I^(S|~b))+E[1]+2240044497&4294967295,v=S+(T<<21&4294967295|T>>>11),T=b+(S^(v|~I))+E[8]+1873313359&4294967295,b=v+(T<<6&4294967295|T>>>26),T=I+(v^(b|~S))+E[15]+4264355552&4294967295,I=b+(T<<10&4294967295|T>>>22),T=S+(b^(I|~v))+E[6]+2734768916&4294967295,S=I+(T<<15&4294967295|T>>>17),T=v+(I^(S|~b))+E[13]+1309151649&4294967295,v=S+(T<<21&4294967295|T>>>11),T=b+(S^(v|~I))+E[4]+4149444226&4294967295,b=v+(T<<6&4294967295|T>>>26),T=I+(v^(b|~S))+E[11]+3174756917&4294967295,I=b+(T<<10&4294967295|T>>>22),T=S+(b^(I|~v))+E[2]+718787259&4294967295,S=I+(T<<15&4294967295|T>>>17),T=v+(I^(S|~b))+E[9]+3951481745&4294967295,C.g[0]=C.g[0]+b&4294967295,C.g[1]=C.g[1]+(S+(T<<21&4294967295|T>>>11))&4294967295,C.g[2]=C.g[2]+S&4294967295,C.g[3]=C.g[3]+I&4294967295}i.prototype.u=function(C,b){b===void 0&&(b=C.length);for(var v=b-this.blockSize,E=this.B,S=this.h,I=0;I<b;){if(S==0)for(;I<=v;)r(this,C,I),I+=this.blockSize;if(typeof C=="string"){for(;I<b;)if(E[S++]=C.charCodeAt(I++),S==this.blockSize){r(this,E),S=0;break}}else for(;I<b;)if(E[S++]=C[I++],S==this.blockSize){r(this,E),S=0;break}}this.h=S,this.o+=b},i.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var b=1;b<C.length-8;++b)C[b]=0;var v=8*this.o;for(b=C.length-8;b<C.length;++b)C[b]=v&255,v/=256;for(this.u(C),C=Array(16),b=v=0;4>b;++b)for(var E=0;32>E;E+=8)C[v++]=this.g[b]>>>E&255;return C};function s(C,b){var v=a;return Object.prototype.hasOwnProperty.call(v,C)?v[C]:v[C]=b(C)}function o(C,b){this.h=b;for(var v=[],E=!0,S=C.length-1;0<=S;S--){var I=C[S]|0;E&&I==b||(v[S]=I,E=!1)}this.g=v}var a={};function l(C){return-128<=C&&128>C?s(C,function(b){return new o([b|0],0>b?-1:0)}):new o([C|0],0>C?-1:0)}function c(C){if(isNaN(C)||!isFinite(C))return h;if(0>C)return w(c(-C));for(var b=[],v=1,E=0;C>=v;E++)b[E]=C/v|0,v*=4294967296;return new o(b,0)}function d(C,b){if(C.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(C.charAt(0)=="-")return w(d(C.substring(1),b));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=c(Math.pow(b,8)),E=h,S=0;S<C.length;S+=8){var I=Math.min(8,C.length-S),T=parseInt(C.substring(S,S+I),b);8>I?(I=c(Math.pow(b,I)),E=E.j(I).add(c(T))):(E=E.j(v),E=E.add(c(T)))}return E}var h=l(0),f=l(1),p=l(16777216);n=o.prototype,n.m=function(){if(_(this))return-w(this).m();for(var C=0,b=1,v=0;v<this.g.length;v++){var E=this.i(v);C+=(0<=E?E:4294967296+E)*b,b*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(y(this))return"0";if(_(this))return"-"+w(this).toString(C);for(var b=c(Math.pow(C,6)),v=this,E="";;){var S=R(v,b).g;v=A(v,S.j(b));var I=((0<v.g.length?v.g[0]:v.h)>>>0).toString(C);if(v=S,y(v))return I+E;for(;6>I.length;)I="0"+I;E=I+E}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function y(C){if(C.h!=0)return!1;for(var b=0;b<C.g.length;b++)if(C.g[b]!=0)return!1;return!0}function _(C){return C.h==-1}n.l=function(C){return C=A(this,C),_(C)?-1:y(C)?0:1};function w(C){for(var b=C.g.length,v=[],E=0;E<b;E++)v[E]=~C.g[E];return new o(v,~C.h).add(f)}n.abs=function(){return _(this)?w(this):this},n.add=function(C){for(var b=Math.max(this.g.length,C.g.length),v=[],E=0,S=0;S<=b;S++){var I=E+(this.i(S)&65535)+(C.i(S)&65535),T=(I>>>16)+(this.i(S)>>>16)+(C.i(S)>>>16);E=T>>>16,I&=65535,T&=65535,v[S]=T<<16|I}return new o(v,v[v.length-1]&-2147483648?-1:0)};function A(C,b){return C.add(w(b))}n.j=function(C){if(y(this)||y(C))return h;if(_(this))return _(C)?w(this).j(w(C)):w(w(this).j(C));if(_(C))return w(this.j(w(C)));if(0>this.l(p)&&0>C.l(p))return c(this.m()*C.m());for(var b=this.g.length+C.g.length,v=[],E=0;E<2*b;E++)v[E]=0;for(E=0;E<this.g.length;E++)for(var S=0;S<C.g.length;S++){var I=this.i(E)>>>16,T=this.i(E)&65535,le=C.i(S)>>>16,ye=C.i(S)&65535;v[2*E+2*S]+=T*ye,x(v,2*E+2*S),v[2*E+2*S+1]+=I*ye,x(v,2*E+2*S+1),v[2*E+2*S+1]+=T*le,x(v,2*E+2*S+1),v[2*E+2*S+2]+=I*le,x(v,2*E+2*S+2)}for(E=0;E<b;E++)v[E]=v[2*E+1]<<16|v[2*E];for(E=b;E<2*b;E++)v[E]=0;return new o(v,0)};function x(C,b){for(;(C[b]&65535)!=C[b];)C[b+1]+=C[b]>>>16,C[b]&=65535,b++}function M(C,b){this.g=C,this.h=b}function R(C,b){if(y(b))throw Error("division by zero");if(y(C))return new M(h,h);if(_(C))return b=R(w(C),b),new M(w(b.g),w(b.h));if(_(b))return b=R(C,w(b)),new M(w(b.g),b.h);if(30<C.g.length){if(_(C)||_(b))throw Error("slowDivide_ only works with positive integers.");for(var v=f,E=b;0>=E.l(C);)v=P(v),E=P(E);var S=N(v,1),I=N(E,1);for(E=N(E,2),v=N(v,2);!y(E);){var T=I.add(E);0>=T.l(C)&&(S=S.add(v),I=T),E=N(E,1),v=N(v,1)}return b=A(C,S.j(b)),new M(S,b)}for(S=h;0<=C.l(b);){for(v=Math.max(1,Math.floor(C.m()/b.m())),E=Math.ceil(Math.log(v)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),I=c(v),T=I.j(b);_(T)||0<T.l(C);)v-=E,I=c(v),T=I.j(b);y(I)&&(I=f),S=S.add(I),C=A(C,T)}return new M(S,C)}n.A=function(C){return R(this,C).h},n.and=function(C){for(var b=Math.max(this.g.length,C.g.length),v=[],E=0;E<b;E++)v[E]=this.i(E)&C.i(E);return new o(v,this.h&C.h)},n.or=function(C){for(var b=Math.max(this.g.length,C.g.length),v=[],E=0;E<b;E++)v[E]=this.i(E)|C.i(E);return new o(v,this.h|C.h)},n.xor=function(C){for(var b=Math.max(this.g.length,C.g.length),v=[],E=0;E<b;E++)v[E]=this.i(E)^C.i(E);return new o(v,this.h^C.h)};function P(C){for(var b=C.g.length+1,v=[],E=0;E<b;E++)v[E]=C.i(E)<<1|C.i(E-1)>>>31;return new o(v,C.h)}function N(C,b){var v=b>>5;b%=32;for(var E=C.g.length-v,S=[],I=0;I<E;I++)S[I]=0<b?C.i(I+v)>>>b|C.i(I+v+1)<<32-b:C.i(I+v);return new o(S,C.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,CA=b3.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Il=b3.Integer=o}).apply(typeof w3<"u"?w3:typeof self<"u"?self:typeof window<"u"?window:{});var Sw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ga={};var DA,Qte,Ch,IA,qg,Aw,TA,SA,AA;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,m){return u==Array.prototype||u==Object.prototype||(u[g]=m.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sw=="object"&&Sw];for(var g=0;g<u.length;++g){var m=u[g];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var i=t(this);function r(u,g){if(g)e:{var m=i;u=u.split(".");for(var D=0;D<u.length-1;D++){var k=u[D];if(!(k in m))break e;m=m[k]}u=u[u.length-1],D=m[u],g=g(D),g!=D&&g!=null&&e(m,u,{configurable:!0,writable:!0,value:g})}}function s(u,g){u instanceof String&&(u+="");var m=0,D=!1,k={next:function(){if(!D&&m<u.length){var V=m++;return{value:g(V,u[V]),done:!1}}return D=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}r("Array.prototype.values",function(u){return u||function(){return s(this,function(g,m){return m})}});var o=o||{},a=this||self;function l(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function c(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function d(u,g,m){return u.call.apply(u.bind,arguments)}function h(u,g,m){if(!u)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,D),u.apply(g,k)}}return function(){return u.apply(g,arguments)}}function f(u,g,m){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function p(u,g){var m=Array.prototype.slice.call(arguments,1);return function(){var D=m.slice();return D.push.apply(D,arguments),u.apply(this,D)}}function y(u,g){function m(){}m.prototype=g.prototype,u.aa=g.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(D,k,V){for(var Z=Array(arguments.length-2),Ot=2;Ot<arguments.length;Ot++)Z[Ot-2]=arguments[Ot];return g.prototype[k].apply(D,Z)}}function _(u){let g=u.length;if(0<g){let m=Array(g);for(let D=0;D<g;D++)m[D]=u[D];return m}return[]}function w(u,g){for(let m=1;m<arguments.length;m++){let D=arguments[m];if(l(D)){let k=u.length||0,V=D.length||0;u.length=k+V;for(let Z=0;Z<V;Z++)u[k+Z]=D[Z]}else u.push(D)}}class A{constructor(g,m){this.i=g,this.j=m,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function x(u){return/^[\s\xa0]*$/.test(u)}function M(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function R(u){return R[" "](u),u}R[" "]=function(){};var P=M().indexOf("Gecko")!=-1&&!(M().toLowerCase().indexOf("webkit")!=-1&&M().indexOf("Edge")==-1)&&!(M().indexOf("Trident")!=-1||M().indexOf("MSIE")!=-1)&&M().indexOf("Edge")==-1;function N(u,g,m){for(let D in u)g.call(m,u[D],D,u)}function C(u,g){for(let m in u)g.call(void 0,u[m],m,u)}function b(u){let g={};for(let m in u)g[m]=u[m];return g}let v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(u,g){let m,D;for(let k=1;k<arguments.length;k++){D=arguments[k];for(m in D)u[m]=D[m];for(let V=0;V<v.length;V++)m=v[V],Object.prototype.hasOwnProperty.call(D,m)&&(u[m]=D[m])}}function S(u){var g=1;u=u.split(":");let m=[];for(;0<g&&u.length;)m.push(u.shift()),g--;return u.length&&m.push(u.join(":")),m}function I(u){a.setTimeout(()=>{throw u},0)}function T(){var u=mt;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class le{constructor(){this.h=this.g=null}add(g,m){let D=ye.get();D.set(g,m),this.h?this.h.next=D:this.g=D,this.h=D}}var ye=new A(()=>new be,u=>u.reset());class be{constructor(){this.next=this.g=this.h=null}set(g,m){this.h=g,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,Re=!1,mt=new le,O=()=>{let u=a.Promise.resolve(void 0);ae=()=>{u.then(Ke)}};var Ke=()=>{for(var u;u=T();){try{u.h.call(u.g)}catch(m){I(m)}var g=ye;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}Re=!1};function et(){this.s=this.s,this.C=this.C}et.prototype.s=!1,et.prototype.ma=function(){this.s||(this.s=!0,this.N())},et.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function He(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}He.prototype.h=function(){this.defaultPrevented=!0};var ot=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let m=()=>{};a.addEventListener("test",m,g),a.removeEventListener("test",m,g)}catch{}return u}();function Ve(u,g){if(He.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,D=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(P){e:{try{R(g.nodeName);var k=!0;break e}catch{}k=!1}k||(g=null)}}else m=="mouseover"?g=u.fromElement:m=="mouseout"&&(g=u.toElement);this.relatedTarget=g,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:tt[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ve.aa.h.call(this)}}y(Ve,He);var tt={2:"touch",3:"pen",4:"mouse"};Ve.prototype.h=function(){Ve.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ue="closure_listenable_"+(1e6*Math.random()|0),Vt=0;function Rt(u,g,m,D,k){this.listener=u,this.proxy=null,this.src=g,this.type=m,this.capture=!!D,this.ha=k,this.key=++Vt,this.da=this.fa=!1}function Zt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ie(u){this.src=u,this.g={},this.h=0}Ie.prototype.add=function(u,g,m,D,k){var V=u.toString();u=this.g[V],u||(u=this.g[V]=[],this.h++);var Z=me(u,g,D,k);return-1<Z?(g=u[Z],m||(g.fa=!1)):(g=new Rt(g,this.src,V,!!D,k),g.fa=m,u.push(g)),g};function Te(u,g){var m=g.type;if(m in u.g){var D=u.g[m],k=Array.prototype.indexOf.call(D,g,void 0),V;(V=0<=k)&&Array.prototype.splice.call(D,k,1),V&&(Zt(g),u.g[m].length==0&&(delete u.g[m],u.h--))}}function me(u,g,m,D){for(var k=0;k<u.length;++k){var V=u[k];if(!V.da&&V.listener==g&&V.capture==!!m&&V.ha==D)return k}return-1}var dt="closure_lm_"+(1e6*Math.random()|0),vn={};function yi(u,g,m,D,k){if(D&&D.once)return jr(u,g,m,D,k);if(Array.isArray(g)){for(var V=0;V<g.length;V++)yi(u,g[V],m,D,k);return null}return m=Ur(m),u&&u[Ue]?u.K(g,m,c(D)?!!D.capture:!!D,k):U(u,g,m,!1,D,k)}function U(u,g,m,D,k,V){if(!g)throw Error("Invalid event type");var Z=c(k)?!!k.capture:!!k,Ot=Us(u);if(Ot||(u[dt]=Ot=new Ie(u)),m=Ot.add(g,m,D,Z,V),m.proxy)return m;if(D=Pi(),m.proxy=D,D.src=u,D.listener=m,u.addEventListener)ot||(k=Z),k===void 0&&(k=!1),u.addEventListener(g.toString(),D,k);else if(u.attachEvent)u.attachEvent(ms(g.toString()),D);else if(u.addListener&&u.removeListener)u.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Pi(){function u(m){return g.call(u.src,u.listener,m)}let g=So;return u}function jr(u,g,m,D,k){if(Array.isArray(g)){for(var V=0;V<g.length;V++)jr(u,g[V],m,D,k);return null}return m=Ur(m),u&&u[Ue]?u.L(g,m,c(D)?!!D.capture:!!D,k):U(u,g,m,!0,D,k)}function gs(u,g,m,D,k){if(Array.isArray(g))for(var V=0;V<g.length;V++)gs(u,g[V],m,D,k);else D=c(D)?!!D.capture:!!D,m=Ur(m),u&&u[Ue]?(u=u.i,g=String(g).toString(),g in u.g&&(V=u.g[g],m=me(V,m,D,k),-1<m&&(Zt(V[m]),Array.prototype.splice.call(V,m,1),V.length==0&&(delete u.g[g],u.h--)))):u&&(u=Us(u))&&(g=u.g[g.toString()],u=-1,g&&(u=me(g,m,D,k)),(m=-1<u?g[u]:null)&&Gt(m))}function Gt(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Ue])Te(g.i,u);else{var m=u.type,D=u.proxy;g.removeEventListener?g.removeEventListener(m,D,u.capture):g.detachEvent?g.detachEvent(ms(m),D):g.addListener&&g.removeListener&&g.removeListener(D),(m=Us(g))?(Te(m,u),m.h==0&&(m.src=null,g[dt]=null)):Zt(u)}}}function ms(u){return u in vn?vn[u]:vn[u]="on"+u}function So(u,g){if(u.da)u=!0;else{g=new Ve(g,this);var m=u.listener,D=u.ha||u.src;u.fa&&Gt(u),u=m.call(D,g)}return u}function Us(u){return u=u[dt],u instanceof Ie?u:null}var ln="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ur(u){return typeof u=="function"?u:(u[ln]||(u[ln]=function(g){return u.handleEvent(g)}),u[ln])}function Qe(){et.call(this),this.i=new Ie(this),this.M=this,this.F=null}y(Qe,et),Qe.prototype[Ue]=!0,Qe.prototype.removeEventListener=function(u,g,m,D){gs(this,u,g,m,D)};function Nt(u,g){var m,D=u.F;if(D)for(m=[];D;D=D.F)m.push(D);if(u=u.M,D=g.type||g,typeof g=="string")g=new He(g,u);else if(g instanceof He)g.target=g.target||u;else{var k=g;g=new He(D,u),E(g,k)}if(k=!0,m)for(var V=m.length-1;0<=V;V--){var Z=g.g=m[V];k=ai(Z,D,!0,g)&&k}if(Z=g.g=u,k=ai(Z,D,!0,g)&&k,k=ai(Z,D,!1,g)&&k,m)for(V=0;V<m.length;V++)Z=g.g=m[V],k=ai(Z,D,!1,g)&&k}Qe.prototype.N=function(){if(Qe.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var m=u.g[g],D=0;D<m.length;D++)Zt(m[D]);delete u.g[g],u.h--}}this.F=null},Qe.prototype.K=function(u,g,m,D){return this.i.add(String(u),g,!1,m,D)},Qe.prototype.L=function(u,g,m,D){return this.i.add(String(u),g,!0,m,D)};function ai(u,g,m,D){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var k=!0,V=0;V<g.length;++V){var Z=g[V];if(Z&&!Z.da&&Z.capture==m){var Ot=Z.listener,ci=Z.ha||Z.src;Z.fa&&Te(u.i,Z),k=Ot.call(ci,D)!==!1&&k}}return k&&!D.defaultPrevented}function $r(u,g,m){if(typeof u=="function")m&&(u=f(u,m));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(u,g||0)}function Ia(u){u.g=$r(()=>{u.g=null,u.i&&(u.i=!1,Ia(u))},u.l);let g=u.h;u.h=null,u.m.apply(null,g)}class cn extends et{constructor(g,m){super(),this.m=g,this.l=m,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Ia(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $s(u){et.call(this),this.h=u,this.g={}}y($s,et);var _s=[];function Ao(u){N(u.g,function(g,m){this.g.hasOwnProperty(m)&&Gt(g)},u),u.g={}}$s.prototype.N=function(){$s.aa.N.call(this),Ao(this)},$s.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hs=a.JSON.stringify,zs=a.JSON.parse,Mo=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Be(){}Be.prototype.h=null;function Gs(u){return u.h||(u.h=u.i())}function rr(){}var li={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ki(){He.call(this,"d")}y(ki,He);function ys(){He.call(this,"c")}y(ys,He);var sr={},Hr=null;function Ws(){return Hr=Hr||new Qe}sr.La="serverreachability";function Ce(u){He.call(this,sr.La,u)}y(Ce,He);function he(u){let g=Ws();Nt(g,new Ce(g))}sr.STAT_EVENT="statevent";function ht(u,g){He.call(this,sr.STAT_EVENT,u),this.stat=g}y(ht,He);function Y(u){let g=Ws();Nt(g,new ht(g,u))}sr.Ma="timingevent";function De(u,g){He.call(this,sr.Ma,u),this.size=g}y(De,He);function ce(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},g)}function ve(){this.g=!0}ve.prototype.xa=function(){this.g=!1};function Sn(u,g,m,D,k,V){u.info(function(){if(u.g)if(V)for(var Z="",Ot=V.split("&"),ci=0;ci<Ot.length;ci++){var bt=Ot[ci].split("=");if(1<bt.length){var vi=bt[0];bt=bt[1];var wi=vi.split("_");Z=2<=wi.length&&wi[1]=="type"?Z+(vi+"="+bt+"&"):Z+(vi+"=redacted&")}}else Z=null;else Z=V;return"XMLHTTP REQ ("+D+") [attempt "+k+"]: "+g+`
`+m+`
`+Z})}function nt(u,g,m,D,k,V,Z){u.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+k+"]: "+g+`
`+m+`
`+V+" "+Z})}function At(u,g,m,D){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+Wt(u,m)+(D?" "+D:"")})}function Kn(u,g){u.info(function(){return"TIMEOUT: "+g})}ve.prototype.info=function(){};function Wt(u,g){if(!u.g)return g;if(!g)return null;try{var m=JSON.parse(g);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var D=m[u];if(!(2>D.length)){var k=D[1];if(Array.isArray(k)&&!(1>k.length)){var V=k[0];if(V!="noop"&&V!="stop"&&V!="close")for(var Z=1;Z<k.length;Z++)k[Z]=""}}}}return Hs(m)}catch{return g}}var Tt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Dt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Fi;function Mt(){}y(Mt,Be),Mt.prototype.g=function(){return new XMLHttpRequest},Mt.prototype.i=function(){return{}},Fi=new Mt;function un(u,g,m,D){this.j=u,this.i=g,this.l=m,this.R=D||1,this.U=new $s(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new wr}function wr(){this.i=null,this.g="",this.h=!1}var An={},wn={};function Mn(u,g,m){u.L=1,u.v=Fm(xo(g)),u.m=m,u.P=!0,qs(u,null)}function qs(u,g){u.F=Date.now(),qt(u),u.A=xo(u.v);var m=u.A,D=u.R;Array.isArray(D)||(D=[String(D)]),BR(m.i,"t",D),u.C=0,m=u.j.J,u.h=new wr,u.g=iN(u.j,m?g:null,!u.m),0<u.O&&(u.M=new cn(f(u.Y,u,u.g),u.O)),g=u.U,m=u.g,D=u.ca;var k="readystatechange";Array.isArray(k)||(k&&(_s[0]=k.toString()),k=_s);for(var V=0;V<k.length;V++){var Z=yi(m,k[V],D||g.handleEvent,!1,g.h||g);if(!Z)break;g.g[Z.key]=Z}g=u.H?b(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),he(),Sn(u.i,u.u,u.A,u.l,u.R,u.m)}un.prototype.ca=function(u){u=u.target;let g=this.M;g&&Ro(u)==3?g.j():this.Y(u)},un.prototype.Y=function(u){try{if(u==this.g)e:{let wi=Ro(this.g);var g=this.g.Ba();let Mu=this.g.Z();if(!(3>wi)&&(wi!=3||this.g&&(this.h.h||this.g.oa()||WR(this.g)))){this.J||wi!=4||g==7||(g==8||0>=Mu?he(3):he(2)),Wl(this);var m=this.g.Z();this.X=m;t:if(Gl(this)){var D=WR(this.g);u="";var k=D.length,V=Ro(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Er(this),Ta(this);var Z="";break t}this.h.i=new a.TextDecoder}for(g=0;g<k;g++)this.h.h=!0,u+=this.h.i.decode(D[g],{stream:!(V&&g==k-1)});D.length=0,this.h.g+=u,this.C=0,Z=this.h.g}else Z=this.g.oa();if(this.o=m==200,nt(this.i,this.u,this.A,this.l,this.R,wi,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ot,ci=this.g;if((Ot=ci.g?ci.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(Ot)){var bt=Ot;break t}}bt=null}if(m=bt)At(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,or(this,m);else{this.o=!1,this.s=3,Y(12),Er(this),Ta(this);break e}}if(this.P){m=!0;let vs;for(;!this.J&&this.C<Z.length;)if(vs=Qn(this,Z),vs==wn){wi==4&&(this.s=4,Y(14),m=!1),At(this.i,this.l,null,"[Incomplete Response]");break}else if(vs==An){this.s=4,Y(15),At(this.i,this.l,Z,"[Invalid Chunk]"),m=!1;break}else At(this.i,this.l,vs,null),or(this,vs);if(Gl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wi!=4||Z.length!=0||this.h.h||(this.s=1,Y(16),m=!1),this.o=this.o&&m,!m)At(this.i,this.l,Z,"[Invalid Chunked Response]"),Er(this),Ta(this);else if(0<Z.length&&!this.W){this.W=!0;var vi=this.j;vi.g==this&&vi.ba&&!vi.M&&(vi.j.info("Great, no buffering proxy detected. Bytes received: "+Z.length),iE(vi),vi.M=!0,Y(11))}}else At(this.i,this.l,Z,null),or(this,Z);wi==4&&Er(this),this.o&&!this.J&&(wi==4?XR(this.j,this):(this.o=!1,qt(this)))}else yz(this.g),m==400&&0<Z.indexOf("Unknown SID")?(this.s=3,Y(12)):(this.s=0,Y(13)),Er(this),Ta(this)}}}catch{}finally{}};function Gl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Qn(u,g){var m=u.C,D=g.indexOf(`
`,m);return D==-1?wn:(m=Number(g.substring(m,D)),isNaN(m)?An:(D+=1,D+m>g.length?wn:(g=g.slice(D,D+m),u.C=D+m,g)))}un.prototype.cancel=function(){this.J=!0,Er(this)};function qt(u){u.S=Date.now()+u.I,br(u,u.I)}function br(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ce(f(u.ba,u),g)}function Wl(u){u.B&&(a.clearTimeout(u.B),u.B=null)}un.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(Kn(this.i,this.A),this.L!=2&&(he(),Y(17)),Er(this),this.s=2,Ta(this)):br(this,this.S-u)};function Ta(u){u.j.G==0||u.J||XR(u.j,u)}function Er(u){Wl(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,Ao(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function or(u,g){try{var m=u.j;if(m.G!=0&&(m.g==u||Zb(m.h,u))){if(!u.K&&Zb(m.h,u)&&m.G==3){try{var D=m.Da.g.parse(g)}catch{D=null}if(Array.isArray(D)&&D.length==3){var k=D;if(k[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)Um(m),Bm(m);else break e;nE(m),Y(18)}}else m.za=k[1],0<m.za-m.T&&37500>k[2]&&m.F&&m.v==0&&!m.C&&(m.C=ce(f(m.Za,m),6e3));if(1>=xR(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Yl(m,11)}else if((u.K||m.g==u)&&Um(m),!x(g))for(k=m.Da.g.parse(g),g=0;g<k.length;g++){let bt=k[g];if(m.T=bt[0],bt=bt[1],m.G==2)if(bt[0]=="c"){m.K=bt[1],m.ia=bt[2];let vi=bt[3];vi!=null&&(m.la=vi,m.j.info("VER="+m.la));let wi=bt[4];wi!=null&&(m.Aa=wi,m.j.info("SVER="+m.Aa));let Mu=bt[5];Mu!=null&&typeof Mu=="number"&&0<Mu&&(D=1.5*Mu,m.L=D,m.j.info("backChannelRequestTimeoutMs_="+D)),D=m;let vs=u.g;if(vs){let Hm=vs.g?vs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hm){var V=D.h;V.g||Hm.indexOf("spdy")==-1&&Hm.indexOf("quic")==-1&&Hm.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Xb(V,V.h),V.h=null))}if(D.D){let rE=vs.g?vs.g.getResponseHeader("X-HTTP-Session-Id"):null;rE&&(D.ya=rE,$t(D.I,D.D,rE))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),D=m;var Z=u;if(D.qa=nN(D,D.J?D.ia:null,D.W),Z.K){RR(D.h,Z);var Ot=Z,ci=D.L;ci&&(Ot.I=ci),Ot.B&&(Wl(Ot),qt(Ot)),D.g=Z}else JR(D);0<m.i.length&&jm(m)}else bt[0]!="stop"&&bt[0]!="close"||Yl(m,7);else m.G==3&&(bt[0]=="stop"||bt[0]=="close"?bt[0]=="stop"?Yl(m,7):tE(m):bt[0]!="noop"&&m.l&&m.l.ta(bt),m.v=0)}}he(4)}catch{}}var ql=class{constructor(u,g){this.g=u,this.map=g}};function Kl(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Sa(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function xR(u){return u.h?1:u.g?u.g.size:0}function Zb(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Xb(u,g){u.g?u.g.add(g):u.h=g}function RR(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Kl.prototype.cancel=function(){if(this.i=NR(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function NR(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(let m of u.g.values())g=g.concat(m.D);return g}return _(u.i)}function iz(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var g=[],m=u.length,D=0;D<m;D++)g.push(u[D]);return g}g=[],m=0;for(D in u)g[m++]=u[D];return g}function rz(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var g=[];u=u.length;for(var m=0;m<u;m++)g.push(m);return g}g=[],m=0;for(let D in u)g[m++]=D;return g}}}function OR(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var m=rz(u),D=iz(u),k=D.length,V=0;V<k;V++)g.call(void 0,D[V],m&&m[V],u)}var PR=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sz(u,g){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var D=u[m].indexOf("="),k=null;if(0<=D){var V=u[m].substring(0,D);k=u[m].substring(D+1)}else V=u[m];g(V,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function Ql(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Ql){this.h=u.h,Pm(this,u.j),this.o=u.o,this.g=u.g,km(this,u.s),this.l=u.l;var g=u.i,m=new ff;m.i=g.i,g.g&&(m.g=new Map(g.g),m.h=g.h),kR(this,m),this.m=u.m}else u&&(g=String(u).match(PR))?(this.h=!1,Pm(this,g[1]||"",!0),this.o=df(g[2]||""),this.g=df(g[3]||"",!0),km(this,g[4]),this.l=df(g[5]||"",!0),kR(this,g[6]||"",!0),this.m=df(g[7]||"")):(this.h=!1,this.i=new ff(null,this.h))}Ql.prototype.toString=function(){var u=[],g=this.j;g&&u.push(hf(g,FR,!0),":");var m=this.g;return(m||g=="file")&&(u.push("//"),(g=this.o)&&u.push(hf(g,FR,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(hf(m,m.charAt(0)=="/"?lz:az,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",hf(m,uz)),u.join("")};function xo(u){return new Ql(u)}function Pm(u,g,m){u.j=m?df(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function km(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function kR(u,g,m){g instanceof ff?(u.i=g,dz(u.i,u.h)):(m||(g=hf(g,cz)),u.i=new ff(g,u.h))}function $t(u,g,m){u.i.set(g,m)}function Fm(u){return $t(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function df(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function hf(u,g,m){return typeof u=="string"?(u=encodeURI(u).replace(g,oz),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function oz(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var FR=/[#\/\?@]/g,az=/[#\?:]/g,lz=/[#\?]/g,cz=/[#\?@]/g,uz=/#/g;function ff(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function Aa(u){u.g||(u.g=new Map,u.h=0,u.i&&sz(u.i,function(g,m){u.add(decodeURIComponent(g.replace(/\+/g," ")),m)}))}n=ff.prototype,n.add=function(u,g){Aa(this),this.i=null,u=Su(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(g),this.h+=1,this};function LR(u,g){Aa(u),g=Su(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function VR(u,g){return Aa(u),g=Su(u,g),u.g.has(g)}n.forEach=function(u,g){Aa(this),this.g.forEach(function(m,D){m.forEach(function(k){u.call(g,k,D,this)},this)},this)},n.na=function(){Aa(this);let u=Array.from(this.g.values()),g=Array.from(this.g.keys()),m=[];for(let D=0;D<g.length;D++){let k=u[D];for(let V=0;V<k.length;V++)m.push(g[D])}return m},n.V=function(u){Aa(this);let g=[];if(typeof u=="string")VR(this,u)&&(g=g.concat(this.g.get(Su(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)g=g.concat(u[m])}return g},n.set=function(u,g){return Aa(this),this.i=null,u=Su(this,u),VR(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},n.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function BR(u,g,m){LR(u,g),0<m.length&&(u.i=null,u.g.set(Su(u,g),_(m)),u.h+=m.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],g=Array.from(this.g.keys());for(var m=0;m<g.length;m++){var D=g[m];let V=encodeURIComponent(String(D)),Z=this.V(D);for(D=0;D<Z.length;D++){var k=V;Z[D]!==""&&(k+="="+encodeURIComponent(String(Z[D]))),u.push(k)}}return this.i=u.join("&")};function Su(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function dz(u,g){g&&!u.j&&(Aa(u),u.i=null,u.g.forEach(function(m,D){var k=D.toLowerCase();D!=k&&(LR(this,D),BR(this,k,m))},u)),u.j=g}function hz(u,g){let m=new ve;if(a.Image){let D=new Image;D.onload=p(Ma,m,"TestLoadImage: loaded",!0,g,D),D.onerror=p(Ma,m,"TestLoadImage: error",!1,g,D),D.onabort=p(Ma,m,"TestLoadImage: abort",!1,g,D),D.ontimeout=p(Ma,m,"TestLoadImage: timeout",!1,g,D),a.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=u}else g(!1)}function fz(u,g){let m=new ve,D=new AbortController,k=setTimeout(()=>{D.abort(),Ma(m,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:D.signal}).then(V=>{clearTimeout(k),V.ok?Ma(m,"TestPingServer: ok",!0,g):Ma(m,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(k),Ma(m,"TestPingServer: error",!1,g)})}function Ma(u,g,m,D,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),D(m)}catch{}}function pz(){this.g=new Mo}function gz(u,g,m){let D=m||"";try{OR(u,function(k,V){let Z=k;c(k)&&(Z=Hs(k)),g.push(D+V+"="+encodeURIComponent(Z))})}catch(k){throw g.push(D+"type="+encodeURIComponent("_badmap")),k}}function pf(u){this.l=u.Ub||null,this.j=u.eb||!1}y(pf,Be),pf.prototype.g=function(){return new Lm(this.l,this.j)},pf.prototype.i=function(u){return function(){return u}}({});function Lm(u,g){Qe.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Lm,Qe),n=Lm.prototype,n.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,mf(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,gf(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,mf(this)),this.g&&(this.readyState=3,mf(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;jR(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function jR(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?gf(this):mf(this),this.readyState==3&&jR(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,gf(this))},n.Qa=function(u){this.g&&(this.response=u,gf(this))},n.ga=function(){this.g&&gf(this)};function gf(u){u.readyState=4,u.l=null,u.j=null,u.v=null,mf(u)}n.setRequestHeader=function(u,g){this.u.append(u,g)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],g=this.h.entries();for(var m=g.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=g.next();return u.join(`\r
`)};function mf(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Lm.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function UR(u){let g="";return N(u,function(m,D){g+=D,g+=":",g+=m,g+=`\r
`}),g}function eE(u,g,m){e:{for(D in m){var D=!1;break e}D=!0}D||(m=UR(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):$t(u,g,m))}function dn(u){Qe.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(dn,Qe);var mz=/^https?$/i,_z=["POST","PUT"];n=dn.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,g,m,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fi.g(),this.v=this.o?Gs(this.o):Gs(Fi),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(V){$R(this,V);return}if(u=m||"",m=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var k in D)m.set(k,D[k]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(let V of D.keys())m.set(V,D.get(V));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(m.keys()).find(V=>V.toLowerCase()=="content-type"),k=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(_z,g,void 0))||D||k||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[V,Z]of m)this.g.setRequestHeader(V,Z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{GR(this),this.u=!0,this.g.send(u),this.u=!1}catch(V){$R(this,V)}};function $R(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,HR(u),Vm(u)}function HR(u){u.A||(u.A=!0,Nt(u,"complete"),Nt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Nt(this,"complete"),Nt(this,"abort"),Vm(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vm(this,!0)),dn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?zR(this):this.bb())},n.bb=function(){zR(this)};function zR(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Ro(u)!=4||u.Z()!=2)){if(u.u&&Ro(u)==4)$r(u.Ea,0,u);else if(Nt(u,"readystatechange"),Ro(u)==4){u.h=!1;try{let Z=u.Z();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var m;if(!(m=g)){var D;if(D=Z===0){var k=String(u.D).match(PR)[1]||null;!k&&a.self&&a.self.location&&(k=a.self.location.protocol.slice(0,-1)),D=!mz.test(k?k.toLowerCase():"")}m=D}if(m)Nt(u,"complete"),Nt(u,"success");else{u.m=6;try{var V=2<Ro(u)?u.g.statusText:""}catch{V=""}u.l=V+" ["+u.Z()+"]",HR(u)}}finally{Vm(u)}}}}function Vm(u,g){if(u.g){GR(u);let m=u.g,D=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||Nt(u,"ready");try{m.onreadystatechange=D}catch{}}}function GR(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Ro(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Ro(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),zs(g)}};function WR(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function yz(u){let g={};u=(u.g&&2<=Ro(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<u.length;D++){if(x(u[D]))continue;var m=S(u[D]);let k=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let V=g[k]||[];g[k]=V,V.push(m)}C(g,function(D){return D.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function _f(u,g,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||g}function qR(u){this.Aa=0,this.i=[],this.j=new ve,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_f("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_f("baseRetryDelayMs",5e3,u),this.cb=_f("retryDelaySeedMs",1e4,u),this.Wa=_f("forwardChannelMaxRetries",2,u),this.wa=_f("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Kl(u&&u.concurrentRequestLimit),this.Da=new pz,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=qR.prototype,n.la=8,n.G=1,n.connect=function(u,g,m,D){Y(0),this.W=u,this.H=g||{},m&&D!==void 0&&(this.H.OSID=m,this.H.OAID=D),this.F=this.X,this.I=nN(this,null,this.W),jm(this)};function tE(u){if(KR(u),u.G==3){var g=u.U++,m=xo(u.I);if($t(m,"SID",u.K),$t(m,"RID",g),$t(m,"TYPE","terminate"),yf(u,m),g=new un(u,u.j,g),g.L=2,g.v=Fm(xo(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=g.v,m=!0),m||(g.g=iN(g.j,null),g.g.ea(g.v)),g.F=Date.now(),qt(g)}tN(u)}function Bm(u){u.g&&(iE(u),u.g.cancel(),u.g=null)}function KR(u){Bm(u),u.u&&(a.clearTimeout(u.u),u.u=null),Um(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function jm(u){if(!Sa(u.h)&&!u.s){u.s=!0;var g=u.Ga;ae||O(),Re||(ae(),Re=!0),mt.add(g,u),u.B=0}}function vz(u,g){return xR(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ce(f(u.Ga,u,g),eN(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let k=new un(this,this.j,u),V=this.o;if(this.S&&(V?(V=b(V),E(V,this.S)):V=this.S),this.m!==null||this.O||(k.H=V,V=null),this.P)e:{for(var g=0,m=0;m<this.i.length;m++){t:{var D=this.i[m];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(g+=D,4096<g){g=m;break e}if(g===4096||m===this.i.length-1){g=m+1;break e}}g=1e3}else g=1e3;g=YR(this,k,g),m=xo(this.I),$t(m,"RID",u),$t(m,"CVER",22),this.D&&$t(m,"X-HTTP-Session-Id",this.D),yf(this,m),V&&(this.O?g="headers="+encodeURIComponent(String(UR(V)))+"&"+g:this.m&&eE(m,this.m,V)),Xb(this.h,k),this.Ua&&$t(m,"TYPE","init"),this.P?($t(m,"$req",g),$t(m,"SID","null"),k.T=!0,Mn(k,m,null)):Mn(k,m,g),this.G=2}}else this.G==3&&(u?QR(this,u):this.i.length==0||Sa(this.h)||QR(this))};function QR(u,g){var m;g?m=g.l:m=u.U++;let D=xo(u.I);$t(D,"SID",u.K),$t(D,"RID",m),$t(D,"AID",u.T),yf(u,D),u.m&&u.o&&eE(D,u.m,u.o),m=new un(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),g&&(u.i=g.D.concat(u.i)),g=YR(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Xb(u.h,m),Mn(m,D,g)}function yf(u,g){u.H&&N(u.H,function(m,D){$t(g,D,m)}),u.l&&OR({},function(m,D){$t(g,D,m)})}function YR(u,g,m){m=Math.min(u.i.length,m);var D=u.l?f(u.l.Na,u.l,u):null;e:{var k=u.i;let V=-1;for(;;){let Z=["count="+m];V==-1?0<m?(V=k[0].g,Z.push("ofs="+V)):V=0:Z.push("ofs="+V);let Ot=!0;for(let ci=0;ci<m;ci++){let bt=k[ci].g,vi=k[ci].map;if(bt-=V,0>bt)V=Math.max(0,k[ci].g-100),Ot=!1;else try{gz(vi,Z,"req"+bt+"_")}catch{D&&D(vi)}}if(Ot){D=Z.join("&");break e}}}return u=u.i.splice(0,m),g.D=u,D}function JR(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;ae||O(),Re||(ae(),Re=!0),mt.add(g,u),u.v=0}}function nE(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ce(f(u.Fa,u),eN(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,ZR(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ce(f(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Y(10),Bm(this),ZR(this))};function iE(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function ZR(u){u.g=new un(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=xo(u.qa);$t(g,"RID","rpc"),$t(g,"SID",u.K),$t(g,"AID",u.T),$t(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&$t(g,"TO",u.ja),$t(g,"TYPE","xmlhttp"),yf(u,g),u.m&&u.o&&eE(g,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=Fm(xo(g)),m.m=null,m.P=!0,qs(m,u)}n.Za=function(){this.C!=null&&(this.C=null,Bm(this),nE(this),Y(19))};function Um(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function XR(u,g){var m=null;if(u.g==g){Um(u),iE(u),u.g=null;var D=2}else if(Zb(u.h,g))m=g.D,RR(u.h,g),D=1;else return;if(u.G!=0){if(g.o)if(D==1){m=g.m?g.m.length:0,g=Date.now()-g.F;var k=u.B;D=Ws(),Nt(D,new De(D,m)),jm(u)}else JR(u);else if(k=g.s,k==3||k==0&&0<g.X||!(D==1&&vz(u,g)||D==2&&nE(u)))switch(m&&0<m.length&&(g=u.h,g.i=g.i.concat(m)),k){case 1:Yl(u,5);break;case 4:Yl(u,10);break;case 3:Yl(u,6);break;default:Yl(u,2)}}}function eN(u,g){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*g}function Yl(u,g){if(u.j.info("Error code "+g),g==2){var m=f(u.fb,u),D=u.Xa;let k=!D;D=new Ql(D||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Pm(D,"https"),Fm(D),k?hz(D.toString(),m):fz(D.toString(),m)}else Y(2);u.G=0,u.l&&u.l.sa(g),tN(u),KR(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Y(2)):(this.j.info("Failed to ping google.com"),Y(1))};function tN(u){if(u.G=0,u.ka=[],u.l){let g=NR(u.h);(g.length!=0||u.i.length!=0)&&(w(u.ka,g),w(u.ka,u.i),u.h.i.length=0,_(u.i),u.i.length=0),u.l.ra()}}function nN(u,g,m){var D=m instanceof Ql?xo(m):new Ql(m);if(D.g!="")g&&(D.g=g+"."+D.g),km(D,D.s);else{var k=a.location;D=k.protocol,g=g?g+"."+k.hostname:k.hostname,k=+k.port;var V=new Ql(null);D&&Pm(V,D),g&&(V.g=g),k&&km(V,k),m&&(V.l=m),D=V}return m=u.D,g=u.ya,m&&g&&$t(D,m,g),$t(D,"VER",u.la),yf(u,D),D}function iN(u,g,m){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new dn(new pf({eb:m})):new dn(u.pa),g.Ha(u.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function rN(){}n=rN.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function $m(){}$m.prototype.g=function(u,g){return new Cr(u,g)};function Cr(u,g){Qe.call(this),this.g=new qR(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!x(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!x(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Au(this)}y(Cr,Qe),Cr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cr.prototype.close=function(){tE(this.g)},Cr.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=Hs(u),u=m);g.i.push(new ql(g.Ya++,u)),g.G==3&&jm(g)},Cr.prototype.N=function(){this.g.l=null,delete this.j,tE(this.g),delete this.g,Cr.aa.N.call(this)};function sN(u){ki.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(let m in g){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}y(sN,ki);function oN(){ys.call(this),this.status=1}y(oN,ys);function Au(u){this.g=u}y(Au,rN),Au.prototype.ua=function(){Nt(this.g,"a")},Au.prototype.ta=function(u){Nt(this.g,new sN(u))},Au.prototype.sa=function(u){Nt(this.g,new oN)},Au.prototype.ra=function(){Nt(this.g,"b")},$m.prototype.createWebChannel=$m.prototype.g,Cr.prototype.send=Cr.prototype.o,Cr.prototype.open=Cr.prototype.m,Cr.prototype.close=Cr.prototype.close,AA=ga.createWebChannelTransport=function(){return new $m},SA=ga.getStatEventTarget=function(){return Ws()},TA=ga.Event=sr,Aw=ga.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Tt.NO_ERROR=0,Tt.TIMEOUT=8,Tt.HTTP_ERROR=6,qg=ga.ErrorCode=Tt,Dt.COMPLETE="complete",IA=ga.EventType=Dt,rr.EventType=li,li.OPEN="a",li.CLOSE="b",li.ERROR="c",li.MESSAGE="d",Qe.prototype.listen=Qe.prototype.K,Ch=ga.WebChannel=rr,Qte=ga.FetchXmlHttpFactory=pf,dn.prototype.listenOnce=dn.prototype.L,dn.prototype.getLastError=dn.prototype.Ka,dn.prototype.getLastErrorCode=dn.prototype.Ba,dn.prototype.getStatus=dn.prototype.Z,dn.prototype.getResponseJson=dn.prototype.Oa,dn.prototype.getResponseText=dn.prototype.oa,dn.prototype.send=dn.prototype.ea,dn.prototype.setWithCredentials=dn.prototype.Ha,DA=ga.XhrIo=dn}).apply(typeof Sw<"u"?Sw:typeof self<"u"?self:typeof window<"u"?window:{});var E3="@firebase/firestore";var Fn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Fn.UNAUTHENTICATED=new Fn(null),Fn.GOOGLE_CREDENTIALS=new Fn("google-credentials-uid"),Fn.FIRST_PARTY=new Fn("first-party-uid"),Fn.MOCK_USER=new Fn("mock-user");var ef="10.14.0";var Nl=new Ra("@firebase/firestore");function Ah(){return Nl.logLevel}function I$(n){Nl.setLogLevel(n)}function W(n,...e){if(Nl.logLevel<=Gr.DEBUG){let t=e.map(Ox);Nl.debug(`Firestore (${ef}): ${n}`,...t)}}function Cn(n,...e){if(Nl.logLevel<=Gr.ERROR){let t=e.map(Ox);Nl.error(`Firestore (${ef}): ${n}`,...t)}}function Fs(n,...e){if(Nl.logLevel<=Gr.WARN){let t=e.map(Ox);Nl.warn(`Firestore (${ef}): ${n}`,...t)}}function Ox(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ie(n="Unexpected state"){let e=`FIRESTORE (${ef}) INTERNAL ASSERTION FAILED: `+n;throw Cn(e),new Error(e)}function oe(n,e){n||ie()}function T$(n,e){n||ie()}function X(n,e){return n}var B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},G=class extends fN{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Wn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Vw=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},PA=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Fn.UNAUTHENTICATED))}shutdown(){}},kA=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},FA=class{constructor(e){this.t=e,this.currentUser=Fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){oe(this.o===void 0);let i=this.i,r=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve(),s=new Wn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Wn,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let l=s;e.enqueueRetryable(()=>L(this,null,function*(){yield l.promise,yield r(this.currentUser)}))},a=l=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?a(l):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Wn)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(oe(typeof i.accessToken=="string"),new Vw(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return oe(e===null||typeof e=="string"),new Fn(e)}},LA=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Fn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},VA=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new LA(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Fn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},BA=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},jA=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){oe(this.o===void 0);let i=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(oe(typeof t.token=="string"),this.R=t.token,new BA(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Yte(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}var Bw=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=Yte(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}};function xe(n,e){return n<e?-1:n>e?1:0}function Lh(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function S$(n){return n+"\0"}var on=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new G(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new G(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new G(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new n(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var de=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new on(0,0))}static max(){return new n(new on(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var jw=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&ie(),i===void 0?i=e.length-t:i>e.length-t&&ie(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},gt=class n extends jw{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new G(B.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}},Jte=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Dn=class n extends jw{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return Jte.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],i="",r=0,s=()=>{if(i.length===0)throw new G(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},o=!1;for(;r<e.length;){let a=e[r];if(a==="\\"){if(r+1===e.length)throw new G(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new G(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ee=class n{constructor(e){this.path=e}static fromPath(e){return new n(gt.fromString(e))}static fromName(e){return new n(gt.fromString(e).popFirst(5))}static empty(){return new n(gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return gt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new gt(e.slice()))}};var Vh=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};function UA(n){return n.fields.find(e=>e.kind===2)}function nu(n){return n.fields.filter(e=>e.kind!==2)}Vh.UNKNOWN_ID=-1;var Ph=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var sm=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,fs.min())}};function A$(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=de.fromTimestamp(i===1e9?new on(t+1,0):new on(t,i));return new fs(r,ee.empty(),e)}function M$(n){return new fs(n.readTime,n.key,-1)}var fs=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(de.min(),ee.empty(),-1)}static max(){return new n(de.max(),ee.empty(),-1)}};function Px(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ee.comparator(n.documentKey,e.documentKey),t!==0?t:xe(n.largestBatchId,e.largestBatchId))}var x$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Uw=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function $l(n){return L(this,null,function*(){if(n.code!==B.FAILED_PRECONDITION||n.message!==x$)throw n;W("LocalStore","Unexpectedly lost primary lease")})}var F=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&t()},l=>i(l))}),o=!0,s===r&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(r=>r?n.resolve(r):i());return t}static forEach(e,t){let i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new n((i,r)=>{let s=e.length,o=new Array(s),a=0;for(let l=0;l<s;l++){let c=l;t(e[c]).next(d=>{o[c]=d,++a,a===s&&i(o)},d=>r(d))}})}static doWhile(e,t){return new n((i,r)=>{let s=()=>{e()===!0?t().next(()=>{s()},r):i()};s()})}};var $w=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Wn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new lu(e,t.error)):this.V.resolve()},this.transaction.onerror=i=>{let r=kx(i.target.error);this.V.reject(new lu(e,r))}}static open(e,t,i,r){try{return new n(t,e.transaction(r,i))}catch(s){throw new lu(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(W("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new HA(t)}},Ol=class n{constructor(e,t,i){this.name=e,this.version=t,this.p=i,n.S(vf())===12.2&&Cn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return W("SimpleDb","Removing database:",e),iu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!qm())return!1;if(n.v())return!0;let e=vf(),t=n.S(e),i=0<t&&t<10,r=R$(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}M(e){return L(this,null,function*(){return this.db||(W("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,i)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=s=>{let o=s.target.result;t(o)},r.onblocked=()=>{i(new lu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=s=>{let o=s.target.error;o.name==="VersionError"?i(new G(B.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?i(new G(B.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):i(new lu(e,o))},r.onupgradeneeded=s=>{W("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.O(o,r.transaction,s.oldVersion,this.version).next(()=>{W("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){return L(this,null,function*(){let s=t==="readonly",o=0;for(;;){++o;try{this.db=yield this.M(e);let a=$w.open(this.db,e,s?"readonly":"readwrite",i),l=r(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),F.reject(c))).toPromise();return l.catch(()=>{}),yield a.m,l}catch(a){let l=a,c=l.name!=="FirebaseError"&&o<3;if(W("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function R$(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var $A=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return iu(this.B.delete())}},lu=class extends G{constructor(e,t){super(B.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Hl(n){return n.name==="IndexedDbTransactionError"}var HA=class{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(W("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(W("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),iu(i)}add(e){return W("SimpleDb","ADD",this.store.name,e,e),iu(this.store.add(e))}get(e){return iu(this.store.get(e)).next(t=>(t===void 0&&(t=null),W("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return W("SimpleDb","DELETE",this.store.name,e),iu(this.store.delete(e))}count(){return W("SimpleDb","COUNT",this.store.name),iu(this.store.count())}U(e,t){let i=this.options(e,t),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){let s=r.getAll(i.range);return new F((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{let s=this.cursor(i),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,t){let i=this.store.getAll(e,t===null?void 0:t);return new F((r,s)=>{i.onerror=o=>{s(o.target.error)},i.onsuccess=o=>{r(o.target.result)}})}j(e,t){W("SimpleDb","DELETE ALL",this.store.name);let i=this.options(e,t);i.H=!1;let r=this.cursor(i);return this.W(r,(s,o,a)=>a.delete())}J(e,t){let i;t?i=e:(i={},t=e);let r=this.cursor(i);return this.W(r,t)}Y(e){let t=this.cursor({});return new F((i,r)=>{t.onerror=s=>{let o=kx(s.target.error);r(o)},t.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():i()}):i()}})}W(e,t){let i=[];return new F((r,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void r();let l=new $A(a),c=t(a.primaryKey,a.value,l);if(c instanceof F){let d=c.catch(h=>(l.done(),F.reject(h)));i.push(d)}l.isDone?r():l.K===null?a.continue():a.continue(l.K)}}).next(()=>F.waitFor(i))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let i=this.store.index(e.index);return e.H?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function iu(n){return new F((e,t)=>{n.onsuccess=i=>{let r=i.target.result;e(r)},n.onerror=i=>{let r=kx(i.target.error);t(r)}})}var C3=!1;function kx(n){let e=Ol.S(vf());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let i=new G("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return C3||(C3=!0,setTimeout(()=>{throw i},0)),i}}return n}var zA=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){W("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>L(this,null,function*(){this.task=null;try{W("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){Hl(t)?W("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield $l(t)}yield this.X(6e4)}))}},GA=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return L(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let i=new Set,r=t,s=!0;return F.doWhile(()=>s===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!i.has(o))return W("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,r).next(a=>{r-=a,i.add(o)});s=!1})).next(()=>t-r)}ne(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(r,s)).next(a=>(W("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let i=e;return t.changes.forEach((r,s)=>{let o=M$(s);Px(o,i)>0&&(i=o)}),new fs(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Vr=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Tm(n){return n==null}function om(n){return n===0&&1/n==-1/0}function N$(n){return typeof n=="number"&&Number.isInteger(n)&&!om(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function tr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=D3(e)),e=Zte(n.get(t),e);return D3(e)}function Zte(n,e){let t=e,i=n.length;for(let r=0;r<i;r++){let s=n.charAt(r);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function D3(n){return n+""}function _o(n){let e=n.length;if(oe(e>=2),e===2)return oe(n.charAt(0)===""&&n.charAt(1)===""),gt.emptyPath();let t=e-2,i=[],r="";for(let s=0;s<e;){let o=n.indexOf("",s);switch((o<0||o>t)&&ie(),n.charAt(o+1)){case"":let a=n.substring(s,o),l;r.length===0?l=a:(r+=a,l=r,r=""),i.push(l);break;case"":r+=n.substring(s,o),r+="\0";break;case"":r+=n.substring(s,o+1);break;default:ie()}s=o+2}return new gt(i)}var I3=["userId","batchId"];function Ow(n,e){return[n,tr(e)]}function O$(n,e,t){return[n,tr(e),t]}var Xte={},ene=["prefixPath","collectionGroup","readTime","documentId"],tne=["prefixPath","collectionGroup","documentId"],nne=["collectionGroup","readTime","prefixPath","documentId"],ine=["canonicalId","targetId"],rne=["targetId","path"],sne=["path","targetId"],one=["collectionId","parent"],ane=["indexId","uid"],lne=["uid","sequenceNumber"],cne=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],une=["indexId","uid","orderedDocumentKey"],dne=["userId","collectionPath","documentId"],hne=["userId","collectionPath","largestBatchId"],fne=["userId","collectionGroup","largestBatchId"],P$=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],pne=[...P$,"documentOverlays"],k$=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],F$=k$,Fx=[...F$,"indexConfiguration","indexState","indexEntries"],gne=Fx,mne=[...Fx,"globals"];var am=class extends Uw{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function qn(n,e){let t=X(n);return Ol.F(t._e,e)}function T3(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function wu(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function L$(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var zt=class n{constructor(e,t){this.comparator=e,this.root=t||vo.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,vo.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Oh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Oh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Oh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Oh(this.root,e,this.comparator,!0)}},Oh=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},vo=class n{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new n(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();let e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}};vo.EMPTY=null,vo.RED=!0,vo.BLACK=!1;vo.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(e,t,i,r,s){return this}insert(e,t,i){return new vo(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Lt=class n{constructor(e){this.comparator=e,this.data=new zt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Hw(this.data.getIterator())}getIteratorFrom(e){return new Hw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Hw=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Dh(n){return n.hasNext()?n.getNext():void 0}var Br=class n{constructor(e){this.fields=e,e.sort(Dn.comparator)}static empty(){return new n([])}unionWith(e){let t=new Lt(Dn.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Lh(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var zw=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function V$(){return typeof atob<"u"}var Tn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new zw("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Tn.EMPTY_BYTE_STRING=new Tn("");var _ne=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ya(n){if(oe(!!n),typeof n=="string"){let e=0,t=_ne.exec(n);if(oe(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Jt(n.seconds),nanos:Jt(n.nanos)}}function Jt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Pl(n){return typeof n=="string"?Tn.fromBase64String(n):Tn.fromUint8Array(n)}function kb(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Lx(n){let e=n.mapValue.fields.__previous_value__;return kb(e)?Lx(e):e}function lm(n){let e=ya(n.mapValue.fields.__local_write_time__.timestampValue);return new on(e.seconds,e.nanos)}var WA=class{constructor(e,t,i,r,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}},kl=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var xl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Pw={nullValue:"NULL_VALUE"};function cu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?kb(n)?4:B$(n)?9007199254740991:Fb(n)?10:11:ie()}function Eo(n,e){if(n===e)return!0;let t=cu(n);if(t!==cu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return lm(n).isEqual(lm(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=ya(r.timestampValue),a=ya(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,s){return Pl(r.bytesValue).isEqual(Pl(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return Jt(r.geoPointValue.latitude)===Jt(s.geoPointValue.latitude)&&Jt(r.geoPointValue.longitude)===Jt(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Jt(r.integerValue)===Jt(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=Jt(r.doubleValue),a=Jt(s.doubleValue);return o===a?om(o)===om(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Lh(n.arrayValue.values||[],e.arrayValue.values||[],Eo);case 10:case 11:return function(r,s){let o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(T3(o)!==T3(a))return!1;for(let l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Eo(o[l],a[l])))return!1;return!0}(n,e);default:return ie()}}function cm(n,e){return(n.values||[]).find(t=>Eo(t,e))!==void 0}function Fl(n,e){if(n===e)return 0;let t=cu(n),i=cu(e);if(t!==i)return xe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return xe(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Jt(s.integerValue||s.doubleValue),l=Jt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return S3(n.timestampValue,e.timestampValue);case 4:return S3(lm(n),lm(e));case 5:return xe(n.stringValue,e.stringValue);case 6:return function(s,o){let a=Pl(s),l=Pl(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){let d=xe(a[c],l[c]);if(d!==0)return d}return xe(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=xe(Jt(s.latitude),Jt(o.latitude));return a!==0?a:xe(Jt(s.longitude),Jt(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return A3(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,d;let h=s.fields||{},f=o.fields||{},p=(a=h.value)===null||a===void 0?void 0:a.arrayValue,y=(l=f.value)===null||l===void 0?void 0:l.arrayValue,_=xe(((c=p?.values)===null||c===void 0?void 0:c.length)||0,((d=y?.values)===null||d===void 0?void 0:d.length)||0);return _!==0?_:A3(p,y)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===xl.mapValue&&o===xl.mapValue)return 0;if(s===xl.mapValue)return 1;if(o===xl.mapValue)return-1;let a=s.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){let f=xe(l[h],d[h]);if(f!==0)return f;let p=Fl(a[l[h]],c[d[h]]);if(p!==0)return p}return xe(l.length,d.length)}(n.mapValue,e.mapValue);default:throw ie()}}function S3(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return xe(n,e);let t=ya(n),i=ya(e),r=xe(t.seconds,i.seconds);return r!==0?r:xe(t.nanos,i.nanos)}function A3(n,e){let t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){let s=Fl(t[r],i[r]);if(s)return s}return xe(t.length,i.length)}function Bh(n){return qA(n)}function qA(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let i=ya(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Pl(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ee.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(let s of t.values||[])r?r=!1:i+=",",i+=qA(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){let i=Object.keys(t.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${qA(t.fields[o])}`;return r+"}"}(n.mapValue):ie()}function uu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function KA(n){return!!n&&"integerValue"in n}function um(n){return!!n&&"arrayValue"in n}function M3(n){return!!n&&"nullValue"in n}function x3(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function kw(n){return!!n&&"mapValue"in n}function Fb(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function em(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return wu(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=em(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=em(n.arrayValue.values[t]);return e}return Object.assign({},n)}function B$(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var j$={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function yne(n){return"nullValue"in n?Pw:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?uu(kl.empty(),ee.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Fb(n)?j$:{mapValue:{}}:ie()}function vne(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?uu(kl.empty(),ee.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?j$:"mapValue"in n?Fb(n)?{mapValue:{}}:xl:ie()}function R3(n,e){let t=Fl(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function N3(n,e){let t=Fl(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var Oi=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!kw(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=em(t)}setAll(e){let t=Dn.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let l=this.getFieldsMap(t);this.applyChanges(l,i,r),i={},r=[],t=a.popLast()}o?i[a.lastSegment()]=em(o):r.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){let t=this.field(e.popLast());kw(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Eo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];kw(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){wu(t,(r,s)=>e[r]=s);for(let r of i)delete e[r]}clone(){return new n(em(this.value))}};function U$(n){let e=[];return wu(n.fields,(t,i)=>{let r=new Dn([t]);if(kw(i)){let s=U$(i.mapValue).fields;if(s.length===0)e.push(r);else for(let o of s)e.push(r.child(o))}else e.push(r)}),new Br(e)}var Ln=class n{constructor(e,t,i,r,s,o,a){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,de.min(),de.min(),de.min(),Oi.empty(),0)}static newFoundDocument(e,t,i,r){return new n(e,1,t,de.min(),i,r,0)}static newNoDocument(e,t){return new n(e,2,t,de.min(),de.min(),Oi.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,de.min(),de.min(),Oi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(de.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=de.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Co=class{constructor(e,t){this.position=e,this.inclusive=t}};function O3(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){let s=e[r],o=n.position[r];if(s.field.isKeyField()?i=ee.comparator(ee.fromName(o.referenceValue),t.key):i=Fl(o,t.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function P3(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Eo(n.position[t],e.position[t]))return!1;return!0}var du=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function wne(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Gw=class{},st=class n extends Gw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new JA(e,t,i):t==="array-contains"?new eM(e,i):t==="in"?new Ww(e,i):t==="not-in"?new tM(e,i):t==="array-contains-any"?new nM(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new ZA(e,i):new XA(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Fl(t,this.value)):t!==null&&cu(this.value)===cu(t)&&this.matchesComparison(Fl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},St=class n extends Gw{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return jh(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function jh(n){return n.op==="and"}function QA(n){return n.op==="or"}function Vx(n){return $$(n)&&jh(n)}function $$(n){for(let e of n.filters)if(e instanceof St)return!1;return!0}function YA(n){if(n instanceof st)return n.field.canonicalString()+n.op.toString()+Bh(n.value);if(Vx(n))return n.filters.map(e=>YA(e)).join(",");{let e=n.filters.map(t=>YA(t)).join(",");return`${n.op}(${e})`}}function H$(n,e){return n instanceof st?function(i,r){return r instanceof st&&i.op===r.op&&i.field.isEqual(r.field)&&Eo(i.value,r.value)}(n,e):n instanceof St?function(i,r){return r instanceof St&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&H$(o,r.filters[a]),!0):!1}(n,e):void ie()}function z$(n,e){let t=n.filters.concat(e);return St.create(t,n.op)}function G$(n){return n instanceof st?function(t){return`${t.field.canonicalString()} ${t.op} ${Bh(t.value)}`}(n):n instanceof St?function(t){return t.op.toString()+" {"+t.getFilters().map(G$).join(" ,")+"}"}(n):"Filter"}var JA=class extends st{constructor(e,t,i){super(e,t,i),this.key=ee.fromName(i.referenceValue)}matches(e){let t=ee.comparator(e.key,this.key);return this.matchesComparison(t)}},ZA=class extends st{constructor(e,t){super(e,"in",t),this.keys=W$("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},XA=class extends st{constructor(e,t){super(e,"not-in",t),this.keys=W$("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function W$(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>ee.fromName(i.referenceValue))}var eM=class extends st{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return um(t)&&cm(t.arrayValue,this.value)}},Ww=class extends st{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&cm(this.value.arrayValue,t)}},tM=class extends st{constructor(e,t){super(e,"not-in",t)}matches(e){if(cm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!cm(this.value.arrayValue,t)}},nM=class extends st{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!um(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>cm(this.value.arrayValue,i))}};var iM=class{constructor(e,t=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function rM(n,e=null,t=[],i=[],r=null,s=null,o=null){return new iM(n,e,t,i,r,s,o)}function hu(n){let e=X(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>YA(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Tm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Bh(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Bh(i)).join(",")),e.ue=t}return e.ue}function Sm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!wne(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!H$(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!P3(n.startAt,e.startAt)&&P3(n.endAt,e.endAt)}function qw(n){return ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Kw(n,e){return n.filters.filter(t=>t instanceof st&&t.field.isEqual(e))}function k3(n,e,t){let i=Pw,r=!0;for(let s of Kw(n,e)){let o=Pw,a=!0;switch(s.op){case"<":case"<=":o=yne(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Pw}R3({value:i,inclusive:r},{value:o,inclusive:a})<0&&(i=o,r=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];R3({value:i,inclusive:r},{value:o,inclusive:t.inclusive})<0&&(i=o,r=t.inclusive);break}}return{value:i,inclusive:r}}function F3(n,e,t){let i=xl,r=!0;for(let s of Kw(n,e)){let o=xl,a=!0;switch(s.op){case">=":case">":o=vne(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=xl}N3({value:i,inclusive:r},{value:o,inclusive:a})>0&&(i=o,r=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];N3({value:i,inclusive:r},{value:o,inclusive:t.inclusive})>0&&(i=o,r=t.inclusive);break}}return{value:i,inclusive:r}}var Ls=class{constructor(e,t=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function q$(n,e,t,i,r,s,o,a){return new Ls(n,e,t,i,r,s,o,a)}function tf(n){return new Ls(n)}function L3(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Bx(n){return n.collectionGroup!==null}function kh(n){let e=X(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Lt(Dn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new du(s,i))}),t.has(Dn.keyField().canonicalString())||e.ce.push(new du(Dn.keyField(),i))}return e.ce}function nr(n){let e=X(n);return e.le||(e.le=bne(e,kh(n))),e.le}function bne(n,e){if(n.limitType==="F")return rM(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new du(r.field,s)});let t=n.endAt?new Co(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Co(n.startAt.position,n.startAt.inclusive):null;return rM(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function sM(n,e){let t=n.filters.concat([e]);return new Ls(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Qw(n,e,t){return new Ls(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Am(n,e){return Sm(nr(n),nr(e))&&n.limitType===e.limitType}function K$(n){return`${hu(nr(n))}|lt:${n.limitType}`}function Mh(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>G$(r)).join(", ")}]`),Tm(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>Bh(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>Bh(r)).join(",")),`Target(${i})`}(nr(n))}; limitType=${n.limitType})`}function Mm(n,e){return e.isFoundDocument()&&function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):ee.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,e)&&function(i,r){for(let s of kh(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,e)&&function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0}(n,e)&&function(i,r){return!(i.startAt&&!function(o,a,l){let c=O3(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,kh(i),r)||i.endAt&&!function(o,a,l){let c=O3(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,kh(i),r))}(n,e)}function Q$(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Y$(n){return(e,t)=>{let i=!1;for(let r of kh(n)){let s=Ene(r,e,t);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function Ene(n,e,t){let i=n.field.isKeyField()?ee.comparator(e.key,t.key):function(s,o,a){let l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Fl(l,c):ie()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ie()}}var Do=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){wu(this.inner,(t,i)=>{for(let[r,s]of i)e(r,s)})}isEmpty(){return L$(this.inner)}size(){return this.innerSize}};var Cne=new zt(ee.comparator);function vr(){return Cne}var J$=new zt(ee.comparator);function Zg(...n){let e=J$;for(let t of n)e=e.insert(t.key,t);return e}function Z$(n){let e=J$;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function yo(){return tm()}function X$(){return tm()}function tm(){return new Do(n=>n.toString(),(n,e)=>n.isEqual(e))}var Dne=new zt(ee.comparator),Ine=new Lt(ee.comparator);function Le(...n){let e=Ine;for(let t of n)e=e.add(t);return e}var Tne=new Lt(xe);function jx(){return Tne}function Ux(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:om(e)?"-0":e}}function eH(n){return{integerValue:""+n}}function tH(n,e){return N$(e)?eH(e):Ux(n,e)}var Uh=class{constructor(){this._=void 0}};function Sne(n,e,t){return n instanceof Ll?function(r,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&kb(s)&&(s=Lx(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof va?iH(n,e):n instanceof wa?rH(n,e):function(r,s){let o=nH(r,s),a=V3(o)+V3(r.Pe);return KA(o)&&KA(r.Pe)?eH(a):Ux(r.serializer,a)}(n,e)}function Ane(n,e,t){return n instanceof va?iH(n,e):n instanceof wa?rH(n,e):t}function nH(n,e){return n instanceof Vl?function(i){return KA(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}var Ll=class extends Uh{},va=class extends Uh{constructor(e){super(),this.elements=e}};function iH(n,e){let t=sH(e);for(let i of n.elements)t.some(r=>Eo(r,i))||t.push(i);return{arrayValue:{values:t}}}var wa=class extends Uh{constructor(e){super(),this.elements=e}};function rH(n,e){let t=sH(e);for(let i of n.elements)t=t.filter(r=>!Eo(r,i));return{arrayValue:{values:t}}}var Vl=class extends Uh{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function V3(n){return Jt(n.integerValue||n.doubleValue)}function sH(n){return um(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var fu=class{constructor(e,t){this.field=e,this.transform=t}};function Mne(n,e){return n.field.isEqual(e.field)&&function(i,r){return i instanceof va&&r instanceof va||i instanceof wa&&r instanceof wa?Lh(i.elements,r.elements,Eo):i instanceof Vl&&r instanceof Vl?Eo(i.Pe,r.Pe):i instanceof Ll&&r instanceof Ll}(n.transform,e.transform)}var oM=class{constructor(e,t){this.version=e,this.transformResults=t}},yn=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Fw(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var $h=class{};function oH(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new jl(n.key,yn.none()):new Bl(n.key,n.data,yn.none());{let t=n.data,i=Oi.empty(),r=new Lt(Dn.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Vs(n.key,i,new Br(r.toArray()),yn.none())}}function xne(n,e,t){n instanceof Bl?function(r,s,o){let a=r.value.clone(),l=j3(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Vs?function(r,s,o){if(!Fw(r.precondition,s))return void s.convertToUnknownDocument(o.version);let a=j3(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(aH(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function nm(n,e,t,i){return n instanceof Bl?function(s,o,a,l){if(!Fw(s.precondition,o))return a;let c=s.value.clone(),d=U3(s.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,i):n instanceof Vs?function(s,o,a,l){if(!Fw(s.precondition,o))return a;let c=U3(s.fieldTransforms,l,o),d=o.data;return d.setAll(aH(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(n,e,t,i):function(s,o,a){return Fw(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function Rne(n,e){let t=null;for(let i of n.fieldTransforms){let r=e.data.field(i.field),s=nH(i.transform,r||null);s!=null&&(t===null&&(t=Oi.empty()),t.set(i.field,s))}return t||null}function B3(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Lh(i,r,(s,o)=>Mne(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Bl=class extends $h{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Vs=class extends $h{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function aH(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function j3(n,e,t){let i=new Map;oe(n.length===t.length);for(let r=0;r<t.length;r++){let s=n[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,Ane(o,a,t[r]))}return i}function U3(n,e,t){let i=new Map;for(let r of n){let s=r.transform,o=t.data.field(r.field);i.set(r.field,Sne(s,o,e))}return i}var jl=class extends $h{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},dm=class extends $h{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var hm=class{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&xne(s,e,i[r])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=nm(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=nm(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=X$();return this.mutations.forEach(r=>{let s=e.get(r.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(r.key)?null:a;let l=oH(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(de.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Le())}isEqual(e){return this.batchId===e.batchId&&Lh(this.mutations,e.mutations,(t,i)=>B3(t,i))&&Lh(this.baseMutations,e.baseMutations,(t,i)=>B3(t,i))}},aM=class n{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){oe(e.mutations.length===i.length);let r=function(){return Dne}(),s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new n(e,t,i,r)}};var fm=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var lM=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Pn,pt;function lH(n){switch(n){default:return ie();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function cH(n){if(n===void 0)return Cn("GRPC error has no .code"),B.UNKNOWN;switch(n){case Pn.OK:return B.OK;case Pn.CANCELLED:return B.CANCELLED;case Pn.UNKNOWN:return B.UNKNOWN;case Pn.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Pn.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Pn.INTERNAL:return B.INTERNAL;case Pn.UNAVAILABLE:return B.UNAVAILABLE;case Pn.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Pn.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Pn.NOT_FOUND:return B.NOT_FOUND;case Pn.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Pn.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Pn.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Pn.ABORTED:return B.ABORTED;case Pn.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Pn.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Pn.DATA_LOSS:return B.DATA_LOSS;default:return ie()}}(pt=Pn||(Pn={}))[pt.OK=0]="OK",pt[pt.CANCELLED=1]="CANCELLED",pt[pt.UNKNOWN=2]="UNKNOWN",pt[pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pt[pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pt[pt.NOT_FOUND=5]="NOT_FOUND",pt[pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",pt[pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",pt[pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",pt[pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pt[pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pt[pt.ABORTED=10]="ABORTED",pt[pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",pt[pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",pt[pt.INTERNAL=13]="INTERNAL",pt[pt.UNAVAILABLE=14]="UNAVAILABLE",pt[pt.DATA_LOSS=15]="DATA_LOSS";var $3=null;function uH(){return new TextEncoder}var Nne=new Il([4294967295,4294967295],0);function H3(n){let e=uH().encode(n),t=new CA;return t.update(e),new Uint8Array(t.digest())}function z3(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Il([t,i],0),new Il([r,s],0)]}var cM=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new au(`Invalid padding: ${t}`);if(i<0)throw new au(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new au(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new au(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Il.fromNumber(this.Ie)}Ee(e,t,i){let r=e.add(t.multiply(Il.fromNumber(i)));return r.compare(Nne)===1&&(r=new Il([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=H3(e),[i,r]=z3(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,t,i){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,r,t);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=H3(e),[i,r]=z3(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},au=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var pm=class n{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,gm.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(de.min(),r,new zt(xe),vr(),Le())}},gm=class n{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,Le(),Le(),Le())}};var Fh=class{constructor(e,t,i,r){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=r}},Yw=class{constructor(e,t){this.targetId=e,this.me=t}},Jw=class{constructor(e,t,i=Tn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}},Zw=class{constructor(){this.fe=0,this.ge=W3(),this.pe=Tn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Le(),t=Le(),i=Le();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:ie()}}),new gm(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=W3()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,oe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},uM=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=vr(),this.qe=G3(),this.Qe=new zt(xe)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:ie()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,r)=>{this.ze(r)&&t(r)})}He(e){let t=e.targetId,i=e.me.count,r=this.Je(t);if(r){let s=r.target;if(qw(s))if(i===0){let o=new ee(s.path);this.Ue(t,o,Ln.newNoDocument(o,de.min()))}else oe(i===1);else{let o=this.Ye(t);if(o!==i){let a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(t);let c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,c)}$3?.et(function(d,h,f,p,y){var _,w,A,x,M,R;let P={localCacheCount:d,existenceFilterCount:h.count,databaseId:f.database,projectId:f.projectId},N=h.unchangedNames;return N&&(P.bloomFilter={applied:y===0,hashCount:(_=N?.hashCount)!==null&&_!==void 0?_:0,bitmapLength:(x=(A=(w=N?.bits)===null||w===void 0?void 0:w.bitmap)===null||A===void 0?void 0:A.length)!==null&&x!==void 0?x:0,padding:(R=(M=N?.bits)===null||M===void 0?void 0:M.padding)!==null&&R!==void 0?R:0,mightContain:C=>{var b;return(b=p?.mightContain(C))!==null&&b!==void 0&&b}}),P}(o,e.me,this.Le.tt(),a,l))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t,o,a;try{o=Pl(i).toUint8Array()}catch(l){if(l instanceof zw)return Fs("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new cM(o,r,s)}catch(l){return Fs(l instanceof au?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){let i=this.Le.getRemoteKeysForTarget(t),r=0;return i.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),r++)}),r}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&qw(a.target)){let l=new ee(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Ln.newNoDocument(l,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let i=Le();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{let c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let r=new pm(e,t,this.Qe,this.ke,i);return this.ke=vr(),this.qe=G3(),this.Qe=new zt(xe),r}$e(e,t){if(!this.ze(e))return;let i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Zw,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Lt(xe),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||W("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Zw),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function G3(){return new zt(ee.comparator)}function W3(){return new zt(ee.comparator)}var One={asc:"ASCENDING",desc:"DESCENDING"},Pne={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kne={and:"AND",or:"OR"},dM=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function hM(n,e){return n.useProto3Json||Tm(e)?e:{value:e}}function Hh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dH(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Fne(n,e){return Hh(n,e.toTimestamp())}function In(n){return oe(!!n),de.fromTimestamp(function(t){let i=ya(t);return new on(i.seconds,i.nanos)}(n))}function $x(n,e){return fM(n,e).canonicalString()}function fM(n,e){let t=function(r){return new gt(["projects",r.projectId,"databases",r.database])}(n).child("documents");return e===void 0?t:t.child(e)}function hH(n){let e=gt.fromString(n);return oe(EH(e)),e}function mm(n,e){return $x(n.databaseId,e.path)}function wo(n,e){let t=hH(e);if(t.get(1)!==n.databaseId.projectId)throw new G(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new G(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ee(gH(t))}function fH(n,e){return $x(n.databaseId,e)}function pH(n){let e=hH(n);return e.length===4?gt.emptyPath():gH(e)}function pM(n){return new gt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function gH(n){return oe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function q3(n,e,t){return{name:mm(n,e),fields:t.value.mapValue.fields}}function mH(n,e,t){let i=wo(n,e.name),r=In(e.updateTime),s=e.createTime?In(e.createTime):de.min(),o=new Oi({mapValue:{fields:e.fields}}),a=Ln.newFoundDocument(i,r,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Lne(n,e){return"found"in e?function(i,r){oe(!!r.found),r.found.name,r.found.updateTime;let s=wo(i,r.found.name),o=In(r.found.updateTime),a=r.found.createTime?In(r.found.createTime):de.min(),l=new Oi({mapValue:{fields:r.found.fields}});return Ln.newFoundDocument(s,o,a,l)}(n,e):"missing"in e?function(i,r){oe(!!r.missing),oe(!!r.readTime);let s=wo(i,r.missing),o=In(r.readTime);return Ln.newNoDocument(s,o)}(n,e):ie()}function Vne(n,e){let t;if("targetChange"in e){e.targetChange;let i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(oe(d===void 0||typeof d=="string"),Tn.fromBase64String(d||"")):(oe(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Tn.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){let d=c.code===void 0?B.UNKNOWN:cH(c.code);return new G(d,c.message||"")}(o);t=new Jw(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=wo(n,i.document.name),s=In(i.document.updateTime),o=i.document.createTime?In(i.document.createTime):de.min(),a=new Oi({mapValue:{fields:i.document.fields}}),l=Ln.newFoundDocument(r,s,o,a),c=i.targetIds||[],d=i.removedTargetIds||[];t=new Fh(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=wo(n,i.document),s=i.readTime?In(i.readTime):de.min(),o=Ln.newNoDocument(r,s),a=i.removedTargetIds||[];t=new Fh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=wo(n,i.document),s=i.removedTargetIds||[];t=new Fh([],s,r,null)}else{if(!("filter"in e))return ie();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new lM(r,s),a=i.targetId;t=new Yw(a,o)}}return t}function _m(n,e){let t;if(e instanceof Bl)t={update:q3(n,e.key,e.value)};else if(e instanceof jl)t={delete:mm(n,e.key)};else if(e instanceof Vs)t={update:q3(n,e.key,e.data),updateMask:zne(e.fieldMask)};else{if(!(e instanceof dm))return ie();t={verify:mm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(s,o){let a=o.transform;if(a instanceof Ll)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof va)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof wa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Vl)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ie()}(0,i))),e.precondition.isNone||(t.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:Fne(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ie()}(n,e.precondition)),t}function gM(n,e){let t=e.currentDocument?function(s){return s.updateTime!==void 0?yn.updateTime(In(s.updateTime)):s.exists!==void 0?yn.exists(s.exists):yn.none()}(e.currentDocument):yn.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(o,a){let l=null;if("setToServerValue"in a)oe(a.setToServerValue==="REQUEST_TIME"),l=new Ll;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];l=new va(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];l=new wa(d)}else"increment"in a?l=new Vl(o,a.increment):ie();let c=Dn.fromServerFormat(a.fieldPath);return new fu(c,l)}(n,r)):[];if(e.update){e.update.name;let r=wo(n,e.update.name),s=new Oi({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(l){let c=l.fieldPaths||[];return new Br(c.map(d=>Dn.fromServerFormat(d)))}(e.updateMask);return new Vs(r,s,o,t,i)}return new Bl(r,s,t,i)}if(e.delete){let r=wo(n,e.delete);return new jl(r,t)}if(e.verify){let r=wo(n,e.verify);return new dm(r,t)}return ie()}function Bne(n,e){return n&&n.length>0?(oe(e!==void 0),n.map(t=>function(r,s){let o=r.updateTime?In(r.updateTime):In(s);return o.isEqual(de.min())&&(o=In(s)),new oM(o,r.transformResults||[])}(t,e))):[]}function _H(n,e){return{documents:[fH(n,e.path)]}}function yH(n,e){let t={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=fH(n,r);let s=function(c){if(c.length!==0)return bH(St.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:xh(f.field),direction:Une(f.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=hM(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:t,parent:r}}function vH(n){let e=pH(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,r=null;if(i>0){oe(i===1);let d=t.from[0];d.allDescendants?r=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=function(h){let f=wH(h);return f instanceof St&&Vx(f)?f.getFilters():[f]}(t.where));let o=[];t.orderBy&&(o=function(h){return h.map(f=>function(y){return new du(Rh(y.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(f))}(t.orderBy));let a=null;t.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Tm(f)?null:f}(t.limit));let l=null;t.startAt&&(l=function(h){let f=!!h.before,p=h.values||[];return new Co(p,f)}(t.startAt));let c=null;return t.endAt&&(c=function(h){let f=!h.before,p=h.values||[];return new Co(p,f)}(t.endAt)),q$(e,r,o,s,a,"F",l,c)}function jne(n,e){let t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function wH(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=Rh(t.unaryFilter.field);return st.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=Rh(t.unaryFilter.field);return st.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Rh(t.unaryFilter.field);return st.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Rh(t.unaryFilter.field);return st.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(n):n.fieldFilter!==void 0?function(t){return st.create(Rh(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return St.create(t.compositeFilter.filters.map(i=>wH(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ie()}}(t.compositeFilter.op))}(n):ie()}function Une(n){return One[n]}function $ne(n){return Pne[n]}function Hne(n){return kne[n]}function xh(n){return{fieldPath:n.canonicalString()}}function Rh(n){return Dn.fromServerFormat(n.fieldPath)}function bH(n){return n instanceof st?function(t){if(t.op==="=="){if(x3(t.value))return{unaryFilter:{field:xh(t.field),op:"IS_NAN"}};if(M3(t.value))return{unaryFilter:{field:xh(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(x3(t.value))return{unaryFilter:{field:xh(t.field),op:"IS_NOT_NAN"}};if(M3(t.value))return{unaryFilter:{field:xh(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xh(t.field),op:$ne(t.op),value:t.value}}}(n):n instanceof St?function(t){let i=t.getFilters().map(r=>bH(r));return i.length===1?i[0]:{compositeFilter:{op:Hne(t.op),filters:i}}}(n):ie()}function zne(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function EH(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var zh=class n{constructor(e,t,i,r,s=de.min(),o=de.min(),a=Tn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Xw=class{constructor(e){this.ct=e}};function Gne(n,e){let t;if(e.document)t=mH(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let i=ee.fromSegments(e.noDocument.path),r=gu(e.noDocument.readTime);t=Ln.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ie();{let i=ee.fromSegments(e.unknownDocument.path),r=gu(e.unknownDocument.version);t=Ln.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(r){let s=new on(r[0],r[1]);return de.fromTimestamp(s)}(e.readTime)),t}function K3(n,e){let t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:eb(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(s,o){return{name:mm(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Hh(s,o.version.toTimestamp()),createTime:Hh(s,o.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:pu(e.version)};else{if(!e.isUnknownDocument())return ie();i.unknownDocument={path:t.path.toArray(),version:pu(e.version)}}return i}function eb(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function pu(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function gu(n){let e=new on(n.seconds,n.nanoseconds);return de.fromTimestamp(e)}function ru(n,e){let t=(e.baseMutations||[]).map(s=>gM(n.ct,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let i=e.mutations.map(s=>gM(n.ct,s)),r=on.fromMillis(e.localWriteTimeMs);return new hm(e.batchId,r,t,i)}function Xg(n){let e=gu(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?gu(n.lastLimboFreeSnapshotVersion):de.min(),i;return i=function(s){return s.documents!==void 0}(n.query)?function(s){return oe(s.documents.length===1),nr(tf(pH(s.documents[0])))}(n.query):function(s){return nr(vH(s))}(n.query),new zh(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Tn.fromBase64String(n.resumeToken))}function CH(n,e){let t=pu(e.snapshotVersion),i=pu(e.lastLimboFreeSnapshotVersion),r;r=qw(e.target)?_H(n.ct,e.target):yH(n.ct,e.target)._t;let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:hu(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function Hx(n){let e=vH({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Qw(e,e.limit,"L"):e}function MA(n,e){return new fm(e.largestBatchId,gM(n.ct,e.overlayMutation))}function Q3(n,e){let t=e.path.lastSegment();return[n,tr(e.path.popLast()),t]}function Y3(n,e,t,i){return{indexId:n,uid:e,sequenceNumber:t,readTime:pu(i.readTime),documentKey:tr(i.documentKey.path),largestBatchId:i.largestBatchId}}var mM=class{getBundleMetadata(e,t){return J3(e).get(t).next(i=>{if(i)return function(s){return{id:s.bundleId,createTime:gu(s.createTime),version:s.version}}(i)})}saveBundleMetadata(e,t){return J3(e).put(function(r){return{bundleId:r.id,createTime:pu(In(r.createTime)),version:r.version}}(t))}getNamedQuery(e,t){return Z3(e).get(t).next(i=>{if(i)return function(s){return{name:s.name,query:Hx(s.bundledQuery),readTime:gu(s.readTime)}}(i)})}saveNamedQuery(e,t){return Z3(e).put(function(r){return{name:r.name,readTime:pu(In(r.readTime)),bundledQuery:r.bundledQuery}}(t))}};function J3(n){return qn(n,"bundles")}function Z3(n){return qn(n,"namedQueries")}var tb=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let i=t.uid||"";return new n(e,i)}getOverlay(e,t){return Kg(e).get(Q3(this.userId,t)).next(i=>i?MA(this.serializer,i):null)}getOverlays(e,t){let i=yo();return F.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){let r=[];return i.forEach((s,o)=>{let a=new fm(t,o);r.push(this.ht(e,a))}),F.waitFor(r)}removeOverlaysForBatchId(e,t,i){let r=new Set;t.forEach(o=>r.add(tr(o.getCollectionPath())));let s=[];return r.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,i+1],!1,!0);s.push(Kg(e).j("collectionPathOverlayIndex",a))}),F.waitFor(s)}getOverlaysForCollection(e,t,i){let r=yo(),s=tr(t),o=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Kg(e).U("collectionPathOverlayIndex",o).next(a=>{for(let l of a){let c=MA(this.serializer,l);r.set(c.getKey(),c)}return r})}getOverlaysForCollectionGroup(e,t,i,r){let s=yo(),o,a=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Kg(e).J({index:"collectionGroupOverlayIndex",range:a},(l,c,d)=>{let h=MA(this.serializer,c);s.size()<r||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>s)}ht(e,t){return Kg(e).put(function(r,s,o){let[a,l,c]=Q3(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:_m(r.ct,o.mutation)}}(this.serializer,this.userId,t))}};function Kg(n){return qn(n,"documentOverlays")}var _M=class{Pt(e){return qn(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let i=t?.value;return i?Tn.fromUint8Array(i):Tn.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var ma=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Jt(e.integerValue));else if("doubleValue"in e){let i=Jt(e.doubleValue);isNaN(i)?this.dt(t,13):(this.dt(t,15),om(i)?t.At(0):t.At(i))}else if("timestampValue"in e){let i=e.timestampValue;this.dt(t,20),typeof i=="string"&&(i=ya(i)),t.Rt(`${i.seconds||""}`),t.At(i.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Pl(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.dt(t,45),t.At(i.latitude||0),t.At(i.longitude||0)}else"mapValue"in e?B$(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Fb(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):ie()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let i=e.fields||{};this.dt(t,55);for(let r of Object.keys(i))this.Vt(r,t),this.Tt(i[r],t)}wt(e,t){var i,r;let s=e.fields||{};this.dt(t,53);let o="value",a=((r=(i=s[o].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.dt(t,15),t.At(Jt(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let i=e.values||[];this.dt(t,50);for(let r of i)this.Tt(r,t)}yt(e,t){this.dt(t,37),ee.fromName(e).path.forEach(i=>{this.dt(t,60),this.Dt(i,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};ma.vt=new ma;function Wne(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function X3(n){let e=64-function(i){let r=0;for(let s=0;s<8;++s){let o=Wne(255&i[s]);if(r+=o,o!==8)break}return r}(n);return Math.ceil(e/8)}var yM=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),i=t.next();for(;!i.done;)this.Ft(i.value),i=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),i=t.next();for(;!i.done;)this.Ot(i.value),i=t.next();this.Nt()}Lt(e){for(let t of e){let i=t.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{let r=t.codePointAt(0);this.Ft(240|r>>>18),this.Ft(128|63&r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r)}}this.Mt()}Bt(e){for(let t of e){let i=t.charCodeAt(0);if(i<128)this.Ot(i);else if(i<2048)this.Ot(960|i>>>6),this.Ot(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i);else{let r=t.codePointAt(0);this.Ot(240|r>>>18),this.Ot(128|63&r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r)}}this.Nt()}kt(e){let t=this.qt(e),i=X3(t);this.Qt(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Kt(e){let t=this.qt(e),i=X3(t);this.Qt(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),i=(128&t[0])!=0;t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);let r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}},vM=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},wM=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},su=class{constructor(){this.jt=new yM,this.Ht=new vM(this.jt),this.Jt=new wM(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var ou=class n{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new n(this.indexId,this.documentKey,this.arrayValue,i)}};function Tl(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=e$(n.arrayValue,e.arrayValue),t!==0?t:(t=e$(n.directionalValue,e.directionalValue),t!==0?t:ee.comparator(n.documentKey,e.documentKey)))}function e$(n,e){for(let t=0;t<n.length&&t<e.length;++t){let i=n[t]-e[t];if(i!==0)return i}return n.length-e.length}var nb=class{constructor(e){this.Xt=new Lt((t,i)=>Dn.comparator(t.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let i=t;i.isInequality()?this.Xt=this.Xt.add(i):this.tn.push(i)}}get nn(){return this.Xt.size>1}rn(e){if(oe(e.collectionGroup===this.collectionId),this.nn)return!1;let t=UA(e);if(t!==void 0&&!this.sn(t))return!1;let i=nu(e),r=new Set,s=0,o=0;for(;s<i.length&&this.sn(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!r.has(a.field.canonicalString())){let l=i[s];if(!this.on(a,l)||!this._n(this.en[o++],l))return!1}++s}for(;s<i.length;++s){let a=i[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Lt(Dn.comparator),t=[];for(let i of this.tn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new Ph(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new Ph(i.field,0))}for(let i of this.en)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new Ph(i.field,i.dir==="asc"?0:1)));return new Vh(Vh.UNKNOWN_ID,this.collectionId,t,sm.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function DH(n){var e,t;if(oe(n instanceof st||n instanceof St),n instanceof st){if(n instanceof Ww){let r=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>st.create(n.field,"==",s)))||[];return St.create(r,"or")}return n}let i=n.filters.map(r=>DH(r));return St.create(i,n.op)}function qne(n){if(n.getFilters().length===0)return[];let e=CM(DH(n));return oe(IH(e)),bM(e)||EM(e)?[e]:e.getFilters()}function bM(n){return n instanceof st}function EM(n){return n instanceof St&&Vx(n)}function IH(n){return bM(n)||EM(n)||function(t){if(t instanceof St&&QA(t)){for(let i of t.getFilters())if(!bM(i)&&!EM(i))return!1;return!0}return!1}(n)}function CM(n){if(oe(n instanceof st||n instanceof St),n instanceof st)return n;if(n.filters.length===1)return CM(n.filters[0]);let e=n.filters.map(i=>CM(i)),t=St.create(e,n.op);return t=ib(t),IH(t)?t:(oe(t instanceof St),oe(jh(t)),oe(t.filters.length>1),t.filters.reduce((i,r)=>zx(i,r)))}function zx(n,e){let t;return oe(n instanceof st||n instanceof St),oe(e instanceof st||e instanceof St),t=n instanceof st?e instanceof st?function(r,s){return St.create([r,s],"and")}(n,e):t$(n,e):e instanceof st?t$(e,n):function(r,s){if(oe(r.filters.length>0&&s.filters.length>0),jh(r)&&jh(s))return z$(r,s.getFilters());let o=QA(r)?r:s,a=QA(r)?s:r,l=o.filters.map(c=>zx(c,a));return St.create(l,"or")}(n,e),ib(t)}function t$(n,e){if(jh(e))return z$(e,n.getFilters());{let t=e.filters.map(i=>zx(n,i));return St.create(t,"or")}}function ib(n){if(oe(n instanceof st||n instanceof St),n instanceof st)return n;let e=n.getFilters();if(e.length===1)return ib(e[0]);if($$(n))return n;let t=e.map(r=>ib(r)),i=[];return t.forEach(r=>{r instanceof st?i.push(r):r instanceof St&&(r.op===n.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:St.create(i,n.op)}var DM=class{constructor(){this.un=new ym}addToCollectionParentIndex(e,t){return this.un.add(t),F.resolve()}getCollectionParents(e,t){return F.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return F.resolve()}deleteFieldIndex(e,t){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,t){return F.resolve()}getDocumentsMatchingTarget(e,t){return F.resolve(null)}getIndexType(e,t){return F.resolve(0)}getFieldIndexes(e,t){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,t){return F.resolve(fs.min())}getMinOffsetFromCollectionGroup(e,t){return F.resolve(fs.min())}updateCollectionGroup(e,t,i){return F.resolve()}updateIndexEntries(e,t){return F.resolve()}},ym=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Lt(gt.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Lt(gt.comparator)).toArray()}};var Mw=new Uint8Array(0),IM=class{constructor(e,t){this.databaseId=t,this.cn=new ym,this.ln=new Do(i=>hu(i),(i,r)=>Sm(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let s={collectionId:i,parent:tr(r)};return n$(e).put(s)}return F.resolve()}getCollectionParents(e,t){let i=[],r=IDBKeyRange.bound([t,""],[S$(t),""],!1,!0);return n$(e).U(r).next(s=>{for(let o of s){if(o.collectionId!==t)break;i.push(_o(o.parent))}return i})}addFieldIndex(e,t){let i=Qg(e),r=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(t);delete r.indexId;let s=i.add(r);if(t.indexState){let o=Th(e);return s.next(a=>{o.put(Y3(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){let i=Qg(e),r=Th(e),s=Ih(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Qg(e),i=Ih(e),r=Th(e);return t.j().next(()=>i.j()).next(()=>r.j())}createTargetIndexes(e,t){return F.forEach(this.hn(t),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){let s=new nb(i).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){let i=Ih(e),r=!0,s=new Map;return F.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{r&&(r=!!a),s.set(o,a)})).next(()=>{if(r){let o=Le(),a=[];return F.forEach(s,(l,c)=>{W("IndexedDbIndexManager",`Using index ${function(M){return`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map(R=>`${R.fieldPath}:${R.kind}`).join(",")}`}(l)} to execute ${hu(t)}`);let d=function(M,R){let P=UA(R);if(P===void 0)return null;for(let N of Kw(M,P.fieldPath))switch(N.op){case"array-contains-any":return N.value.arrayValue.values||[];case"array-contains":return[N.value]}return null}(c,l),h=function(M,R){let P=new Map;for(let N of nu(R))for(let C of Kw(M,N.fieldPath))switch(C.op){case"==":case"in":P.set(N.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return P.set(N.fieldPath.canonicalString(),C.value),Array.from(P.values())}return null}(c,l),f=function(M,R){let P=[],N=!0;for(let C of nu(R)){let b=C.kind===0?k3(M,C.fieldPath,M.startAt):F3(M,C.fieldPath,M.startAt);P.push(b.value),N&&(N=b.inclusive)}return new Co(P,N)}(c,l),p=function(M,R){let P=[],N=!0;for(let C of nu(R)){let b=C.kind===0?F3(M,C.fieldPath,M.endAt):k3(M,C.fieldPath,M.endAt);P.push(b.value),N&&(N=b.inclusive)}return new Co(P,N)}(c,l),y=this.In(l,c,f),_=this.In(l,c,p),w=this.Tn(l,c,h),A=this.En(l.indexId,d,y,f.inclusive,_,p.inclusive,w);return F.forEach(A,x=>i.G(x,t.limit).next(M=>{M.forEach(R=>{let P=ee.fromSegments(R.documentKey);o.has(P)||(o=o.add(P),a.push(P))})}))}).next(()=>a)}return F.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=qne(St.create(e.filters,"and")).map(i=>rM(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,i,r,s,o,a){let l=(t!=null?t.length:1)*Math.max(i.length,s.length),c=l/(t!=null?t.length:1),d=[];for(let h=0;h<l;++h){let f=t?this.dn(t[h/c]):Mw,p=this.An(e,f,i[h%c],r),y=this.Rn(e,f,s[h%c],o),_=a.map(w=>this.An(e,f,w,!0));d.push(...this.createRange(p,y,_))}return d}An(e,t,i,r){let s=new ou(e,ee.empty(),t,i);return r?s:s.Zt()}Rn(e,t,i,r){let s=new ou(e,ee.empty(),t,i);return r?s.Zt():s}Pn(e,t){let i=new nb(t),r=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let o=null;for(let a of s)i.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let i=2,r=this.hn(t);return F.forEach(r,s=>this.Pn(e,s).next(o=>{o?i!==0&&o.fields.length<function(l){let c=new Lt(Dn.comparator),d=!1;for(let h of l.filters)for(let f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:c=c.add(f.field));for(let h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(s)&&(i=1):i=0})).next(()=>function(o){return o.limit!==null}(t)&&r.length>1&&i===2?1:i)}Vn(e,t){let i=new su;for(let r of nu(e)){let s=t.data.field(r.fieldPath);if(s==null)return null;let o=i.Yt(r.kind);ma.vt.It(s,o)}return i.zt()}dn(e){let t=new su;return ma.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let i=new su;return ma.vt.It(uu(this.databaseId,t),i.Yt(function(s){let o=nu(s);return o.length===0?0:o[o.length-1].kind}(e))),i.zt()}Tn(e,t,i){if(i===null)return[];let r=[];r.push(new su);let s=0;for(let o of nu(e)){let a=i[s++];for(let l of r)if(this.fn(t,o.fieldPath)&&um(a))r=this.gn(r,o,a);else{let c=l.Yt(o.kind);ma.vt.It(a,c)}}return this.pn(r)}In(e,t,i){return this.Tn(e,t,i.position)}pn(e){let t=[];for(let i=0;i<e.length;++i)t[i]=e[i].zt();return t}gn(e,t,i){let r=[...e],s=[];for(let o of i.arrayValue.values||[])for(let a of r){let l=new su;l.seed(a.zt()),ma.vt.It(o,l.Yt(t.kind)),s.push(l)}return s}fn(e,t){return!!e.filters.find(i=>i instanceof st&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,t){let i=Qg(e),r=Th(e);return(t?i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.U()).next(s=>{let o=[];return F.forEach(s,a=>r.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){let f=h?new sm(h.sequenceNumber,new fs(gu(h.readTime),new ee(_o(h.documentKey)),h.largestBatchId)):sm.empty(),p=d.fields.map(([y,_])=>new Ph(Dn.fromServerFormat(y),_));return new Vh(d.indexId,d.collectionGroup,p,f)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((i,r)=>{let s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return s!==0?s:xe(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){let r=Qg(e),s=Th(e);return this.yn(e).next(o=>r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>F.forEach(a,l=>s.put(Y3(l.indexId,this.uid,o,i)))))}updateIndexEntries(e,t){let i=new Map;return F.forEach(t,(r,s)=>{let o=i.get(r.collectionGroup);return(o?F.resolve(o):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),F.forEach(a,l=>this.wn(e,r,l).next(c=>{let d=this.Sn(s,l);return c.isEqual(d)?F.resolve():this.bn(e,s,l,c,d)}))))})}Dn(e,t,i,r){return Ih(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.mn(i,t.key),documentKey:t.key.path.toArray()})}vn(e,t,i,r){return Ih(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.mn(i,t.key),t.key.path.toArray()])}wn(e,t,i){let r=Ih(e),s=new Lt(Tl);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.mn(i,t)])},(o,a)=>{s=s.add(new ou(i.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let i=new Lt(Tl),r=this.Vn(t,e);if(r==null)return i;let s=UA(t);if(s!=null){let o=e.data.field(s.fieldPath);if(um(o))for(let a of o.arrayValue.values||[])i=i.add(new ou(t.indexId,e.key,this.dn(a),r))}else i=i.add(new ou(t.indexId,e.key,Mw,r));return i}bn(e,t,i,r,s){W("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let o=[];return function(l,c,d,h,f){let p=l.getIterator(),y=c.getIterator(),_=Dh(p),w=Dh(y);for(;_||w;){let A=!1,x=!1;if(_&&w){let M=d(_,w);M<0?x=!0:M>0&&(A=!0)}else _!=null?x=!0:A=!0;A?(h(w),w=Dh(y)):x?(f(_),_=Dh(p)):(_=Dh(p),w=Dh(y))}}(r,s,Tl,a=>{o.push(this.Dn(e,t,i,a))},a=>{o.push(this.vn(e,t,i,a))}),F.waitFor(o)}yn(e){let t=1;return Th(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((o,a)=>Tl(o,a)).filter((o,a,l)=>!a||Tl(o,l[a-1])!==0);let r=[];r.push(e);for(let o of i){let a=Tl(o,e),l=Tl(o,t);if(a===0)r[0]=e.Zt();else if(a>0&&l<0)r.push(o),r.push(o.Zt());else if(l>0)break}r.push(t);let s=[];for(let o=0;o<r.length;o+=2){if(this.Cn(r[o],r[o+1]))return[];let a=[r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,Mw,[]],l=[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,Mw,[]];s.push(IDBKeyRange.bound(a,l))}return s}Cn(e,t){return Tl(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(i$)}getMinOffset(e,t){return F.mapArray(this.hn(t),i=>this.Pn(e,i).next(r=>r||ie())).next(i$)}};function n$(n){return qn(n,"collectionParents")}function Ih(n){return qn(n,"indexEntries")}function Qg(n){return qn(n,"indexConfiguration")}function Th(n){return qn(n,"indexState")}function i$(n){oe(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){let r=n[i].indexState.offset;Px(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new fs(e.readTime,e.documentKey,t)}var r$={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hs=class n{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function TH(n,e,t){let i=n.store("mutations"),r=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId),a=0,l=i.J({range:o},(d,h,f)=>(a++,f.delete()));s.push(l.next(()=>{oe(a===1)}));let c=[];for(let d of t.mutations){let h=O$(e,d.key.path,t.batchId);s.push(r.delete(h)),c.push(d.key)}return F.waitFor(s).next(()=>c)}function rb(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ie();e=n.noDocument}return JSON.stringify(e).length}hs.DEFAULT_COLLECTION_PERCENTILE=10,hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hs.DEFAULT=new hs(41943040,hs.DEFAULT_COLLECTION_PERCENTILE,hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hs.DISABLED=new hs(-1,0,0);var sb=class n{constructor(e,t,i,r){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=r,this.Fn={}}static lt(e,t,i,r){oe(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new n(s,t,i,r)}checkEmpty(e){let t=!0,i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Sl(e).J({index:"userMutationsIndex",range:i},(r,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,i,r){let s=Nh(e),o=Sl(e);return o.add({}).next(a=>{oe(typeof a=="number");let l=new hm(a,t,i,r),c=function(p,y,_){let w=_.baseMutations.map(x=>_m(p.ct,x)),A=_.mutations.map(x=>_m(p.ct,x));return{userId:y,batchId:_.batchId,localWriteTimeMs:_.localWriteTime.toMillis(),baseMutations:w,mutations:A}}(this.serializer,this.userId,l),d=[],h=new Lt((f,p)=>xe(f.canonicalString(),p.canonicalString()));for(let f of r){let p=O$(this.userId,f.key.path,a);h=h.add(f.key.path.popLast()),d.push(o.put(c)),d.push(s.put(p,Xte))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),F.waitFor(d).next(()=>l)})}lookupMutationBatch(e,t){return Sl(e).get(t).next(i=>i?(oe(i.userId===this.userId),ru(this.serializer,i)):null)}Mn(e,t){return this.Fn[t]?F.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){let r=i.keys();return this.Fn[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]),s=null;return Sl(e).J({index:"userMutationsIndex",range:r},(o,a,l)=>{a.userId===this.userId&&(oe(a.batchId>=i),s=ru(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),i=-1;return Sl(e).J({index:"userMutationsIndex",range:t,reverse:!0},(r,s,o)=>{i=s.batchId,o.done()}).next(()=>i)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Sl(e).U("userMutationsIndex",t).next(i=>i.map(r=>ru(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){let i=Ow(this.userId,t.path),r=IDBKeyRange.lowerBound(i),s=[];return Nh(e).J({range:r},(o,a,l)=>{let[c,d,h]=o,f=_o(d);if(c===this.userId&&t.path.isEqual(f))return Sl(e).get(h).next(p=>{if(!p)throw ie();oe(p.userId===this.userId),s.push(ru(this.serializer,p))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Lt(xe),r=[];return t.forEach(s=>{let o=Ow(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Nh(e).J({range:a},(c,d,h)=>{let[f,p,y]=c,_=_o(p);f===this.userId&&s.path.isEqual(_)?i=i.add(y):h.done()});r.push(l)}),F.waitFor(r).next(()=>this.xn(e,i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,s=Ow(this.userId,i),o=IDBKeyRange.lowerBound(s),a=new Lt(xe);return Nh(e).J({range:o},(l,c,d)=>{let[h,f,p]=l,y=_o(f);h===this.userId&&i.isPrefixOf(y)?y.length===r&&(a=a.add(p)):d.done()}).next(()=>this.xn(e,a))}xn(e,t){let i=[],r=[];return t.forEach(s=>{r.push(Sl(e).get(s).next(o=>{if(o===null)throw ie();oe(o.userId===this.userId),i.push(ru(this.serializer,o))}))}),F.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return TH(e._e,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),F.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return F.resolve();let i=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),r=[];return Nh(e).J({range:i},(s,o,a)=>{if(s[0]===this.userId){let l=_o(s[1]);r.push(l)}else a.done()}).next(()=>{oe(r.length===0)})})}containsKey(e,t){return SH(e,this.userId,t)}Nn(e){return AH(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function SH(n,e,t){let i=Ow(e,t.path),r=i[1],s=IDBKeyRange.lowerBound(i),o=!1;return Nh(n).J({range:s,H:!0},(a,l,c)=>{let[d,h,f]=a;d===e&&h===r&&(o=!0),c.done()}).next(()=>o)}function Sl(n){return qn(n,"mutations")}function Nh(n){return qn(n,"documentMutations")}function AH(n){return qn(n,"mutationQueues")}var Gh=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var TM=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let i=new Gh(t.highestTargetId);return t.highestTargetId=i.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>de.fromTimestamp(new on(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.qn(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Qn(e,r)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(i=>(i.targetCount+=1,this.$n(t,i),this.Qn(e,i))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Sh(e).delete(t.targetId)).next(()=>this.qn(e)).next(i=>(oe(i.targetCount>0),i.targetCount-=1,this.Qn(e,i)))}removeTargets(e,t,i){let r=0,s=[];return Sh(e).J((o,a)=>{let l=Xg(a);l.sequenceNumber<=t&&i.get(l.targetId)===null&&(r++,s.push(this.removeTargetData(e,l)))}).next(()=>F.waitFor(s)).next(()=>r)}forEachTarget(e,t){return Sh(e).J((i,r)=>{let s=Xg(r);t(s)})}qn(e){return s$(e).get("targetGlobalKey").next(t=>(oe(t!==null),t))}Qn(e,t){return s$(e).put("targetGlobalKey",t)}Kn(e,t){return Sh(e).put(CH(this.serializer,t))}$n(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let i=hu(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),s=null;return Sh(e).J({range:r,index:"queryTargetsIndex"},(o,a,l)=>{let c=Xg(a);Sm(t,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,t,i){let r=[],s=Al(e);return t.forEach(o=>{let a=tr(o.path);r.push(s.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(e,i,o))}),F.waitFor(r)}removeMatchingKeys(e,t,i){let r=Al(e);return F.forEach(t,s=>{let o=tr(s.path);return F.waitFor([r.delete([i,o]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,t){let i=Al(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){let i=IDBKeyRange.bound([t],[t+1],!1,!0),r=Al(e),s=Le();return r.J({range:i,H:!0},(o,a,l)=>{let c=_o(o[1]),d=new ee(c);s=s.add(d)}).next(()=>s)}containsKey(e,t){let i=tr(t.path),r=IDBKeyRange.bound([i],[S$(i)],!1,!0),s=0;return Al(e).J({index:"documentTargetsIndex",H:!0,range:r},([o,a],l,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}ot(e,t){return Sh(e).get(t).next(i=>i?Xg(i):null)}};function Sh(n){return qn(n,"targets")}function s$(n){return qn(n,"targetGlobal")}function Al(n){return qn(n,"targetDocuments")}function o$([n,e],[t,i]){let r=xe(n,t);return r===0?xe(e,i):r}var SM=class{constructor(e){this.Un=e,this.buffer=new Lt(o$),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let i=this.buffer.last();o$(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}},AM=class{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){W("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>L(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Hl(t)?W("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield $l(t)}yield this.Hn(3e5)}))}},MM=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return F.resolve(Vr.oe);let i=new SM(t);return this.Jn.forEachTarget(e,r=>i.zn(r.sequenceNumber)).next(()=>this.Jn.Zn(e,r=>i.zn(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Jn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(r$)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),r$):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let i,r,s,o,a,l,c,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),r=this.params.maximumSequenceNumbersToCollect):r=h,o=Date.now(),this.nthSequenceNumber(e,r))).next(h=>(i=h,a=Date.now(),this.removeTargets(e,i,t))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(h=>(c=Date.now(),Ah()<=Gr.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:h})))}};function Kne(n,e){return new MM(n,e)}var xM=class{constructor(e,t){this.db=e,this.garbageCollector=Kne(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}er(e){let t=0;return this.Zn(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(i,r)=>t(r))}addReference(e,t,i){return xw(e,i)}removeReference(e,t,i){return xw(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return xw(e,t)}nr(e,t){return function(r,s){let o=!1;return AH(r).Y(a=>SH(r,a,s).next(l=>(l&&(o=!0),F.resolve(!l)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){let i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],s=0;return this.tr(e,(o,a)=>{if(a<=t){let l=this.nr(e,o).next(c=>{if(!c)return s++,i.getEntry(e,o).next(()=>(i.removeEntry(o,de.min()),Al(e).delete(function(h){return[0,tr(h.path)]}(o))))});r.push(l)}}).next(()=>F.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,t){let i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return xw(e,t)}tr(e,t){let i=Al(e),r,s=Vr.oe;return i.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==Vr.oe&&t(new ee(_o(r)),s),s=c,r=l):s=Vr.oe}).next(()=>{s!==Vr.oe&&t(new ee(_o(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function xw(n,e){return Al(n).put(function(i,r){return{targetId:0,path:tr(i.path),sequenceNumber:r}}(e,n.currentSequenceNumber))}var ob=class{constructor(){this.changes=new Do(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ln.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?F.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var RM=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return tu(e).put(i)}removeEntry(e,t,i){return tu(e).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],eb(o),a[a.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.rr(e,i)))}getEntry(e,t){let i=Ln.newInvalidDocument(t);return tu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Yg(t))},(r,s)=>{i=this.ir(t,s)}).next(()=>i)}sr(e,t){let i={size:0,document:Ln.newInvalidDocument(t)};return tu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Yg(t))},(r,s)=>{i={document:this.ir(t,s),size:rb(s)}}).next(()=>i)}getEntries(e,t){let i=vr();return this._r(e,t,(r,s)=>{let o=this.ir(r,s);i=i.insert(r,o)}).next(()=>i)}ar(e,t){let i=vr(),r=new zt(ee.comparator);return this._r(e,t,(s,o)=>{let a=this.ir(s,o);i=i.insert(s,a),r=r.insert(s,rb(o))}).next(()=>({documents:i,ur:r}))}_r(e,t,i){if(t.isEmpty())return F.resolve();let r=new Lt(c$);t.forEach(l=>r=r.add(l));let s=IDBKeyRange.bound(Yg(r.first()),Yg(r.last())),o=r.getIterator(),a=o.getNext();return tu(e).J({index:"documentKeyIndex",range:s},(l,c,d)=>{let h=ee.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&c$(a,h)<0;)i(a,null),a=o.getNext();a&&a.isEqual(h)&&(i(a,c),a=o.hasNext()?o.getNext():null),a?d.$(Yg(a)):d.done()}).next(()=>{for(;a;)i(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,i,r,s){let o=t.path,a=[o.popLast().toArray(),o.lastSegment(),eb(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return tu(e).U(IDBKeyRange.bound(a,l,!0)).next(c=>{s?.incrementDocumentReadCount(c.length);let d=vr();for(let h of c){let f=this.ir(ee.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(Mm(t,f)||r.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,t,i,r){let s=vr(),o=l$(t,i),a=l$(t,fs.max());return tu(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{let h=this.ir(ee.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(h.key,h),s.size===r&&d.done()}).next(()=>s)}newChangeBuffer(e){return new NM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return a$(e).get("remoteDocumentGlobalKey").next(t=>(oe(!!t),t))}rr(e,t){return a$(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let i=Gne(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(de.min())))return i}return Ln.newInvalidDocument(e)}};function MH(n){return new RM(n)}var NM=class extends ob{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Do(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){let t=[],i=0,r=new Lt((s,o)=>xe(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){let l=K3(this.cr.serializer,o);r=r.add(s.path.popLast());let c=rb(l);i+=c-a.size,t.push(this.cr.addEntry(e,s,l))}else if(i-=a.size,this.trackRemovals){let l=K3(this.cr.serializer,o.convertToNoDocument(de.min()));t.push(this.cr.addEntry(e,s,l))}}),r.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,i)),F.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(i=>(this.lr.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:i,ur:r})=>(r.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:i.get(s).readTime})}),i))}};function a$(n){return qn(n,"remoteDocumentGlobal")}function tu(n){return qn(n,"remoteDocumentsV14")}function Yg(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function l$(n,e){let t=e.documentKey.path.toArray();return[n,eb(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function c$(n,e){let t=n.path.toArray(),i=e.path.toArray(),r=0;for(let s=0;s<t.length-2&&s<i.length-2;++s)if(r=xe(t[s],i[s]),r)return r;return r=xe(t.length,i.length),r||(r=xe(t[t.length-2],i[i.length-2]),r||xe(t[t.length-1],i[i.length-1]))}var OM=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var ab=class{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&nm(i.mutation,r,Br.empty(),on.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Le()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Le()){let r=yo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=Zg();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let i=yo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Le()))}populateOverlays(e,t,i){let r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,i,r){let s=vr(),o=tm(),a=function(){return tm()}();return t.forEach((l,c)=>{let d=i.get(c.key);r.has(c.key)&&(d===void 0||d.mutation instanceof Vs)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),nm(d.mutation,c,d.mutation.getFieldMask(),on.now())):o.set(c.key,Br.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,d)=>o.set(c,d)),t.forEach((c,d)=>{var h;return a.set(c,new OM(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,t){let i=tm(),r=new zt((o,a)=>o-a),s=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(l=>{let c=t.get(l);if(c===null)return;let d=i.get(l)||Br.empty();d=a.applyToLocalView(c,d),i.set(l,d);let h=(r.get(a.batchId)||Le()).add(l);r=r.insert(a.batchId,h)})}).next(()=>{let o=[],a=r.getReverseIterator();for(;a.hasNext();){let l=a.getNext(),c=l.key,d=l.value,h=X$();d.forEach(f=>{if(!s.has(f)){let p=oH(t.get(f),i.get(f));p!==null&&h.set(f,p),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return F.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return function(o){return ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Bx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):F.resolve(yo()),a=-1,l=s;return o.next(c=>F.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?F.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Le())).next(d=>({batchId:a,changes:Z$(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ee(t)).next(i=>{let r=Zg();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let s=t.collectionGroup,o=Zg();return this.indexManager.getCollectionParents(e,s).next(a=>F.forEach(a,l=>{let c=function(h,f){return new Ls(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(o=>{s.forEach((l,c)=>{let d=c.getKey();o.get(d)===null&&(o=o.insert(d,Ln.newInvalidDocument(d)))});let a=Zg();return o.forEach((l,c)=>{let d=s.get(l);d!==void 0&&nm(d.mutation,c,Br.empty(),on.now()),Mm(t,c)&&(a=a.insert(l,c))}),a})}};var PM=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return F.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:In(r.createTime)}}(t)),F.resolve()}getNamedQuery(e,t){return F.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(r){return{name:r.name,query:Hx(r.bundledQuery),readTime:In(r.readTime)}}(t)),F.resolve()}};var kM=class{constructor(){this.overlays=new zt(ee.comparator),this.Ir=new Map}getOverlay(e,t){return F.resolve(this.overlays.get(t))}getOverlays(e,t){let i=yo();return F.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.ht(e,t,s)}),F.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),F.resolve()}getOverlaysForCollection(e,t,i){let r=yo(),s=t.length+1,o=new ee(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return F.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new zt((c,d)=>c-d),o=this.overlays.getIterator();for(;o.hasNext();){let c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>i){let d=s.get(c.largestBatchId);d===null&&(d=yo(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}let a=yo(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=r)););return F.resolve(a)}ht(e,t,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new fm(t,i));let s=this.Ir.get(t);s===void 0&&(s=Le(),this.Ir.set(t,s)),this.Ir.set(t,s.add(i.key))}};var FM=class{constructor(){this.sessionToken=Tn.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,F.resolve()}};var vm=class{constructor(){this.Tr=new Lt(kn.Er),this.dr=new Lt(kn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let i=new kn(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Vr(new kn(e,t))}mr(e,t){e.forEach(i=>this.removeReference(i,t))}gr(e){let t=new ee(new gt([])),i=new kn(t,e),r=new kn(t,e+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new ee(new gt([])),i=new kn(t,e),r=new kn(t,e+1),s=Le();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new kn(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},kn=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ee.comparator(e.key,t.key)||xe(e.wr,t.wr)}static Ar(e,t){return xe(e.wr,t.wr)||ee.comparator(e.key,t.key)}};var LM=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Lt(kn.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new hm(s,t,i,r);this.mutationQueue.push(o);for(let a of r)this.br=this.br.add(new kn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,t){return F.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=this.vr(i),s=r<0?0:r;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new kn(t,0),r=new kn(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{let a=this.Dr(o.wr);s.push(a)}),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Lt(xe);return t.forEach(r=>{let s=new kn(r,0),o=new kn(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{i=i.add(a.wr)})}),F.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,s=i;ee.isDocumentKey(s)||(s=s.child(""));let o=new kn(new ee(s),0),a=new Lt(xe);return this.br.forEachWhile(l=>{let c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.wr)),!0)},o),F.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(i=>{let r=this.Dr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){oe(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return F.forEach(t.mutations,r=>{let s=new kn(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,t){let i=new kn(t,0),r=this.br.firstAfterOrEqual(i);return F.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var VM=class{constructor(e){this.Mr=e,this.docs=function(){return new zt(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return F.resolve(i?i.document.mutableCopy():Ln.newInvalidDocument(t))}getEntries(e,t){let i=vr();return t.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Ln.newInvalidDocument(r))}),F.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=vr(),o=t.path,a=new ee(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){let{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Px(M$(d),i)<=0||(r.has(d.key)||Mm(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(e,t,i,r){ie()}Or(e,t){return F.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new BM(this)}getSize(e){return F.resolve(this.size)}},BM=class extends ob{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),F.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var jM=class{constructor(e){this.persistence=e,this.Nr=new Do(t=>hu(t),Sm),this.lastRemoteSnapshotVersion=de.min(),this.highestTargetId=0,this.Lr=0,this.Br=new vm,this.targetCount=0,this.kr=Gh.Bn()}forEachTarget(e,t){return this.Nr.forEach((i,r)=>t(r)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),F.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Gh(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,F.resolve()}updateTargetData(e,t){return this.Kn(t),F.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,t,i){let r=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&i.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),F.waitFor(s).next(()=>r)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,t){let i=this.Nr.get(t)||null;return F.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),F.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);let r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),F.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),F.resolve()}getMatchingKeysForTargetId(e,t){let i=this.Br.yr(t);return F.resolve(i)}containsKey(e,t){return F.resolve(this.Br.containsKey(t))}};var lb=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Vr(0),this.Kr=!1,this.Kr=!0,this.$r=new FM,this.referenceDelegate=e(this),this.Ur=new jM(this),this.indexManager=new DM,this.remoteDocumentCache=function(r){return new VM(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new Xw(t),this.Gr=new PM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new kM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new LM(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){W("MemoryPersistence","Starting transaction:",e);let r=new UM(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,t){return F.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,t)))}},UM=class extends Uw{constructor(e){super(),this.currentSequenceNumber=e}},cb=class n{constructor(e){this.persistence=e,this.Jr=new vm,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw ie()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),F.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),F.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),F.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(r=>this.Xr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,i=>{let r=ee.fromPath(i);return this.ei(e,r).next(s=>{s||t.removeEntry(r,de.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return F.or([()=>F.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var $M=class{constructor(e){this.serializer=e}O(e,t,i,r){let s=new $w("createOrUpgrade",t);i<1&&r>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",I3,{unique:!0}),l.createObjectStore("documentMutations")}(e),u$(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=F.resolve();return i<3&&r>=3&&(i!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),u$(e)),o=o.next(()=>function(l){let c=l.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:de.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(s))),i<4&&r>=4&&(i!==0&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(d=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",I3,{unique:!0});let h=c.store("mutations"),f=d.map(p=>h.put(p));return F.waitFor(f)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&r>=5&&(o=o.next(()=>this.ni(s))),i<6&&r>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),i<7&&r>=7&&(o=o.next(()=>this.ii(s))),i<8&&r>=8&&(o=o.next(()=>this.si(e,s))),i<9&&r>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(o=o.next(()=>this.oi(s))),i<11&&r>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(o=o.next(()=>{(function(l){let c=l.createObjectStore("documentOverlays",{keyPath:dne});c.createIndex("collectionPathOverlayIndex",hne,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",fne,{unique:!1})})(e)})),i<13&&r>=13&&(o=o.next(()=>function(l){let c=l.createObjectStore("remoteDocumentsV14",{keyPath:ene});c.createIndex("documentKeyIndex",tne),c.createIndex("collectionGroupIndex",nne)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(o=o.next(()=>this.ai(e,s))),i<15&&r>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:ane}).createIndex("sequenceNumberIndex",lne,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:cne}).createIndex("documentKeyIndex",une,{unique:!1})}(e))),i<16&&r>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),i<17&&r>=17&&(o=o.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((i,r)=>{t+=rb(r)}).next(()=>{let i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}ni(e){let t=e.store("mutationQueues"),i=e.store("mutations");return t.U().next(r=>F.forEach(r,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.U("userMutationsIndex",o).next(a=>F.forEach(a,l=>{oe(l.userId===s.userId);let c=ru(this.serializer,l);return TH(e,s.userId,c).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{let s=[];return i.J((o,a)=>{let l=new gt(o),c=function(h){return[0,tr(h)]}(l);s.push(t.get(c).next(d=>d?F.resolve():(h=>t.put({targetId:0,path:tr(h),sequenceNumber:r.highestListenSequenceNumber}))(l)))}).next(()=>F.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:one});let i=t.store("collectionParents"),r=new ym,s=o=>{if(r.add(o)){let a=o.lastSegment(),l=o.popLast();return i.put({collectionId:a,parent:tr(l)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{let l=new gt(o);return s(l.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,l],c)=>{let d=_o(a);return s(d.popLast())}))}oi(e){let t=e.store("targets");return t.J((i,r)=>{let s=Xg(r),o=CH(this.serializer,s);return t.put(o)})}_i(e,t){let i=t.store("remoteDocuments"),r=[];return i.J((s,o)=>{let a=t.store("remoteDocumentsV14"),l=function(h){return h.document?new ee(gt.fromString(h.document.name).popFirst(5)):h.noDocument?ee.fromSegments(h.noDocument.path):h.unknownDocument?ee.fromSegments(h.unknownDocument.path):ie()}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};r.push(a.put(c))}).next(()=>F.waitFor(r))}ai(e,t){let i=t.store("mutations"),r=MH(this.serializer),s=new lb(cb.Zr,this.serializer.ct);return i.U().next(o=>{let a=new Map;return o.forEach(l=>{var c;let d=(c=a.get(l.userId))!==null&&c!==void 0?c:Le();ru(this.serializer,l).keys().forEach(h=>d=d.add(h)),a.set(l.userId,d)}),F.forEach(a,(l,c)=>{let d=new Fn(c),h=tb.lt(this.serializer,d),f=s.getIndexManager(d),p=sb.lt(d,this.serializer,f,s.referenceDelegate);return new ab(r,p,h,f).recalculateAndSaveOverlaysForDocumentKeys(new am(t,Vr.oe),l).next()})})}};function u$(n){n.createObjectStore("targetDocuments",{keyPath:rne}).createIndex("documentTargetsIndex",sne,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ine,{unique:!0}),n.createObjectStore("targetGlobal")}var xA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",HM=class n{constructor(e,t,i,r,s,o,a,l,c,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.ui=s,this.window=o,this.document=a,this.ci=c,this.li=d,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=f=>Promise.resolve(),!n.D())throw new G(B.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new xM(this,r),this.Ai=t+"main",this.serializer=new Xw(l),this.Ri=new Ol(this.Ai,this.hi,new $M(this.serializer)),this.$r=new _M,this.Ur=new TM(this.referenceDelegate,this.serializer),this.remoteDocumentCache=MH(this.serializer),this.Gr=new mM,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&Cn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new G(B.FAILED_PRECONDITION,xA);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Vr(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>L(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>L(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>L(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Rw(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Hl(e))return W("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return W("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Jg(e).get("owner").next(t=>F.resolve(this.vi(t)))}Ci(e){return Rw(e).delete(this.clientId)}Fi(){return L(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let i=qn(t,"clientMetadata");return i.U().next(r=>{let s=this.xi(r,18e5),o=r.filter(a=>s.indexOf(a)===-1);return F.forEach(o,a=>i.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?F.resolve(!0):Jg(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new G(B.FAILED_PRECONDITION,xA);return!1}}return!(!this.networkEnabled||!this.inForeground)||Rw(e).U().next(i=>this.xi(i,5e3).find(r=>{if(this.clientId!==r.clientId){let s=!this.networkEnabled&&r.networkEnabled,o=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&W("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return L(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new am(e,Vr.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(i=>this.Mi(i.updateTimeMs,t)&&!this.Ni(i.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Rw(e).U().next(t=>this.xi(t,18e5).map(i=>i.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return sb.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new IM(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return tb.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,i){W("IndexedDbPersistence","Starting transaction:",e);let r=t==="readonly"?"readonly":"readwrite",s=function(l){return l===17?mne:l===16?gne:l===15?Fx:l===14?F$:l===13?k$:l===12?pne:l===11?P$:void ie()}(this.hi),o;return this.Ri.runTransaction(e,r,s,a=>(o=new am(a,this.Qr?this.Qr.next():Vr.oe),t==="readwrite-primary"?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw Cn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new G(B.FAILED_PRECONDITION,x$);return i(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>i(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return Jg(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new G(B.FAILED_PRECONDITION,xA)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Jg(e).put("owner",t)}static D(){return Ol.D()}bi(e){let t=Jg(e);return t.get("owner").next(i=>this.vi(i)?(W("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):F.resolve())}Mi(e,t){let i=Date.now();return!(e<i-t)&&(!(e>i)||(Cn(`Detected an update time that is in the future: ${e} > ${i}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;aE()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let i=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return W("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Cn("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Cn("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Jg(n){return qn(n,"owner")}function Rw(n){return qn(n,"clientMetadata")}function Gx(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var zM=class n{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=r}static Wi(e,t){let i=Le(),r=Le();for(let s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new n(e,t.fromCache,i,r)}};var GM=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var ub=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return aE()?8:R$(vf())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,r){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new GM;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,i,r){return i.documentReadCount<this.ji?(Ah()<=Gr.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Mh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(Ah()<=Gr.DEBUG&&W("QueryEngine","Query:",Mh(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(Ah()<=Gr.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Mh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,nr(t))):F.resolve())}Yi(e,t){if(L3(t))return F.resolve(null);let i=nr(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=Qw(t,null,"F"),i=nr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{let o=Le(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{let c=this.ts(t,a);return this.ns(t,c,o,l.readTime)?this.Yi(e,Qw(t,null,"F")):this.rs(e,c,t,l)}))})))}Zi(e,t,i,r){return L3(t)||r.isEqual(de.min())?F.resolve(null):this.Ji.getDocuments(e,i).next(s=>{let o=this.ts(t,s);return this.ns(t,o,i,r)?F.resolve(null):(Ah()<=Gr.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Mh(t)),this.rs(e,o,t,A$(r,-1)).next(a=>a))})}ts(e,t){let i=new Lt(Y$(e));return t.forEach((r,s)=>{Mm(e,s)&&(i=i.add(s))}),i}ns(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,t,i){return Ah()<=Gr.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Mh(t)),this.Ji.getDocumentsMatchingQuery(e,t,fs.min(),i)}rs(e,t,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var WM=class{constructor(e,t,i,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new zt(xe),this._s=new Do(s=>hu(s),Sm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ab(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function xH(n,e,t,i){return new WM(n,e,t,i)}function RH(n,e){return L(this,null,function*(){let t=X(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.ls(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],a=[],l=Le();for(let c of r){o.push(c.batchId);for(let d of c.mutations)l=l.add(d.key)}for(let c of s){a.push(c.batchId);for(let d of c.mutations)l=l.add(d.key)}return t.localDocuments.getDocuments(i,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})})}function Qne(n,e){let t=X(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){let h=c.batch,f=h.keys(),p=F.resolve();return f.forEach(y=>{p=p.next(()=>d.getEntry(l,y)).next(_=>{let w=c.docVersions.get(y);oe(w!==null),_.version.compareTo(w)<0&&(h.applyToRemoteDocument(_,c),_.isValidDocument()&&(_.setReadTime(c.commitVersion),d.addEntry(_)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=Le();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function NH(n){let e=X(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function Yne(n,e){let t=X(n),i=e.snapshotVersion,r=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});r=t.os;let a=[];e.targetChanges.forEach((d,h)=>{let f=r.get(h);if(!f)return;a.push(t.Ur.removeMatchingKeys(s,d.removedDocuments,h).next(()=>t.Ur.addMatchingKeys(s,d.addedDocuments,h)));let p=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(Tn.EMPTY_BYTE_STRING,de.min()).withLastLimboFreeSnapshotVersion(de.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,i)),r=r.insert(h,p),function(_,w,A){return _.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(f,p,d)&&a.push(t.Ur.updateTargetData(s,p))});let l=vr(),c=Le();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(OH(s,o,e.documentUpdates).next(d=>{l=d.Ps,c=d.Is})),!i.isEqual(de.min())){let d=t.Ur.getLastRemoteSnapshotVersion(s).next(h=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(d)}return F.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.os=r,s))}function OH(n,e,t){let i=Le(),r=Le();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=vr();return t.forEach((a,l)=>{let c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(de.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):W("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:r}})}function Jne(n,e){let t=X(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Wh(n,e){let t=X(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Ur.getTargetData(i,e).next(s=>s?(r=s,F.resolve(r)):t.Ur.allocateTargetId(i).next(o=>(r=new zh(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=t.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i})}function qh(n,e,t){return L(this,null,function*(){let i=X(n),r=i.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!Hl(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(r.target)})}function db(n,e,t){let i=X(n),r=de.min(),s=Le();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){let h=X(l),f=h._s.get(d);return f!==void 0?F.resolve(h.os.get(f)):h.Ur.getTargetData(c,d)}(i,o,nr(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,t?r:de.min(),t?s:Le())).next(a=>(FH(i,Q$(e),a),{documents:a,Ts:s})))}function PH(n,e){let t=X(n),i=X(t.Ur),r=t.os.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",s=>i.ot(s,e).next(o=>o?o.target:null))}function kH(n,e){let t=X(n),i=t.us.get(e)||de.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.cs.getAllFromCollectionGroup(r,e,A$(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(FH(t,e,r),r))}function FH(n,e,t){let i=n.us.get(e)||de.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.us.set(e,i)}function Zne(n,e,t,i){return L(this,null,function*(){let r=X(n),s=Le(),o=vr();for(let c of t){let d=e.Es(c.metadata.name);c.document&&(s=s.add(d));let h=e.ds(c);h.setReadTime(e.As(c.metadata.readTime)),o=o.insert(d,h)}let a=r.cs.newChangeBuffer({trackRemovals:!0}),l=yield Wh(r,function(d){return nr(tf(gt.fromString(`__bundle__/docs/${d}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",c=>OH(c,a,o).next(d=>(a.apply(c),d)).next(d=>r.Ur.removeMatchingKeysForTargetId(c,l.targetId).next(()=>r.Ur.addMatchingKeys(c,s,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(c,d.Ps,d.Is)).next(()=>d.Ps)))})}function Xne(i,r){return L(this,arguments,function*(n,e,t=Le()){let s=yield Wh(n,nr(Hx(e.bundledQuery))),o=X(n);return o.persistence.runTransaction("Save named query","readwrite",a=>{let l=In(e.readTime);if(s.snapshotVersion.compareTo(l)>=0)return o.Gr.saveNamedQuery(a,e);let c=s.withResumeToken(Tn.EMPTY_BYTE_STRING,l);return o.os=o.os.insert(c.targetId,c),o.Ur.updateTargetData(a,c).next(()=>o.Ur.removeMatchingKeysForTargetId(a,s.targetId)).next(()=>o.Ur.addMatchingKeys(a,t,s.targetId)).next(()=>o.Gr.saveNamedQuery(a,e))})})}function d$(n,e){return`firestore_clients_${n}_${e}`}function h$(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function RA(n,e){return`firestore_targets_${n}_${e}`}var hb=class n{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static Rs(e,t,i){let r=JSON.parse(i),s,o=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(s=new G(r.error.code,r.error.message))),o?new n(e,t,r.state,s):(Cn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},im=class n{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Rs(e,t){let i=JSON.parse(t),r,s=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(r=new G(i.error.code,i.error.message))),s?new n(e,i.state,r):(Cn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},fb=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let i=JSON.parse(t),r=typeof i=="object"&&i.activeTargetIds instanceof Array,s=jx();for(let o=0;r&&o<i.activeTargetIds.length;++o)r=N$(i.activeTargetIds[o]),s=s.add(i.activeTargetIds[o]);return r?new n(e,s):(Cn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},qM=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(Cn("SharedClientState",`Failed to parse online state: ${e}`),null)}},wm=class{constructor(){this.activeTargetIds=jx()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},rm=class{constructor(e,t,i,r,s){this.window=e,this.ui=t,this.persistenceKey=i,this.ps=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new zt(xe),this.started=!1,this.bs=[];let o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=d$(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new wm),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return L(this,null,function*(){let e=yield this.syncEngine.Qi();for(let i of e){if(i===this.ps)continue;let r=this.getItem(d$(this.persistenceKey,i));if(r){let s=fb.Rs(i,r);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let i=this.Ls(t);i&&this.Bs(i)}for(let i of this.bs)this.ws(i);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,i){this.qs(e,t,i),this.Qs(e)}addLocalQueryTarget(e,t=!0){let i="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(RA(this.persistenceKey,e));if(r){let s=im.Rs(e,r);s&&(i=s.state)}}return t&&this.Ks.fs(e),this.Ns(),i}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(RA(this.persistenceKey,e))}updateQueryState(e,t,i){this.$s(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.Qs(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return W("SharedClientState","READ",e,t),t}setItem(e,t){W("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){W("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(W("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Cn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>L(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let i=this.Gs(t.key);return this.zs(i,null)}{let i=this.js(t.key,t.newValue);if(i)return this.zs(i.clientId,i)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let i=this.Hs(t.key,t.newValue);if(i)return this.Js(i)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let i=this.Ys(t.key,t.newValue);if(i)return this.Zs(i)}}else if(t.key===this.xs){if(t.newValue!==null){let i=this.Ls(t.newValue);if(i)return this.Bs(i)}}else if(t.key===this.vs){let i=function(s){let o=Vr.oe;if(s!=null)try{let a=JSON.parse(s);oe(typeof a=="number"),o=a}catch(a){Cn("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(t.newValue);i!==Vr.oe&&this.sequenceNumberHandler(i)}else if(t.key===this.Os){let i=this.Xs(t.newValue);yield Promise.all(i.map(r=>this.syncEngine.eo(r)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,i){let r=new hb(this.currentUser,e,t,i),s=h$(this.persistenceKey,this.currentUser,e);this.setItem(s,r.Vs())}Qs(e){let t=h$(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,i){let r=RA(this.persistenceKey,e),s=new im(e,t,i);this.setItem(r,s.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let i=this.Gs(e);return fb.Rs(i,t)}Hs(e,t){let i=this.Fs.exec(e),r=Number(i[1]),s=i[2]!==void 0?i[2]:null;return hb.Rs(new Fn(s),r,t)}Ys(e,t){let i=this.Ms.exec(e),r=Number(i[1]);return im.Rs(r,t)}Ls(e){return qM.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return L(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);W("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let i=t?this.Ss.insert(e,t):this.Ss.remove(e),r=this.ks(this.Ss),s=this.ks(i),o=[],a=[];return s.forEach(l=>{r.has(l)||o.push(l)}),r.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.io(o,a).then(()=>{this.Ss=i})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=jx();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}},pb=class{constructor(){this.so=new wm,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new wm,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var KM=class{_o(e){}shutdown(){}};var gb=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Nw=null;function NA(){return Nw===null?Nw=function(){return 268435456+Math.round(2147483648*Math.random())}():Nw++,"0x"+Nw.toString(16)}var eie={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var QM=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Ni="WebChannelConnection",YM=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(t,i,r,s,o){let a=NA(),l=this.xo(t,i.toUriEncodedString());W("RestConnection",`Sending RPC '${t}' ${a}:`,l,r);let c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(t,l,c,r).then(d=>(W("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw Fs("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",l,"request:",r),d})}Lo(t,i,r,s,o,a){return this.Mo(t,i,r,s,o)}Oo(t,i,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ef}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>t[o]=s),r&&r.headers.forEach((s,o)=>t[o]=s)}xo(t,i){let r=eie[t];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,r){let s=NA();return new Promise((o,a)=>{let l=new DA;l.setWithCredentials(!0),l.listenOnce(IA.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case qg.NO_ERROR:let d=l.getResponseJson();W(Ni,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case qg.TIMEOUT:W(Ni,`RPC '${e}' ${s} timed out`),a(new G(B.DEADLINE_EXCEEDED,"Request time out"));break;case qg.HTTP_ERROR:let h=l.getStatus();if(W(Ni,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);let p=f?.error;if(p&&p.status&&p.message){let y=function(w){let A=w.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(A)>=0?A:B.UNKNOWN}(p.status);a(new G(y,p.message))}else a(new G(B.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new G(B.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{W(Ni,`RPC '${e}' ${s} completed.`)}});let c=JSON.stringify(r);W(Ni,`RPC '${e}' ${s} sending request:`,r),l.send(t,"POST",c,i,15)})}Bo(e,t,i){let r=NA(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=AA(),a=SA(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;let d=s.join("");W(Ni,`Creating RPC '${e}' stream ${r}: ${d}`,l);let h=o.createWebChannel(d,l),f=!1,p=!1,y=new QM({Io:w=>{p?W(Ni,`Not sending because RPC '${e}' stream ${r} is closed:`,w):(f||(W(Ni,`Opening RPC '${e}' stream ${r} transport.`),h.open(),f=!0),W(Ni,`RPC '${e}' stream ${r} sending:`,w),h.send(w))},To:()=>h.close()}),_=(w,A,x)=>{w.listen(A,M=>{try{x(M)}catch(R){setTimeout(()=>{throw R},0)}})};return _(h,Ch.EventType.OPEN,()=>{p||(W(Ni,`RPC '${e}' stream ${r} transport opened.`),y.yo())}),_(h,Ch.EventType.CLOSE,()=>{p||(p=!0,W(Ni,`RPC '${e}' stream ${r} transport closed`),y.So())}),_(h,Ch.EventType.ERROR,w=>{p||(p=!0,Fs(Ni,`RPC '${e}' stream ${r} transport errored:`,w),y.So(new G(B.UNAVAILABLE,"The operation could not be completed")))}),_(h,Ch.EventType.MESSAGE,w=>{var A;if(!p){let x=w.data[0];oe(!!x);let M=x,R=M.error||((A=M[0])===null||A===void 0?void 0:A.error);if(R){W(Ni,`RPC '${e}' stream ${r} received error:`,R);let P=R.status,N=function(v){let E=Pn[v];if(E!==void 0)return cH(E)}(P),C=R.message;N===void 0&&(N=B.INTERNAL,C="Unknown error status: "+P+" with message "+R.message),p=!0,y.So(new G(N,C)),h.close()}else W(Ni,`RPC '${e}' stream ${r} received:`,x),y.bo(x)}}),_(a,TA.STAT_EVENT,w=>{w.stat===Aw.PROXY?W(Ni,`RPC '${e}' stream ${r} detected buffering proxy`):w.stat===Aw.NOPROXY&&W(Ni,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}};function LH(){return typeof window<"u"?window:null}function Lw(){return typeof document<"u"?document:null}function xm(n){return new dM(n,!0)}var bm=class{constructor(e,t,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-i);r>0&&W("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var mb=class{constructor(e,t,i,r,s,o,a,l){this.ui=e,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new bm(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return L(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return L(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return L(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===B.RESOURCE_EXHAUSTED?(Cn(t.toString()),Cn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===t&&this.P_(i,r)},i=>{e(()=>{let r=new G(B.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,t){let i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(()=>L(this,null,function*(){this.state=0,this.start()}))}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},JM=class extends mb{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=Vne(this.serializer,e),i=function(s){if(!("targetChange"in s))return de.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?de.min():o.readTime?In(o.readTime):de.min()}(e);return this.listener.d_(t,i)}A_(e){let t={};t.database=pM(this.serializer),t.addTarget=function(s,o){let a,l=o.target;if(a=qw(l)?{documents:_H(s,l)}:{query:yH(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=dH(s,o.resumeToken);let c=hM(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(de.min())>0){a.readTime=Hh(s,o.snapshotVersion.toTimestamp());let c=hM(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);let i=jne(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){let t={};t.database=pM(this.serializer),t.removeTarget=e,this.a_(t)}},ZM=class extends mb{constructor(e,t,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return oe(!!e.streamToken),this.lastStreamToken=e.streamToken,oe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=Bne(e.writeResults,e.commitTime),i=In(e.commitTime);return this.listener.g_(i,t)}p_(){let e={};e.database=pM(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(i=>_m(this.serializer,i))};this.a_(t)}};var XM=class extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new G(B.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,fM(t,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(B.UNKNOWN,s.toString())})}Lo(e,t,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,fM(t,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(B.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},ex=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Cn(t),this.D_=!1):W("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var tx=class{constructor(e,t,i,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(()=>L(this,null,function*(){zl(this)&&(W("RemoteStore","Restarting streams for network reachability change."),yield function(l){return L(this,null,function*(){let c=X(l);c.L_.add(4),yield nf(c),c.q_.set("Unknown"),c.L_.delete(4),yield Rm(c)})}(this))}))}),this.q_=new ex(i,r)}};function Rm(n){return L(this,null,function*(){if(zl(n))for(let e of n.B_)yield e(!0)})}function nf(n){return L(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Lb(n,e){let t=X(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Kx(t)?qx(t):sf(t).r_()&&Wx(t,e))}function Kh(n,e){let t=X(n),i=sf(t);t.N_.delete(e),i.r_()&&VH(t,e),t.N_.size===0&&(i.r_()?i.o_():zl(t)&&t.q_.set("Unknown"))}function Wx(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(de.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}sf(n).A_(e)}function VH(n,e){n.Q_.xe(e),sf(n).R_(e)}function qx(n){n.Q_=new uM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),sf(n).start(),n.q_.v_()}function Kx(n){return zl(n)&&!sf(n).n_()&&n.N_.size>0}function zl(n){return X(n).L_.size===0}function BH(n){n.Q_=void 0}function tie(n){return L(this,null,function*(){n.q_.set("Online")})}function nie(n){return L(this,null,function*(){n.N_.forEach((e,t)=>{Wx(n,e)})})}function iie(n,e){return L(this,null,function*(){BH(n),Kx(n)?(n.q_.M_(e),qx(n)):n.q_.set("Unknown")})}function rie(n,e,t){return L(this,null,function*(){if(n.q_.set("Online"),e instanceof Jw&&e.state===2&&e.cause)try{yield function(r,s){return L(this,null,function*(){let o=s.cause;for(let a of s.targetIds)r.N_.has(a)&&(yield r.remoteSyncer.rejectListen(a,o),r.N_.delete(a),r.Q_.removeTarget(a))})}(n,e)}catch(i){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield _b(n,i)}else if(e instanceof Fh?n.Q_.Ke(e):e instanceof Yw?n.Q_.He(e):n.Q_.We(e),!t.isEqual(de.min()))try{let i=yield NH(n.localStore);t.compareTo(i)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){let d=s.N_.get(c);d&&s.N_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{let d=s.N_.get(l);if(!d)return;s.N_.set(l,d.withResumeToken(Tn.EMPTY_BYTE_STRING,d.snapshotVersion)),VH(s,l);let h=new zh(d.target,l,c,d.sequenceNumber);Wx(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(i){W("RemoteStore","Failed to raise snapshot:",i),yield _b(n,i)}})}function _b(n,e,t){return L(this,null,function*(){if(!Hl(e))throw e;n.L_.add(1),yield nf(n),n.q_.set("Offline"),t||(t=()=>NH(n.localStore)),n.asyncQueue.enqueueRetryable(()=>L(this,null,function*(){W("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Rm(n)}))})}function jH(n,e){return e().catch(t=>_b(n,t,e))}function rf(n){return L(this,null,function*(){let e=X(n),t=Ul(e),i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;sie(e);)try{let r=yield Jne(e.localStore,i);if(r===null){e.O_.length===0&&t.o_();break}i=r.batchId,oie(e,r)}catch(r){yield _b(e,r)}UH(e)&&$H(e)})}function sie(n){return zl(n)&&n.O_.length<10}function oie(n,e){n.O_.push(e);let t=Ul(n);t.r_()&&t.V_&&t.m_(e.mutations)}function UH(n){return zl(n)&&!Ul(n).n_()&&n.O_.length>0}function $H(n){Ul(n).start()}function aie(n){return L(this,null,function*(){Ul(n).p_()})}function lie(n){return L(this,null,function*(){let e=Ul(n);for(let t of n.O_)e.m_(t.mutations)})}function cie(n,e,t){return L(this,null,function*(){let i=n.O_.shift(),r=aM.from(i,e,t);yield jH(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield rf(n)})}function uie(n,e){return L(this,null,function*(){e&&Ul(n).V_&&(yield function(i,r){return L(this,null,function*(){if(function(o){return lH(o)&&o!==B.ABORTED}(r.code)){let s=i.O_.shift();Ul(i).s_(),yield jH(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield rf(i)}})}(n,e)),UH(n)&&$H(n)})}function f$(n,e){return L(this,null,function*(){let t=X(n);t.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");let i=zl(t);t.L_.add(3),yield nf(t),i&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Rm(t)})}function nx(n,e){return L(this,null,function*(){let t=X(n);e?(t.L_.delete(2),yield Rm(t)):e||(t.L_.add(2),yield nf(t),t.q_.set("Unknown"))})}function sf(n){return n.K_||(n.K_=function(t,i,r){let s=X(t);return s.w_(),new JM(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Eo:tie.bind(null,n),Ro:nie.bind(null,n),mo:iie.bind(null,n),d_:rie.bind(null,n)}),n.B_.push(e=>L(this,null,function*(){e?(n.K_.s_(),Kx(n)?qx(n):n.q_.set("Unknown")):(yield n.K_.stop(),BH(n))}))),n.K_}function Ul(n){return n.U_||(n.U_=function(t,i,r){let s=X(t);return s.w_(),new ZM(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:aie.bind(null,n),mo:uie.bind(null,n),f_:lie.bind(null,n),g_:cie.bind(null,n)}),n.B_.push(e=>L(this,null,function*(){e?(n.U_.s_(),yield rf(n)):(yield n.U_.stop(),n.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var ix=class n{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Wn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){let o=Date.now()+i,a=new n(e,t,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function of(n,e){if(Cn("AsyncQueue",`${e}: ${n}`),Hl(n))return new G(B.UNAVAILABLE,`${e}: ${n}`);throw n}var yb=class n{constructor(e){this.comparator=e?(t,i)=>e(t,i)||ee.comparator(t.key,i.key):(t,i)=>ee.comparator(t.key,i.key),this.keyedMap=Zg(),this.sortedSet=new zt(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var vb=class{constructor(){this.W_=new zt(ee.comparator)}track(e){let t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):ie():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,i)=>{e.push(i)}),e}},Qh=class n{constructor(e,t,i,r,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,i,r,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,yb.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Am(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}};var rx=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},sx=class{constructor(){this.queries=p$(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){let r=X(t),s=r.queries;r.queries=p$(),s.forEach((o,a)=>{for(let l of a.j_)l.onError(i)})})(this,new G(B.ABORTED,"Firestore shutting down"))}};function p$(){return new Do(n=>K$(n),Am)}function Qx(n,e){return L(this,null,function*(){let t=X(n),i=3,r=e.query,s=t.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new rx,i=e.J_()?0:1);try{switch(i){case 0:s.z_=yield t.onListen(r,!0);break;case 1:s.z_=yield t.onListen(r,!1);break;case 2:yield t.onFirstRemoteStoreListen(r)}}catch(o){let a=of(o,`Initialization of query '${Mh(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&Jx(t)})}function Yx(n,e){return L(this,null,function*(){let t=X(n),i=e.query,r=3,s=t.queries.get(i);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}})}function die(n,e){let t=X(n),i=!1;for(let r of e){let s=r.query,o=t.queries.get(s);if(o){for(let a of o.j_)a.X_(r)&&(i=!0);o.z_=r}}i&&Jx(t)}function hie(n,e,t){let i=X(n),r=i.queries.get(e);if(r)for(let s of r.j_)s.onError(t);i.queries.delete(e)}function Jx(n){n.Y_.forEach(e=>{e.next()})}var ox,g$;(g$=ox||(ox={})).ea="default",g$.Cache="cache";var Em=class{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new Qh(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Qh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ox.Cache}};var ax=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var wb=class{constructor(e){this.serializer=e}Es(e){return wo(this.serializer,e)}ds(e){return e.metadata.exists?mH(this.serializer,e.document,!1):Ln.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return In(e)}},lx=class{constructor(e,t,i){this.ca=e,this.localStore=t,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=HH(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let i=gt.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,i=new wb(this.serializer);for(let r of e)if(r.metadata.queries){let s=i.Es(r.metadata.name);for(let o of r.metadata.queries){let a=(t.get(o)||Le()).add(s);t.set(o,a)}}return t}complete(){return L(this,null,function*(){let e=yield Zne(this.localStore,new wb(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let i of this.queries)yield Xne(this.localStore,i,t.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function HH(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var bb=class{constructor(e){this.key=e}},Eb=class{constructor(e){this.key=e}},Cb=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Le(),this.mutatedKeys=Le(),this.Aa=Y$(e),this.Ra=new yb(this.Aa)}get Va(){return this.Ta}ma(e,t){let i=t?t.fa:new vb,r=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1,l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((d,h)=>{let f=r.get(d),p=Mm(this.query,h)?h:null,y=!!f&&this.mutatedKeys.has(f.key),_=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations),w=!1;f&&p?f.data.isEqual(p.data)?y!==_&&(i.track({type:3,doc:p}),w=!0):this.ga(f,p)||(i.track({type:2,doc:p}),w=!0,(l&&this.Aa(p,l)>0||c&&this.Aa(p,c)<0)&&(a=!0)):!f&&p?(i.track({type:0,doc:p}),w=!0):f&&!p&&(i.track({type:1,doc:f}),w=!0,(l||c)&&(a=!0)),w&&(p?(o=o.add(p),s=_?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),i.track({type:1,doc:d})}return{Ra:o,fa:i,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((d,h)=>function(p,y){let _=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie()}};return _(p)-_(y)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(i),r=r!=null&&r;let a=t&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Qh(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new vb,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=Le(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});let t=[];return e.forEach(i=>{this.da.has(i)||t.push(new Eb(i))}),this.da.forEach(i=>{e.has(i)||t.push(new bb(i))}),t}ba(e){this.Ta=e.Ts,this.da=Le();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Qh.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},cx=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},ux=class{constructor(e){this.key=e,this.va=!1}},dx=class{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Do(a=>K$(a),Am),this.Ma=new Map,this.xa=new Set,this.Oa=new zt(ee.comparator),this.Na=new Map,this.La=new vm,this.Ba={},this.ka=new Map,this.qa=Gh.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function fie(n,e,t=!0){return L(this,null,function*(){let i=Vb(n),r,s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=yield zH(i,e,t,!0),r})}function pie(n,e){return L(this,null,function*(){let t=Vb(n);yield zH(t,e,!0,!1)})}function zH(n,e,t,i){return L(this,null,function*(){let r=yield Wh(n.localStore,nr(e)),s=r.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return i&&(a=yield Zx(n,e,s,o==="current",r.resumeToken)),n.isPrimaryClient&&t&&Lb(n.remoteStore,r),a})}function Zx(n,e,t,i,r){return L(this,null,function*(){n.Ka=(h,f,p)=>function(_,w,A,x){return L(this,null,function*(){let M=w.view.ma(A);M.ns&&(M=yield db(_.localStore,w.query,!1).then(({documents:C})=>w.view.ma(C,M)));let R=x&&x.targetChanges.get(w.targetId),P=x&&x.targetMismatches.get(w.targetId)!=null,N=w.view.applyChanges(M,_.isPrimaryClient,R,P);return hx(_,w.targetId,N.wa),N.snapshot})}(n,h,f,p);let s=yield db(n.localStore,e,!0),o=new Cb(e,s.Ts),a=o.ma(s.documents),l=gm.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),c=o.applyChanges(a,n.isPrimaryClient,l);hx(n,t,c.wa);let d=new cx(e,t,o);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),c.snapshot})}function gie(n,e,t){return L(this,null,function*(){let i=X(n),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!Am(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield qh(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&Kh(i.remoteStore,r.targetId),Yh(i,r.targetId)}).catch($l))):(Yh(i,r.targetId),yield qh(i.localStore,r.targetId,!0))})}function mie(n,e){return L(this,null,function*(){let t=X(n),i=t.Fa.get(e),r=t.Ma.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Kh(t.remoteStore,i.targetId))})}function _ie(n,e,t){return L(this,null,function*(){let i=nR(n);try{let r=yield function(o,a){let l=X(o),c=on.now(),d=a.reduce((p,y)=>p.add(y.key),Le()),h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let y=vr(),_=Le();return l.cs.getEntries(p,d).next(w=>{y=w,y.forEach((A,x)=>{x.isValidDocument()||(_=_.add(A))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,y)).next(w=>{h=w;let A=[];for(let x of a){let M=Rne(x,h.get(x.key).overlayedDocument);M!=null&&A.push(new Vs(x.key,M,U$(M.value.mapValue),yn.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,A,a)}).next(w=>{f=w;let A=w.applyToLocalDocumentSet(h,_);return l.documentOverlayCache.saveOverlays(p,w.batchId,A)})}).then(()=>({batchId:f.batchId,changes:Z$(h)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new zt(xe)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(i,r.batchId,t),yield Ca(i,r.changes),yield rf(i.remoteStore)}catch(r){let s=of(r,"Failed to persist write");t.reject(s)}})}function GH(n,e){return L(this,null,function*(){let t=X(n);try{let i=yield Yne(t.localStore,e);e.targetChanges.forEach((r,s)=>{let o=t.Na.get(s);o&&(oe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?oe(o.va):r.removedDocuments.size>0&&(oe(o.va),o.va=!1))}),yield Ca(t,i,e)}catch(i){yield $l(i)}})}function m$(n,e,t){let i=X(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let r=[];i.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){let l=X(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(let f of h.j_)f.Z_(a)&&(c=!0)}),c&&Jx(l)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function yie(n,e,t){return L(this,null,function*(){let i=X(n);i.sharedClientState.updateQueryState(e,"rejected",t);let r=i.Na.get(e),s=r&&r.key;if(s){let o=new zt(ee.comparator);o=o.insert(s,Ln.newNoDocument(s,de.min()));let a=Le().add(s),l=new pm(de.min(),new Map,new zt(xe),o,a);yield GH(i,l),i.Oa=i.Oa.remove(s),i.Na.delete(e),tR(i)}else yield qh(i.localStore,e,!1).then(()=>Yh(i,e,t)).catch($l)})}function vie(n,e){return L(this,null,function*(){let t=X(n),i=e.batch.batchId;try{let r=yield Qne(t.localStore,e);eR(t,i,null),Xx(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield Ca(t,r)}catch(r){yield $l(r)}})}function wie(n,e,t){return L(this,null,function*(){let i=X(n);try{let r=yield function(o,a){let l=X(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(oe(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(i.localStore,e);eR(i,e,t),Xx(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield Ca(i,r)}catch(r){yield $l(r)}})}function bie(n,e){return L(this,null,function*(){let t=X(n);zl(t.remoteStore)||W("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let i=yield function(o){let a=X(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(i===-1)return void e.resolve();let r=t.ka.get(i)||[];r.push(e),t.ka.set(i,r)}catch(i){let r=of(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}})}function Xx(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function eR(n,e,t){let i=X(n),r=i.Ba[i.currentUser.toKey()];if(r){let s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function Yh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.Ma.get(e))n.Fa.delete(i),t&&n.Ca.$a(i,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(i=>{n.La.containsKey(i)||WH(n,i)})}function WH(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Kh(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),tR(n))}function hx(n,e,t){for(let i of t)i instanceof bb?(n.La.addReference(i.key,e),Eie(n,i)):i instanceof Eb?(W("SyncEngine","Document no longer in limbo: "+i.key),n.La.removeReference(i.key,e),n.La.containsKey(i.key)||WH(n,i.key)):ie()}function Eie(n,e){let t=e.key,i=t.path.canonicalString();n.Oa.get(t)||n.xa.has(i)||(W("SyncEngine","New document in limbo: "+t),n.xa.add(i),tR(n))}function tR(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new ee(gt.fromString(e)),i=n.qa.next();n.Na.set(i,new ux(t)),n.Oa=n.Oa.insert(t,i),Lb(n.remoteStore,new zh(nr(tf(t.path)),i,"TargetPurposeLimboResolution",Vr.oe))}}function Ca(n,e,t){return L(this,null,function*(){let i=X(n),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((a,l)=>{o.push(i.Ka(l,e,t).then(c=>{var d;if((c||t)&&i.isPrimaryClient){let h=c?!c.fromCache:(d=t?.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;i.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){r.push(c);let h=zM.Wi(l.targetId,c);s.push(h)}}))}),yield Promise.all(o),i.Ca.d_(r),yield function(l,c){return L(this,null,function*(){let d=X(l);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>F.forEach(c,f=>F.forEach(f.$i,p=>d.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>F.forEach(f.Ui,p=>d.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!Hl(h))throw h;W("LocalStore","Failed to update sequence numbers: "+h)}for(let h of c){let f=h.targetId;if(!h.fromCache){let p=d.os.get(f),y=p.snapshotVersion,_=p.withLastLimboFreeSnapshotVersion(y);d.os=d.os.insert(f,_)}}})}(i.localStore,s))})}function Cie(n,e){return L(this,null,function*(){let t=X(n);if(!t.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());let i=yield RH(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new G(B.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Ca(t,i.hs)}})}function Die(n,e){let t=X(n),i=t.Na.get(e);if(i&&i.va)return Le().add(i.key);{let r=Le(),s=t.Ma.get(e);if(!s)return r;for(let o of s){let a=t.Fa.get(o);r=r.unionWith(a.view.Va)}return r}}function Iie(n,e){return L(this,null,function*(){let t=X(n),i=yield db(t.localStore,e.query,!0),r=e.view.ba(i);return t.isPrimaryClient&&hx(t,e.targetId,r.wa),r})}function Tie(n,e){return L(this,null,function*(){let t=X(n);return kH(t.localStore,e).then(i=>Ca(t,i))})}function Sie(n,e,t,i){return L(this,null,function*(){let r=X(n),s=yield function(a,l){let c=X(a),d=X(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Mn(h,l).next(f=>f?c.localDocuments.getDocuments(h,f):F.resolve(null)))}(r.localStore,e);s!==null?(t==="pending"?yield rf(r.remoteStore):t==="acknowledged"||t==="rejected"?(eR(r,e,i||null),Xx(r,e),function(a,l){X(X(a).mutationQueue).On(l)}(r.localStore,e)):ie(),yield Ca(r,s)):W("SyncEngine","Cannot apply mutation batch with id: "+e)})}function Aie(n,e){return L(this,null,function*(){let t=X(n);if(Vb(t),nR(t),e===!0&&t.Qa!==!0){let i=t.sharedClientState.getAllActiveQueryTargets(),r=yield _$(t,i.toArray());t.Qa=!0,yield nx(t.remoteStore,!0);for(let s of r)Lb(t.remoteStore,s)}else if(e===!1&&t.Qa!==!1){let i=[],r=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?i.push(o):r=r.then(()=>(Yh(t,o),qh(t.localStore,o,!0))),Kh(t.remoteStore,o)}),yield r,yield _$(t,i),function(o){let a=X(o);a.Na.forEach((l,c)=>{Kh(a.remoteStore,c)}),a.La.pr(),a.Na=new Map,a.Oa=new zt(ee.comparator)}(t),t.Qa=!1,yield nx(t.remoteStore,!1)}})}function _$(n,e,t){return L(this,null,function*(){let i=X(n),r=[],s=[];for(let o of e){let a,l=i.Ma.get(o);if(l&&l.length!==0){a=yield Wh(i.localStore,nr(l[0]));for(let c of l){let d=i.Fa.get(c),h=yield Iie(i,d);h.snapshot&&s.push(h.snapshot)}}else{let c=yield PH(i.localStore,o);a=yield Wh(i.localStore,c),yield Zx(i,qH(c),o,!1,a.resumeToken)}r.push(a)}return i.Ca.d_(s),r})}function qH(n){return q$(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Mie(n){return function(t){return X(X(t).persistence).Qi()}(X(n).localStore)}function xie(n,e,t,i){return L(this,null,function*(){let r=X(n);if(r.Qa)return void W("SyncEngine","Ignoring unexpected query state notification.");let s=r.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{let o=yield kH(r.localStore,Q$(s[0])),a=pm.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Tn.EMPTY_BYTE_STRING);yield Ca(r,o,a);break}case"rejected":yield qh(r.localStore,e,!0),Yh(r,e,i);break;default:ie()}})}function Rie(n,e,t){return L(this,null,function*(){let i=Vb(n);if(i.Qa){for(let r of e){if(i.Ma.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){W("SyncEngine","Adding an already active target "+r);continue}let s=yield PH(i.localStore,r),o=yield Wh(i.localStore,s);yield Zx(i,qH(s),o.targetId,!1,o.resumeToken),Lb(i.remoteStore,o)}for(let r of t)i.Ma.has(r)&&(yield qh(i.localStore,r,!1).then(()=>{Kh(i.remoteStore,r),Yh(i,r)}).catch($l))}})}function Vb(n){let e=X(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=GH.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Die.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yie.bind(null,e),e.Ca.d_=die.bind(null,e.eventManager),e.Ca.$a=hie.bind(null,e.eventManager),e}function nR(n){let e=X(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vie.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wie.bind(null,e),e}function Nie(n,e,t){let i=X(n);(function(s,o,a){return L(this,null,function*(){try{let l=yield o.getMetadata();if(yield function(p,y){let _=X(p),w=In(y.createTime);return _.persistence.runTransaction("hasNewerBundle","readonly",A=>_.Gr.getBundleMetadata(A,y.id)).then(A=>!!A&&A.createTime.compareTo(w)>=0)}(s.localStore,l))return yield o.close(),a._completeWith(function(p){return{taskState:"Success",documentsLoaded:p.totalDocuments,bytesLoaded:p.totalBytes,totalDocuments:p.totalDocuments,totalBytes:p.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(HH(l));let c=new lx(l,s.localStore,o.serializer),d=yield o.Ua();for(;d;){let f=yield c.la(d);f&&a._updateProgress(f),d=yield o.Ua()}let h=yield c.complete();return yield Ca(s,h.Ia,void 0),yield function(p,y){let _=X(p);return _.persistence.runTransaction("Save bundle","readwrite",w=>_.Gr.saveBundleMetadata(w,y))}(s.localStore,l),a._completeWith(h.progress),Promise.resolve(h.Pa)}catch(l){return Fs("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}var fx=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return L(this,null,function*(){this.serializer=xm(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,i){return null}Ha(t,i){return null}za(t){return xH(this.persistence,new ub,t.initialUser,this.serializer)}Ga(t){return new lb(cb.Zr,this.serializer)}Wa(t){return new pb}terminate(){return L(this,null,function*(){var t,i;(t=this.gcScheduler)===null||t===void 0||t.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var Db=class n extends fx{constructor(e,t,i){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return L(this,null,function*(){yield sE(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield nR(this.Ja.syncEngine),yield rf(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return xH(this.persistence,new ub,e.initialUser,this.serializer)}ja(e,t){let i=this.persistence.referenceDelegate.garbageCollector;return new AM(i,e.asyncQueue,t)}Ha(e,t){let i=new GA(t,this.persistence);return new zA(e.asyncQueue,i)}Ga(e){let t=Gx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?hs.withCacheSize(this.cacheSizeBytes):hs.DEFAULT;return new HM(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,LH(),Lw(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new pb}},px=class n extends Db{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return L(this,null,function*(){yield sE(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof rm&&(this.sharedClientState.syncEngine={no:Sie.bind(null,t),ro:xie.bind(null,t),io:Rie.bind(null,t),Qi:Mie.bind(null,t),eo:Tie.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(i=>L(this,null,function*(){yield Aie(this.Ja.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=LH();if(!rm.D(t))throw new G(B.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let i=Gx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new rm(t,e.asyncQueue,i,e.clientId,e.initialUser)}},iR=(()=>{class n{initialize(t,i){return L(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>m$(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Cie.bind(null,this.syncEngine),yield nx(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new sx}()}createDatastore(t){let i=xm(t.databaseInfo.databaseId),r=function(o){return new YM(o)}(t.databaseInfo);return function(o,a,l,c){return new XM(o,a,l,c)}(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return function(r,s,o,a,l){return new tx(r,s,o,a,l)}(this.localStore,this.datastore,t.asyncQueue,i=>m$(this.syncEngine,i,0),function(){return gb.D()?new gb:new KM}())}createSyncEngine(t,i){return function(s,o,a,l,c,d,h){let f=new dx(s,o,a,l,c,d);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}terminate(){return L(this,null,function*(){var t,i;yield function(s){return L(this,null,function*(){let o=X(s);W("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield nf(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()})}}return n.provider={build:()=>new n},n})();function y$(n,e=10240){let t=0;return{read(){return L(this,null,function*(){if(t<n.byteLength){let r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})},cancel(){return L(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Jh=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Cn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var gx=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new Wn,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(i=>{i&&i.ua()?this.metadata.resolve(i.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i?.aa)}`))},i=>this.metadata.reject(i))}close(){return this.Xa.cancel()}getMetadata(){return L(this,null,function*(){return this.metadata.promise})}Ua(){return L(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return L(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),i=Number(t);isNaN(i)&&this.ru(`length string (${t}) is not valid number`);let r=yield this.iu(i);return new ax(JSON.parse(r),e.length+i)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return L(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return L(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return L(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var mx=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return L(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new G(B.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(r,s){return L(this,null,function*(){let o=X(r),a={documents:s.map(h=>mm(o.serializer,h))},l=yield o.Lo("BatchGetDocuments",o.serializer.databaseId,gt.emptyPath(),a,s.length),c=new Map;l.forEach(h=>{let f=Lne(o.serializer,h);c.set(f.key.toString(),f)});let d=[];return s.forEach(h=>{let f=c.get(h.toString());oe(!!f),d.push(f)}),d})}(this.datastore,e);return t.forEach(i=>this.recordVersion(i)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new jl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return L(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,i)=>{let r=ee.fromPath(i);this.mutations.push(new dm(r,this.precondition(r)))}),yield function(i,r){return L(this,null,function*(){let s=X(i),o={writes:r.map(a=>_m(s.serializer,a))};yield s.Mo("Commit",s.serializer.databaseId,gt.emptyPath(),o)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ie();t=de.min()}let i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new G(B.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(de.min())?yn.exists(!1):yn.updateTime(t):yn.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(de.min()))throw new G(B.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return yn.updateTime(t)}return yn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var _x=class{constructor(e,t,i,r,s){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=s,this._u=i.maxAttempts,this.t_=new bm(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>L(this,null,function*(){let e=new mx(this.datastore),t=this.cu(e);t&&t.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.lu(r)}))}).catch(i=>{this.lu(i)})}))}cu(e){try{let t=this.updateFunction(e);return!Tm(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!lH(t)}return!1}};var yx=class{constructor(e,t,i,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Fn.UNAUTHENTICATED,this.clientId=Bw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,o=>L(this,null,function*(){W("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(i,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Wn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>L(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=of(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function OA(n,e){return L(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(r=>L(this,null,function*(){i.isEqual(r)||(yield RH(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function v$(n,e){return L(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield rR(n);W("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>f$(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>f$(e.remoteStore,r)),n._onlineComponents=e})}function rR(n){return L(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{yield OA(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(r){return r.name==="FirebaseError"?r.code===B.FAILED_PRECONDITION||r.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(t))throw t;Fs("Error using user provided cache. Falling back to memory cache: "+t),yield OA(n,new fx)}}else W("FirestoreClient","Using default OfflineComponentProvider"),yield OA(n,new fx);return n._offlineComponents})}function Bb(n){return L(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),yield v$(n,n._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),yield v$(n,new iR))),n._onlineComponents})}function KH(n){return rR(n).then(e=>e.persistence)}function sR(n){return rR(n).then(e=>e.localStore)}function QH(n){return Bb(n).then(e=>e.remoteStore)}function oR(n){return Bb(n).then(e=>e.syncEngine)}function Oie(n){return Bb(n).then(e=>e.datastore)}function Zh(n){return L(this,null,function*(){let e=yield Bb(n),t=e.eventManager;return t.onListen=fie.bind(null,e.syncEngine),t.onUnlisten=gie.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=pie.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=mie.bind(null,e.syncEngine),t})}function Pie(n){return n.asyncQueue.enqueue(()=>L(this,null,function*(){let e=yield KH(n),t=yield QH(n);return e.setNetworkEnabled(!0),function(r){let s=X(r);return s.L_.delete(0),Rm(s)}(t)}))}function kie(n){return n.asyncQueue.enqueue(()=>L(this,null,function*(){let e=yield KH(n),t=yield QH(n);return e.setNetworkEnabled(!1),function(r){return L(this,null,function*(){let s=X(r);s.L_.add(0),yield nf(s),s.q_.set("Offline")})}(t)}))}function Fie(n,e){let t=new Wn;return n.asyncQueue.enqueueAndForget(()=>L(this,null,function*(){return function(r,s,o){return L(this,null,function*(){try{let a=yield function(c,d){let h=X(c);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,d))}(r,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new G(B.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let l=of(a,`Failed to get document '${s} from cache`);o.reject(l)}})}(yield sR(n),e,t)})),t.promise}function YH(n,e,t={}){let i=new Wn;return n.asyncQueue.enqueueAndForget(()=>L(this,null,function*(){return function(s,o,a,l,c){let d=new Jh({next:f=>{d.Za(),o.enqueueAndForget(()=>Yx(s,h));let p=f.docs.has(a);!p&&f.fromCache?c.reject(new G(B.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?c.reject(new G(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new Em(tf(a.path),d,{includeMetadataChanges:!0,_a:!0});return Qx(s,h)}(yield Zh(n),n.asyncQueue,e,t,i)})),i.promise}function Lie(n,e){let t=new Wn;return n.asyncQueue.enqueueAndForget(()=>L(this,null,function*(){return function(r,s,o){return L(this,null,function*(){try{let a=yield db(r,s,!0),l=new Cb(s,a.Ts),c=l.ma(a.documents),d=l.applyChanges(c,!1);o.resolve(d.snapshot)}catch(a){let l=of(a,`Failed to execute query '${s} against cache`);o.reject(l)}})}(yield sR(n),e,t)})),t.promise}function JH(n,e,t={}){let i=new Wn;return n.asyncQueue.enqueueAndForget(()=>L(this,null,function*(){return function(s,o,a,l,c){let d=new Jh({next:f=>{d.Za(),o.enqueueAndForget(()=>Yx(s,h)),f.fromCache&&l.source==="server"?c.reject(new G(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new Em(a,d,{includeMetadataChanges:!0,_a:!0});return Qx(s,h)}(yield Zh(n),n.asyncQueue,e,t,i)})),i.promise}function Vie(n,e){let t=new Jh(e);return n.asyncQueue.enqueueAndForget(()=>L(this,null,function*(){return function(r,s){X(r).Y_.add(s),s.next()}(yield Zh(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>L(this,null,function*(){return function(r,s){X(r).Y_.delete(s)}(yield Zh(n),t)}))}}function Bie(n,e,t,i){let r=function(o,a){let l;return l=typeof o=="string"?uH().encode(o):o,function(d,h){return new gx(d,h)}(function(d,h){if(d instanceof Uint8Array)return y$(d,h);if(d instanceof ArrayBuffer)return y$(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(t,xm(e));n.asyncQueue.enqueueAndForget(()=>L(this,null,function*(){Nie(yield oR(n),r,i)}))}function jie(n,e){return n.asyncQueue.enqueue(()=>L(this,null,function*(){return function(i,r){let s=X(i);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,r))}(yield sR(n),e)}))}function ZH(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var w$=new Map;function aR(n,e,t){if(!t)throw new G(B.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function lR(n,e,t,i){if(e===!0&&i===!0)throw new G(B.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function b$(n){if(!ee.isDocumentKey(n))throw new G(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function E$(n){if(ee.isDocumentKey(n))throw new G(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function jb(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ie()}function wt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new G(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=jb(n);throw new G(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function XH(n,e){if(e<=0)throw new G(B.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var Ib=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new G(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZH((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new G(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new G(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new G(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},mu=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ib({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ib(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new PA;switch(i.type){case"firstParty":return new VA(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new G(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return L(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let i=w$.get(t);i&&(W("ComponentProvider","Removing Datastore"),w$.delete(t),i.terminate())}(this),Promise.resolve()}};function e4(n,e,t,i={}){var r;let s=(n=wt(n,mu))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Fs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=Fn.MOCK_USER;else{a=Wm(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new G(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Fn(c)}n._authCredentials=new kA(new Vw(a,l))}}var mi=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ut=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},bo=class n extends mi{constructor(e,t,i){super(e,t,tf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ut(this.firestore,null,new ee(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function cR(n,e,...t){if(n=it(n),aR("collection","path",e),n instanceof mu){let i=gt.fromString(e,...t);return E$(i),new bo(n,null,i)}{if(!(n instanceof Ut||n instanceof bo))throw new G(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(gt.fromString(e,...t));return E$(i),new bo(n.firestore,null,i)}}function t4(n,e){if(n=wt(n,mu),aR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new G(B.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new mi(n,null,function(i){return new Ls(gt.emptyPath(),i)}(e))}function Nm(n,e,...t){if(n=it(n),arguments.length===1&&(e=Bw.newId()),aR("doc","path",e),n instanceof mu){let i=gt.fromString(e,...t);return b$(i),new Ut(n,null,new ee(i))}{if(!(n instanceof Ut||n instanceof bo))throw new G(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(gt.fromString(e,...t));return b$(i),new Ut(n.firestore,n instanceof bo?n.converter:null,new ee(i))}}function uR(n,e){return n=it(n),e=it(e),(n instanceof Ut||n instanceof bo)&&(e instanceof Ut||e instanceof bo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function dR(n,e){return n=it(n),e=it(e),n instanceof mi&&e instanceof mi&&n.firestore===e.firestore&&Am(n._query,e._query)&&n.converter===e.converter}var Tb=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new bm(this,"async_queue_retry"),this.Vu=()=>{let i=Lw();i&&W("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;let t=Lw();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Lw();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Wn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return L(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Hl(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;let r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw Cn("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let r=ix.createAndSchedule(this,e,t,i,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&ie()}verifyOperationInProgress(){}wu(){return L(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function vx(n){return function(t,i){if(typeof t!="object"||t===null)return!1;let r=t;for(let s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(n,["next","error","complete"])}var wx=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Wn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var n4=-1,an=class extends mu{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new Tb,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return L(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Tb(e),this._firestoreClient=void 0,yield e}})}};function _i(n){if(n._terminated)throw new G(B.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||i4(n),n._firestoreClient}function i4(n){var e,t,i;let r=n._freezeSettings(),s=function(a,l,c,d){return new WA(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,ZH(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new yx(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){let l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}}(n._componentsProvider))}function r4(n,e){Fs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return o4(n,iR.provider,{build:i=>new Db(i,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function s4(n){return L(this,null,function*(){Fs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();o4(n,iR.provider,{build:t=>new px(t,e.cacheSizeBytes)})})}function o4(n,e,t){if((n=wt(n,an))._firestoreClient||n._terminated)throw new G(B.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new G(B.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},i4(n)}function a4(n){if(n._initialized&&!n._terminated)throw new G(B.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Wn;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>L(this,null,function*(){try{yield function(i){return L(this,null,function*(){if(!Ol.D())return Promise.resolve();let r=i+"main";yield Ol.delete(r)})}(Gx(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function l4(n){return function(t){let i=new Wn;return t.asyncQueue.enqueueAndForget(()=>L(this,null,function*(){return bie(yield oR(t),i)})),i.promise}(_i(n=wt(n,an)))}function c4(n){return Pie(_i(n=wt(n,an)))}function u4(n){return kie(_i(n=wt(n,an)))}function d4(n,e){let t=_i(n=wt(n,an)),i=new wx;return Bie(t,n._databaseId,e,i),i}function h4(n,e){return jie(_i(n=wt(n,an)),e).then(t=>t?new mi(n,null,t.query):null)}var Io=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Tn.fromBase64String(e))}catch(t){throw new G(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Bs=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new G(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ba=class{constructor(e){this._methodName=e}};var _u=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new G(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new G(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}};var Cm=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}};var Uie=/^__.*__$/,bx=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Vs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bl(e,this.data,t,this.fieldTransforms)}},Sb=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Vs(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function f4(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}var Ab=class n{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Mb(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(f4(this.Cu)&&Uie.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},Ex=class{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||xm(e)}Qu(e,t,i,r=!1){return new Ab({Cu:e,methodName:t,qu:i,path:Dn.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function bu(n){let e=n._freezeSettings(),t=xm(n._databaseId);return new Ex(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ub(n,e,t,i,r,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,r);pR("Data must be an object, but it was:",o,i);let a=m4(i,o),l,c;if(s.merge)l=new Br(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let h of s.mergeFields){let f=Sx(e,h,t);if(!o.contains(f))throw new G(B.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);y4(d,f)||d.push(f)}l=new Br(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new bx(new Oi(a),l,c)}var Dm=class n extends ba{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function p4(n,e,t){return new Ab({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Cx=class n extends ba{_toFieldTransform(e){return new fu(e.path,new Ll)}isEqual(e){return e instanceof n}},Dx=class n extends ba{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=p4(this,e,!0),i=this.Ku.map(s=>Eu(s,t)),r=new va(i);return new fu(e.path,r)}isEqual(e){return e instanceof n&&lE(this.Ku,e.Ku)}},Ix=class n extends ba{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=p4(this,e,!0),i=this.Ku.map(s=>Eu(s,t)),r=new wa(i);return new fu(e.path,r)}isEqual(e){return e instanceof n&&lE(this.Ku,e.Ku)}},Tx=class n extends ba{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new Vl(e.serializer,tH(e.serializer,this.$u));return new fu(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function hR(n,e,t,i){let r=n.Qu(1,e,t);pR("Data must be an object, but it was:",r,i);let s=[],o=Oi.empty();wu(i,(l,c)=>{let d=gR(e,l,t);c=it(c);let h=r.Nu(d);if(c instanceof Dm)s.push(d);else{let f=Eu(c,h);f!=null&&(s.push(d),o.set(d,f))}});let a=new Br(s);return new Sb(o,a,r.fieldTransforms)}function fR(n,e,t,i,r,s){let o=n.Qu(1,e,t),a=[Sx(e,i,t)],l=[r];if(s.length%2!=0)throw new G(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(Sx(e,s[f])),l.push(s[f+1]);let c=[],d=Oi.empty();for(let f=a.length-1;f>=0;--f)if(!y4(c,a[f])){let p=a[f],y=l[f];y=it(y);let _=o.Nu(p);if(y instanceof Dm)c.push(p);else{let w=Eu(y,_);w!=null&&(c.push(p),d.set(p,w))}}let h=new Br(c);return new Sb(d,h,o.fieldTransforms)}function g4(n,e,t,i=!1){return Eu(t,n.Qu(i?4:3,e))}function Eu(n,e){if(_4(n=it(n)))return pR("Unsupported field value:",e,n),m4(n,e);if(n instanceof ba)return function(i,r){if(!f4(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){let s=[],o=0;for(let a of i){let l=Eu(a,r.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(i,r){if((i=it(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return tH(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=on.fromDate(i);return{timestampValue:Hh(r.serializer,s)}}if(i instanceof on){let s=new on(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Hh(r.serializer,s)}}if(i instanceof _u)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Io)return{bytesValue:dH(r.serializer,i._byteString)};if(i instanceof Ut){let s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:$x(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Cm)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Ux(a.serializer,l)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${jb(i)}`)}(n,e)}function m4(n,e){let t={};return L$(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wu(n,(i,r)=>{let s=Eu(r,e.Mu(i));s!=null&&(t[i]=s)}),{mapValue:{fields:t}}}function _4(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof on||n instanceof _u||n instanceof Io||n instanceof Ut||n instanceof ba||n instanceof Cm)}function pR(n,e,t){if(!_4(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){let i=jb(t);throw i==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+i)}}function Sx(n,e,t){if((e=it(e))instanceof Bs)return e._internalPath;if(typeof e=="string")return gR(n,e);throw Mb("Field path arguments must be of type string or ",n,!1,void 0,t)}var $ie=new RegExp("[~\\*/\\[\\]]");function gR(n,e,t){if(e.search($ie)>=0)throw Mb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Bs(...e.split("."))._internalPath}catch{throw Mb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Mb(n,e,t,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new G(B.INVALID_ARGUMENT,a+n+l)}function y4(n,e){return n.some(t=>t.isEqual(e))}var yu=class{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Ax(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field($b("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Ax=class extends yu{data(){return super.data()}};function $b(n,e){return typeof e=="string"?gR(n,e):e instanceof Bs?e._internalPath:e._delegate._internalPath}function v4(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new G(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Im=class{},vu=class extends Im{};function Da(n,e,...t){let i=[];e instanceof Im&&i.push(e),i=i.concat(t),function(s){let o=s.filter(l=>l instanceof Mx).length,a=s.filter(l=>l instanceof xb).length;if(o>1||o>0&&a>0)throw new G(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)n=r._apply(n);return n}var xb=class n extends vu{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=this._parse(e);return M4(e._query,t),new mi(e.firestore,e.converter,sM(e._query,t))}_parse(e){let t=bu(e.firestore);return function(s,o,a,l,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new G(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){D$(h,d);let p=[];for(let y of h)p.push(C$(l,s,y));f={arrayValue:{values:p}}}else f=C$(l,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||D$(h,d),f=g4(a,o,h,d==="in"||d==="not-in");return st.create(c,d,f)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function w4(n,e,t){let i=e,r=$b("where",n);return xb._create(r,i,t)}var Mx=class n extends Im{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:St.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(r,s){let o=r,a=s.getFlattenedFilters();for(let l of a)M4(o,l),o=sM(o,l)}(e._query,t),new mi(e.firestore,e.converter,sM(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var xx=class n extends vu{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(r,s,o){if(r.startAt!==null)throw new G(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new G(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new du(s,o)}(e._query,this._field,this._direction);return new mi(e.firestore,e.converter,function(r,s){let o=r.explicitOrderBy.concat([s]);return new Ls(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}};function b4(n,e="asc"){let t=e,i=$b("orderBy",n);return xx._create(i,t)}var Rb=class n extends vu{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new n(e,t,i)}_apply(e){return new mi(e.firestore,e.converter,Qw(e._query,this._limit,this._limitType))}};function E4(n){return XH("limit",n),Rb._create("limit",n,"F")}function C4(n){return XH("limitToLast",n),Rb._create("limitToLast",n,"L")}var Nb=class n extends vu{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=A4(e,this.type,this._docOrFields,this._inclusive);return new mi(e.firestore,e.converter,function(r,s){return new Ls(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)}(e._query,t))}};function D4(...n){return Nb._create("startAt",n,!0)}function I4(...n){return Nb._create("startAfter",n,!1)}var Ob=class n extends vu{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=A4(e,this.type,this._docOrFields,this._inclusive);return new mi(e.firestore,e.converter,function(r,s){return new Ls(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)}(e._query,t))}};function T4(...n){return Ob._create("endBefore",n,!1)}function S4(...n){return Ob._create("endAt",n,!0)}function A4(n,e,t,i){if(t[0]=it(t[0]),t[0]instanceof yu)return function(s,o,a,l,c){if(!l)throw new G(B.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let h of kh(s))if(h.field.isKeyField())d.push(uu(o,l.key));else{let f=l.data.field(h.field);if(kb(f))throw new G(B.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){let p=h.field.canonicalString();throw new G(B.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}d.push(f)}return new Co(d,c)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{let r=bu(n.firestore);return function(o,a,l,c,d,h){let f=o.explicitOrderBy;if(d.length>f.length)throw new G(B.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let p=[];for(let y=0;y<d.length;y++){let _=d[y];if(f[y].field.isKeyField()){if(typeof _!="string")throw new G(B.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof _}`);if(!Bx(o)&&_.indexOf("/")!==-1)throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${_}' contains a slash.`);let w=o.path.child(gt.fromString(_));if(!ee.isDocumentKey(w))throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${w}' is not because it contains an odd number of segments.`);let A=new ee(w);p.push(uu(a,A))}else{let w=g4(l,c,_);p.push(w)}}return new Co(p,h)}(n._query,n.firestore._databaseId,r,e,t,i)}}function C$(n,e,t){if(typeof(t=it(t))=="string"){if(t==="")throw new G(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bx(e)&&t.indexOf("/")!==-1)throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let i=e.path.child(gt.fromString(t));if(!ee.isDocumentKey(i))throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return uu(n,new ee(i))}if(t instanceof Ut)return uu(n,t._key);throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jb(t)}.`)}function D$(n,e){if(!Array.isArray(n)||n.length===0)throw new G(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function M4(n,e){let t=function(r,s){for(let o of r)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new G(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Xh=class{convertValue(e,t="none"){switch(cu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Jt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ie()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return wu(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertVectorValue(e){var t,i,r;let s=(r=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Jt(o.doubleValue));return new Cm(s)}convertGeoPoint(e){return new _u(Jt(e.latitude),Jt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=Lx(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(lm(e));default:return null}}convertTimestamp(e){let t=ya(e);return new on(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=gt.fromString(e);oe(EH(i));let r=new kl(i.get(1),i.get(3)),s=new ee(i.popFirst(5));return r.isEqual(t)||Cn(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function Hb(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}var Rx=class extends Xh{constructor(e){super(),this.firestore=e}convertBytes(e){return new Io(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,t)}};var _a=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ps=class extends yu{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Rl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field($b("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}},Rl=class extends ps{data(e={}){return super.data(e)}},js=class{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new _a(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Rl(this._firestore,this._userDataWriter,i.key,i,new _a(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new G(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{let l=new Rl(r._firestore,r._userDataWriter,a.doc.key,a.doc,new _a(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let l=new Rl(r._firestore,r._userDataWriter,a.doc.key,a.doc,new _a(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:Hie(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function Hie(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie()}}function mR(n,e){return n instanceof ps&&e instanceof ps?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof js&&e instanceof js&&n._firestore===e._firestore&&dR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function x4(n){n=wt(n,Ut);let e=wt(n.firestore,an);return YH(_i(e),n._key).then(t=>wR(e,n,t))}var Ea=class extends Xh{constructor(e){super(),this.firestore=e}convertBytes(e){return new Io(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,t)}};function R4(n){n=wt(n,Ut);let e=wt(n.firestore,an),t=_i(e),i=new Ea(e);return Fie(t,n._key).then(r=>new ps(e,i,n._key,r,new _a(r!==null&&r.hasLocalMutations,!0),n.converter))}function N4(n){n=wt(n,Ut);let e=wt(n.firestore,an);return YH(_i(e),n._key,{source:"server"}).then(t=>wR(e,n,t))}function O4(n){n=wt(n,mi);let e=wt(n.firestore,an),t=_i(e),i=new Ea(e);return v4(n._query),JH(t,n._query).then(r=>new js(e,i,n,r))}function P4(n){n=wt(n,mi);let e=wt(n.firestore,an),t=_i(e),i=new Ea(e);return Lie(t,n._query).then(r=>new js(e,i,n,r))}function k4(n){n=wt(n,mi);let e=wt(n.firestore,an),t=_i(e),i=new Ea(e);return JH(t,n._query,{source:"server"}).then(r=>new js(e,i,n,r))}function _R(n,e,t){n=wt(n,Ut);let i=wt(n.firestore,an),r=Hb(n.converter,e,t);return af(i,[Ub(bu(i),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,yn.none())])}function yR(n,e,t,...i){n=wt(n,Ut);let r=wt(n.firestore,an),s=bu(r),o;return o=typeof(e=it(e))=="string"||e instanceof Bs?fR(s,"updateDoc",n._key,e,t,i):hR(s,"updateDoc",n._key,e),af(r,[o.toMutation(n._key,yn.exists(!0))])}function F4(n){return af(wt(n.firestore,an),[new jl(n._key,yn.none())])}function L4(n,e){let t=wt(n.firestore,an),i=Nm(n),r=Hb(n.converter,e);return af(t,[Ub(bu(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,yn.exists(!1))]).then(()=>i)}function vR(n,...e){var t,i,r;n=it(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||vx(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(vx(e[o])){let h=e[o];e[o]=(t=h.next)===null||t===void 0?void 0:t.bind(h),e[o+1]=(i=h.error)===null||i===void 0?void 0:i.bind(h),e[o+2]=(r=h.complete)===null||r===void 0?void 0:r.bind(h)}let l,c,d;if(n instanceof Ut)c=wt(n.firestore,an),d=tf(n._key.path),l={next:h=>{e[o]&&e[o](wR(c,n,h))},error:e[o+1],complete:e[o+2]};else{let h=wt(n,mi);c=wt(h.firestore,an),d=h._query;let f=new Ea(c);l={next:p=>{e[o]&&e[o](new js(c,f,h,p))},error:e[o+1],complete:e[o+2]},v4(n._query)}return function(f,p,y,_){let w=new Jh(_),A=new Em(p,w,y);return f.asyncQueue.enqueueAndForget(()=>L(this,null,function*(){return Qx(yield Zh(f),A)})),()=>{w.Za(),f.asyncQueue.enqueueAndForget(()=>L(this,null,function*(){return Yx(yield Zh(f),A)}))}}(_i(c),d,a,l)}function V4(n,e){return Vie(_i(n=wt(n,an)),vx(e)?e:{next:e})}function af(n,e){return function(i,r){let s=new Wn;return i.asyncQueue.enqueueAndForget(()=>L(this,null,function*(){return _ie(yield oR(i),r,s)})),s.promise}(_i(n),e)}function wR(n,e,t){let i=t.docs.get(e._key),r=new Ea(n);return new ps(n,r,e._key,i,new _a(t.hasPendingWrites,t.fromCache),e.converter)}var zie={maxAttempts:5};var Pb=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=bu(e)}set(e,t,i){this._verifyNotCommitted();let r=Ml(e,this._firestore),s=Hb(r.converter,t,i),o=Ub(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(o.toMutation(r._key,yn.none())),this}update(e,t,i,...r){this._verifyNotCommitted();let s=Ml(e,this._firestore),o;return o=typeof(t=it(t))=="string"||t instanceof Bs?fR(this._dataReader,"WriteBatch.update",s._key,t,i,r):hR(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,yn.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Ml(e,this._firestore);return this._mutations=this._mutations.concat(new jl(t._key,yn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new G(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ml(n,e){if((n=it(n)).firestore!==e)throw new G(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var Nx=class extends class{constructor(t,i){this._firestore=t,this._transaction=i,this._dataReader=bu(t)}get(t){let i=Ml(t,this._firestore),r=new Rx(this._firestore);return this._transaction.lookup([i._key]).then(s=>{if(!s||s.length!==1)return ie();let o=s[0];if(o.isFoundDocument())return new yu(this._firestore,r,o.key,o,i.converter);if(o.isNoDocument())return new yu(this._firestore,r,i._key,null,i.converter);throw ie()})}set(t,i,r){let s=Ml(t,this._firestore),o=Hb(s.converter,i,r),a=Ub(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,r);return this._transaction.set(s._key,a),this}update(t,i,r,...s){let o=Ml(t,this._firestore),a;return a=typeof(i=it(i))=="string"||i instanceof Bs?fR(this._dataReader,"Transaction.update",o._key,i,r,s):hR(this._dataReader,"Transaction.update",o._key,i),this._transaction.update(o._key,a),this}delete(t){let i=Ml(t,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Ml(e,this._firestore),i=new Ea(this._firestore);return super.get(e).then(r=>new ps(this._firestore,i,t._key,r._document,new _a(!1,!1),t.converter))}};function B4(n,e,t){n=wt(n,an);let i=Object.assign(Object.assign({},zie),t);return function(s){if(s.maxAttempts<1)throw new G(B.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,o,a){let l=new Wn;return s.asyncQueue.enqueueAndForget(()=>L(this,null,function*(){let c=yield Oie(s);new _x(s.asyncQueue,c,a,o,l).au()})),l.promise}(_i(n),r=>e(new Nx(n,r)),i)}function j4(){return new Dm("deleteField")}function U4(){return new Cx("serverTimestamp")}function $4(...n){return new Dx("arrayUnion",n)}function H4(...n){return new Ix("arrayRemove",n)}function z4(n){return new Tx("increment",n)}(function(e,t=!0){(function(r){ef=r})(Jm),Jl(new Dr("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),a=new an(new FA(i.getProvider("auth-internal")),new jA(i.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new G(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kl(c.options.projectId,d)}(o,r),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ws(E3,"4.7.3",e),ws(E3,"4.7.3","esm2017")})();var Gie="@firebase/firestore-compat",Wie="0.3.38";function TR(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new G("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function G4(){if(typeof Uint8Array>"u")throw new G("unimplemented","Uint8Arrays are not available in this environment.")}function W4(){if(!V$())throw new G("unimplemented","Blobs are unavailable in Firestore in this environment.")}var zb=class n{constructor(e){this._delegate=e}static fromBase64String(e){return W4(),new n(Io.fromBase64String(e))}static fromUint8Array(e){return G4(),new n(Io.fromUint8Array(e))}toBase64(){return W4(),this._delegate.toBase64()}toUint8Array(){return G4(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function bR(n){return qie(n,["next","error","complete"])}function qie(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let i of e)if(i in t&&typeof t[i]=="function")return!0;return!1}var ER=class{enableIndexedDbPersistence(e,t){return r4(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return s4(e._delegate)}clearIndexedDbPersistence(e){return a4(e._delegate)}},Gb=class{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof kl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Fs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,i={}){e4(this._delegate,e,t,i)}enableNetwork(){return c4(this._delegate)}disableNetwork(){return u4(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,lR("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return l4(this._delegate)}onSnapshotsInSync(e){return V4(this._delegate,e)}get app(){if(!this._appCompat)throw new G("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new uf(this,cR(this._delegate,e))}catch(t){throw ir(t,"collection()","Firestore.collection()")}}doc(e){try{return new To(this,Nm(this._delegate,e))}catch(t){throw ir(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Tu(this,t4(this._delegate,e))}catch(t){throw ir(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return B4(this._delegate,t=>e(new Wb(this,t)))}batch(){return _i(this._delegate),new qb(new Pb(this._delegate,e=>af(this._delegate,e)))}loadBundle(e){return d4(this._delegate,e)}namedQuery(e){return h4(this._delegate,e).then(t=>t?new Tu(this,t):null)}},lf=class extends Xh{constructor(e){super(),this.firestore=e}convertBytes(e){return new zb(new Io(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return To.forKey(t,this.firestore,null)}};function Kie(n){I$(n)}var Wb=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new lf(e)}get(e){let t=Cu(e);return this._delegate.get(t).then(i=>new Du(this._firestore,new ps(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){let r=Cu(e);return i?(TR("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){let s=Cu(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){let t=Cu(e);return this._delegate.delete(t),this}},qb=class{constructor(e){this._delegate=e}set(e,t,i){let r=Cu(e);return i?(TR("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){let s=Cu(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){let t=Cu(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},cf=class n{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){let i=new Rl(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Iu(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let i=n.INSTANCES,r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(t);return s||(s=new n(e,new lf(e),t),r.set(t,s)),s}};cf.INSTANCES=new WeakMap;var To=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new lf(e)}static forPath(e,t,i){if(e.length%2!==0)throw new G("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Ut(t._delegate,i,new ee(e)))}static forKey(e,t,i){return new n(t,new Ut(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new uf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new uf(this.firestore,cR(this._delegate,e))}catch(t){throw ir(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=it(e),e instanceof Ut?uR(this._delegate,e):!1}set(e,t){t=TR("DocumentReference.set",t);try{return t?_R(this._delegate,e,t):_R(this._delegate,e)}catch(i){throw ir(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return arguments.length===1?yR(this._delegate,e):yR(this._delegate,e,t,...i)}catch(r){throw ir(r,"updateDoc()","DocumentReference.update()")}}delete(){return F4(this._delegate)}onSnapshot(...e){let t=q4(e),i=K4(e,r=>new Du(this.firestore,new ps(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return vR(this._delegate,t,i)}get(e){let t;return e?.source==="cache"?t=R4(this._delegate):e?.source==="server"?t=N4(this._delegate):t=x4(this._delegate),t.then(i=>new Du(this.firestore,new ps(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(cf.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function ir(n,e,t){return n.message=n.message.replace(e,t),n}function q4(n){for(let e of n)if(typeof e=="object"&&!bR(e))return e;return{}}function K4(n,e){var t,i;let r;return bR(n[0])?r=n[0]:bR(n[1])?r=n[1]:typeof n[0]=="function"?r={next:n[0],error:n[1],complete:n[2]}:r={next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(e(s))},error:(t=r.error)===null||t===void 0?void 0:t.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}var Du=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new To(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return mR(this._delegate,e._delegate)}},Iu=class extends Du{data(e){let t=this._delegate.data(e);return this._delegate._converter||T$(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Tu=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new lf(e)}where(e,t,i){try{return new n(this.firestore,Da(this._delegate,w4(e,t,i)))}catch(r){throw ir(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,Da(this._delegate,b4(e,t)))}catch(i){throw ir(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,Da(this._delegate,E4(e)))}catch(t){throw ir(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,Da(this._delegate,C4(e)))}catch(t){throw ir(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,Da(this._delegate,D4(...e)))}catch(t){throw ir(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,Da(this._delegate,I4(...e)))}catch(t){throw ir(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,Da(this._delegate,T4(...e)))}catch(t){throw ir(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,Da(this._delegate,S4(...e)))}catch(t){throw ir(t,"endAt()","Query.endAt()")}}isEqual(e){return dR(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=P4(this._delegate):e?.source==="server"?t=k4(this._delegate):t=O4(this._delegate),t.then(i=>new Om(this.firestore,new js(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){let t=q4(e),i=K4(e,r=>new Om(this.firestore,new js(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return vR(this._delegate,t,i)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(cf.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},CR=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Iu(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Om=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Tu(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Iu(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new CR(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new Iu(this._firestore,i))})}isEqual(e){return mR(this._delegate,e._delegate)}},uf=class n extends Tu{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new To(this.firestore,e):null}doc(e){try{return e===void 0?new To(this.firestore,Nm(this._delegate)):new To(this.firestore,Nm(this._delegate,e))}catch(t){throw ir(t,"doc()","CollectionReference.doc()")}}add(e){return L4(this._delegate,e).then(t=>new To(this.firestore,t))}isEqual(e){return uR(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(cf.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Cu(n){return wt(n,Ut)}var DR=class n{constructor(...e){this._delegate=new Bs(...e)}static documentId(){return new n(Dn.keyField().canonicalString())}isEqual(e){return e=it(e),e instanceof Bs?this._delegate._internalPath.isEqual(e._internalPath):!1}};var IR=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=U4();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=j4();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=$4(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=H4(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=z4(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var Qie={Firestore:Gb,GeoPoint:_u,Timestamp:on,Blob:zb,Transaction:Wb,WriteBatch:qb,DocumentReference:To,DocumentSnapshot:Du,Query:Tu,QueryDocumentSnapshot:Iu,QuerySnapshot:Om,CollectionReference:uf,FieldPath:DR,FieldValue:IR,setLogLevel:Kie,CACHE_SIZE_UNLIMITED:n4};function Yie(n,e){n.INTERNAL.registerComponent(new Dr("firestore-compat",t=>{let i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},Qie)))}function Jie(n){Yie(n,(e,t)=>new Gb(e,t,new ER)),n.registerVersion(Gie,Wie)}Jie(Jn);function Zie(n,e=Na){return new ge(t=>{let i;return e!=null?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{i?.()}})}function Q4(n,e){return Zie(n,e)}function Xie(n,e){return Q4(n,e).pipe(Va(void 0),Sf(),ne(t=>{let[i,r]=t;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}function MR(n,e){return Q4(n,e).pipe(ne(t=>({payload:t,type:"query"})))}var Kb=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let i=this.ref.collection(e),{ref:r,query:s}=ez(i,t);return new Yb(r,s,this.afs)}snapshotChanges(){return Xie(this.ref,this.afs.schedulers.outsideAngular).pipe(En)}valueChanges(e={}){return this.snapshotChanges().pipe(ne(({payload:t})=>e.idField?ke(q({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return at(this.ref.get(e)).pipe(En)}};function Qb(n,e){return MR(n,e).pipe(Va(void 0),Sf(),ne(t=>{let[i,r]=t,s=r.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((a,l)=>{let c=s.find(h=>h.doc.ref.isEqual(a.ref)),d=i?.payload.docs.find(h=>h.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),o}))}function Y4(n,e,t){return Qb(n,t).pipe(Ys((i,r)=>ere(i,r.map(s=>s.payload),e),[]),zu(),ne(i=>i.map(r=>({type:r.type,payload:r}))))}function ere(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=tre(n,i))}),n}function SR(n,e,t,...i){let r=n.slice();return r.splice(e,t,...i),r}function tre(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return SR(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return SR(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return SR(n,e.oldIndex,1);break}return n}function J4(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var Yb=class{ref;query;afs;constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=Qb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(ne(i=>i.filter(r=>e.indexOf(r.type)>-1)))),t.pipe(Va(void 0),Sf(),Kt(([i,r])=>r.length>0||!i),ne(([,i])=>i),En)}auditTrail(e){return this.stateChanges(e).pipe(Ys((t,i)=>[...t,...i],[]))}snapshotChanges(e){let t=J4(e);return Y4(this.query,t,this.afs.schedulers.outsideAngular).pipe(En)}valueChanges(e={}){return MR(this.query,this.afs.schedulers.outsideAngular).pipe(ne(t=>t.payload.docs.map(i=>e.idField?ke(q({},i.data()),{[e.idField]:i.id}):i.data())),En)}get(e){return at(this.query.get(e)).pipe(En)}add(e){return this.ref.add(e)}doc(e){return new Kb(this.ref.doc(e),this.afs)}},AR=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Qb(this.query,this.afs.schedulers.outsideAngular).pipe(En):Qb(this.query,this.afs.schedulers.outsideAngular).pipe(ne(t=>t.filter(i=>e.indexOf(i.type)>-1)),Kt(t=>t.length>0),En)}auditTrail(e){return this.stateChanges(e).pipe(Ys((t,i)=>[...t,...i],[]))}snapshotChanges(e){let t=J4(e);return Y4(this.query,t,this.afs.schedulers.outsideAngular).pipe(En)}valueChanges(e={}){return MR(this.query,this.afs.schedulers.outsideAngular).pipe(ne(i=>i.payload.docs.map(r=>e.idField?q({[e.idField]:r.id},r.data()):r.data())),En)}get(e){return at(this.query.get(e)).pipe(En)}},Z4=new J("angularfire2.enableFirestorePersistence"),X4=new J("angularfire2.firestore.persistenceSettings"),nre=new J("angularfire2.firestore.settings"),ire=new J("angularfire2.firestore.use-emulator");function ez(n,e=t=>t){return{query:e(n),ref:n}}var rre=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,i,r,s,o,a,l,c,d,h,f,p,y,_,w,A,x){this.schedulers=l;let M=zc(t,a,i),R=d;h&&lg(M,a,f,y,_,w,p,A),[this.firestore,this.persistenceEnabled$]=eh(`${M.name}.firestore`,"AngularFirestore",M.name,()=>{let P=a.runOutsideAngular(()=>M.firestore());if(s&&P.settings(s),R&&P.useEmulator(...R),r&&!Qa(o)){let N=()=>{try{return at(P.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(C){return typeof console<"u"&&console.warn(C),se(!1)}};return[P,a.runOutsideAngular(N)]}else return[P,se(!1)]},[s,R,r])}collection(t,i){let r;typeof t=="string"?r=this.firestore.collection(t):r=t;let{ref:s,query:o}=ez(r,i),a=this.schedulers.ngZone.run(()=>s);return new Yb(a,o,this)}collectionGroup(t,i){let r=i||(o=>o),s=this.firestore.collectionGroup(t);return new AR(r(s),this)}doc(t){let i;typeof t=="string"?i=this.firestore.doc(t):i=t;let r=this.schedulers.ngZone.run(()=>i);return new Kb(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||n)(z(pl),z(gl,8),z(Z4,8),z(nre,8),z($n),z(Fe),z(Xd),z(X4,8),z(ire,8),z(bv,8),z(ng,8),z(ig,8),z(rg,8),z(sg,8),z(og,8),z(ag,8),z(ha,8))};static \u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),tz=(()=>{class n{constructor(){Jn.registerVersion("angularfire",hl.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Z4,useValue:!0},{provide:X4,useValue:t}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Oe({type:n});static \u0275inj=Ne({providers:[rre]})}return n})();var nz={firebaseConfig:{apiKey:"AIzaSyANbtVRg8LTKOIhPONQ-XcY7H0BbGjrkb4",authDomain:"safecard-d4cb2.firebaseapp.com",databaseURL:"https://safecard-d4cb2-default-rtdb.europe-west1.firebasedatabase.app",projectId:"safecard-d4cb2",storageBucket:"safecard-d4cb2.firebasestorage.app",messagingSenderId:"726418295531",appId:"1:726418295531:web:c7a40c89947585eea24cae",measurementId:"G-SWQBNSLJ8V"}};var Jb=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=Oe({type:n,bootstrap:[Dw]});static \u0275inj=Ne({imports:[XF,Ew,v3,YU,zF,sB.initializeApp(nz.firebaseConfig),MU,tz]})};ZF().bootstrapModule(Jb,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
